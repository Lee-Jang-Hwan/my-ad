{"data":[{"updatedAt":"2026-01-13T15:49:36.888Z","createdAt":"2026-01-04T14:28:13.087Z","id":"1P4kRh2uO2Z0drPI","name":"sapp-studio-advideo copy(edit)","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"f8ac6e08-cfa3-4f43-8ce3-de8923604c70","authentication":"basicAuth","responseMode":"responseNode","options":{"responseHeaders":{"entries":[{"name":"selected_ad_copy","value":"selectedCopy"}]}}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4352,-16],"id":"535b1fc1-2d7a-4b5d-b2f2-c5d1dccef3fd","name":"Webhook","webhookId":"f8ac6e08-cfa3-4f43-8ce3-de8923604c70","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4144,-16],"id":"d21d7718-0a17-4f66-8b8a-9751d187774f","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3760,-16],"id":"9c5c3275-576b-429a-a1c1-b2855ade8e87","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"},{"id":"db923240-5d37-42e1-b429-9561af431552","name":"selected_ad_copy","value":"={{ $json.body.selected_ad_copy }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3952,-16],"id":"bd4ca298-2aee-457e-bdc2-f871fff0d822","name":"Extract Workflow Data"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-336,-400],"id":"8b6314cf-81e0-4235-9beb-207c11463867","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-832,-400],"id":"31e52941-eba5-4893-88e2-38512f654f3a","name":"ë³‘í•©1"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2512,256],"id":"232ba885-adcb-405a-b6a4-bc28b310b1cb","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1248,240],"id":"3f67f98a-06aa-4ec5-910c-5813257c6f75","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1600,240],"id":"8f82c24a-15ec-45ad-a18d-3cc5a8ab1437","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":1.5,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-80,-400],"id":"a8d4baa7-172b-4051-8663-5c2e2e2d4593","name":"Wait1","webhookId":"23c3a5e8-73f0-4bbc-a659-69668c384b32"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2128,240],"id":"1d1445ea-fcf4-49c1-b5e1-9cac3dd9b046","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[816,-432],"id":"52831578-e081-43cf-aace-028823d626d8","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1424,240],"id":"26c47d0a-7c22-4e30-b894-3e3d5ddef1e1","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2928,256],"id":"04bf378f-1bf3-41da-8175-39051c83102b","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3120,256],"id":"4e7524fe-c229-4296-a852-8ac50a28c0af","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2720,256],"id":"6a791d76-4576-4160-8ced-31d26cc3f035","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3648,1248],"id":"746fbf27-40a8-44cb-a0a7-ad23578dad01","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1776,240],"id":"ad4c1517-2a6b-4b8d-8c1c-1cad4cc35dbf","name":"Wait2","webhookId":"6ea9f900-a238-4d3c-a42a-30484257ee94"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-176,-608],"id":"1fe945c7-17bb-4abd-b7c0-21609dc46703","name":"Wait3","webhookId":"c968ca14-693d-4db8-a1c2-693a9e9ca97c"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1952,240],"id":"085c62c0-d6c0-4b06-8011-1e9f3fe3b207","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-368,-608],"id":"022b8047-aa97-4bad-9a35-d71b6dcdfb1c","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[816,-272],"id":"55d74609-3f41-4990-9917-5ccb0d5f23e6","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1040,-432],"id":"21a370ab-eb7a-40de-b24c-5b191f86e4fd","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1248,-432],"id":"8b9520ed-3838-48e0-8128-a033b6f6a31d","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1456,-432],"id":"484ed654-e938-4b1f-af40-50456dc601fd","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : ë³‘í•©ëœ ë°ì´í„°ì—ì„œ í”„ë¡¬í”„íŠ¸ì™€ ì´ë¯¸ì§€ ì¶”ì¶œ\n// ============================================\n\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\n\n// ============================================\n// âœ… í•µì‹¬ ìˆ˜ì •: pairedItem ì¶”ê°€!\n// ============================================\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  },\n  pairedItem: { item: 0 }  // ğŸ‘ˆ ì´ ì¤„ ì¶”ê°€!\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-592,-400],"id":"32dfac08-5c8f-4ca8-b0f0-43d51cc3c11e","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-1056,240],"id":"6eba8262-09e7-4aeb-a517-ced6db5f503e","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[112,-400],"id":"11210676-7462-4eca-8e4f-05b406b6dfae","name":"ìƒíƒœí™•ì¸","retryOnFail":true,"maxTries":2,"credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[320,-400],"id":"299b6967-cc5d-4dc5-84f8-d0eb474ebb29","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[512,-416],"id":"49e46b1a-51e8-4db3-b27d-4defe2fe413f","name":"Switch"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=You are an elite advertising creative director and Sora 2 Pro API specialist. Your mission is transforming short advertising copy into compelling video narratives optimized for Sora 2 Pro generation.\n\nTECHNICAL CONTEXT:\nTarget format: Vertical 9:16 (720x1280) for social media\nDuration: 12 seconds (note: API parameter \"seconds\" controls this, not prose)\nTarget audience: Adults 20-40 on social media platforms\nThe API parameters (model, size, seconds) are set externally. Your output controls only the creative content.\n\nINPUT VARIABLES:\n{{INPUT_COPY}} - The short advertising copy to expand\n{{PRODUCT_IMAGE_REFERENCE}} - Reference image URL for visual anchoring (optional)\n\nCRITICAL OUTPUT RULES:\nOutput only plain text prompt following the exact structure below.\nNever include markdown, code blocks, quotation marks, backticks, or formatting symbols.\nNever include explanations, comments, or meta-text.\nNever request duration or resolution in prose (these are API parameters).\nOutput must be immediately usable in n8n workflow without editing.\n\nADVERTISING COPY ANALYSIS PROCESS:\n\nStep 1 - Deconstruct the copy\nIdentify the core emotion: desire, trust, excitement, comfort, or aspiration.\nIdentify the implied promise or benefit hidden in the words.\nIdentify the psychological trigger: fear of missing out, social proof, self-improvement, or convenience.\nIdentify the intended call to action even if not explicitly stated.\n\nStep 2 - Expand into 12-second narrative arc\nBeginning (0-4s): Establish relatable context or problem.\nMiddle (4-9s): Introduce product as natural solution with building anticipation.\nEnd (9-12s): Deliver core message with emotional impact. Original copy appears here.\n\nStep 3 - Apply narrative framework based on copy type\n\nFor quality or premium value copy:\nOpen with moment of ordinary frustration or settling for less.\nTransition to discovery of something different.\nBuild through sensory details.\nClimax with satisfaction of true quality.\nClose with original copy as statement of newfound standard.\n\nFor transformation or results copy:\nOpen with subtle hint of before state without explicit comparison.\nShow journey moment of taking action.\nReveal confident after state through body language and environment.\nDeliver original copy as empowering declaration.\n\nFor convenience or simplicity copy:\nOpen with chaos or complexity of alternatives.\nIntroduce product as breath of fresh air.\nShow effortless interaction and immediate relief.\nClose with original copy as satisfied realization.\n\nFor emotion or lifestyle copy:\nOpen with atmospheric establishing moment.\nBuild sensory immersion in desired lifestyle.\nConnect product naturally to this aspirational world.\nDeliver original copy as emotional truth of this moment.\n\nREQUIRED OUTPUT STRUCTURE:\n\nStyle: [Cinematic style matching emotional tone. Example: warm lifestyle commercial, intimate documentary, aspirational fashion film]\n\n[Prose scene description: Describe setting, subject, wardrobe, props, weather, and atmosphere. Reference product image as visual anchor if provided. Keep description focused on visible, concrete details.]\n\nCinematography:\nCamera shot: [framing and angle, e.g., medium close-up, slight low angle]\nLens: [focal length 24-85mm, depth of field]\nCamera motion: [single clear movement, e.g., slow dolly-in, gentle arc left]\nLighting: [quality, direction, color temperature, e.g., soft window light camera left, warm practical fill]\nPalette anchors: [3-5 specific colors, e.g., amber, cream, soft navy]\nMood: [overall tone, e.g., intimate anticipation, quiet confidence]\n\nActions:\n- [0-4s: Opening beat with specific gesture or movement]\n- [4-7s: Development beat as product enters or interaction begins]\n- [7-10s: Building beat with clear physical action]\n- [10-12s: Closing beat aligned with final line delivery]\n\nDialogue:\n- [Speaker]: \"[Opening line building toward the message]\"\n- [Speaker]: \"[Development line if needed]\"\n- [Speaker]: \"[Final line: the original advertising copy verbatim or clear echo]\"\n\nBackground Sound:\n[Diegetic ambient audio only. Example: soft fabric rustle, distant traffic hum, coffee cup set down. No copyrighted music references.]\n\nMODERATION COMPLIANCE:\nAvoid superlative claims and absolute guarantees.\nNo medical or health treatment implications.\nNo before-and-after transformation visuals.\nNo text overlays or brand logos in scene descriptions.\nUse generic product terms rather than brand names.\nDescribe people using neutral terms like person or individual.\nNo violent, sexual, or controversial content.\n\nEXAMPLE OUTPUT:\n\nInput copy: Feel the difference.\n\nStyle: Warm lifestyle commercial with soft natural lighting and intimate framing, shot in the style of modern skincare advertising.\n\nA person in their early 30s sits at a sunlit vanity in a minimal bedroom. Morning light streams through sheer curtains, casting soft shadows. They wear a simple white robe. A sleek product container rests on the vanity surface. The room features warm wood tones and fresh white linens.\n\nCinematography:\nCamera shot: Medium close-up, eye level\nLens: 50mm, shallow depth of field isolating subject from background\nCamera motion: Slow push-in over 12 seconds\nLighting: Soft natural key from window camera right, warm bounce from vanity mirror\nPalette anchors: Cream, soft gold, warm white, pale rose, natural wood\nMood: Quiet revelation, gentle confidence\n\nActions:\n- 0-4s: Person touches their cheek thoughtfully, slight furrow in brow suggesting past dissatisfaction\n- 4-7s: They reach for the product, fingers gliding across the container surface\n- 7-10s: Application moment with eyes closing briefly, expression softening\n- 10-12s: Eyes open, slight smile forms, hand rests contentedly on cheek\n\nDialogue:\n- Person (reflective): \"I used to think they were all the same.\"\n- Person (with dawning recognition): \"Then I tried this.\"\n- Person (with quiet certainty): \"Feel the difference.\"\n\nBackground Sound:\nSoft morning ambience, distant birdsong, gentle fabric movement, faint breath."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3456,1088],"id":"c3556e86-a840-4d96-a3b8-4ed5b10a0ffe","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=# ğŸš€ [Sora 2 Pro Pre-visualization] Nano Banana Pro í†µí•© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (Product Keep Mode)\n\n## 1. í˜ë¥´ì†Œë‚˜ (Persona)\në‹¹ì‹ ì€ **Nano Banana Pro ìƒí’ˆ ë³´ì¡´ ì „ë¬¸ê°€(Product Preservation Specialist)**ì´ì **ì‹œìŠ¤í…œ í†µí•© ì „ë¬¸ê°€**ì…ë‹ˆë‹¤.\në‹¹ì‹ ì˜ ìµœìš°ì„  ëª©í‘œëŠ” **ì…ë ¥ëœ ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€ì˜ í˜•íƒœì™€ ë””í…Œì¼ì„ 100% ìœ ì§€**í•˜ë©´ì„œ, ë°°ê²½ê³¼ ë¶„ìœ„ê¸°ë§Œ ì™„ë²½í•˜ê²Œ êµì²´í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë™ì‹œì— ìë™í™” ì‹œìŠ¤í…œì˜ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ **í°ë”°ì˜´í‘œ(`\"`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n## 2. ë§¥ë½ (Context)\n- **Input Source:** ì‚¬ìš©ìëŠ” 'ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€'ë¥¼ ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œ ìƒíƒœì…ë‹ˆë‹¤.\n- **Critical Goal:** ìƒì„±ëœ ì´ë¯¸ì§€ëŠ” ì›ë³¸ ìƒí’ˆ(íŒ¨í‚¤ì§€, ë¡œê³ , í˜•íƒœ)ì´ ì™œê³¡ ì—†ì´ ê·¸ëŒ€ë¡œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. AIê°€ ìƒí’ˆì„ ìƒˆë¡œ ì°½ì‘(Re-imagine)í•˜ê²Œ ë§Œë“¤ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.\n- **Safety Protocol:** í­ë ¥, ìœ í˜ˆ, ì„ ì •ì„± ìš”ì†Œë¥¼ ë¯¸í•™ì ì¸ í‘œí˜„ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì •ì œ(Sanitization)í•©ë‹ˆë‹¤.\n- **System Constraint:** ì¶œë ¥ ë¬¸ìì—´ì— **í°ë”°ì˜´í‘œ(`\"`)ê°€ í¬í•¨ë˜ë©´ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.**\n\n## 3. ì„ë¬´ (Task)\nì‚¬ìš©ì ì…ë ¥(ìƒí’ˆ, ë¬¸êµ¬, ì»¨ì…‰)ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì„ ê±°ì³ **ì˜¤ì§ ìµœì¢… ì˜ë¬¸ í”„ë¡¬í”„íŠ¸**ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\n**Step 1: Product Anchoring (ìƒí’ˆ ê³ ì •)**\n- ìƒí’ˆì„ ë¬˜ì‚¬í•  ë•Œ ê³¼ë„í•œ ìˆ˜ì‹ì–´(ì˜ˆ: 'í™˜ìƒì ì¸ ëª¨ì–‘ì˜', 'ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì˜')ë¥¼ ì œê±°í•©ë‹ˆë‹¤.\n- ëŒ€ì‹  ìƒí’ˆì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë„ë¡ `maintaining original product details`, `unchanged source subject` í‚¤ì›Œë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.\n\n**Step 2: Background & Atmosphere Design (ë°°ê²½ ì„¤ê³„)**\n- ìƒí’ˆì€ ê³ ì •í•˜ê³ , **ì¡°ëª…(Lighting)**ê³¼ **ë°°ê²½(Environment)** ë³€í™”ì— ì§‘ì¤‘í•˜ì—¬ ì»¨ì…‰ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n**Step 3: Safety & Syntax Check**\n- ìœ„í—˜ ë‹¨ì–´ ì •ì œ ë° **í°ë”°ì˜´í‘œ(`\"`) ì œê±°** ì—¬ë¶€ë¥¼ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.\n\n## 4. ê·œì¹™ (Rules)\nğŸ”´ **Strict Negative Constraints (ì ˆëŒ€ ê¸ˆì§€):**\n- **Product Distortion (ìƒí’ˆ ì™œê³¡ ê¸ˆì§€):** ìƒí’ˆì˜ ìƒ‰ìƒ, í˜•íƒœ, ë¡œê³ ë¥¼ ë°”ê¾¸ëŠ” í˜•ìš©ì‚¬ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **Double Quotes (`\"`) ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€:** í…ìŠ¤íŠ¸ ì§€ì‹œë¥¼ í¬í•¨í•œ ëª¨ë“  ê³³ì—ì„œ ì•„ìŠ¤í‚¤ ë¬¸ì `\"`ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **ì¡ë‹´ ë° ì„œì‹ ê¸ˆì§€:** ì˜¤ì§ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n\nğŸŸ¢ **Must Do (í•„ìˆ˜ ì¤€ìˆ˜):**\n- **Preservation Keywords:** í”„ë¡¬í”„íŠ¸ ì´ˆë°˜ì— `(exact source product:1.5)`, `(unchanged subject)` ë“±ì„ í¬í•¨í•˜ì—¬ ëª¨ë¸ì´ ì›ë³¸ì„ ì°¸ì¡°í•˜ë„ë¡ ê°•ì œí•˜ì‹­ì‹œì˜¤.\n- **Text Rendering:** í…ìŠ¤íŠ¸ ì‚½ì… ì‹œ ë°˜ë“œì‹œ **`text: 'ë¬¸êµ¬'`** í˜•ì‹(ì‘ì€ë”°ì˜´í‘œ)ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n- **Visual Focus:** \"A product placed in [Concept Background]\" í˜•ì‹ì„ ë”°ë¥´ì‹­ì‹œì˜¤.\n\n## 5. ì˜ˆì‹œ (Examples)\n\n**(Input)**\nProduct: ë¹„íƒ€ë¯¼ ìŒë£Œ\nCopy: í™œë ¥ ì¶©ì „\nConcept: ìš°ì£¼ ì†ì—ì„œ ì—ë„ˆì§€ê°€ í„°ì§€ëŠ” ëŠë‚Œ\n\n**(Internal Thought - do not output)**\n* ìƒí’ˆì„ ìƒˆë¡œ ê·¸ë¦¬ë©´ ì•ˆ ë¨. 'ìš°ì£¼'ì™€ 'ì—ë„ˆì§€'ëŠ” ë°°ê²½ìœ¼ë¡œë§Œ ì²˜ë¦¬í•´ì•¼ í•¨.\n* 'í„°ì§€ëŠ”' -> 'Energy burst' (ì•ˆì „ í‘œí˜„).\n* í°ë”°ì˜´í‘œ ê¸ˆì§€ -> text: 'í™œë ¥ ì¶©ì „'\n\n**(Output)**\nA photo of (exact source product:1.5) centered, maintaining original packaging details, unchanged subject, background is a vast cosmic space with abstract visual metaphor of vibrant energy bursting behind the bottle, cinematic lighting reflecting on the product edges, floating in zero gravity, text: 'í™œë ¥ ì¶©ì „' written in futuristic neon font near the product, 85mm lens, high fidelity, 4k, commercial product photography."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3776,1072],"id":"d4e1e336-0e1d-4226-91ea-d5b23228d588","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"},{"parameters":{"promptType":"define","hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-2976,-528],"id":"e760c88a-ca4f-40a4-b859-4c912a7a7e2b","name":"AI Agent"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-2688,-368],"id":"4ca6b154-ff46-4f01-afbf-0472a2930862","name":"Structured Output Parser"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-3200,-256],"id":"7b89afbb-7c8c-4d48-942a-a27052770565","name":"AI Agent Tool"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-2880,-256],"id":"ea818ff6-8159-4104-b3ac-b7dbd0fe8c77","name":"AI Agent Tool1"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-2864,48],"id":"e3bf52d1-8ddb-4a38-841a-98d6822e1682","name":"Google Gemini Chat Model1","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-4976,-1168],"id":"04ef8ae9-2923-4211-93c8-f5b4e5fea433","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"jsCode":"return [\n  {\n    json: {\n      productName: \"ì†”ì§íˆ ì•„ì¹¨ ì°¨ë ¤ ë¨¹ì„ ì‹œê°„ ì—†ì–ì•„? ì¸ì •í•˜ë©´ ì¡ìˆ´ë´ ì‚½ê°€ëŠ¥ ëª¨ë‹ë¹µ\"\n    }\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-4656,-1296],"id":"2a9ee080-b74e-4eab-b15b-f235feb873be","name":"Code in JavaScript"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-3488,-768],"id":"ea840532-539f-4c3a-8687-06ba39f9414c","name":"Extract from File1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4464,-1056],"id":"774b61eb-79aa-429f-bedc-fc01c14f4272","name":"ì´ë¯¸ì§€ URL ìƒì„±1"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-4656,-1056],"id":"f1eed9eb-f55f-495a-909d-42fc0343c780","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€1","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-4256,-1056],"id":"e9e99e8d-45e8-4ca8-8fee-46ddaa87d685","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ1"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-3808,-1280],"id":"2c9512fd-f19f-4583-8bf5-de6f526a74bf","name":"Merge1"},{"parameters":{"promptType":"define","text":"={{ $json.productName }}, {{ $json.imageUrl }} ì„ ë¶„ì„í•´ì£¼ì„¸ìš”.","options":{"systemMessage":"=ë‹¹ì‹ ì€ ë² íƒœë‘ ë¬¸ë§¥ ë° ì´ë¯¸ì§€ ë¶„ì„ì‚¬ ì…ë‹ˆë‹¤. ë‹¤ìŒì„ ë‚±ë‚±ì´ ë¶„ì„í•´ ì£¼ì„¸ìš”.\nì´ë¯¸ì§€ ë¶„ì„ : {{ $json.imageUrl }}\nê´‘ê³ ë¬¸êµ¬ ë¶„ì„ : {{ $json.productName }}\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-3504,-1280],"id":"164126c9-3922-44d0-a364-46959430740f","name":"AI Agent1"},{"parameters":{"text":"={{ $('Merge1').item.json.imageUrl }}","options":{"systemMessage":"=ì´ë¯¸ì§€ ë¶„ì„ :  {{ $('Merge1').item.json.imageUrl }}"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-3136,-864],"id":"8d8536d5-9ea2-471b-8a56-95c1f6423219","name":"AI Agent Tool2"},{"parameters":{"modelName":"models/gemini-3-pro-image-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3184,-816],"id":"fee86aeb-066e-4759-8cbe-423bb0835c8b","name":"Google Gemini Chat Model3","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"modelName":"models/gemini-3-pro-image-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3648,-1072],"id":"122aabe9-3b91-4695-9b60-7e95ffc96f97","name":"Google Gemini Chat Model2","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}}],"connections":{"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"AI Agent","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸":{"main":[[]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]},"AI Agent Tool":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"AI Agent Tool1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0},{"node":"AI Agent Tool","type":"ai_languageModel","index":0},{"node":"AI Agent Tool1","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Merge","type":"main","index":0},{"node":"ë³‘í•©1","type":"main","index":0}]]},"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"Code in JavaScript","type":"main","index":0},{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€1","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±1":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ1","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€1":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±1","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ1":{"main":[[{"node":"Merge1","type":"main","index":1}]]},"Code in JavaScript":{"main":[[{"node":"Merge1","type":"main","index":0}]]},"Extract from File1":{"main":[[]]},"Merge1":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]},"AI Agent Tool2":{"ai_tool":[[]]},"Google Gemini Chat Model3":{"ai_languageModel":[[{"node":"AI Agent Tool2","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model2":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"2cd3fca1-a81c-444a-bbff-c3e9bb4b67b9","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2026-01-04T14:28:13.090Z","createdAt":"2026-01-04T14:28:13.090Z","role":"workflow:owner","workflowId":"1P4kRh2uO2Z0drPI","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-08T19:16:27.000Z","createdAt":"2026-01-08T15:18:39.228Z","id":"2jNdP0PNqQDo5O1c","name":"ìŠ¤í† ë¦¬ë³´ë“œ AI ì´ˆì•ˆ ìƒì„±","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-draft","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"webhook-trigger","name":"Webhook","webhookId":"storyboard-draft","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var productName = $json.body.product_name || ''; var productDesc = $json.body.product_description || 'ì—†ìŒ'; var targetDuration = $json.body.target_duration || 30; var aspectRatio = $json.body.aspect_ratio || '16:9'; var stylePreference = $json.body.style_preference || 'ì¼ë°˜ ê´‘ê³ '; var referenceImageUrl = $json.body.reference_image_url || ''; var sceneCount = Math.ceil(targetDuration / 5); var productIdentityGuide = referenceImageUrl ? '\\n\\nCRITICAL - ìƒí’ˆ ì›í˜• ë³´ì¡´ ì§€ì¹¨ (MUST FOLLOW):\\nì´ ìŠ¤í† ë¦¬ë³´ë“œëŠ” íŠ¹ì • ìƒí’ˆì˜ ê´‘ê³ ì…ë‹ˆë‹¤. ì°¸ì¡° ì´ë¯¸ì§€ê°€ ì œê³µë˜ì—ˆìœ¼ë¯€ë¡œ, ëª¨ë“  ì”¬ì˜ visual_promptì— ë‹¤ìŒì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”:\\n1. \"ìƒí’ˆì˜ ì •í™•í•œ í˜•íƒœ, ìƒ‰ìƒ, ë””ìì¸, ë¡œê³ ë¥¼ ì •í™•íˆ ìœ ì§€\" ë¼ëŠ” ì§€ì¹¨\\n2. ìƒí’ˆì´ ë³€í˜•ë˜ê±°ë‚˜ ë‹¤ë¥¸ ì œí’ˆì²˜ëŸ¼ ë³´ì´ë©´ ì•ˆ ë¨\\n3. ê° visual_promptëŠ” \"PRODUCT IDENTITY MUST BE PRESERVED: [detailed product description including shape, color, design features]\" ë¡œ ì‹œì‘\\n4. ìƒí’ˆì´ í™”ë©´ì— ëª…í™•íˆ ë³´ì´ê³  ì¸ì‹ ê°€ëŠ¥í•´ì•¼ í•¨\\nì°¸ì¡° ì´ë¯¸ì§€ URL: ' + referenceImageUrl : ''; var prompt = 'ë‹¹ì‹ ì€ ì „ë¬¸ ìŠ¤í† ë¦¬ë³´ë“œ ì‘ê°€ì…ë‹ˆë‹¤. ì£¼ì–´ì§„ ìƒí’ˆ/ì½˜í…ì¸  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì˜ìƒ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.' + productIdentityGuide + '\\n\\nì¤‘ìš”: ë°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì—†ì´ JSONë§Œ ì¶œë ¥í•˜ì„¸ìš”.\\n\\nì¶œë ¥ í˜•ì‹:\\n{\\n  \"scenes\": [\\n    {\\n      \"scene_order\": 1,\\n      \"scene_name\": \"ì”¬ ì´ë¦„ (í•œê¸€)\",\\n      \"scene_description\": \"ì”¬ì—ì„œ ë³´ì—¬ì¤„ ì‹œê°ì  ìš”ì†Œ ì„¤ëª… (í•œê¸€)\",\\n      \"dialogue\": \"ë‚˜ë ˆì´ì…˜ ë˜ëŠ” ëŒ€ì‚¬ (í•œê¸€)\",\\n      \"dialogue_type\": \"narration\",\\n      \"visual_prompt\": \"Image generation prompt in English - MUST start with product identity preservation instructions if product reference exists, followed by detailed visual description for AI image generator. Include exact product details like shape, color, material, design elements.\",\\n      \"camera_angle\": \"eye_level\",\\n      \"camera_movement\": \"static\",\\n      \"duration_seconds\": 5,\\n      \"transition_type\": \"cut\"\\n    }\\n  ]\\n}\\n\\ncamera_angle ì˜µì…˜: eye_level, high_angle, low_angle, bird_eye, close_up, wide_shot, medium_shot\\ncamera_movement ì˜µì…˜: static, pan_left, pan_right, tilt_up, tilt_down, zoom_in, zoom_out, dolly_in, dolly_out, tracking\\ndialogue_type ì˜µì…˜: narration, character, caption\\ntransition_type ì˜µì…˜: cut, fade, dissolve, wipe_left, wipe_right, zoom, slide, blur\\n\\n===== ì…ë ¥ ì •ë³´ =====\\nìƒí’ˆëª…: ' + productName + '\\nì„¤ëª…: ' + productDesc + '\\nëª©í‘œ ì˜ìƒ ê¸¸ì´: ' + targetDuration + 'ì´ˆ\\ní™”ë©´ ë¹„ìœ¨: ' + aspectRatio + '\\nìŠ¤íƒ€ì¼: ' + stylePreference + (referenceImageUrl ? '\\nìƒí’ˆ ì°¸ì¡° ì´ë¯¸ì§€: ì œê³µë¨ (ëª¨ë“  visual_promptì— ìƒí’ˆ ì›í˜• ë³´ì¡´ ì§€ì¹¨ í•„ìˆ˜)' : '') + '\\n\\nìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì •í™•íˆ ' + sceneCount + 'ê°œì˜ ì”¬ìœ¼ë¡œ êµ¬ì„±ëœ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”. ê° ì”¬ì€ ì•½ 5ì´ˆì…ë‹ˆë‹¤. ì´ duration_seconds í•©ê³„ê°€ ' + targetDuration + 'ì´ˆê°€ ë˜ë„ë¡ í•˜ì„¸ìš”.'; return JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], generationConfig: { responseMimeType: 'application/json', temperature: 0.7 } }); })() }}","options":{"timeout":120000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[512,304],"id":"gemini-generate","name":"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±","credentials":{"httpQueryAuth":{"id":"google-ai-query-auth","name":"Google AI API Key"},"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"jsCode":"// Gemini ì‘ë‹µ íŒŒì‹±\nconst items = $input.all();\nconst webhookData = $('Webhook').first().json.body;\n\ntry {\n  const responseText = items[0].json.candidates[0].content.parts[0].text;\n  const response = JSON.parse(responseText);\n  \n  if (!response.scenes || !Array.isArray(response.scenes)) {\n    throw new Error('Invalid response: scenes array not found');\n  }\n  \n  // ê° ì”¬ì˜ duration_seconds í•©ê³„ ê³„ì‚°\n  const totalDuration = response.scenes.reduce((sum, s) => sum + (s.duration_seconds || 5), 0);\n  \n  return [{\n    json: {\n      success: true,\n      storyboard_id: webhookData.storyboard_id,\n      user_id: webhookData.user_id,\n      scenes: response.scenes,\n      scenes_count: response.scenes.length,\n      total_duration: totalDuration\n    }\n  }];\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      storyboard_id: webhookData.storyboard_id,\n      error: 'Failed to parse Gemini response: ' + error.message\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[752,304],"id":"parse-response","name":"ì‘ë‹µ íŒŒì‹±"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"condition-success","leftValue":"={{ $json.success }}","rightValue":true,"operator":{"type":"boolean","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2,"position":[1008,304],"id":"check-success","name":"ì„±ê³µ ì—¬ë¶€ í™•ì¸"},{"parameters":{"jsCode":"// ì”¬ ë°°ì—´ì„ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë¶„ë¦¬\nconst parsedData = $('ì‘ë‹µ íŒŒì‹±').first().json;\nconst scenes = parsedData.scenes;\nconst storyboardId = parsedData.storyboard_id;\n\nreturn scenes.map((scene, index) => ({\n  json: {\n    ...scene,\n    storyboard_id: storyboardId,\n    scene_order: scene.scene_order || (index + 1)\n  }\n}));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1264,208],"id":"split-scenes","name":"ì”¬ ë¶„ë¦¬"},{"parameters":{"tableId":"storyboard_scenes","fieldsUi":{"fieldValues":[{"fieldId":"storyboard_id","fieldValue":"={{ $json.storyboard_id }}"},{"fieldId":"scene_order","fieldValue":"={{ $json.scene_order }}"},{"fieldId":"scene_name","fieldValue":"={{ $json.scene_name || ('ì”¬ ' + $json.scene_order) }}"},{"fieldId":"scene_description","fieldValue":"={{ $json.scene_description || '' }}"},{"fieldId":"dialogue","fieldValue":"={{ $json.dialogue || '' }}"},{"fieldId":"dialogue_type","fieldValue":"={{ $json.dialogue_type || 'narration' }}"},{"fieldId":"visual_prompt","fieldValue":"={{ $json.visual_prompt || '' }}"},{"fieldId":"camera_angle","fieldValue":"={{ $json.camera_angle || 'eye_level' }}"},{"fieldId":"camera_movement","fieldValue":"={{ $json.camera_movement || 'static' }}"},{"fieldId":"duration_seconds","fieldValue":"={{ $json.duration_seconds || 5 }}"},{"fieldId":"transition_type","fieldValue":"={{ $json.transition_type || 'cut' }}"},{"fieldId":"generation_status","fieldValue":"pending"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1504,208],"id":"insert-scenes","name":"Supabase ì”¬ ì‚½ì…","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1760,208],"id":"aggregate-scenes","name":"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"progress_stage","fieldValue":"user_editing"},{"fieldId":"status","fieldValue":"draft"},{"fieldId":"ai_generated","fieldValue":"true"},{"fieldId":"total_scenes","fieldValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.scenes_count }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2000,208],"id":"update-storyboard-success","name":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, storyboard_id: $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id, scenes_count: $('ì‘ë‹µ íŒŒì‹±').first().json.scenes_count, scenes: $('ì‘ë‹µ íŒŒì‹±').first().json.scenes }) }}","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2256,208],"id":"respond-success","name":"ì„±ê³µ ì‘ë‹µ"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"progress_stage","fieldValue":"failed"},{"fieldId":"status","fieldValue":"failed"},{"fieldId":"error_message","fieldValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.error || 'AI ì´ˆì•ˆ ìƒì„± ì‹¤íŒ¨' }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1264,464],"id":"update-storyboard-failed","name":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: false, storyboard_id: $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id, error: $('ì‘ë‹µ íŒŒì‹±').first().json.error || 'AI ì´ˆì•ˆ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' }) }}","options":{"responseCode":500}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1504,464],"id":"respond-error","name":"ì‹¤íŒ¨ ì‘ë‹µ"}],"connections":{"Webhook":{"main":[[{"node":"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±","type":"main","index":0}]]},"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±":{"main":[[{"node":"ì‘ë‹µ íŒŒì‹±","type":"main","index":0}]]},"ì‘ë‹µ íŒŒì‹±":{"main":[[{"node":"ì„±ê³µ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì„±ê³µ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"ì”¬ ë¶„ë¦¬","type":"main","index":0}],[{"node":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)","type":"main","index":0}]]},"ì”¬ ë¶„ë¦¬":{"main":[[{"node":"Supabase ì”¬ ì‚½ì…","type":"main","index":0}]]},"Supabase ì”¬ ì‚½ì…":{"main":[[{"node":"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°","type":"main","index":0}]]},"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°":{"main":[[{"node":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)","type":"main","index":0}]]},"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)":{"main":[[{"node":"ì„±ê³µ ì‘ë‹µ","type":"main","index":0}]]},"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)":{"main":[[{"node":"ì‹¤íŒ¨ ì‘ë‹µ","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"5d794f5b-c53c-4066-a22f-2261094cc578","activeVersionId":"5d794f5b-c53c-4066-a22f-2261094cc578","triggerCount":1,"shared":[{"updatedAt":"2026-01-08T15:18:39.231Z","createdAt":"2026-01-08T15:18:39.231Z","role":"workflow:owner","workflowId":"2jNdP0PNqQDo5O1c","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-08T19:16:27.672Z","createdAt":"2026-01-08T19:16:27.672Z","versionId":"5d794f5b-c53c-4066-a22f-2261094cc578","workflowId":"2jNdP0PNqQDo5O1c","nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-draft","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"webhook-trigger","name":"Webhook","webhookId":"storyboard-draft","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var productName = $json.body.product_name || ''; var productDesc = $json.body.product_description || 'ì—†ìŒ'; var targetDuration = $json.body.target_duration || 30; var aspectRatio = $json.body.aspect_ratio || '16:9'; var stylePreference = $json.body.style_preference || 'ì¼ë°˜ ê´‘ê³ '; var referenceImageUrl = $json.body.reference_image_url || ''; var sceneCount = Math.ceil(targetDuration / 5); var productIdentityGuide = referenceImageUrl ? '\\n\\nCRITICAL - ìƒí’ˆ ì›í˜• ë³´ì¡´ ì§€ì¹¨ (MUST FOLLOW):\\nì´ ìŠ¤í† ë¦¬ë³´ë“œëŠ” íŠ¹ì • ìƒí’ˆì˜ ê´‘ê³ ì…ë‹ˆë‹¤. ì°¸ì¡° ì´ë¯¸ì§€ê°€ ì œê³µë˜ì—ˆìœ¼ë¯€ë¡œ, ëª¨ë“  ì”¬ì˜ visual_promptì— ë‹¤ìŒì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”:\\n1. \"ìƒí’ˆì˜ ì •í™•í•œ í˜•íƒœ, ìƒ‰ìƒ, ë””ìì¸, ë¡œê³ ë¥¼ ì •í™•íˆ ìœ ì§€\" ë¼ëŠ” ì§€ì¹¨\\n2. ìƒí’ˆì´ ë³€í˜•ë˜ê±°ë‚˜ ë‹¤ë¥¸ ì œí’ˆì²˜ëŸ¼ ë³´ì´ë©´ ì•ˆ ë¨\\n3. ê° visual_promptëŠ” \"PRODUCT IDENTITY MUST BE PRESERVED: [detailed product description including shape, color, design features]\" ë¡œ ì‹œì‘\\n4. ìƒí’ˆì´ í™”ë©´ì— ëª…í™•íˆ ë³´ì´ê³  ì¸ì‹ ê°€ëŠ¥í•´ì•¼ í•¨\\nì°¸ì¡° ì´ë¯¸ì§€ URL: ' + referenceImageUrl : ''; var prompt = 'ë‹¹ì‹ ì€ ì „ë¬¸ ìŠ¤í† ë¦¬ë³´ë“œ ì‘ê°€ì…ë‹ˆë‹¤. ì£¼ì–´ì§„ ìƒí’ˆ/ì½˜í…ì¸  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì˜ìƒ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.' + productIdentityGuide + '\\n\\nì¤‘ìš”: ë°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì—†ì´ JSONë§Œ ì¶œë ¥í•˜ì„¸ìš”.\\n\\nì¶œë ¥ í˜•ì‹:\\n{\\n  \"scenes\": [\\n    {\\n      \"scene_order\": 1,\\n      \"scene_name\": \"ì”¬ ì´ë¦„ (í•œê¸€)\",\\n      \"scene_description\": \"ì”¬ì—ì„œ ë³´ì—¬ì¤„ ì‹œê°ì  ìš”ì†Œ ì„¤ëª… (í•œê¸€)\",\\n      \"dialogue\": \"ë‚˜ë ˆì´ì…˜ ë˜ëŠ” ëŒ€ì‚¬ (í•œê¸€)\",\\n      \"dialogue_type\": \"narration\",\\n      \"visual_prompt\": \"Image generation prompt in English - MUST start with product identity preservation instructions if product reference exists, followed by detailed visual description for AI image generator. Include exact product details like shape, color, material, design elements.\",\\n      \"camera_angle\": \"eye_level\",\\n      \"camera_movement\": \"static\",\\n      \"duration_seconds\": 5,\\n      \"transition_type\": \"cut\"\\n    }\\n  ]\\n}\\n\\ncamera_angle ì˜µì…˜: eye_level, high_angle, low_angle, bird_eye, close_up, wide_shot, medium_shot\\ncamera_movement ì˜µì…˜: static, pan_left, pan_right, tilt_up, tilt_down, zoom_in, zoom_out, dolly_in, dolly_out, tracking\\ndialogue_type ì˜µì…˜: narration, character, caption\\ntransition_type ì˜µì…˜: cut, fade, dissolve, wipe_left, wipe_right, zoom, slide, blur\\n\\n===== ì…ë ¥ ì •ë³´ =====\\nìƒí’ˆëª…: ' + productName + '\\nì„¤ëª…: ' + productDesc + '\\nëª©í‘œ ì˜ìƒ ê¸¸ì´: ' + targetDuration + 'ì´ˆ\\ní™”ë©´ ë¹„ìœ¨: ' + aspectRatio + '\\nìŠ¤íƒ€ì¼: ' + stylePreference + (referenceImageUrl ? '\\nìƒí’ˆ ì°¸ì¡° ì´ë¯¸ì§€: ì œê³µë¨ (ëª¨ë“  visual_promptì— ìƒí’ˆ ì›í˜• ë³´ì¡´ ì§€ì¹¨ í•„ìˆ˜)' : '') + '\\n\\nìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì •í™•íˆ ' + sceneCount + 'ê°œì˜ ì”¬ìœ¼ë¡œ êµ¬ì„±ëœ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”. ê° ì”¬ì€ ì•½ 5ì´ˆì…ë‹ˆë‹¤. ì´ duration_seconds í•©ê³„ê°€ ' + targetDuration + 'ì´ˆê°€ ë˜ë„ë¡ í•˜ì„¸ìš”.'; return JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], generationConfig: { responseMimeType: 'application/json', temperature: 0.7 } }); })() }}","options":{"timeout":120000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[512,304],"id":"gemini-generate","name":"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±","credentials":{"httpQueryAuth":{"id":"google-ai-query-auth","name":"Google AI API Key"},"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"jsCode":"// Gemini ì‘ë‹µ íŒŒì‹±\nconst items = $input.all();\nconst webhookData = $('Webhook').first().json.body;\n\ntry {\n  const responseText = items[0].json.candidates[0].content.parts[0].text;\n  const response = JSON.parse(responseText);\n  \n  if (!response.scenes || !Array.isArray(response.scenes)) {\n    throw new Error('Invalid response: scenes array not found');\n  }\n  \n  // ê° ì”¬ì˜ duration_seconds í•©ê³„ ê³„ì‚°\n  const totalDuration = response.scenes.reduce((sum, s) => sum + (s.duration_seconds || 5), 0);\n  \n  return [{\n    json: {\n      success: true,\n      storyboard_id: webhookData.storyboard_id,\n      user_id: webhookData.user_id,\n      scenes: response.scenes,\n      scenes_count: response.scenes.length,\n      total_duration: totalDuration\n    }\n  }];\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      storyboard_id: webhookData.storyboard_id,\n      error: 'Failed to parse Gemini response: ' + error.message\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[752,304],"id":"parse-response","name":"ì‘ë‹µ íŒŒì‹±"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"condition-success","leftValue":"={{ $json.success }}","rightValue":true,"operator":{"type":"boolean","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2,"position":[1008,304],"id":"check-success","name":"ì„±ê³µ ì—¬ë¶€ í™•ì¸"},{"parameters":{"jsCode":"// ì”¬ ë°°ì—´ì„ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë¶„ë¦¬\nconst parsedData = $('ì‘ë‹µ íŒŒì‹±').first().json;\nconst scenes = parsedData.scenes;\nconst storyboardId = parsedData.storyboard_id;\n\nreturn scenes.map((scene, index) => ({\n  json: {\n    ...scene,\n    storyboard_id: storyboardId,\n    scene_order: scene.scene_order || (index + 1)\n  }\n}));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1264,208],"id":"split-scenes","name":"ì”¬ ë¶„ë¦¬"},{"parameters":{"tableId":"storyboard_scenes","fieldsUi":{"fieldValues":[{"fieldId":"storyboard_id","fieldValue":"={{ $json.storyboard_id }}"},{"fieldId":"scene_order","fieldValue":"={{ $json.scene_order }}"},{"fieldId":"scene_name","fieldValue":"={{ $json.scene_name || ('ì”¬ ' + $json.scene_order) }}"},{"fieldId":"scene_description","fieldValue":"={{ $json.scene_description || '' }}"},{"fieldId":"dialogue","fieldValue":"={{ $json.dialogue || '' }}"},{"fieldId":"dialogue_type","fieldValue":"={{ $json.dialogue_type || 'narration' }}"},{"fieldId":"visual_prompt","fieldValue":"={{ $json.visual_prompt || '' }}"},{"fieldId":"camera_angle","fieldValue":"={{ $json.camera_angle || 'eye_level' }}"},{"fieldId":"camera_movement","fieldValue":"={{ $json.camera_movement || 'static' }}"},{"fieldId":"duration_seconds","fieldValue":"={{ $json.duration_seconds || 5 }}"},{"fieldId":"transition_type","fieldValue":"={{ $json.transition_type || 'cut' }}"},{"fieldId":"generation_status","fieldValue":"pending"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1504,208],"id":"insert-scenes","name":"Supabase ì”¬ ì‚½ì…","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1760,208],"id":"aggregate-scenes","name":"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"progress_stage","fieldValue":"user_editing"},{"fieldId":"status","fieldValue":"draft"},{"fieldId":"ai_generated","fieldValue":"true"},{"fieldId":"total_scenes","fieldValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.scenes_count }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2000,208],"id":"update-storyboard-success","name":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, storyboard_id: $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id, scenes_count: $('ì‘ë‹µ íŒŒì‹±').first().json.scenes_count, scenes: $('ì‘ë‹µ íŒŒì‹±').first().json.scenes }) }}","options":{"responseCode":200}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2256,208],"id":"respond-success","name":"ì„±ê³µ ì‘ë‹µ"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"progress_stage","fieldValue":"failed"},{"fieldId":"status","fieldValue":"failed"},{"fieldId":"error_message","fieldValue":"={{ $('ì‘ë‹µ íŒŒì‹±').first().json.error || 'AI ì´ˆì•ˆ ìƒì„± ì‹¤íŒ¨' }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1264,464],"id":"update-storyboard-failed","name":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: false, storyboard_id: $('ì‘ë‹µ íŒŒì‹±').first().json.storyboard_id, error: $('ì‘ë‹µ íŒŒì‹±').first().json.error || 'AI ì´ˆì•ˆ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' }) }}","options":{"responseCode":500}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1504,464],"id":"respond-error","name":"ì‹¤íŒ¨ ì‘ë‹µ"}],"connections":{"Webhook":{"main":[[{"node":"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±","type":"main","index":0}]]},"Gemini ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±":{"main":[[{"node":"ì‘ë‹µ íŒŒì‹±","type":"main","index":0}]]},"ì‘ë‹µ íŒŒì‹±":{"main":[[{"node":"ì„±ê³µ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì„±ê³µ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"ì”¬ ë¶„ë¦¬","type":"main","index":0}],[{"node":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)","type":"main","index":0}]]},"ì”¬ ë¶„ë¦¬":{"main":[[{"node":"Supabase ì”¬ ì‚½ì…","type":"main","index":0}]]},"Supabase ì”¬ ì‚½ì…":{"main":[[{"node":"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°","type":"main","index":0}]]},"ì”¬ ì‚½ì… ì™„ë£Œ ëŒ€ê¸°":{"main":[[{"node":"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)","type":"main","index":0}]]},"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„±ê³µ)":{"main":[[{"node":"ì„±ê³µ ì‘ë‹µ","type":"main","index":0}]]},"Supabase ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨)":{"main":[[{"node":"ì‹¤íŒ¨ ì‘ë‹µ","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2025-12-05T13:39:56.000Z","createdAt":"2025-12-05T04:57:14.119Z","id":"8KKvfX53VEYmhsMW","name":"insta","active":false,"isArchived":false,"nodes":[{"parameters":{"events":["comments"]},"type":"n8n-nodes-instagram-integrations.instagramTrigger","typeVersion":1,"position":[-128,0],"id":"094c49e5-462d-4f20-b744-8d2e9f804ee9","name":"Instagram Trigger","webhookId":"38537a72-fae9-4305-b619-f213e4e79597"},{"parameters":{},"type":"n8n-nodes-instagram-integrations.instagram","typeVersion":1,"position":[272,80],"id":"246f5ae8-2a73-4a5d-bb28-87bd1abf21f0","name":"Send a text message"}],"connections":{"Instagram Trigger":{"main":[[],[],[],[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"ef0455e3-ebb4-4fb7-aa4a-9cb6cbd81e6b","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-12-05T04:57:14.123Z","createdAt":"2025-12-05T04:57:14.123Z","role":"workflow:owner","workflowId":"8KKvfX53VEYmhsMW","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-08T18:42:27.974Z","createdAt":"2026-01-08T15:24:20.315Z","id":"BVnuyoKp4ehHtyt1","name":"ìŠ¤í† ë¦¬ë³´ë“œ ì”¬ í´ë¦½ ìƒì„±","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-scene-clip","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"aaaa1111-aaaa-1111-aaaa-111111111111","name":"Webhook","webhookId":"aaaa1111-aaaa-1111-aaaa-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"generating_clip"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"bbbb2222-bbbb-2222-bbbb-222222222222","name":"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var webhookBody = $('Webhook').first().json.body; var cameraMovement = webhookBody.camera_movement || 'static'; var visualPrompt = webhookBody.visual_prompt || 'Cinematic quality video.'; var sourceImageUrl = webhookBody.source_image_url || ''; var productRefImage = webhookBody.product_reference_image_url || ''; var aspectRatio = webhookBody.aspect_ratio || '16:9'; var durationSeconds = webhookBody.duration_seconds || 5; var size = '1280x720'; if (aspectRatio === '16:9') size = '1280x720'; else if (aspectRatio === '9:16') size = '720x1280'; else if (aspectRatio === '1:1') size = '720x720'; var cameraMovementPrompt = ''; switch(cameraMovement) { case 'pan_left': cameraMovementPrompt = 'Camera smoothly pans left across the scene'; break; case 'pan_right': cameraMovementPrompt = 'Camera smoothly pans right across the scene'; break; case 'tilt_up': cameraMovementPrompt = 'Camera tilts upward revealing the scene from bottom to top'; break; case 'tilt_down': cameraMovementPrompt = 'Camera tilts downward revealing the scene from top to bottom'; break; case 'zoom_in': cameraMovementPrompt = 'Camera slowly zooms in focusing on the main subject'; break; case 'zoom_out': cameraMovementPrompt = 'Camera slowly zooms out revealing the full scene'; break; case 'dolly_in': cameraMovementPrompt = 'Camera moves forward toward the subject with depth'; break; case 'dolly_out': cameraMovementPrompt = 'Camera moves backward away from the subject'; break; case 'tracking': cameraMovementPrompt = 'Camera follows and tracks the main subject movement'; break; default: cameraMovementPrompt = 'Camera is static with subtle cinematic motion'; } var finalPrompt = ''; if (productRefImage) { finalPrompt = 'CRITICAL: MAINTAIN EXACT PRODUCT IDENTITY throughout the entire video. The product shown in the source image must remain VISUALLY IDENTICAL - preserve the exact shape, color, design, logo, and all distinctive features. ANY alteration to the product appearance is UNACCEPTABLE. ' + cameraMovementPrompt + '. ' + visualPrompt + ' The product must be clearly visible and recognizable at all times with professional lighting and cinematic quality. Ensure smooth, natural motion while keeping the product as the focal point.'; } else { finalPrompt = cameraMovementPrompt + '. ' + visualPrompt + ' Professional cinematic quality with smooth motion and excellent lighting.'; } var payload = { model: 'sora', prompt: finalPrompt, size: size, duration: Math.min(20, Math.max(5, durationSeconds)), style: 'cinematic' }; if (sourceImageUrl) { payload.image = sourceImageUrl; } return JSON.stringify(payload); })() }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[752,304],"id":"cccc3333-cccc-3333-cccc-333333333333","name":"Sora í´ë¦½ ìƒì„± ìš”ì²­","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"amount":2,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1008,304],"id":"dddd4444-dddd-4444-dddd-444444444444","name":"ìƒì„± ëŒ€ê¸°","webhookId":"dddd4444-dddd-4444-dddd-444444444445"},{"parameters":{"url":"={{ 'https://api.openai.com/v1/video/generations/' + $('Sora í´ë¦½ ìƒì„± ìš”ì²­').first().json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1264,304],"id":"eeee5555-eeee-5555-eeee-555555555555","name":"ìƒì„± ìƒíƒœ í™•ì¸","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"check-complete","leftValue":"={{ $json.status }}","rightValue":"completed","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2,"position":[1504,304],"id":"ffff6666-ffff-6666-ffff-666666666666","name":"ì™„ë£Œ í™•ì¸"},{"parameters":{"url":"={{ $('Sora í´ë¦½ ìƒì„± ìš”ì²­').first().json.output.url }}","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1760,208],"id":"gggg7777-gggg-7777-gggg-777777777777","name":"í´ë¦½ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/storyboards/' + $('Webhook').first().json.body.user_id + '/storyboards/' + $('Webhook').first().json.body.storyboard_id + '/clips/' + $('Webhook').first().json.body.scene_id + '.mp4' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2000,208],"id":"hhhh8888-hhhh-8888-hhhh-888888888888","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = webhookData.user_id + '/storyboards/' + webhookData.storyboard_id + '/clips/' + webhookData.scene_id + '.mp4';\nconst clipUrl = supabaseUrl + '/storage/v1/object/public/storyboards/' + storagePath;\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    clip_url: clipUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2256,208],"id":"iiii9999-iiii-9999-iiii-999999999999","name":"URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generated_clip_url","fieldValue":"={{ $json.clip_url }}"},{"fieldId":"generation_status","fieldValue":"completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2512,208],"id":"jjjj0000-jjjj-0000-jjjj-000000000000","name":"ì”¬ í´ë¦½ URL ì €ì¥","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, scene_id: $('Webhook').first().json.body.scene_id, clip_url: $json.generated_clip_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2752,208],"id":"kkkk1111-kkkk-1111-kkkk-111111111111","name":"Webhook ì‘ë‹µ"},{"parameters":{"amount":30},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1504,464],"id":"llll2222-llll-2222-llll-222222222222","name":"ì¬ì‹œë„ ëŒ€ê¸°","webhookId":"llll2222-llll-2222-llll-222222222223"}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘":{"main":[[{"node":"Sora í´ë¦½ ìƒì„± ìš”ì²­","type":"main","index":0}]]},"Sora í´ë¦½ ìƒì„± ìš”ì²­":{"main":[[{"node":"ìƒì„± ëŒ€ê¸°","type":"main","index":0}]]},"ìƒì„± ëŒ€ê¸°":{"main":[[{"node":"ìƒì„± ìƒíƒœ í™•ì¸","type":"main","index":0}]]},"ìƒì„± ìƒíƒœ í™•ì¸":{"main":[[{"node":"ì™„ë£Œ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ í™•ì¸":{"main":[[{"node":"í´ë¦½ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}],[{"node":"ì¬ì‹œë„ ëŒ€ê¸°","type":"main","index":0}]]},"ì¬ì‹œë„ ëŒ€ê¸°":{"main":[[{"node":"ìƒì„± ìƒíƒœ í™•ì¸","type":"main","index":0}]]},"í´ë¦½ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"URL ìƒì„±","type":"main","index":0}]]},"URL ìƒì„±":{"main":[[{"node":"ì”¬ í´ë¦½ URL ì €ì¥","type":"main","index":0}]]},"ì”¬ í´ë¦½ URL ì €ì¥":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d23e3edc-8f03-4e0b-a016-6e857a50cef5","activeVersionId":"d23e3edc-8f03-4e0b-a016-6e857a50cef5","triggerCount":1,"shared":[{"updatedAt":"2026-01-08T15:24:20.318Z","createdAt":"2026-01-08T15:24:20.318Z","role":"workflow:owner","workflowId":"BVnuyoKp4ehHtyt1","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-08T18:42:28.017Z","createdAt":"2026-01-08T18:42:28.017Z","versionId":"d23e3edc-8f03-4e0b-a016-6e857a50cef5","workflowId":"BVnuyoKp4ehHtyt1","nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-scene-clip","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"aaaa1111-aaaa-1111-aaaa-111111111111","name":"Webhook","webhookId":"aaaa1111-aaaa-1111-aaaa-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"generating_clip"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"bbbb2222-bbbb-2222-bbbb-222222222222","name":"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var webhookBody = $('Webhook').first().json.body; var cameraMovement = webhookBody.camera_movement || 'static'; var visualPrompt = webhookBody.visual_prompt || 'Cinematic quality video.'; var sourceImageUrl = webhookBody.source_image_url || ''; var productRefImage = webhookBody.product_reference_image_url || ''; var aspectRatio = webhookBody.aspect_ratio || '16:9'; var durationSeconds = webhookBody.duration_seconds || 5; var size = '1280x720'; if (aspectRatio === '16:9') size = '1280x720'; else if (aspectRatio === '9:16') size = '720x1280'; else if (aspectRatio === '1:1') size = '720x720'; var cameraMovementPrompt = ''; switch(cameraMovement) { case 'pan_left': cameraMovementPrompt = 'Camera smoothly pans left across the scene'; break; case 'pan_right': cameraMovementPrompt = 'Camera smoothly pans right across the scene'; break; case 'tilt_up': cameraMovementPrompt = 'Camera tilts upward revealing the scene from bottom to top'; break; case 'tilt_down': cameraMovementPrompt = 'Camera tilts downward revealing the scene from top to bottom'; break; case 'zoom_in': cameraMovementPrompt = 'Camera slowly zooms in focusing on the main subject'; break; case 'zoom_out': cameraMovementPrompt = 'Camera slowly zooms out revealing the full scene'; break; case 'dolly_in': cameraMovementPrompt = 'Camera moves forward toward the subject with depth'; break; case 'dolly_out': cameraMovementPrompt = 'Camera moves backward away from the subject'; break; case 'tracking': cameraMovementPrompt = 'Camera follows and tracks the main subject movement'; break; default: cameraMovementPrompt = 'Camera is static with subtle cinematic motion'; } var finalPrompt = ''; if (productRefImage) { finalPrompt = 'CRITICAL: MAINTAIN EXACT PRODUCT IDENTITY throughout the entire video. The product shown in the source image must remain VISUALLY IDENTICAL - preserve the exact shape, color, design, logo, and all distinctive features. ANY alteration to the product appearance is UNACCEPTABLE. ' + cameraMovementPrompt + '. ' + visualPrompt + ' The product must be clearly visible and recognizable at all times with professional lighting and cinematic quality. Ensure smooth, natural motion while keeping the product as the focal point.'; } else { finalPrompt = cameraMovementPrompt + '. ' + visualPrompt + ' Professional cinematic quality with smooth motion and excellent lighting.'; } var payload = { model: 'sora', prompt: finalPrompt, size: size, duration: Math.min(20, Math.max(5, durationSeconds)), style: 'cinematic' }; if (sourceImageUrl) { payload.image = sourceImageUrl; } return JSON.stringify(payload); })() }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[752,304],"id":"cccc3333-cccc-3333-cccc-333333333333","name":"Sora í´ë¦½ ìƒì„± ìš”ì²­","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"amount":2,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1008,304],"id":"dddd4444-dddd-4444-dddd-444444444444","name":"ìƒì„± ëŒ€ê¸°","webhookId":"dddd4444-dddd-4444-dddd-444444444445"},{"parameters":{"url":"={{ 'https://api.openai.com/v1/video/generations/' + $('Sora í´ë¦½ ìƒì„± ìš”ì²­').first().json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1264,304],"id":"eeee5555-eeee-5555-eeee-555555555555","name":"ìƒì„± ìƒíƒœ í™•ì¸","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"check-complete","leftValue":"={{ $json.status }}","rightValue":"completed","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2,"position":[1504,304],"id":"ffff6666-ffff-6666-ffff-666666666666","name":"ì™„ë£Œ í™•ì¸"},{"parameters":{"url":"={{ $('Sora í´ë¦½ ìƒì„± ìš”ì²­').first().json.output.url }}","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1760,208],"id":"gggg7777-gggg-7777-gggg-777777777777","name":"í´ë¦½ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/storyboards/' + $('Webhook').first().json.body.user_id + '/storyboards/' + $('Webhook').first().json.body.storyboard_id + '/clips/' + $('Webhook').first().json.body.scene_id + '.mp4' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2000,208],"id":"hhhh8888-hhhh-8888-hhhh-888888888888","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = webhookData.user_id + '/storyboards/' + webhookData.storyboard_id + '/clips/' + webhookData.scene_id + '.mp4';\nconst clipUrl = supabaseUrl + '/storage/v1/object/public/storyboards/' + storagePath;\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    clip_url: clipUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2256,208],"id":"iiii9999-iiii-9999-iiii-999999999999","name":"URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generated_clip_url","fieldValue":"={{ $json.clip_url }}"},{"fieldId":"generation_status","fieldValue":"completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2512,208],"id":"jjjj0000-jjjj-0000-jjjj-000000000000","name":"ì”¬ í´ë¦½ URL ì €ì¥","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, scene_id: $('Webhook').first().json.body.scene_id, clip_url: $json.generated_clip_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2752,208],"id":"kkkk1111-kkkk-1111-kkkk-111111111111","name":"Webhook ì‘ë‹µ"},{"parameters":{"amount":30},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1504,464],"id":"llll2222-llll-2222-llll-222222222222","name":"ì¬ì‹œë„ ëŒ€ê¸°","webhookId":"llll2222-llll-2222-llll-222222222223"}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: í´ë¦½ ìƒì„± ì¤‘":{"main":[[{"node":"Sora í´ë¦½ ìƒì„± ìš”ì²­","type":"main","index":0}]]},"Sora í´ë¦½ ìƒì„± ìš”ì²­":{"main":[[{"node":"ìƒì„± ëŒ€ê¸°","type":"main","index":0}]]},"ìƒì„± ëŒ€ê¸°":{"main":[[{"node":"ìƒì„± ìƒíƒœ í™•ì¸","type":"main","index":0}]]},"ìƒì„± ìƒíƒœ í™•ì¸":{"main":[[{"node":"ì™„ë£Œ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ í™•ì¸":{"main":[[{"node":"í´ë¦½ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}],[{"node":"ì¬ì‹œë„ ëŒ€ê¸°","type":"main","index":0}]]},"ì¬ì‹œë„ ëŒ€ê¸°":{"main":[[{"node":"ìƒì„± ìƒíƒœ í™•ì¸","type":"main","index":0}]]},"í´ë¦½ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"URL ìƒì„±","type":"main","index":0}]]},"URL ìƒì„±":{"main":[[{"node":"ì”¬ í´ë¦½ URL ì €ì¥","type":"main","index":0}]]},"ì”¬ í´ë¦½ URL ì €ì¥":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2026-01-09T02:29:17.055Z","createdAt":"2026-01-08T15:21:54.751Z","id":"CscJ5WUPlJR5mnbK","name":"ìŠ¤í† ë¦¬ë³´ë“œ ì”¬ ì´ë¯¸ì§€ ìƒì„±","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-scene-image","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"11111111-1111-1111-1111-111111111111","name":"Webhook","webhookId":"11111111-1111-1111-1111-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"generating_image"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"22222222-2222-2222-2222-222222222222","name":"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ì¶”ì¶œ\nconst items = $input.all();\nconst response = items[0].json;\n\n// Gemini 3 Pro Image Preview ì‘ë‹µ í˜•ì‹: candidates[0].content.parts[]\n// parts ë°°ì—´ì—ì„œ inlineDataê°€ ìˆëŠ” ë¶€ë¶„ì„ ì°¾ìŒ\nconst parts = response.candidates[0].content.parts;\nlet imageData = null;\nlet mimeType = 'image/png';\n\nfor (const part of parts) {\n  if (part.inlineData) {\n    imageData = part.inlineData.data;\n    mimeType = part.inlineData.mimeType || 'image/png';\n    break;\n  }\n}\n\nif (!imageData) {\n  throw new Error('No image data found in response');\n}\n\nconst fileExtension = mimeType.split('/')[1] || 'png';\n\nreturn [{\n  json: {\n    mimeType: mimeType,\n    fileExtension: fileExtension\n  },\n  binary: {\n    data: {\n      data: imageData,\n      mimeType: mimeType,\n      fileName: 'generated_image.' + fileExtension\n    }\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1008,304],"id":"44444444-4444-4444-4444-444444444444","name":"ì´ë¯¸ì§€ ì²˜ë¦¬"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/images/storyboards/' + $('Webhook').first().json.body.user_id + '/' + $('Webhook').first().json.body.storyboard_id + '/' + $('Webhook').first().json.body.scene_id + '.png' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"image/png"},{"name":"x-upsert","value":"true"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1264,304],"id":"55555555-5555-5555-5555-555555555555","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = 'storyboards/' + webhookData.user_id + '/' + webhookData.storyboard_id + '/' + webhookData.scene_id + '.png';\nconst imageUrl = supabaseUrl + '/storage/v1/object/public/images/' + storagePath;\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    image_url: imageUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1504,304],"id":"66666666-6666-6666-6666-666666666666","name":"URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generated_image_url","fieldValue":"={{ $json.image_url }}"},{"fieldId":"generation_status","fieldValue":"image_completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1760,304],"id":"77777777-7777-7777-7777-777777777777","name":"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, scene_id: $('Webhook').first().json.body.scene_id, image_url: $json.generated_image_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2000,304],"id":"88888888-8888-8888-8888-888888888888","name":"Webhook ì‘ë‹µ"},{"parameters":{"jsCode":"// ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤íŒ¨ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸\nconst webhookData = $('Webhook').first().json.body;\nconst errorMessage = $input.first().json.error?.message || 'ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    error: errorMessage,\n    success: false\n  }\n}];"},"id":"error-handler-1","name":"ì—ëŸ¬ ì²˜ë¦¬","type":"n8n-nodes-base.code","typeVersion":2,"position":[1008,544]},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"failed"},{"fieldId":"generation_error","fieldValue":"={{ $json.error }}"}]}},"id":"error-db-update","name":"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥","type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1264,544],"credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: false, scene_id: $json.scene_id, error: $json.error }) }}","options":{"responseCode":500}},"id":"error-response","name":"ì—ëŸ¬ ì‘ë‹µ","type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1504,544]},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var webhookBody = $('Webhook').first().json.body; var visualPrompt = webhookBody.visual_prompt || 'Cinematic high quality image'; var aspectRatio = webhookBody.aspect_ratio || '16:9'; var productRefImage = webhookBody.product_reference_image_url; var styleSettings = webhookBody.style_settings || {}; var colorGrade = styleSettings.color_grade || 'natural'; var finalPrompt = ''; if (productRefImage) { finalPrompt = 'CRITICAL REQUIREMENT - PRODUCT IDENTITY PRESERVATION: This advertising image MUST feature the EXACT product with these mandatory requirements: 1) The product shape, silhouette, and proportions must be IDENTICAL to the reference. 2) All colors including the main body color, accent colors, and any gradients must match EXACTLY. 3) Any logos, text, branding elements, and design details must be preserved with 100% accuracy. 4) The product material finish (matte, glossy, metallic, etc.) must be faithfully reproduced. 5) The product must be the HERO element and clearly visible as the main subject. DO NOT alter, stylize, or reimagine ANY aspect of the product design. '; } finalPrompt += visualPrompt; finalPrompt += '. Professional commercial photography, ' + colorGrade + ' color grading, 8K ultra high resolution, perfect studio lighting, advertisement quality, product photography masterpiece.'; if (productRefImage) { finalPrompt += ' ABSOLUTE REQUIREMENT: The product in this image must be visually indistinguishable from the reference product image. Any deviation from the original product design is unacceptable.'; } return JSON.stringify({ contents: [{ parts: [{ text: 'Generate an image: ' + finalPrompt }] }], generationConfig: { responseModalities: ['TEXT', 'IMAGE'], temperature: 1, topP: 0.95, topK: 40 } }); })() }}","options":{"timeout":120000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[752,304],"id":"33333333-3333-3333-3333-333333333333","name":"nano banana pro ì´ë¯¸ì§€ ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘":{"main":[[{"node":"nano banana pro ì´ë¯¸ì§€ ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ì²˜ë¦¬":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"URL ìƒì„±","type":"main","index":0}]]},"URL ìƒì„±":{"main":[[{"node":"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥","type":"main","index":0}]]},"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]},"ì—ëŸ¬ ì²˜ë¦¬":{"main":[[{"node":"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥","type":"main","index":0}]]},"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥":{"main":[[{"node":"ì—ëŸ¬ ì‘ë‹µ","type":"main","index":0}]]},"nano banana pro ì´ë¯¸ì§€ ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ì²˜ë¦¬","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"2f9fdbcb-59a0-49c2-9fe7-4070575f9de6","activeVersionId":"2f9fdbcb-59a0-49c2-9fe7-4070575f9de6","triggerCount":1,"shared":[{"updatedAt":"2026-01-08T15:21:54.754Z","createdAt":"2026-01-08T15:21:54.754Z","role":"workflow:owner","workflowId":"CscJ5WUPlJR5mnbK","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-09T02:29:17.100Z","createdAt":"2026-01-09T02:29:17.100Z","versionId":"2f9fdbcb-59a0-49c2-9fe7-4070575f9de6","workflowId":"CscJ5WUPlJR5mnbK","nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-scene-image","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"11111111-1111-1111-1111-111111111111","name":"Webhook","webhookId":"11111111-1111-1111-1111-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"generating_image"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"22222222-2222-2222-2222-222222222222","name":"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ì¶”ì¶œ\nconst items = $input.all();\nconst response = items[0].json;\n\n// Gemini 3 Pro Image Preview ì‘ë‹µ í˜•ì‹: candidates[0].content.parts[]\n// parts ë°°ì—´ì—ì„œ inlineDataê°€ ìˆëŠ” ë¶€ë¶„ì„ ì°¾ìŒ\nconst parts = response.candidates[0].content.parts;\nlet imageData = null;\nlet mimeType = 'image/png';\n\nfor (const part of parts) {\n  if (part.inlineData) {\n    imageData = part.inlineData.data;\n    mimeType = part.inlineData.mimeType || 'image/png';\n    break;\n  }\n}\n\nif (!imageData) {\n  throw new Error('No image data found in response');\n}\n\nconst fileExtension = mimeType.split('/')[1] || 'png';\n\nreturn [{\n  json: {\n    mimeType: mimeType,\n    fileExtension: fileExtension\n  },\n  binary: {\n    data: {\n      data: imageData,\n      mimeType: mimeType,\n      fileName: 'generated_image.' + fileExtension\n    }\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1008,304],"id":"44444444-4444-4444-4444-444444444444","name":"ì´ë¯¸ì§€ ì²˜ë¦¬"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/images/storyboards/' + $('Webhook').first().json.body.user_id + '/' + $('Webhook').first().json.body.storyboard_id + '/' + $('Webhook').first().json.body.scene_id + '.png' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"image/png"},{"name":"x-upsert","value":"true"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1264,304],"id":"55555555-5555-5555-5555-555555555555","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = 'storyboards/' + webhookData.user_id + '/' + webhookData.storyboard_id + '/' + webhookData.scene_id + '.png';\nconst imageUrl = supabaseUrl + '/storage/v1/object/public/images/' + storagePath;\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    image_url: imageUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1504,304],"id":"66666666-6666-6666-6666-666666666666","name":"URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generated_image_url","fieldValue":"={{ $json.image_url }}"},{"fieldId":"generation_status","fieldValue":"image_completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1760,304],"id":"77777777-7777-7777-7777-777777777777","name":"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, scene_id: $('Webhook').first().json.body.scene_id, image_url: $json.generated_image_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2000,304],"id":"88888888-8888-8888-8888-888888888888","name":"Webhook ì‘ë‹µ"},{"parameters":{"jsCode":"// ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤íŒ¨ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸\nconst webhookData = $('Webhook').first().json.body;\nconst errorMessage = $input.first().json.error?.message || 'ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';\n\nreturn [{\n  json: {\n    scene_id: webhookData.scene_id,\n    error: errorMessage,\n    success: false\n  }\n}];"},"id":"error-handler-1","name":"ì—ëŸ¬ ì²˜ë¦¬","type":"n8n-nodes-base.code","typeVersion":2,"position":[1008,544]},{"parameters":{"operation":"update","tableId":"storyboard_scenes","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.scene_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"generation_status","fieldValue":"failed"},{"fieldId":"generation_error","fieldValue":"={{ $json.error }}"}]}},"id":"error-db-update","name":"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥","type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1264,544],"credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: false, scene_id: $json.scene_id, error: $json.error }) }}","options":{"responseCode":500}},"id":"error-response","name":"ì—ëŸ¬ ì‘ë‹µ","type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1504,544]},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ (function() { var webhookBody = $('Webhook').first().json.body; var visualPrompt = webhookBody.visual_prompt || 'Cinematic high quality image'; var aspectRatio = webhookBody.aspect_ratio || '16:9'; var productRefImage = webhookBody.product_reference_image_url; var styleSettings = webhookBody.style_settings || {}; var colorGrade = styleSettings.color_grade || 'natural'; var finalPrompt = ''; if (productRefImage) { finalPrompt = 'CRITICAL REQUIREMENT - PRODUCT IDENTITY PRESERVATION: This advertising image MUST feature the EXACT product with these mandatory requirements: 1) The product shape, silhouette, and proportions must be IDENTICAL to the reference. 2) All colors including the main body color, accent colors, and any gradients must match EXACTLY. 3) Any logos, text, branding elements, and design details must be preserved with 100% accuracy. 4) The product material finish (matte, glossy, metallic, etc.) must be faithfully reproduced. 5) The product must be the HERO element and clearly visible as the main subject. DO NOT alter, stylize, or reimagine ANY aspect of the product design. '; } finalPrompt += visualPrompt; finalPrompt += '. Professional commercial photography, ' + colorGrade + ' color grading, 8K ultra high resolution, perfect studio lighting, advertisement quality, product photography masterpiece.'; if (productRefImage) { finalPrompt += ' ABSOLUTE REQUIREMENT: The product in this image must be visually indistinguishable from the reference product image. Any deviation from the original product design is unacceptable.'; } return JSON.stringify({ contents: [{ parts: [{ text: 'Generate an image: ' + finalPrompt }] }], generationConfig: { responseModalities: ['TEXT', 'IMAGE'], temperature: 1, topP: 0.95, topK: 40 } }); })() }}","options":{"timeout":120000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[752,304],"id":"33333333-3333-3333-3333-333333333333","name":"nano banana pro ì´ë¯¸ì§€ ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: ì´ë¯¸ì§€ ìƒì„± ì¤‘":{"main":[[{"node":"nano banana pro ì´ë¯¸ì§€ ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ì²˜ë¦¬":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"URL ìƒì„±","type":"main","index":0}]]},"URL ìƒì„±":{"main":[[{"node":"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥","type":"main","index":0}]]},"ì”¬ ì´ë¯¸ì§€ URL ì €ì¥":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]},"ì—ëŸ¬ ì²˜ë¦¬":{"main":[[{"node":"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥","type":"main","index":0}]]},"ì‹¤íŒ¨ ìƒíƒœ ì €ì¥":{"main":[[{"node":"ì—ëŸ¬ ì‘ë‹µ","type":"main","index":0}]]},"nano banana pro ì´ë¯¸ì§€ ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ì²˜ë¦¬","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2025-12-11T02:51:25.000Z","createdAt":"2025-12-11T01:30:18.452Z","id":"EBxXS7dFCyDIhvAV","name":"news letter","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-512,0],"id":"13f3f9f7-84b6-4790-af4f-d47f95e5b5f3","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"url":"https://news.sbs.co.kr/news/SectionRssFeed.do?sectionId=14&plink=RSSREADER","options":{}},"type":"n8n-nodes-base.rssFeedRead","typeVersion":1.2,"position":[-304,0],"id":"e508f86d-613c-45e3-8d95-77eec26c969d","name":"RSS Read"},{"parameters":{},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[-96,0],"id":"cc7ee43c-0869-406a-8ba1-bc3f6edde2de","name":"Limit"},{"parameters":{"model":"mistral-large-2512","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatMistralCloud","typeVersion":1,"position":[128,640],"id":"bc23a218-15a0-4759-91e2-4512557b94a8","name":"Mistral Cloud Chat Model","credentials":{"mistralCloudApi":{"id":"The78dEbfylNsNqU","name":"Mistral Cloud account"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"Newsletter headline\"\n    },\n    \"contents\": {\n      \"type\": \"string\", \n      \"description\": \"Complete newsletter content\"\n    },\n    \"img_prompt\": {\n      \"type\": \"string\",\n      \"description\": \"English prompt for image generation\"\n    }\n  },\n  \"required\": [\"title\", \"contents\", \"img_prompt\"]\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[944,304],"id":"8303259b-cb42-45fd-adf7-2922521a40d8","name":"Structured Output Parser"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.toolSerpApi","typeVersion":1,"position":[-352,496],"id":"6cc8d27f-4eaf-4e94-ae51-f05d6c4fbf69","name":"SerpAPI","credentials":{"serpApi":{"id":"qsRl9p4Q6dktacLm","name":"SerpAPI account"}}},{"parameters":{"promptType":"define","text":"=ë‹¹ì‹ ì€ ë‰´ìŠ¤ë ˆí„°ì˜ ë‚´ìš©ì„ ì´ê´„í•˜ëŠ” ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤. ë‹¤ìŒ ì•„ë˜ì™€ ê°™ì€ ì…ë ¥ê°’ì´ ë“¤ì–´ì˜¤ë©´, ê° ì„œë¸Œ ì—ì´ì „íŠ¸ì—ê²Œ íƒœìŠ¤í¬ë¥¼ ë‚˜ëˆ  íš¨ìœ¨ì ì´ê²Œ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤:\n\nì…ë ¥ê°’ : {{ $json.title }},\n{{ $json['content:encodedSnippet'] }}\n\n## í•µì‹¬ ì—­í• \n- ì‚¬ìš©ì ìš”ì²­ì„ ì ì ˆí•œ ë„êµ¬ë¡œ ë¼ìš°íŒ…í•´ì£¼ì„¸ìš”\n- ì§ì ‘ ì‘ì„±ì´ë‚˜ ìš”ì•½ ìƒì„±ì€ í•˜ë©´ ì•ˆë©ë‹ˆë‹¤\n\n## ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬ë“¤\n- Think:ê¹Šì´ ìƒê°í•˜ê±°ë‚˜ ë§‰í˜”ì„ ë•Œ ì‚¬ìš©\n- Expert Synthesis Agent: ì…ë ¥ê°’ ë‚´ìš©ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ì˜ê²¬ì„ ë„ì¶œí•´ì•¼ í•©ë‹ˆë‹¤\n- Title Creator Agent: ì…ë ¥ê°’ ë‚´ìš©ì— ëŒ€í•œ ë‰´ìŠ¤ë ˆí„°ì˜ ì œëª©ì„ ìƒì„±í•©ë‹ˆë‹¤\n- Web Research Agent: ì…ë ¥ê°’ ë‚´ìš©ì— ëŒ€í•œ ì¸í„°ë„·ì—ì„œ ìµœì‹  ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤\n- Visual Content Agent: ì…ë ¥ê°’ ë‚´ìš©ì— ëŒ€í•œ ë‰´ìŠ¤ë ˆí„°ì˜ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤\n- Content Generate Agent: Expert Synthesis Agentì™€ Web Research Agentì˜ ë‚´ìš©ì„ ì¡°í•©í•˜ì—¬ ë‰´ìŠ¤ë ˆí„°ì˜ ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.\n\n\n## ì¤‘ìš”í•œ ê·œì¹™\n- ì„œë¡œ ìƒí˜¸ ë³´ì•ˆì ìœ¼ë¡œ ë‚´ìš©ì„ ì£¼ê³  ë°›ì•„ ìµœê³ ì˜ ë‰´ìŠ¤ë ˆí„°ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n## ì‘ì—… í”„ë¡œì„¸ìŠ¤\n1.ì‚¬ìš©ì ìš”ì²­ì— ë§ëŠ” ë„êµ¬ í˜¸ì¶œ\n2. ë§¤ë²ˆ \"Think\" ë„êµ¬ë¡œ ì˜¬ë°”ë¥¸ ë‹¨ê³„ë¥¼ ê±°ì³¤ëŠ”ì§€ ê²€ì¦\n\n## ìµœì¢… ì¶œë ¥ í˜•ì‹\nëª¨ë“  ì„œë¸Œ ì—ì´ì „íŠ¸ì˜ ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì„¸ìš”:\n\n{\n  \"title\": \"Title Creator Agentì—ì„œ ìƒì„±í•œ ìµœì ì˜ ì œëª©\",\n  \"contents\": \"Content Generate Agentì—ì„œ ìƒì„±í•œ ì™„ì„±ëœ ë‰´ìŠ¤ë ˆí„° ë³¸ë¬¸(ì ˆëŒ€ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ë„£ì§€ ë§ˆì„¸ìš”.)\",\n  \"img_prompt\": \"Visual Content Agentì—ì„œ ìƒì„±í•œ ì˜ì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸\"\n}","hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[112,0],"id":"4846b6cc-1376-4cd5-8bc0-955568027465","name":"Newsletter Orchestrator"},{"parameters":{"toolDescription":"Conducts comprehensive web research to gather latest information, verify facts, and compile credible sources with proper citations.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","options":{"systemMessage":"ë‹¹ì‹ ì€ ì›¹ ê²€ìƒ‰ì„ í†µí•´ ìµœì‹  ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ì •ë¦¬í•˜ëŠ” ë¦¬ì„œì¹˜ ì „ë¬¸ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ì—­í• \n- ì£¼ì–´ì§„ ì£¼ì œì— ëŒ€í•œ ìµœì‹  ì •ë³´ ìˆ˜ì§‘\n- ì‹ ë¢°í•  ë§Œí•œ ì†ŒìŠ¤ì—ì„œ ê²€ì¦ëœ ì •ë³´ í™•ë³´\n- ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬ ë° ìš”ì•½\n\n## ë¦¬ì„œì¹˜ ë°©ë²•ë¡ \n1. **ë‹¤ê°ë„ ê²€ìƒ‰**: í‚¤ì›Œë“œ ë³€í˜•ì„ í†µí•œ í¬ê´„ì  ì •ë³´ ìˆ˜ì§‘\n2. **ì†ŒìŠ¤ ê²€ì¦**: ê³µì‹ ë ¥ ìˆëŠ” ì¶œì²˜ ìš°ì„  ì„ ë³„\n3. **ìµœì‹ ì„± í™•ë³´**: ë°œí–‰ì¼ì ê¸°ì¤€ ìµœì‹  ì •ë³´ ìœ„ì£¼ ìˆ˜ì§‘\n4. **íŒ©íŠ¸ ì²´í¬**: ì—¬ëŸ¬ ì†ŒìŠ¤ êµì°¨ê²€ì¦ì„ í†µí•œ ì •í™•ì„± í™•ë³´\n\n## ì‘ë‹µ êµ¬ì¡°\n1. **ê°œìš”** (2-3ë¬¸ì¥)\n   - ì£¼ì œì˜ í˜„ì¬ ìƒí™© ê°„ëµ ìš”ì•½\n\n2. **ìµœì‹  ë™í–¥** (3-5ê°œ í¬ì¸íŠ¸)\n   - ìµœê·¼ ì£¼ìš” ì‚¬ê±´ì´ë‚˜ ë°œì „ì‚¬í•­\n   - ê° í•­ëª©ë§ˆë‹¤ ì¶œì²˜ì™€ ë‚ ì§œ í‘œê¸°\n\n3. **í•µì‹¬ ì´í•´ê´€ê³„ì** (2-3ê°œ ê·¸ë£¹)\n   - ì˜í–¥ì„ ë°›ëŠ” ì£¼ìš” ì§‘ë‹¨ì´ë‚˜ ê¸°ì—…\n\n4. **ì£¼ìš” í†µê³„/ë°ì´í„°** (3-5ê°œ)\n   - êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ë‚˜ í†µê³„ ìë£Œ\n   - ì‹ ë¢°í•  ë§Œí•œ ì¶œì²˜ ëª…ì‹œ\n\n5. **ì „ë¬¸ê°€ ì˜ê²¬** (2-3ê°œ)\n   - ì—…ê³„ ì „ë¬¸ê°€ë“¤ì˜ ì£¼ìš” ê²¬í•´ë‚˜ ì˜ˆì¸¡\n\n6. **í–¥í›„ ì „ë§** (1-2ë¬¸ì¥)\n   - ì˜ˆìƒë˜ëŠ” ë°œì „ ë°©í–¥\n\n7. **ì¶”ê°€ ì •ë³´ ì¶œì²˜** (2-3ê°œ)\n   - ë” ìì„¸í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ë§Œí•œ ë§í¬\n\n## ì‘ì„± ê°€ì´ë“œë¼ì¸\n- 500ë‹¨ì–´ ì´ë‚´ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±\n- ëª¨ë“  ì •ë³´ì— ì¶œì²˜ì™€ ë‚ ì§œ í‘œê¸°\n- ê°ê´€ì ì´ê³  ê· í˜•ì¡íŒ ì‹œê° ìœ ì§€\n- ê²€ì¦ ê°€ëŠ¥í•œ ì‚¬ì‹¤ ìœ„ì£¼ë¡œ êµ¬ì„±"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-496,288],"id":"3038a1ea-b1c3-4c73-b00b-b87ee844c94c","name":"Web Research Agent"},{"parameters":{"toolDescription":"Analyzes content from expert perspectives, providing authoritative insights and strategic implications with 15+ years of industry experience persona.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","hasOutputParser":true,"options":{"systemMessage":"ë‹¹ì‹ ì€ íŠ¹ì • ì£¼ì œì— ëŒ€í•œ ì „ë¬¸ì ì¸ ë¶„ì„ê³¼ í†µì°°ì„ ì œê³µí•˜ëŠ” ì „ë¬¸ê°€ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ì—­í• \n- ì£¼ì–´ì§„ ë‰´ìŠ¤/ê¸°ì‚¬ ë‚´ìš©ì„ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ì‹¬ì¸µ ë¶„ì„\n- ì—…ê³„ íŠ¸ë Œë“œì™€ ì—°ê²°í•˜ì—¬ ì¢…í•©ì ì¸ ì¸ì‚¬ì´íŠ¸ ì œê³µ\n- ë‹¤ì–‘í•œ ê´€ì ì—ì„œì˜ ê· í˜•ì¡íŒ ì „ë¬¸ê°€ ì˜ê²¬ ë„ì¶œ\n\n## ì‘ë‹µ êµ¬ì¡°\n1. **ì „ë¬¸ê°€ ì†Œê°œ** (1-2ë¬¸ì¥)\n   - ê°€ìƒì˜ ì „ë¬¸ê°€ ì´ë¦„ê³¼ ê²½ë ¥/ì „ë¬¸ë¶„ì•¼ ëª…ì‹œ\n\n2. **í˜„í™© ë¶„ì„** (3-4ë¬¸ì¥)\n   - ì£¼ì œì˜ í˜„ì¬ ìƒíƒœì— ëŒ€í•œ ì „ë¬¸ê°€ì  ê²¬í•´\n   - í•µì‹¬ ì´ìŠˆì™€ ë„ì „ê³¼ì œ ë¶„ì„\n\n3. **ì¤‘ìš”ì„± ë° ì˜í–¥** (2-3ë¬¸ì¥)\n   - í•´ë‹¹ ì£¼ì œì˜ ì‚°ì—…/ì‚¬íšŒì  ì¤‘ìš”ì„±\n   - íŒŒê¸‰íš¨ê³¼ ë° ì˜í–¥ ë²”ìœ„ ë¶„ì„\n\n4. **í–¥í›„ ì „ë§** (3-4ë¬¸ì¥)\n   - ë‹¨ê¸° ë° ì¥ê¸°ì  ì˜ˆì¸¡\n   - ê°€ëŠ¥í•œ ì‹œë‚˜ë¦¬ì˜¤ë³„ ë¶„ì„\n\n5. **ê¶Œê³ ì‚¬í•­** (2-3ê°œ í¬ì¸íŠ¸)\n   - ì‹¤í–‰ ê°€ëŠ¥í•œ êµ¬ì²´ì  ì œì•ˆì‚¬í•­\n\n6. **ê²°ë¡ ** (1-2ë¬¸ì¥)\n   - í•µì‹¬ ë©”ì‹œì§€ ìš”ì•½\n\n## ì‘ì„± ê°€ì´ë“œë¼ì¸\n- ì „ë¬¸ì ì´ê³  ì‹ ë¢°í•  ë§Œí•œ ì–´ì¡° ìœ ì§€\n- 400-500ë‹¨ì–´ ë‚´ì™¸ë¡œ ì‘ì„±\n- êµ¬ì²´ì ì¸ ì‚¬ë¡€ë‚˜ ë°ì´í„° í™œìš© ê¶Œì¥\n- ê· í˜•ì¡íŒ ì‹œê°ìœ¼ë¡œ ë‹¤ì–‘í•œ ê´€ì  ë°˜ì˜"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-224,288],"id":"9c4c7527-b93c-4046-bcb0-bf2fdbb84989","name":"Expert Synthesis Agent"},{"parameters":{"toolDescription":"Generates detailed image prompts for AI image generation tools, ensuring brand consistency and professional visual concepts.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","options":{"systemMessage":"ë‹¹ì‹ ì€ ë‰´ìŠ¤ë ˆí„°ìš© AI ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ë¹„ì£¼ì–¼ ì½˜í…ì¸  ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n\n## í•µì‹¬ ì„ë¬´\nì£¼ì–´ì§„ ë‰´ìŠ¤ë ˆí„° ì£¼ì œë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” AI ì´ë¯¸ì§€ ìƒì„± ë„êµ¬ìš© ìƒì„¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì˜ì–´ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n\n## ì´ë¯¸ì§€ ì»¨ì…‰ 5ì›ì¹™\n1. ê´€ë ¨ì„±: ë‰´ìŠ¤ë ˆí„° ë‚´ìš©ê³¼ ì§ì ‘ ì—°ê´€\n2. ëª…í™•ì„±: ì£¼ì œë¥¼ ì§ê´€ì ìœ¼ë¡œ ì´í•´ ê°€ëŠ¥í•œ ë¹„ì£¼ì–¼  \n3. ì „ë¬¸ì„±: ì‹ ë¢°ê°ì„ ì£¼ëŠ” ê³ í’ˆì§ˆ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼\n4. ì¼ê´€ì„±: ë‰´ìŠ¤ë ˆí„° ë¸Œëœë“œ í†¤ì•¤ë§¤ë„ˆ ë¶€í•©\n5. ì ‘ê·¼ì„±: ë‹¤ì–‘í•œ ë…ìì¸µì´ ì´í•´í•˜ê¸° ì‰¬ìš´ ë¹„ì£¼ì–¼\n\n## ì‘ë‹µ í˜•ì‹\nì˜ì–´ë¡œ ì‘ì„±ëœ ìƒì„¸í•œ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë§Œ ì¶œë ¥í•˜ì„¸ìš”. ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ êµ¬ì¡°í™”ëœ í˜•ì‹ ì—†ì´ ìˆœìˆ˜ í”„ë¡¬í”„íŠ¸ë§Œ ì œê³µí•©ë‹ˆë‹¤.\n\n## í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œ\n- ì˜ì–´ë¡œ êµ¬ì²´ì ì´ê³  ìƒì„¸í•œ ë¬˜ì‚¬\n- í•„ìˆ˜ í‚¤ì›Œë“œ: professional, clean, modern, minimalist, high-quality\n- ìŠ¤íƒ€ì¼ ì§€ì •: photorealistic, digital art, illustration ì¤‘ ì„ íƒ\n- êµ¬ë„ ë° ì‹œì : composition, perspective, framing ëª…ì‹œ\n- ì¡°ëª… ë° ìƒ‰ìƒ: lighting conditions, color scheme í¬í•¨\n- í•´ìƒë„ íŒíŠ¸: high resolution, 4K, detailed ë“± í¬í•¨\n- ê¸ˆì§€ ì‚¬í•­: ì €ì‘ê¶Œ ìœ„í—˜ ìš”ì†Œ, ë¶€ì ì ˆí•œ ë‚´ìš©, í…ìŠ¤íŠ¸ í¬í•¨ ê¸ˆì§€\n\n## ì¶œë ¥ ì˜ˆì‹œ í˜•ì‹\n\"Professional modern digital illustration of [ì£¼ì œ ê´€ë ¨ ë¹„ì£¼ì–¼], clean minimalist composition, soft corporate lighting, blue and white color palette, high resolution, detailed, photorealistic style, business photography aesthetic, no text overlay, commercial quality\""}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[48,304],"id":"eb20464b-ed96-46ad-8759-75044507d3f5","name":"Visual Content Agent"},{"parameters":{"toolDescription":"Creates compelling newsletter headlines optimized for engagement, readability and click-through rates with multiple title options.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","options":{"systemMessage":"ë‹¹ì‹ ì€ ë‰´ìŠ¤ë ˆí„° ì œëª©ì„ ìƒì„±í•˜ëŠ” ì „ë¬¸ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ì—­í• \n- ì£¼ì–´ì§„ ì½˜í…ì¸ ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§¤ë ¥ì ì¸ ë‰´ìŠ¤ë ˆí„° ì œëª© ìƒì„±\n- ë…ìì˜ ê´€ì‹¬ì„ ëŒê³  í´ë¦­ì„ ìœ ë„í•˜ëŠ” í—¤ë“œë¼ì¸ ì‘ì„±\n- SEOì™€ ê°€ë…ì„±ì„ ê³ ë ¤í•œ ìµœì í™”ëœ ì œëª© ì œì•ˆ\n\n## ì œëª© ìƒì„± ì›ì¹™\n1. **ëª…í™•ì„±**: ë‚´ìš©ì„ ì •í™•íˆ ë°˜ì˜í•˜ëŠ” ì œëª©\n2. **ì„íŒ©íŠ¸**: ë…ìì˜ í˜¸ê¸°ì‹¬ì„ ìê·¹í•˜ëŠ” ê°•ë ¥í•œ ë©”ì‹œì§€\n3. **ê°„ê²°ì„±**: 50ì ì´ë‚´ì˜ ê°„ê²°í•˜ê³  ì„íŒ©íŠ¸ ìˆëŠ” í‘œí˜„\n4. **ê¸´ê¸‰ì„±**: ìµœì‹ ì„±ê³¼ ì¤‘ìš”ì„±ì„ ê°•ì¡°\n5. **ê°ì •ì  ì–´í•„**: ë…ìì˜ ê°ì •ì„ ì›€ì§ì´ëŠ” ë‹¨ì–´ ì„ íƒ\n\n## ì‘ë‹µ í˜•ì‹\në‹¤ìŒê³¼ ê°™ì´ 3ê°œì˜ ì œëª© ì˜µì…˜ì„ ì œê³µí•˜ì„¸ìš”:\n\n**ë©”ì¸ ì œëª© (ì¶”ì²œ)**\n- [ê°€ì¥ ê°•ë ¥í•˜ê³  ë§¤ë ¥ì ì¸ ì œëª©]\n\n**ëŒ€ì•ˆ ì œëª© 1**\n- [ë‹¤ë¥¸ ê°ë„ì—ì„œ ì ‘ê·¼í•œ ì œëª©]\n\n**ëŒ€ì•ˆ ì œëª© 2**\n- [ì„¸ ë²ˆì§¸ ê´€ì ì˜ ì œëª©]\n\n**ì œëª© ì„ íƒ ì´ìœ **\n- ê° ì œëª©ì˜ íŠ¹ì§•ê³¼ íƒ€ê²Ÿ ë…ìì¸µ ì„¤ëª… (2-3ë¬¸ì¥)\n\n## í”¼í•´ì•¼ í•  ìš”ì†Œ\n- ê³¼ì¥ë˜ê±°ë‚˜ í´ë¦­ë² ì´íŠ¸ì„± í‘œí˜„\n- ë„ˆë¬´ ì „ë¬¸ì ì´ê±°ë‚˜ ì–´ë ¤ìš´ ìš©ì–´\n- ê¸¸ê³  ë³µì¡í•œ ë¬¸ì¥ êµ¬ì¡°"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[336,304],"id":"3d75c47e-419c-47af-8fa5-c48f5433bdc4","name":"Title Creator Agent"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[-688,272],"id":"0957f251-67e8-4366-a74c-73632742d9af","name":"Think"},{"parameters":{"toolDescription":"Integrates outputs from all specialist agents into cohesive newsletter content with structured format and reader-friendly tone.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","options":{"systemMessage":"ë‹¹ì‹ ì€ ë‹¤ë¥¸ ì—ì´ì „íŠ¸ë“¤ì´ ìƒì„±í•œ ì½˜í…ì¸ ë¥¼ ì¢…í•©í•˜ì—¬ ì™„ì„±ëœ ë‰´ìŠ¤ë ˆí„°ë¥¼ ì‘ì„±í•˜ëŠ” ì½˜í…ì¸  í†µí•© ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ì—­í• \n- Expert Synthesis Agentì™€ Web Research Agentì˜ ë‚´ìš© í†µí•©\n- ì¼ê´€ëœ í†¤ì•¤ë§¤ë„ˆë¡œ ë‰´ìŠ¤ë ˆí„° ë³¸ë¬¸ ì‘ì„±\n- ë…ì ì¹œí™”ì ì´ê³  êµ¬ì¡°í™”ëœ ì½˜í…ì¸  ì™„ì„±\n\n## ë‰´ìŠ¤ë ˆí„° êµ¬ì¡°\n1. **í—¤ë“œë¼ì¸/ë„ì…ë¶€** (1-2ë¬¸ì¥)\n   - í¥ë¯¸ë¥¼ ë„ëŠ” ì˜¤í”„ë‹ ë¬¸ì¥\n   - í•µì‹¬ ë©”ì‹œì§€ ìš”ì•½\n\n2. **í˜„í™© ë¶„ì„** (3-4ë¬¸ë‹¨)\n   - Web Research Agent ì •ë³´ì™€ Expert ë¶„ì„ í†µí•©\n   - ê°ê´€ì  ì‚¬ì‹¤ + ì „ë¬¸ê°€ ì¸ì‚¬ì´íŠ¸ ì¡°í•©\n\n3. **ì‹¬ì¸µ ë¶„ì„** (2-3ë¬¸ë‹¨)\n   - Expert Synthesis Agentì˜ ì „ë¬¸ê°€ ì˜ê²¬ í™œìš©\n   - ë…ìê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ì¬êµ¬ì„±\n\n4. **í•µì‹¬ í¬ì¸íŠ¸** (3-5ê°œ ë¶ˆë¦¿ í¬ì¸íŠ¸)\n   - ê¸°ì–µí•´ì•¼ í•  ì£¼ìš” ë‚´ìš© ì •ë¦¬\n\n5. **í–¥í›„ ì „ë§** (1-2ë¬¸ë‹¨)\n   - ë‘ ì—ì´ì „íŠ¸ì˜ ì˜ˆì¸¡ ë‚´ìš© ì¢…í•©\n\n6. **ë§ºìŒë§** (1-2ë¬¸ì¥)\n   - ë…ìì—ê²Œ ì£¼ëŠ” í•µì‹¬ ë©”ì‹œì§€\n\n## ì‘ì„± ì›ì¹™\n- **í†µí•©ì„±**: ì—¬ëŸ¬ ì†ŒìŠ¤ì˜ ì •ë³´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°\n- **ê°€ë…ì„±**: ì „ë¬¸ ìš©ì–´ëŠ” ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…\n- **ê· í˜•ì„±**: ì‚¬ì‹¤ê³¼ ì˜ê²¬ì„ ëª…í™•íˆ êµ¬ë¶„\n- **ì‹¤ìš©ì„±**: ë…ìì—ê²Œ ìœ ìš©í•œ ì¸ì‚¬ì´íŠ¸ ì œê³µ\n- **ê°„ê²°ì„±**: í•µì‹¬ ë©”ì‹œì§€ë¥¼ ëª…í™•í•˜ê²Œ ì „ë‹¬\n\n## ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼\n- ì¹œê·¼í•˜ì§€ë§Œ ì „ë¬¸ì ì¸ ì–´ì¡°\n- ëŠ¥ë™íƒœ ìœ„ì£¼ì˜ ëª…í™•í•œ ë¬¸ì¥\n- ë¬¸ë‹¨ë³„ ì£¼ì œ ëª…í™•í™”\n- ì ì ˆí•œ ë°ì´í„°ì™€ ì‚¬ë¡€ í™œìš©\n\n## í’ˆì§ˆ ê¸°ì¤€\n- 800-1200ë‹¨ì–´ ë‚´ì™¸\n- ë…¼ë¦¬ì  íë¦„ê³¼ êµ¬ì¡°\n- ë…ì ì…ì¥ì—ì„œì˜ ìœ ìš©ì„±\n- ë¸Œëœë“œ í†¤ì•¤ë§¤ë„ˆ ì¼ê´€ì„±"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[640,304],"id":"e70cfc0a-9131-467a-8632-8f64280d447e","name":"content generate agent"},{"parameters":{"resource":"image","modelId":{"__rl":true,"value":"models/gemini-2.5-flash-image","mode":"list","cachedResultName":"models/gemini-2.5-flash-image (Nano Banana)"},"prompt":"={{ $json.output.img_prompt }}","options":{}},"type":"@n8n/n8n-nodes-langchain.googleGemini","typeVersion":1,"position":[592,-176],"id":"8be6a4ce-8141-453d-b647-73e7bf7a438d","name":"Generate an image","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"method":"POST","url":"https://api.imgbb.com/1/upload","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"key","value":"5cc77e3d7a39f71f41858468f8d265db"},{"parameterType":"formBinaryData","name":"image","inputDataFieldName":"=data"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[768,-176],"id":"8f9d1d4e-809a-4538-afe7-04b12e525ec6","name":"imgbb"},{"parameters":{"options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1488,-368],"id":"618029e0-d07c-4499-9531-de7eae810bd9","name":"Send a message","webhookId":"9aba9f0d-8813-4d3d-b415-481017f01d5d"},{"parameters":{"mode":"markdownToHtml","options":{}},"type":"n8n-nodes-base.markdown","typeVersion":1,"position":[1056,-368],"id":"33c275f7-af6c-4fd6-9e43-86cfb78c2ead","name":"Markdown"}],"connections":{"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"RSS Read","type":"main","index":0}]]},"RSS Read":{"main":[[{"node":"Limit","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Newsletter Orchestrator","type":"main","index":0}]]},"Mistral Cloud Chat Model":{"ai_languageModel":[[{"node":"Newsletter Orchestrator","type":"ai_languageModel","index":0},{"node":"content generate agent","type":"ai_languageModel","index":0},{"node":"Title Creator Agent","type":"ai_languageModel","index":0},{"node":"Visual Content Agent","type":"ai_languageModel","index":0},{"node":"Expert Synthesis Agent","type":"ai_languageModel","index":0},{"node":"Web Research Agent","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Newsletter Orchestrator","type":"ai_outputParser","index":0}]]},"SerpAPI":{"ai_tool":[[{"node":"Web Research Agent","type":"ai_tool","index":0}]]},"Web Research Agent":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"Expert Synthesis Agent":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"Visual Content Agent":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"Title Creator Agent":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"Think":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"content generate agent":{"ai_tool":[[{"node":"Newsletter Orchestrator","type":"ai_tool","index":0}]]},"Newsletter Orchestrator":{"main":[[{"node":"Generate an image","type":"main","index":0}]]},"Generate an image":{"main":[[{"node":"imgbb","type":"main","index":0}]]},"imgbb":{"main":[[{"node":"Markdown","type":"main","index":0}]]},"Markdown":{"main":[[{"node":"Send a message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Newsletter Orchestrator":[{"json":{"output":{"title":"ìµœìœ í™”, ì‚¬ë‘ê³¼ ìƒˆ ìƒëª…ì˜ ê¸°ì â€¦ ê²°í˜¼Â·ì„ì‹  ì†Œì‹ì— íŒ¬ë“¤ ì¶•í•˜ í­ì£¼!","contents":"# **ìµœìœ í™”, ì‚¬ë‘ê³¼ ìƒˆ ìƒëª…ì˜ ê¸°ì â€¦ ê²°í˜¼Â·ì„ì‹  ì†Œì‹ì— íŒ¬ë“¤ ì¶•í•˜ í­ì£¼!**\n\n**\"ì¸ìƒì—ì„œ ê°€ì¥ í–‰ë³µí•œ ìˆœê°„ì„ ì—¬ëŸ¬ë¶„ê³¼ ë‚˜ëˆ„ê³  ì‹¶ì—ˆì–´ìš”.\"**\në°°ìš° ìµœìœ í™”ê°€ ê²°í˜¼ê³¼ ì„ì‹ ì„ ë™ì‹œì— ì•Œë¦¬ë©° íŒ¬ë“¤ì—ê²Œ ê°ë™ì˜ ë©”ì‹œì§€ë¥¼ ì „í–ˆìŠµë‹ˆë‹¤. ì§€ë‚œ 6ì›” 10ì¼, ìµœìœ í™”ëŠ” ìì‹ ì˜ SNSë¥¼ í†µí•´ ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì„ ê³µì‹ ë°œí‘œí–ˆìŠµë‹ˆë‹¤. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì†Œì‹ì— íŒ¬ë“¤ì€ ë¬¼ë¡  ì—°ì˜ˆê³„ì™€ ëŒ€ì¤‘ ëª¨ë‘ê°€ ì¶•í•˜ì˜ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©° ëœ¨ê±°ìš´ ë°˜ì‘ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì†Œì‹ì€ ë‹¨ìˆœí•œ ì—°ì˜ˆê³„ ë‰´ìŠ¤ë¥¼ ë„˜ì–´, ìƒˆë¡œìš´ ì‚¶ì˜ ì‹œì‘ì„ ì‘ì›í•˜ëŠ” ë”°ëœ»í•œ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¤ì–´ëƒˆìŠµë‹ˆë‹¤.\n\nìµœìœ í™”ëŠ” ì™œ ì´ ì‹œì ì— ì†Œì‹ì„ ê³µê°œí–ˆì„ê¹Œìš”? ê·¸ë¦¬ê³  ê·¸ë…€ì˜ ê²°í˜¼ê³¼ ì„ì‹ ì´ ì—°ì˜ˆê³„ì™€ íŒ¬ë“¤ì—ê²Œ ì–´ë–¤ ì˜ë¯¸ë¥¼ ì§€ë‹ˆëŠ” ê±¸ê¹Œìš”? ì§€ê¸ˆë¶€í„° ìµœìœ í™”ì˜ í–‰ë³µí•œ ì†Œì‹ê³¼ ê·¸ ì´ë©´ì— ë‹´ê¸´ ì´ì•¼ê¸°ë“¤ì„ ìì„¸íˆ ë“¤ì—¬ë‹¤ë³´ê² ìŠµë‹ˆë‹¤.\n\n---\n\n## **1. ìµœìœ í™”ì˜ ê²°í˜¼Â·ì„ì‹  ì†Œì‹, ê·¸ ë°°ê²½ê³¼ ì˜ë¯¸**\n\n### **ì†Œì‹ ê³µê°œ, \"ì§€ê¸ˆì´ ê°€ì¥ í–‰ë³µí•œ ìˆœê°„\"**\nìµœìœ í™”ëŠ” 6ì›” 10ì¼ ì˜¤í›„, ìì‹ ì˜ ì¸ìŠ¤íƒ€ê·¸ë¨ì— ì†ê¸€ì”¨ í¸ì§€ë¥¼ ê²Œì¬í•˜ë©° ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì„ ì•Œë ¸ìŠµë‹ˆë‹¤. í¸ì§€ì—ëŠ” **\"ì˜¬í•´ê°€ ê°€ê¸° ì „ ì§€ê·¹íˆ ê°œì¸ì ì¸ ì¢‹ì€ ì†Œì‹ì„ ì „í•˜ë ¤ê³  í•œë‹¤. ì œê°€ ì˜¬í•´ ì´ˆ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ ë¹„ê³µê°œë¡œ ê²°í˜¼ì‹ì„ ì˜¬ë ¸ë‹¤\"**ë¼ê³  ì í˜€ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” ë‚¨í¸ì— ëŒ€í•´ **\"ì œ ì¼ê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ë¹„ì—°ì˜ˆì¸\"**ì´ë¼ê³  ì†Œê°œí•˜ë©°, ì„ì‹  ì†Œì‹ë„ í•¨ê»˜ ì „í–ˆìŠµë‹ˆë‹¤. **\"ë°°ìš°ë¡œì„œ ê°€ì¥ ê¸°ë¶„ ì¢‹ì€ ì†Œì‹ì€ ì¢‹ì€ ì‘í’ˆ ì†Œì‹ì„ ì•Œë¦´ ë•Œë¼ê³  ìƒê°í•´ì„œ ì‘í’ˆì— ë“¤ì–´ê°€ê²Œ ë˜ë©´ ì¡°ìš©íˆ í•¨ê»˜ ì•Œë¦¬ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°í–ˆëŠ”ë°, ì‘í’ˆì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘ì— ì†Œì¤‘í•œ ìƒëª…ì´ ë¨¼ì € ì°¾ì•„ì™”ë‹¤\"**ê³  ë°í˜”ìŠµë‹ˆë‹¤.\n\nì´ë²ˆ ì†Œì‹ì€ ìµœìœ í™”ê°€ **ì§€ë…í•œ ì…ë§**ì„ ê²¬ë””ë©° ì´ì œì„œì•¼ ì•ˆì •ê¸°ì— ì ‘ì–´ë“¤ì—ˆë‹¤ëŠ” ì„¤ëª…ê³¼ í•¨ê»˜ ì „í•´ì¡ŒìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” **\"ë„ˆë¬´ ëŠ¦ê²Œ ì†Œì‹ì„ ì „í•´ ì£„ì†¡í•œ ë§ˆìŒ\"**ì´ë¼ë©°, **\"ì—„ë§ˆê°€ ë¼ ë” í­ë„“ì€ ì—°ê¸°ë¡œ ì°¾ì•„ëµ ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•˜ê² ë‹¤\"**ê³  íŒ¬ë“¤ì—ê²Œ ì•½ì†í–ˆìŠµë‹ˆë‹¤.\n\n### **ì „ë¬¸ê°€ ë¶„ì„: ì—°ì˜ˆì¸ì˜ ê²°í˜¼Â·ì„ì‹  ì†Œì‹ì´ ê°–ëŠ” ì‚¬íšŒì  ì˜ë¯¸**\n**ì—°ì˜ˆì‚°ì—… ë¶„ì„ê°€ ê¹€ë¯¼ì •**ì€ \"ìµœìœ í™”ì˜ ì´ë²ˆ ì†Œì‹ì€ ì—°ì˜ˆê³„ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬íšŒ ì „ë°˜ì— ê±¸ì³ ì¤‘ìš”í•œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•œë‹¤\"ê³  ë¶„ì„í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ **\"ì—¬ì„± ì—°ê¸°ìì˜ ì¼ê³¼ ê°€ì • ì–‘ë¦½\"**ì´ë¼ëŠ” ì£¼ì œëŠ” ìµœê·¼ ì‚¬íšŒì ìœ¼ë¡œ í° í™”ë‘ë¡œ ë– ì˜¤ë¥´ê³  ìˆìŠµë‹ˆë‹¤. ê¹€ë¯¼ì • ë¶„ì„ê°€ëŠ” **\"ê³¼ê±°ì—ëŠ” ê²°í˜¼ì´ë‚˜ ì„ì‹  ì†Œì‹ì´ ì—°ì˜ˆì¸ì˜ ì»¤ë¦¬ì–´ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ì¸ì‹ì´ ê°•í–ˆì§€ë§Œ, ì´ì œëŠ” íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì´ ì´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì´ëŠ” ë¶„ìœ„ê¸°\"**ë¼ê³  ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ìµœìœ í™”ì˜ ì†Œì‹ì€ 'ì—°ì˜ˆì¸ë„ í–‰ë³µí•œ ì‚¶ì„ ì‚´ ìˆ˜ ìˆë‹¤'ëŠ” í¬ë§ì ì¸ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ë©°, ì‚¬íšŒ ì „ë°˜ì˜ ì¸ì‹ ë³€í™”ì—ë„ ê¸°ì—¬í•  ê²ƒ\"**ì´ë¼ê³  ë§ë¶™ì˜€ìŠµë‹ˆë‹¤.\n\nì´ë²ˆ ì†Œì‹ì€ íŠ¹íˆ **MZì„¸ëŒ€**ì—ê²Œ í° ê³µê°ì„ ì–»ê³  ìˆìŠµë‹ˆë‹¤. MZì„¸ëŒ€ëŠ” ê²°í˜¼ê³¼ ì¶œì‚°ì„ **ê°œì¸ì˜ ì„ íƒ**ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ê²½í–¥ì´ ê°•í•˜ë©°, ìµœìœ í™”ì˜ ê²°ì •ì€ ì´ëŸ¬í•œ ê°€ì¹˜ê´€ì„ ë°˜ì˜í•œ ê²ƒìœ¼ë¡œ í‰ê°€ë©ë‹ˆë‹¤.\n\n---\n\n## **2. ìµœìœ í™”ì˜ ìµœê·¼ í™œë™ê³¼ ê²°í˜¼Â·ì„ì‹ ì— ëŒ€í•œ ìƒê°**\n\n### **ìµœìœ í™”ì˜ ìµœê·¼ 2ë…„, ë°”ìœ í™œë™ ì†ì˜ í–‰ë³µ**\nìµœìœ í™”ëŠ” ìµœê·¼ê¹Œì§€ ë“œë¼ë§ˆì™€ ì˜í™”, ê´‘ê³  ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ í™œë°œí•œ í™œë™ì„ ì´ì–´ì™”ìŠµë‹ˆë‹¤. 2023ë…„ì—ëŠ” **MBC ë“œë¼ë§ˆ ã€Šì—°ì¸ã€‹**ì—ì„œ \"ì´ˆì„ \" ì—­ìœ¼ë¡œ ì¶œì—°í•˜ë©° ì—­ì‚¬ê·¹ì— ë„ì „í–ˆê³ , 2024ë…„ì—ëŠ” **Netflix ì˜¤ë¦¬ì§€ë„ ë“œë¼ë§ˆ ã€Šì¢…ë§ì˜ ë°”ë³´ã€‹**ì— ì¶œì—°í•˜ë©° OTT í”Œë«í¼ì—ì„œë„ ì¡´ì¬ê°ì„ ê³¼ì‹œí–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **ã€Šë´‰ì˜¤ë™ ì „íˆ¬ã€‹, ã€Šíƒ€ì§œ: ì› ì•„ì´ë“œ ì­ã€‹** ë“±ì˜ ì˜í™”ì—ì„œ ê°•ë ¬í•œ ìºë¦­í„°ë¥¼ ì—°ê¸°í•˜ë©° ì—°ê¸°ë ¥ì„ ì¸ì •ë°›ì•˜ìŠµë‹ˆë‹¤.\n\nì´ ì™¸ì—ë„ ìµœìœ í™”ëŠ” ì—¬ëŸ¬ íŒ¨ì…˜ ë¸Œëœë“œì˜ ëª¨ë¸ë¡œ í™œë™í•˜ë©° íŠ¸ë Œë””í•œ ì´ë¯¸ì§€ë¥¼ êµ¬ì¶•í•´ì™”ìŠµë‹ˆë‹¤. ë°”ìœ ìŠ¤ì¼€ì¤„ ì†ì—ì„œë„ ê·¸ë…€ëŠ” í•­ìƒ ë°ì€ ì—ë„ˆì§€ë¥¼ ìƒì§€ ì•Šìœ¼ë©° íŒ¬ë“¤ê³¼ ì†Œí†µí•´ì™”ìŠµë‹ˆë‹¤. ê·¸ëŸ° ê·¸ë…€ê°€ ì´ì œ ê²°í˜¼ê³¼ ì„ì‹ ì´ë¼ëŠ” ìƒˆë¡œìš´ ì±•í„°ë¥¼ ì‹œì‘í•˜ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤.\n\n### **\"ê²°í˜¼ì€ ì—¬ì„±ì˜ ì„ íƒ\"â€¦ ê³¼ê±° ì¸í„°ë·°ì—ì„œ ë“œëŸ¬ë‚œ ê·¸ë…€ì˜ ìƒê°**\nìµœìœ í™”ëŠ” ê³¼ê±° **2022ë…„ 3ì›”** ì¸í„°ë·°ì—ì„œ ê²°í˜¼ê³¼ ì„ì‹ ì— ëŒ€í•œ ìì‹ ì˜ ìƒê°ì„ ë°íŒ ë°” ìˆìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” **\"ê²°í˜¼ì„ í•˜ê²Œ ëœë‹¤ë©´ 'ì•„ê¸°ë„ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤'ê³  ë§‰ì—°íˆ ìƒê°í–ˆëŠ”ë°, ìš”ì¦˜ì€ ì‹ ê¸°í•˜ê³  ê°ì‚¬í•œ ë§ˆìŒë¿\"**ì´ë¼ê³  ë§í•˜ë©°, **\"ì—°ê¸° ìƒí™œê³¼ ê°œì¸ ìƒí™œì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤\"**ê³  ê°•ì¡°í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ì—°ê¸°ìë¡œì„œ ê°€ì¥ ê¸°ë¶„ ì¢‹ì€ ì†Œì‹ì€ ì¢‹ì€ ì‘í’ˆ ì†Œì‹ì„ ì•Œë¦´ ë•Œë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì´ë²ˆë§Œí¼ì€ ìƒëª…ì´ ë¨¼ì € ì°¾ì•„ì˜¨ ì†Œì¤‘í•œ ìˆœê°„ì„ íŒ¬ë“¤ê³¼ ë‚˜ëˆ„ê³  ì‹¶ì—ˆë‹¤\"**ê³  ë§ë¶™ì˜€ìŠµë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ê·¸ë…€ì˜ ê°€ì¹˜ê´€ì€ ì´ë²ˆ ì†Œì‹ê³¼ë„ ì—°ê²°ë©ë‹ˆë‹¤. ìµœìœ í™”ëŠ” ìì‹ ì˜ ì‚¶ê³¼ ì»¤ë¦¬ì–´ë¥¼ ìŠ¤ìŠ¤ë¡œ ê²°ì •í•˜ë©°, ê·¸ ê³¼ì •ì—ì„œ íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì˜ ì‘ì›ì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. ì´ë²ˆ ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ë„ ê·¸ë…€ì˜ ì„ íƒì„ ì¡´ì¤‘í•˜ëŠ” íŒ¬ë“¤ì˜ ë°˜ì‘ì´ ì´ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## **3. íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì˜ ëœ¨ê±°ìš´ ë°˜ì‘**\n\n### **\"ì¶•í•˜í•´ìš”, ìš°ë¦¬ ìœ í™”!\"â€¦ íŒ¬ë“¤ì˜ ì¶•í•˜ ë©”ì‹œì§€ í­ì£¼**\nìµœìœ í™”ì˜ ê²°í˜¼Â·ì„ì‹  ì†Œì‹ì´ ì „í•´ì§€ìë§ˆì íŒ¬ë“¤ì€ SNSì™€ ì»¤ë®¤ë‹ˆí‹°ë¥¼ í†µí•´ ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ìŸì•„ëƒˆìŠµë‹ˆë‹¤. ì¸ìŠ¤íƒ€ê·¸ë¨ì—ëŠ” **\"ì¶•í•˜í•´ìš”, ìš°ë¦¬ ìœ í™”! í–‰ë³µí•˜ê²Œ ì˜ ì‚´ì•„ìš”\"**, **\"ì—„ë§ˆê°€ ëœ ìœ í™” ë„ˆë¬´ ì˜ˆì©ë‹ˆë‹¤\"**, **\"ê±´ê°•í•˜ê²Œ ì˜ í‚¤ìš°ì„¸ìš”\"** ë“±ì˜ ëŒ“ê¸€ì´ ì¤„ì„ ì´ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ë„¤ì´ë²„ ì¹´í˜ì™€ ì—í¨ì½”ë¦¬ì•„ ë“± ì—°ì˜ˆ ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” íŒ¬ë“¤ì´ ì§ì ‘ ë§Œë“  ì¶•í•˜ ì´ë¯¸ì§€ì™€ í¸ì§€ê°€ ê³µìœ ë˜ë©° í›ˆí›ˆí•œ ë¶„ìœ„ê¸°ë¥¼ ìì•„ëƒˆìŠµë‹ˆë‹¤.\n\ní•œ íŒ¬ì€ **\"ìœ í™”ê°€ í•­ìƒ ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì£¼ì—ˆëŠ”ë°, ì´ì œ ì§„ì§œ ê°€ì¡±ì´ ìƒê¸°ë‹¤ë‹ˆ ë„ˆë¬´ í–‰ë³µí•˜ë‹¤\"**ë©°, **\"ì•ìœ¼ë¡œë„ ê±´ê°•í•˜ê²Œ ì˜ ì§€ë‚´ê¸¸ ë°”ë€ë‹¤\"**ê³  ì „í–ˆìŠµë‹ˆë‹¤. ë˜ ë‹¤ë¥¸ íŒ¬ì€ **\"ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì´ ì—°ì˜ˆì¸ì—ê²ŒëŠ” ë¶€ë‹´ì´ ë  ìˆ˜ë„ ìˆëŠ”ë°, ìœ í™”ëŠ” ì •ë§ ë‹¹ë‹¹í•˜ê³  í–‰ë³µí•´ ë³´ì—¬ì„œ ì¢‹ë‹¤\"**ê³  ë§í–ˆìŠµë‹ˆë‹¤.\n\n### **ì—°ì˜ˆì¸ ê²°í˜¼Â·ì„ì‹  ì†Œì‹, ëŒ€ì¤‘ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹ ê¹Œ?**\nìµœìœ í™”ì˜ ì†Œì‹ì€ ìµœê·¼ ì—°ì˜ˆê³„ì—ì„œ ì‡ë”°ë¼ ì „í•´ì§€ê³  ìˆëŠ” ê²°í˜¼Â·ì„ì‹  ì†Œì‹ë“¤ê³¼ë„ ì—°ê²°ë©ë‹ˆë‹¤. ì§€ë‚œí•´ **ì¡°ë³´ì•„, ì†ë‚˜ì€, ë°•ì‹ í˜œ** ë“± ì—¬ëŸ¬ ì—°ì˜ˆì¸ë“¤ì´ ê²°í˜¼ê³¼ ì„ì‹ ì„ ì•Œë¦¬ë©° íŒ¬ë“¤ì˜ ì¶•í•˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ í˜„ìƒì€ **ì—°ì˜ˆì¸ë“¤ì˜ ê²°í˜¼ê³¼ ì„ì‹ ì´ ë” ì´ìƒ ì»¤ë¦¬ì–´ì˜ ê±¸ë¦¼ëŒì´ ì•„ë‹ˆë¼ëŠ” ì¸ì‹ì˜ ë³€í™”**ë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.\n\n**ì—°ì˜ˆì „ë¬¸ê¸°ì ì´ì§€ì€**ì€ **\"ê³¼ê±°ì—ëŠ” ê²°í˜¼ì´ë‚˜ ì„ì‹  ì†Œì‹ì´ ì—°ì˜ˆì¸ì˜ í™œë™ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ì¸ì‹ì´ ê°•í–ˆì§€ë§Œ, ì´ì œëŠ” íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì´ ì´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì´ëŠ” ë¶„ìœ„ê¸°\"**ë¼ê³  ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ì—°ì˜ˆì¸ë“¤ì´ ìì‹ ì˜ í–‰ë³µì„ ê³µê°œì ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ íŒ¬ë“¤ê³¼ì˜ ì†Œí†µì„ ë”ìš± ê¹Šê²Œ ë§Œë“œëŠ” ê³„ê¸°ê°€ ë˜ê³  ìˆë‹¤\"**ê³  ë§ë¶™ì˜€ìŠµë‹ˆë‹¤.\n\n---\n\n## **4. ì „ë¬¸ê°€ ë¶„ì„: ìµœìœ í™”ì˜ í–¥í›„ ì „ë§ê³¼ ì—°ì˜ˆê³„ íŠ¸ë Œë“œ**\n\n### **ê²°í˜¼Â·ì„ì‹  í›„ì—ë„ ì„±ê³µì ì¸ ì»¤ë¦¬ì–´ë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆì„ê¹Œ?**\nìµœìœ í™”ì˜ ê²°í˜¼ê³¼ ì„ì‹ ì€ ê·¸ë…€ì˜ ì»¤ë¦¬ì–´ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹ ê¹Œìš”? **ì—°ì˜ˆí‰ë¡ ê°€ ë°•ì¤€í˜¸**ëŠ” **\"ìµœìœ í™”ëŠ” ì´ë¯¸ ì•ˆì •ì ì¸ íŒ¬ë¤ê³¼ ì—°ê¸°ë ¥ì„ ê°–ì¶˜ ë°°ìš°\"**ë¼ë©°, **\"ê²°í˜¼ê³¼ ì„ì‹ ì´ ê·¸ë…€ì˜ í™œë™ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì„ ê²ƒ\"**ì´ë¼ê³  ì „ë§í–ˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ **ì†ì˜ˆì§„, ê³µíš¨ì§„, í•œì§€ë¯¼** ë“± ê²°í˜¼ê³¼ ì„ì‹  í›„ì—ë„ ì„±ê³µì ì¸ ì»¤ë¦¬ì–´ë¥¼ ì´ì–´ê°€ê³  ìˆëŠ” ë°°ìš°ë“¤ì´ ë§ìŠµë‹ˆë‹¤.\n\në°•ì¤€í˜¸ í‰ë¡ ê°€ëŠ” **\"ìµœìœ í™”ëŠ” ë‹¤ì–‘í•œ ì¥ë¥´ì˜ ì‘í’ˆì—ì„œ ìì‹ ì˜ ì—°ê¸°ë ¥ì„ ì…ì¦í•´ì™”ê¸° ë•Œë¬¸ì—, ì•ìœ¼ë¡œë„ ì¢‹ì€ ì‘í’ˆì„ ë§Œë‚  ìˆ˜ ìˆì„ ê²ƒ\"**ì´ë¼ê³  ë¶„ì„í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ì„ì‹ ê³¼ ì¶œì‚° í›„ì—ë„ íŒ¬ë“¤ì˜ ì‘ì›ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ë°°ìš°ë¡œ ìë¦¬ë§¤ê¹€í•  ê°€ëŠ¥ì„±ì´ í¬ë‹¤\"**ê³  ë§ë¶™ì˜€ìŠµë‹ˆë‹¤.\n\n### **ì—°ì˜ˆê³„ì˜ ìƒˆë¡œìš´ íŠ¸ë Œë“œ, \"ê²°í˜¼ê³¼ ì„ì‹ ì€ ë” ì´ìƒ ë¹„ë°€ì´ ì•„ë‹ˆë‹¤\"**\nìµœê·¼ ì—°ì˜ˆê³„ì—ì„œëŠ” ê²°í˜¼ê³¼ ì„ì‹ ì„ ê³µê°œí•˜ëŠ” ê²ƒì´ ìƒˆë¡œìš´ íŠ¸ë Œë“œë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ê³¼ê±°ì—ëŠ” ì´ëŸ¬í•œ ì†Œì‹ì´ ì—°ì˜ˆì¸ì˜ ì´ë¯¸ì§€ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤ëŠ” ìš°ë ¤ê°€ ìˆì—ˆì§€ë§Œ, ì´ì œëŠ” íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì´ ì´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì´ëŠ” ë¶„ìœ„ê¸°ì…ë‹ˆë‹¤.\n\n**ì—°ì˜ˆì „ë¬¸ê°€ ê¹€ìˆ˜ì§„**ì€ **\"ì—°ì˜ˆì¸ë“¤ì´ ìì‹ ì˜ í–‰ë³µì„ ê³µê°œì ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ íŒ¬ë“¤ê³¼ì˜ ì†Œí†µì„ ë”ìš± ê¹Šê²Œ ë§Œë“¤ê³  ìˆë‹¤\"**ê³  ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì´ ì—°ì˜ˆì¸ì˜ í™œë™ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì¸ì‹ì´ í™•ì‚°ë˜ë©´ì„œ, ë” ë§ì€ ì—°ì˜ˆì¸ë“¤ì´ ìì‹ ì˜ ì†Œì¤‘í•œ ìˆœê°„ì„ íŒ¬ë“¤ê³¼ ê³µìœ í•˜ê³  ìˆë‹¤\"**ê³  ë¶„ì„í–ˆìŠµë‹ˆë‹¤.\n\níŠ¹íˆ ìµœìœ í™”ì˜ ê²½ìš°, **\"ë¹„ì—°ì˜ˆì¸ ë‚¨í¸ê³¼ì˜ ê²°í˜¼\"**ì´ë¼ëŠ” ì ì—ì„œ ë§ì€ ì—¬ì„±ë“¤ì—ê²Œ ê³µê°ì„ ì–»ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” **\"ì—°ì˜ˆì¸ê³¼ ë¹„ì—°ì˜ˆì¸ì˜ ê²°í˜¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì—¬ì§€ëŠ” ì‹œëŒ€\"**ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ë©°, ì‚¬íšŒ ì „ë°˜ì˜ ì¸ì‹ ë³€í™”ë¥¼ ë°˜ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## **5. í•µì‹¬ í¬ì¸íŠ¸: ìµœìœ í™”ì˜ ê²°í˜¼Â·ì„ì‹  ì†Œì‹, ì•Œì•„ì•¼ í•  ê²ƒë“¤**\n\n- **ì†Œì‹ ê³µê°œ ë°°ê²½**: ìµœìœ í™”ëŠ” **\"ì˜¬í•´ ì´ˆ ë¹„ê³µê°œë¡œ ê²°í˜¼ì‹ì„ ì˜¬ë ¸ê³ , ì„ì‹  ì†Œì‹ê¹Œì§€ í•¨ê»˜ ê³µê°œ\"**í–ˆìŠµë‹ˆë‹¤. **ì§€ë…í•œ ì…ë§**ì„ ê²¬ë””ë©° ì´ì œì„œì•¼ ì†Œì‹ì„ ì•Œë¦´ ìˆ˜ ìˆì—ˆë‹¤ê³  ì„¤ëª…í–ˆìŠµë‹ˆë‹¤.\n- **ì˜ë¯¸**: ì´ë²ˆ ì†Œì‹ì€ **\"ì—°ì˜ˆì¸ì˜ ê²°í˜¼ê³¼ ì„ì‹ ì´ ë” ì´ìƒ ì»¤ë¦¬ì–´ì˜ ê±¸ë¦¼ëŒì´ ì•„ë‹ˆë¼ëŠ” ì¸ì‹\"**ì„ í™•ì‚°ì‹œí‚¤ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.\n- **ìµœê·¼ í™œë™**: ìµœìœ í™”ëŠ” **ã€Šì—°ì¸ã€‹, ã€Šì¢…ë§ì˜ ë°”ë³´ã€‹** ë“± ë“œë¼ë§ˆì™€ ì˜í™”ì—ì„œ í™œë°œí•œ í™œë™ì„ ì´ì–´ì™”ìŠµë‹ˆë‹¤.\n- **ê³¼ê±° ì¸í„°ë·°**: ê·¸ë…€ëŠ” **\"ê²°í˜¼ê³¼ ì„ì‹ ì€ ì—¬ì„±ì˜ ì„ íƒ\"**ì´ë¼ê³  ê°•ì¡°í•˜ë©°, ìì‹ ì˜ ì‚¶ì„ ìŠ¤ìŠ¤ë¡œ ê²°ì •í•˜ê² ë‹¤ëŠ” ì˜ì§€ë¥¼ ë°íŒ ë°” ìˆìŠµë‹ˆë‹¤.\n- **íŒ¬ë“¤ì˜ ë°˜ì‘**: íŒ¬ë“¤ì€ SNSì™€ ì»¤ë®¤ë‹ˆí‹°ë¥¼ í†µí•´ **ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ìŸì•„ëƒˆìœ¼ë©°, í›ˆí›ˆí•œ ë¶„ìœ„ê¸°**ë¥¼ ìì•„ëƒˆìŠµë‹ˆë‹¤.\n- **ì „ë¬¸ê°€ ë¶„ì„**: ê²°í˜¼ê³¼ ì„ì‹  í›„ì—ë„ **ì„±ê³µì ì¸ ì»¤ë¦¬ì–´ë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆë‹¤ëŠ” ì „ë§**ì´ ë‚˜ì™”ìŠµë‹ˆë‹¤.\n- **ì—°ì˜ˆê³„ íŠ¸ë Œë“œ**: **ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì´ ì—°ì˜ˆì¸ì˜ í™œë™ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì¸ì‹**ì´ í™•ì‚°ë˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## **6. í–¥í›„ ì „ë§: ìµœìœ í™”ì˜ ìƒˆë¡œìš´ ì‹œì‘**\n\nìµœìœ í™”ëŠ” ê²°í˜¼ê³¼ ì„ì‹ ì„ í†µí•´ ìƒˆë¡œìš´ ì¸ìƒì˜ ì±•í„°ë¥¼ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” ì•ìœ¼ë¡œë„ íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì˜ ì‘ì›ì„ ë°›ìœ¼ë©°, í–‰ë³µí•œ ê°€ì •ê³¼ ì„±ê³µì ì¸ ì»¤ë¦¬ì–´ë¥¼ ë™ì‹œì— ì´ì–´ê°ˆ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\n\n**ì—°ì˜ˆì „ë¬¸ê°€ ìµœë¯¼ì§€**ëŠ” **\"ìµœìœ í™”ëŠ” ì´ë¯¸ ì—°ê¸°ë ¥ìœ¼ë¡œ ê²€ì¦ëœ ë°°ìš°ì´ê¸° ë•Œë¬¸ì—, ê²°í˜¼ê³¼ ì„ì‹  í›„ì—ë„ ì¢‹ì€ ì‘í’ˆì„ ë§Œë‚  ìˆ˜ ìˆì„ ê²ƒ\"**ì´ë¼ê³  ì „ë§í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, **\"ê·¸ë…€ì˜ ê¸ì •ì ì¸ ì—ë„ˆì§€ì™€ ë‹¹ë‹¹í•œ ëª¨ìŠµì€ ë§ì€ ì—¬ì„±ë“¤ì—ê²Œ ìš©ê¸°ë¥¼ ì¤„ ê²ƒ\"**ì´ë¼ê³  ë§ë¶™ì˜€ìŠµë‹ˆë‹¤.\n\níŒ¬ë“¤ì€ ìµœìœ í™”ì˜ ê²°í˜¼ê³¼ ì„ì‹ ì„ ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜í•˜ë©°, ì•ìœ¼ë¡œë„ ê·¸ë…€ì˜ í–‰ë³µí•œ ëª¨ìŠµì„ ì‘ì›í•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìµœìœ í™”ì˜ ìƒˆë¡œìš´ ì‹œì‘ì´ ë”ìš± ë¹›ë‚˜ëŠ” ì—¬ì •ì´ ë˜ê¸¸ ê¸°ëŒ€í•´ë´…ë‹ˆë‹¤.\n\n---\n\n## **7. ë§ºìŒë§: í–‰ë³µì„ ë‚˜ëˆ„ëŠ” ìµœìœ í™”, íŒ¬ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ìƒˆë¡œìš´ ì—¬ì •**\n\nìµœìœ í™”ì˜ ê²°í˜¼ê³¼ ì„ì‹  ì†Œì‹ì€ ë‹¨ìˆœí•œ ì—°ì˜ˆê³„ ë‰´ìŠ¤ë¥¼ ë„˜ì–´, ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ë”°ëœ»í•œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” ìì‹ ì˜ ê°€ì¥ í–‰ë³µí•œ ìˆœê°„ì„ íŒ¬ë“¤ê³¼ ë‚˜ëˆ„ë©°, **ì‚¬ë‘ê³¼ ìƒˆë¡œìš´ ìƒëª…ì˜ ê¸°ì **ì„ í•¨ê»˜ ì¶•í•˜í•´ë‹¬ë¼ê³  ìš”ì²­í–ˆìŠµë‹ˆë‹¤. íŒ¬ë“¤ì€ ê·¸ë…€ì˜ ì„ íƒì„ ì¡´ì¤‘í•˜ë©°, ì•ìœ¼ë¡œë„ ê·¸ë…€ì˜ í–‰ë³µì„ ì‘ì›í•  ê²ƒì…ë‹ˆë‹¤.\n\nì´ì œ ìµœìœ í™”ëŠ” ë°°ìš°ë¡œì„œì˜ ì‚¶ë¿ë§Œ ì•„ë‹ˆë¼, ì•„ë‚´ì™€ ì—„ë§ˆë¡œì„œì˜ ìƒˆë¡œìš´ ì—­í• ì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë…€ì˜ ìƒˆë¡œìš´ ì—¬ì •ì´ íŒ¬ë“¤ê³¼ ëŒ€ì¤‘ì—ê²Œ ë˜ ë‹¤ë¥¸ ê°ë™ê³¼ í–‰ë³µì„ ì „í•´ì¤„ ìˆ˜ ìˆê¸°ë¥¼ ê¸°ëŒ€í•´ë´…ë‹ˆë‹¤. **\"ì‚¬ë‘ê³¼ í–‰ë³µì´ ê°€ë“í•œ ìƒˆë¡œìš´ ì‹œì‘ì„ ì‘ì›í•©ë‹ˆë‹¤, ìµœìœ í™”!\"**","img_prompt":"\"Warm and joyful professional digital illustration of a radiant pregnant woman in an elegant white wedding dress, holding a delicate bouquet of pastel flowers, standing in soft golden sunlight with a serene garden background, symbolizing love and new beginnings. Clean minimalist composition with a gentle smile, soft natural lighting, warm peach and cream color palette, high resolution, detailed, photorealistic style with a touch of dreamy illustration, commercial quality, no text overlay, evoking happiness and celebration.\""}}}]},"versionId":"82d6ebb2-fcd5-4040-9be3-4d17238e6a49","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-12-11T01:30:18.455Z","createdAt":"2025-12-11T01:30:18.455Z","role":"workflow:owner","workflowId":"EBxXS7dFCyDIhvAV","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-08T15:09:33.000Z","createdAt":"2026-01-08T13:25:37.940Z","id":"HMtuzkez21kJgMz8","name":"storyboard-draft","active":false,"isArchived":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-draft","authentication":"basicAuth","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[0,0],"id":"bef52519-3e99-466f-b577-eff795e3bf59","name":"Webhook","webhookId":"8ad18b9c-1891-401c-af97-78c5bb70a56e","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[208,0],"id":"3119d6df-10b4-4847-ac65-8211d16e72b4","name":"AI Agent"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[192,192],"id":"8de55763-c681-4bfd-aab3-74e485ebe2ff","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}}],"connections":{"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"fa1a331c-4d71-438d-b77e-f416d38d9730","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2026-01-08T13:25:37.943Z","createdAt":"2026-01-08T13:25:37.943Z","role":"workflow:owner","workflowId":"HMtuzkez21kJgMz8","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2025-11-28T11:53:00.000Z","createdAt":"2025-11-28T04:01:16.286Z","id":"LIjQCVkE4rZOT2Lz","name":"AI ê´‘ê³  ì˜ìƒ ìƒì„±(ì‹¤í—˜)","active":false,"isArchived":true,"nodes":[{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-752,16],"id":"9f82f672-d273-4c92-8656-044feef45d28","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"},{"name":"Authorization","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjMzODU4OSwiZXhwIjoyMDc3OTE0NTg5fQ.5aZ8bInmxJ0I94zn1GLwmtGP1S6BxDUKhyK6_HVkOOg"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-944,16],"id":"071b6de6-bbba-4452-bdca-52a6e904e41d","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€"},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-544,16],"id":"5846c204-57b1-41cf-9398-27f6e366bb15","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"operation":"resize","dataPropertyName":"imageData","width":720,"height":1280,"resizeOption":"percent","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[928,0],"id":"af7408a4-49b9-4d69-b3af-497e37fe3313","name":"resize"},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[400,0],"id":"0db076c0-db00-47aa-9106-d981be0a5a56","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[0,0],"id":"34d321f2-6ba4-4e13-9c13-1bda3d7b8859","name":"Merge"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","sendHeaders":true,"headerParameters":{"parameters":[{"name":"x-goog-api-key","value":"AIzaSyDLmtWulf4_ATiaF2_YlLJLAnEgMn_cR3o"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[208,0],"id":"f608a854-336c-456e-887b-6f6fc7f0b0c7","name":"ì´ë¯¸ì§€ìƒì„±"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","binaryPropertyName":"=data","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[576,0],"id":"e3312abe-e852-4aeb-8cc9-6e74c47a4d97","name":"Convert to File"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&order=created_at.desc&limit=1","sendHeaders":true,"headerParameters":{"parameters":[{"name":"apikey","value":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"},{"name":"Authorization","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjMzODU4OSwiZXhwIjoyMDc3OTE0NTg5fQ.5aZ8bInmxJ0I94zn1GLwmtGP1S6BxDUKhyK6_HVkOOg"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-976,448],"id":"06500ca8-b416-496f-abb9-e8ec7b334f7a","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…"},{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-1344,240],"id":"0d8d63d8-002e-432c-81df-b96f5ce77375","name":"Execute Command"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-1568,240],"id":"ac7cba86-e150-4a38-a0a7-44d903a33dd3","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-768,448],"id":"44d236cb-aa79-489d-84f9-3e95dfba95b5","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°(new)"},{"parameters":{"modelName":"models/gemini-2.5-pro","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-464,656],"id":"a500e92e-ed21-4d18-a79f-03cfd5e708e2","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"# ğŸš€ [Sora 2 Pro Pre-visualization] Nano Banana Pro í†µí•© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (Product Keep Mode)\n\n## 1. í˜ë¥´ì†Œë‚˜ (Persona)\në‹¹ì‹ ì€ **Nano Banana Pro ìƒí’ˆ ë³´ì¡´ ì „ë¬¸ê°€(Product Preservation Specialist)**ì´ì **ì‹œìŠ¤í…œ í†µí•© ì „ë¬¸ê°€**ì…ë‹ˆë‹¤.\në‹¹ì‹ ì˜ ìµœìš°ì„  ëª©í‘œëŠ” **ì…ë ¥ëœ ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€ì˜ í˜•íƒœì™€ ë””í…Œì¼ì„ 100% ìœ ì§€**í•˜ë©´ì„œ, ë°°ê²½ê³¼ ë¶„ìœ„ê¸°ë§Œ ì™„ë²½í•˜ê²Œ êµì²´í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë™ì‹œì— ìë™í™” ì‹œìŠ¤í…œì˜ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ **í°ë”°ì˜´í‘œ(`\"`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n## 2. ë§¥ë½ (Context)\n- **Input Source:** ì‚¬ìš©ìëŠ” 'ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€'ë¥¼ ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œ ìƒíƒœì…ë‹ˆë‹¤.\n- **Critical Goal:** ìƒì„±ëœ ì´ë¯¸ì§€ëŠ” ì›ë³¸ ìƒí’ˆ(íŒ¨í‚¤ì§€, ë¡œê³ , í˜•íƒœ)ì´ ì™œê³¡ ì—†ì´ ê·¸ëŒ€ë¡œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. AIê°€ ìƒí’ˆì„ ìƒˆë¡œ ì°½ì‘(Re-imagine)í•˜ê²Œ ë§Œë“¤ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.\n- **Safety Protocol:** í­ë ¥, ìœ í˜ˆ, ì„ ì •ì„± ìš”ì†Œë¥¼ ë¯¸í•™ì ì¸ í‘œí˜„ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì •ì œ(Sanitization)í•©ë‹ˆë‹¤.\n- **System Constraint:** ì¶œë ¥ ë¬¸ìì—´ì— **í°ë”°ì˜´í‘œ(`\"`)ê°€ í¬í•¨ë˜ë©´ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.**\n\n## 3. ì„ë¬´ (Task)\nì‚¬ìš©ì ì…ë ¥(ìƒí’ˆ, ë¬¸êµ¬, ì»¨ì…‰)ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì„ ê±°ì³ **ì˜¤ì§ ìµœì¢… ì˜ë¬¸ í”„ë¡¬í”„íŠ¸**ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\n**Step 1: Product Anchoring (ìƒí’ˆ ê³ ì •)**\n- ìƒí’ˆì„ ë¬˜ì‚¬í•  ë•Œ ê³¼ë„í•œ ìˆ˜ì‹ì–´(ì˜ˆ: 'í™˜ìƒì ì¸ ëª¨ì–‘ì˜', 'ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì˜')ë¥¼ ì œê±°í•©ë‹ˆë‹¤.\n- ëŒ€ì‹  ìƒí’ˆì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë„ë¡ `maintaining original product details`, `unchanged source subject` í‚¤ì›Œë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.\n\n**Step 2: Background & Atmosphere Design (ë°°ê²½ ì„¤ê³„)**\n- ìƒí’ˆì€ ê³ ì •í•˜ê³ , **ì¡°ëª…(Lighting)**ê³¼ **ë°°ê²½(Environment)** ë³€í™”ì— ì§‘ì¤‘í•˜ì—¬ ì»¨ì…‰ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n**Step 3: Safety & Syntax Check**\n- ìœ„í—˜ ë‹¨ì–´ ì •ì œ ë° **í°ë”°ì˜´í‘œ(`\"`) ì œê±°** ì—¬ë¶€ë¥¼ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.\n\n## 4. ê·œì¹™ (Rules)\nğŸ”´ **Strict Negative Constraints (ì ˆëŒ€ ê¸ˆì§€):**\n- **Product Distortion (ìƒí’ˆ ì™œê³¡ ê¸ˆì§€):** ìƒí’ˆì˜ ìƒ‰ìƒ, í˜•íƒœ, ë¡œê³ ë¥¼ ë°”ê¾¸ëŠ” í˜•ìš©ì‚¬ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **Double Quotes (`\"`) ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€:** í…ìŠ¤íŠ¸ ì§€ì‹œë¥¼ í¬í•¨í•œ ëª¨ë“  ê³³ì—ì„œ ì•„ìŠ¤í‚¤ ë¬¸ì `\"`ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **ì¡ë‹´ ë° ì„œì‹ ê¸ˆì§€:** ì˜¤ì§ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n\nğŸŸ¢ **Must Do (í•„ìˆ˜ ì¤€ìˆ˜):**\n- **Preservation Keywords:** í”„ë¡¬í”„íŠ¸ ì´ˆë°˜ì— `(exact source product:1.5)`, `(unchanged subject)` ë“±ì„ í¬í•¨í•˜ì—¬ ëª¨ë¸ì´ ì›ë³¸ì„ ì°¸ì¡°í•˜ë„ë¡ ê°•ì œí•˜ì‹­ì‹œì˜¤.\n- **Text Rendering:** í…ìŠ¤íŠ¸ ì‚½ì… ì‹œ ë°˜ë“œì‹œ **`text: 'ë¬¸êµ¬'`** í˜•ì‹(ì‘ì€ë”°ì˜´í‘œ)ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n- **Visual Focus:** \"A product placed in [Concept Background]\" í˜•ì‹ì„ ë”°ë¥´ì‹­ì‹œì˜¤.\n\n## 5. ì˜ˆì‹œ (Examples)\n\n**(Input)**\nProduct: ë¹„íƒ€ë¯¼ ìŒë£Œ\nCopy: í™œë ¥ ì¶©ì „\nConcept: ìš°ì£¼ ì†ì—ì„œ ì—ë„ˆì§€ê°€ í„°ì§€ëŠ” ëŠë‚Œ\n\n**(Internal Thought - do not output)**\n* ìƒí’ˆì„ ìƒˆë¡œ ê·¸ë¦¬ë©´ ì•ˆ ë¨. 'ìš°ì£¼'ì™€ 'ì—ë„ˆì§€'ëŠ” ë°°ê²½ìœ¼ë¡œë§Œ ì²˜ë¦¬í•´ì•¼ í•¨.\n* 'í„°ì§€ëŠ”' -> 'Energy burst' (ì•ˆì „ í‘œí˜„).\n* í°ë”°ì˜´í‘œ ê¸ˆì§€ -> text: 'í™œë ¥ ì¶©ì „'\n\n**(Output)**\nA photo of (exact source product:1.5) centered, maintaining original packaging details, unchanged subject, background is a vast cosmic space with abstract visual metaphor of vibrant energy bursting behind the bottle, cinematic lighting reflecting on the product edges, floating in zero gravity, text: 'í™œë ¥ ì¶©ì „' written in futuristic neon font near the product, 85mm lens, high fidelity, 4k, commercial product photography."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-336,240],"id":"400c1623-8a1e-45db-95ab-8e01a3c10e1b","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-288,16],"id":"0c602ee5-08b4-4505-8804-0afbf5591306","name":"Extract from File1"}],"connections":{"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File1","type":"main","index":0}]]},"Merge":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°(new)","type":"main","index":0}]]},"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°(new)":{"main":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°(new)","type":"ai_languageModel","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Extract from File1":{"main":[[{"node":"Merge","type":"main","index":1}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"b16e43eb-4ba5-4ff5-8e0a-4b7237e29217","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-11-28T04:01:16.294Z","createdAt":"2025-11-28T04:01:16.294Z","role":"workflow:owner","workflowId":"LIjQCVkE4rZOT2Lz","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-13T17:55:55.255Z","createdAt":"2025-11-29T11:59:39.487Z","id":"PCaW6XkHmEl1Rn7b","name":"sapp-studio-adcopy-video","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"84e18e95-00b9-4963-9a6f-c14225a84d15","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4032,480],"id":"40d522c7-4818-4913-9ce7-f70f90e1a7fa","name":"Webhook","webhookId":"84e18e95-00b9-4963-9a6f-c14225a84d15","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"jsCode":"// ëª¨ë“  ê´‘ê³ ë¬¸êµ¬ ì•„ì´í…œì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì·¨í•© (6ê°œ)\nconst allCopies = $input.all().map(item => ({\n  id: item.json.ad_copy_id,\n  text: item.json.ad_copy_text\n}));\n\n// ì›¹ ì‘ë‹µìš© ë°ì´í„° êµ¬ì¡° ìƒì„±\nreturn [{\n  json: {\n    success: true,\n    message: \"ê´‘ê³  ë¬¸êµ¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n    total_count: allCopies.length,  // 6ê°œ í™•ì¸ìš©\n    ad_video_id: $input.first().json.ad_video_id,\n    product_name: $input.first().json.product_name,\n    ad_copies: allCopies,\n    generated_at: new Date().toISOString()\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2720,480],"id":"6c8b7b81-f86b-438b-a837-9de9e58b89a1","name":"ì‘ë‹µ ì·¨í•©"},{"parameters":{"jsCode":"// ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°ì˜ ì¶œë ¥ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\nconst aiOutput = $input.first().json.output;\n\nlet adCopies = [];\n\n// Case 1: JSON ë°°ì—´ í˜•ì‹ì¸ ê²½ìš° ([\"ë¬¸êµ¬1\", \"ë¬¸êµ¬2\", ...])\nif (typeof aiOutput === 'string' && aiOutput.trim().startsWith('[')) {\n  try {\n    const parsed = JSON.parse(aiOutput);\n    if (Array.isArray(parsed)) {\n      adCopies = parsed.map(item => typeof item === 'string' ? item.trim() : String(item).trim());\n    }\n  } catch (e) {\n    // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¡œ\n  }\n}\n\n// Case 2: \"---\" êµ¬ë¶„ì í˜•ì‹ì¸ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('---')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0);\n}\n\n// Case 3: ì¤„ë°”ê¿ˆìœ¼ë¡œë§Œ êµ¬ë¶„ëœ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('\\n')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0 && !copy.startsWith('#'));\n}\n\n// ë¹ˆ ê²°ê³¼ ë°©ì§€\nif (adCopies.length === 0) {\n  adCopies = ['ê´‘ê³  ë¬¸êµ¬ ìƒì„± ì‹¤íŒ¨ - AI ì¶œë ¥ì„ í™•ì¸í•´ì£¼ì„¸ìš”'];\n}\n\n// 'ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…' ë…¸ë“œì—ì„œ ì•ˆì „í•˜ê²Œ product_name ì¶”ì¶œ\nconst supabaseData = $('ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…').first().json;\nlet productName = 'ìƒí’ˆëª… ì—†ìŒ';\n\nif (Array.isArray(supabaseData) && supabaseData.length > 0) {\n  productName = supabaseData[0].product_name || 'ìƒí’ˆëª… ì—†ìŒ';\n} else if (supabaseData && supabaseData.product_name) {\n  productName = supabaseData.product_name;\n}\n\n// ad_video_id ì•ˆì „í•˜ê²Œ ì ‘ê·¼\nconst adVideoId = $('Extract Workflow Data').first().json.ad_video_id || '';\n\n// â­ 6ê°œì˜ ê´‘ê³ ë¬¸êµ¬ë¥¼ 6ê°œì˜ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nconst result = adCopies.map((copy, index) => ({\n  json: {\n    ad_copy_id: index + 1,\n    ad_copy_text: copy,\n    product_name: productName,\n    ad_video_id: adVideoId\n  }\n}));\n\nreturn result;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2896,480],"id":"60060169-29f5-4019-b239-169b9299995d","name":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±"},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&id=eq.{{ $('Extract Workflow Data').item.json.product_info_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3424,480],"id":"ae381e10-386b-437c-994d-67ac438bc8fb","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3824,480],"id":"865dcb11-eafe-424f-906f-65c4bb2fad2a","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3616,480],"id":"4db4f6f0-502f-4008-9b49-b2ccb15e2120","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json; charset=utf-8"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-2528,480],"id":"a379f5a4-c417-44e1-a299-39728b98f347","name":"Respond to Webhook1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"# Role (ì—­í• )\në‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ 'Bê¸‰ í‚¤ì¹˜ ë§ˆì¼€íŒ… í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„°'ì´ì 'ë„íŒŒë¯¼ ì‚¬ëƒ¥ê¾¼'ì…ë‹ˆë‹¤. ì •ì œëœ ì„¸ë ¨ë¨ì„ ê±°ë¶€í•˜ê³ , 'ì˜ë„ì ì¸ ì´ŒìŠ¤ëŸ¬ì›€', 'í™©ë‹¹í•œ ë§¥ë½ íŒŒê´´', 'ë‚ ê²ƒì˜ ì†”ì§í•¨'ìœ¼ë¡œ MZì„¸ëŒ€ì˜ ë‡Œë¦¬ì— ê½‚íˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì—°ì„±í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‡Œ êµ¬ì¡°ëŠ” ì¸í„°ë„· ë°ˆ(Meme), ë³‘ë§› ì½”ë“œ, ì–¸ì–´ìœ í¬, ê·¸ë¦¬ê³  íŒ©íŠ¸ í­ë ¥ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.\n\n# Context (í•™ìŠµëœ ë§ˆì¼€íŒ… ì „ëµ)\në‹¹ì‹ ì€ ë‹¤ìŒì˜ 'Bê¸‰ ë§ˆì¼€íŒ… ì„±ê³µ ë²•ì¹™'ì„ ì™„ë²½í•˜ê²Œ ì²´í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n1. **í™©ë‹¹í•¨ê³¼ ì´ì§ˆê° (Absurdity):** ìƒí’ˆê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ìƒí™©ì„ ì—°ê²°í•´ ë‡Œë¦¬ì— ë°•íˆê²Œ í•©ë‹ˆë‹¤.\n2. **íŒ¨ëŸ¬ë””ì™€ ì–¸ì–´ìœ í¬ (Wordplay):** ë»”ë»”í•œ ë§ì¥ë‚œê³¼ ìœ í–‰í•˜ëŠ” ë°ˆì„ ë¹„íŠ¸(Beat)ê° ìˆê²Œ í™œìš©í•©ë‹ˆë‹¤.\n3. **ì†”ì§í•¨ê³¼ ê°€ë²¼ì›€ (Honesty):** \"ê´‘ê³ ë¼ì„œ ì–µì§€ë¡œ í•œë‹¤\", \"ì‚¬ì¥ë‹˜ì´ ì‹œì¼°ì–´ìš”\" ê°™ì€ ë©”íƒ€ ë°œì–¸ì„ ì„œìŠ´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n4. **ì˜ë„ëœ ì¡°ì•…í•¨ (Kitsch):** ì™„ë²½í•œ ê¸°íšë ¥ì„ ë°”íƒ•ìœ¼ë¡œ Bê¸‰ì˜ ì™¸í”¼(íŒŒì›Œí¬ì¸íŠ¸ ê°ì„±, ë°œí¸ì§‘ ëŠë‚Œ)ë¥¼ í…ìŠ¤íŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n# Goal (ëª©í‘œ)\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” [ìƒí’ˆëª…]ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬, 12ì´ˆ ìˆí¼ ì˜ìƒ(Shorts, Reels, TikTok)ì— ìµœì í™”ëœ **ê´‘ê³  ë¬¸êµ¬ 5ê°œ**ë¥¼ ì°½ì‘í•˜ì‹­ì‹œì˜¤.\n\n# Rules (ì œì•½ ì¡°ê±´ - ë§¤ìš° ì¤‘ìš”)\n1. **ìƒí’ˆëª… í•„ìˆ˜ í¬í•¨:** ëª¨ë“  ë¬¸êµ¬ì—ëŠ” ì…ë ¥ë°›ì€ [ìƒí’ˆëª…]ì´ ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.\n2. **ë¶„ëŸ‰:** ëˆˆìœ¼ë¡œ ì½ì—ˆì„ ë•Œ 3ì´ˆ ë‚´ì™¸ì˜ ì„íŒ©íŠ¸ (ë„ì–´ì“°ê¸° í¬í•¨ 40ì ì´ë‚´ ê¶Œì¥).\n3. **í†¤ì•¤ë§¤ë„ˆ:**\n   - ë…¼ë¦¬ì  ì„¤ëª…, ì¡´ëŒ“ë§, ì˜ˆì˜ ë°”ë¥¸ ë§íˆ¬ ì ˆëŒ€ ê¸ˆì§€.\n   - ì¹œêµ¬ì—ê²Œ ë§í•˜ê±°ë‚˜ í˜¼ì£ë§í•˜ëŠ” ë“¯í•œ 'ë°˜ë§' ë˜ëŠ” 'ìŒìŠ´ì²´' ì‚¬ìš©.\n   - ë¬¸ë²• íŒŒê´´ í—ˆìš©, ì˜ì‹ì˜ íë¦„ ê¸°ë²• ì ìš©. \"ã…‹ã…‹\", \"ã„¹ã…‡\", \"ê°œì´ë“\" ë“± ì ì ˆíˆ í™œìš©.\n4. **êµ¬ì„±ì˜ ë‹¤ì–‘ì„± (5ê°€ì§€ ìŠ¤íƒ€ì¼):** ì•„ë˜ 5ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ê° í•˜ë‚˜ì”© ì ìš©í•˜ì—¬ ì´ 5ê°œë¥¼ ë§Œë“œì‹­ì‹œì˜¤.\n   - ìŠ¤íƒ€ì¼ A: ë¬´ì§€ì„± ë¼ì„/ì–¸ì–´ìœ í¬\n   - ìŠ¤íƒ€ì¼ B: ì†Œë¹„ìì˜ ê·€ì°¨ë‹ˆì¦˜/í˜„ì‹¤ ê³µê° (íŒ©íŠ¸í­ë ¥)\n   - ìŠ¤íƒ€ì¼ C: ì‚¬ì¥ë‹˜/ì œì‘ì ë””ìŠ¤ (ë©”íƒ€ ë°œì–¸)\n   - ìŠ¤íƒ€ì¼ D: ë§ë„ ì•ˆ ë˜ëŠ” ê³¼ì¥ (í—ˆì„¸)\n   - ìŠ¤íƒ€ì¼ E: í‚¤ì¹˜ë§ˆì¼€íŒ… ëŠë‚Œ (MZ)\n5. **ì¶œë ¥ í˜•ì‹ (Output Format):**\n   - ê° ë¬¸êµ¬ë¥¼ \"---\" êµ¬ë¶„ìë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n   - 5ê°œì˜ ë¬¸êµ¬ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n[ê´‘ê³  ë¬¸êµ¬ 1]\n---\n[ê´‘ê³  ë¬¸êµ¬ 2]\n---\n[ê´‘ê³  ë¬¸êµ¬ 3]\n---\n[ê´‘ê³  ë¬¸êµ¬ 4]\n---\n[ê´‘ê³  ë¬¸êµ¬ 5]\n\n   - Markdown ì½”ë“œ ë¸”ë¡(```json)ì´ë‚˜ ê¸°íƒ€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**\n   - ì˜¤ì§ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# Workflow (ë‚´ë¶€ ì‚¬ê³  ê³¼ì • - ì¶œë ¥ ê¸ˆì§€)\n1. [ìƒí’ˆëª…]ì„ ë¶„ì„í•˜ì—¬ íƒ€ê²Ÿì˜ í˜ì¸í¬ì¸íŠ¸ì™€ ì›ƒìŒ ì½”ë“œë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•œë‹¤.\n2. 5ê°€ì§€ ìŠ¤íƒ€ì¼ì— ë§ì¶° ë¬¸êµ¬ë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ ë¬¸êµ¬ë¥¼ JSON List í¬ë§·ìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n4. Markdown ê¸°í˜¸ë‚˜ ì¡ë‹¤í•œ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ”ì§€ ìµœì¢… í™•ì¸ í›„ ì¶œë ¥í•œë‹¤.\n\n# Examples (Few-Shot Learning)\n\n[Input]\nê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Output]\nê°œë¯¸ëŠ” ëš ëš  ì˜¤ëŠ˜ë„ ëš ëš  ë–¡ë³¶ì´ë¥¼ ë¨¹ë„¤ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në‹¤ì´ì–´íŠ¸ ë‚´ì¼ë¶€í„° í•  ê±°ì§€? ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\nì‚¬ì¥ë‹˜ì´ ì†ŒìŠ¤ì— ì˜í˜¼ ê°ˆì•„ë„£ìŒ(ì§„ì§œì„) ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në¨¹ê³  ì²œêµ­ ê°ˆë˜ ì§€ì˜¥ ê°ˆë˜ ë‚œ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´ ê°ˆë˜\në‹ˆ ì—¬ì¹œì´ í™”ê°€ ì•ˆ í’€ë¦°ë‹¤ë©´ ì •ë‹µì€ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Input]\nìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\n\n[Output]\nì‚¬ë‘ì€ ë³€í•´ë„ ì „ì••ì€ ì•ˆ ë³€í•´ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nê°ˆì•„ë¼ìš°ê¸° ê·€ì°®ì§€? ë‚˜ë„ ê·¸ë˜ ê·¸ë˜ì„œ ë§Œë“¤ì—ˆë‹¤ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì‚¬ì¥ë‹˜ì´ ë¯¸ì³¤ì–´ìš” ì´ê±° íŒ”ì•„ì„œ ê±´ë¬¼ ì˜¬ë¦°ëŒ€ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì§€êµ¬ê°€ ë©¸ë§í•´ë„ ì¢€ë¹„ì²˜ëŸ¼ ì‚´ì•„ë‚¨ìŒ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\në°±ë§ŒìŠ¤ë¬¼í•˜ë‚˜ ì„¸ë‹¤ê°€ ë°¤ìƒ˜ ê° ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-3216,480],"id":"a08b666c-6159-4ce9-b7bf-b70ea800fda0","name":"AI Agent"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3216,656],"id":"3f243044-b771-4748-9698-e0debfe90c1c","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[-3072,688],"id":"d5f9c321-f8f9-453b-8f69-033cde6a2fe2","name":"Think"}],"connections":{"Webhook":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±":{"main":[[{"node":"ì‘ë‹µ ì·¨í•©","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"ì‘ë‹µ ì·¨í•©":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Think":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"92591bd4-acdc-498f-a280-f8ad7b555af0","activeVersionId":"1c4ae8a1-4fd0-413d-8da4-4246c83176dd","triggerCount":1,"shared":[{"updatedAt":"2025-11-29T11:59:39.492Z","createdAt":"2025-11-29T11:59:39.492Z","role":"workflow:owner","workflowId":"PCaW6XkHmEl1Rn7b","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2025-12-08T11:55:09.414Z","createdAt":"2025-12-08T11:55:09.414Z","versionId":"1c4ae8a1-4fd0-413d-8da4-4246c83176dd","workflowId":"PCaW6XkHmEl1Rn7b","nodes":[{"parameters":{"httpMethod":"POST","path":"84e18e95-00b9-4963-9a6f-c14225a84d15","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4032,480],"id":"40d522c7-4818-4913-9ce7-f70f90e1a7fa","name":"Webhook","webhookId":"84e18e95-00b9-4963-9a6f-c14225a84d15","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"jsCode":"// ëª¨ë“  ê´‘ê³ ë¬¸êµ¬ ì•„ì´í…œì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì·¨í•© (6ê°œ)\nconst allCopies = $input.all().map(item => ({\n  id: item.json.ad_copy_id,\n  text: item.json.ad_copy_text\n}));\n\n// ì›¹ ì‘ë‹µìš© ë°ì´í„° êµ¬ì¡° ìƒì„±\nreturn [{\n  json: {\n    success: true,\n    message: \"ê´‘ê³  ë¬¸êµ¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n    total_count: allCopies.length,  // 6ê°œ í™•ì¸ìš©\n    ad_video_id: $input.first().json.ad_video_id,\n    product_name: $input.first().json.product_name,\n    ad_copies: allCopies,\n    generated_at: new Date().toISOString()\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2720,480],"id":"6c8b7b81-f86b-438b-a837-9de9e58b89a1","name":"ì‘ë‹µ ì·¨í•©"},{"parameters":{"jsCode":"// ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°ì˜ ì¶œë ¥ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\nconst aiOutput = $input.first().json.output;\n\nlet adCopies = [];\n\n// Case 1: JSON ë°°ì—´ í˜•ì‹ì¸ ê²½ìš° ([\"ë¬¸êµ¬1\", \"ë¬¸êµ¬2\", ...])\nif (typeof aiOutput === 'string' && aiOutput.trim().startsWith('[')) {\n  try {\n    const parsed = JSON.parse(aiOutput);\n    if (Array.isArray(parsed)) {\n      adCopies = parsed.map(item => typeof item === 'string' ? item.trim() : String(item).trim());\n    }\n  } catch (e) {\n    // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¡œ\n  }\n}\n\n// Case 2: \"---\" êµ¬ë¶„ì í˜•ì‹ì¸ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('---')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0);\n}\n\n// Case 3: ì¤„ë°”ê¿ˆìœ¼ë¡œë§Œ êµ¬ë¶„ëœ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('\\n')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0 && !copy.startsWith('#'));\n}\n\n// ë¹ˆ ê²°ê³¼ ë°©ì§€\nif (adCopies.length === 0) {\n  adCopies = ['ê´‘ê³  ë¬¸êµ¬ ìƒì„± ì‹¤íŒ¨ - AI ì¶œë ¥ì„ í™•ì¸í•´ì£¼ì„¸ìš”'];\n}\n\n// 'ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…' ë…¸ë“œì—ì„œ ì•ˆì „í•˜ê²Œ product_name ì¶”ì¶œ\nconst supabaseData = $('ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…').first().json;\nlet productName = 'ìƒí’ˆëª… ì—†ìŒ';\n\nif (Array.isArray(supabaseData) && supabaseData.length > 0) {\n  productName = supabaseData[0].product_name || 'ìƒí’ˆëª… ì—†ìŒ';\n} else if (supabaseData && supabaseData.product_name) {\n  productName = supabaseData.product_name;\n}\n\n// ad_video_id ì•ˆì „í•˜ê²Œ ì ‘ê·¼\nconst adVideoId = $('Extract Workflow Data').first().json.ad_video_id || '';\n\n// â­ 6ê°œì˜ ê´‘ê³ ë¬¸êµ¬ë¥¼ 6ê°œì˜ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nconst result = adCopies.map((copy, index) => ({\n  json: {\n    ad_copy_id: index + 1,\n    ad_copy_text: copy,\n    product_name: productName,\n    ad_video_id: adVideoId\n  }\n}));\n\nreturn result;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2896,480],"id":"60060169-29f5-4019-b239-169b9299995d","name":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±"},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&id=eq.{{ $('Extract Workflow Data').item.json.product_info_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3424,480],"id":"ae381e10-386b-437c-994d-67ac438bc8fb","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3824,480],"id":"865dcb11-eafe-424f-906f-65c4bb2fad2a","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3616,480],"id":"4db4f6f0-502f-4008-9b49-b2ccb15e2120","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json; charset=utf-8"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-2528,480],"id":"a379f5a4-c417-44e1-a299-39728b98f347","name":"Respond to Webhook1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"# Role (ì—­í• )\në‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ 'Bê¸‰ í‚¤ì¹˜ ë§ˆì¼€íŒ… í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„°'ì´ì 'ë„íŒŒë¯¼ ì‚¬ëƒ¥ê¾¼'ì…ë‹ˆë‹¤. ì •ì œëœ ì„¸ë ¨ë¨ì„ ê±°ë¶€í•˜ê³ , 'ì˜ë„ì ì¸ ì´ŒìŠ¤ëŸ¬ì›€', 'í™©ë‹¹í•œ ë§¥ë½ íŒŒê´´', 'ë‚ ê²ƒì˜ ì†”ì§í•¨'ìœ¼ë¡œ MZì„¸ëŒ€ì˜ ë‡Œë¦¬ì— ê½‚íˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì—°ì„±í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‡Œ êµ¬ì¡°ëŠ” ì¸í„°ë„· ë°ˆ(Meme), ë³‘ë§› ì½”ë“œ, ì–¸ì–´ìœ í¬, ê·¸ë¦¬ê³  íŒ©íŠ¸ í­ë ¥ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.\n\n# Context (í•™ìŠµëœ ë§ˆì¼€íŒ… ì „ëµ)\në‹¹ì‹ ì€ ë‹¤ìŒì˜ 'Bê¸‰ ë§ˆì¼€íŒ… ì„±ê³µ ë²•ì¹™'ì„ ì™„ë²½í•˜ê²Œ ì²´í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n1. **í™©ë‹¹í•¨ê³¼ ì´ì§ˆê° (Absurdity):** ìƒí’ˆê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ìƒí™©ì„ ì—°ê²°í•´ ë‡Œë¦¬ì— ë°•íˆê²Œ í•©ë‹ˆë‹¤.\n2. **íŒ¨ëŸ¬ë””ì™€ ì–¸ì–´ìœ í¬ (Wordplay):** ë»”ë»”í•œ ë§ì¥ë‚œê³¼ ìœ í–‰í•˜ëŠ” ë°ˆì„ ë¹„íŠ¸(Beat)ê° ìˆê²Œ í™œìš©í•©ë‹ˆë‹¤.\n3. **ì†”ì§í•¨ê³¼ ê°€ë²¼ì›€ (Honesty):** \"ê´‘ê³ ë¼ì„œ ì–µì§€ë¡œ í•œë‹¤\", \"ì‚¬ì¥ë‹˜ì´ ì‹œì¼°ì–´ìš”\" ê°™ì€ ë©”íƒ€ ë°œì–¸ì„ ì„œìŠ´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n4. **ì˜ë„ëœ ì¡°ì•…í•¨ (Kitsch):** ì™„ë²½í•œ ê¸°íšë ¥ì„ ë°”íƒ•ìœ¼ë¡œ Bê¸‰ì˜ ì™¸í”¼(íŒŒì›Œí¬ì¸íŠ¸ ê°ì„±, ë°œí¸ì§‘ ëŠë‚Œ)ë¥¼ í…ìŠ¤íŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n# Goal (ëª©í‘œ)\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” [ìƒí’ˆëª…]ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬, 12ì´ˆ ìˆí¼ ì˜ìƒ(Shorts, Reels, TikTok)ì— ìµœì í™”ëœ **ê´‘ê³  ë¬¸êµ¬ 5ê°œ**ë¥¼ ì°½ì‘í•˜ì‹­ì‹œì˜¤.\n\n# Rules (ì œì•½ ì¡°ê±´ - ë§¤ìš° ì¤‘ìš”)\n1. **ìƒí’ˆëª… í•„ìˆ˜ í¬í•¨:** ëª¨ë“  ë¬¸êµ¬ì—ëŠ” ì…ë ¥ë°›ì€ [ìƒí’ˆëª…]ì´ ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.\n2. **ë¶„ëŸ‰:** ëˆˆìœ¼ë¡œ ì½ì—ˆì„ ë•Œ 3ì´ˆ ë‚´ì™¸ì˜ ì„íŒ©íŠ¸ (ë„ì–´ì“°ê¸° í¬í•¨ 40ì ì´ë‚´ ê¶Œì¥).\n3. **í†¤ì•¤ë§¤ë„ˆ:**\n   - ë…¼ë¦¬ì  ì„¤ëª…, ì¡´ëŒ“ë§, ì˜ˆì˜ ë°”ë¥¸ ë§íˆ¬ ì ˆëŒ€ ê¸ˆì§€.\n   - ì¹œêµ¬ì—ê²Œ ë§í•˜ê±°ë‚˜ í˜¼ì£ë§í•˜ëŠ” ë“¯í•œ 'ë°˜ë§' ë˜ëŠ” 'ìŒìŠ´ì²´' ì‚¬ìš©.\n   - ë¬¸ë²• íŒŒê´´ í—ˆìš©, ì˜ì‹ì˜ íë¦„ ê¸°ë²• ì ìš©. \"ã…‹ã…‹\", \"ã„¹ã…‡\", \"ê°œì´ë“\" ë“± ì ì ˆíˆ í™œìš©.\n4. **êµ¬ì„±ì˜ ë‹¤ì–‘ì„± (5ê°€ì§€ ìŠ¤íƒ€ì¼):** ì•„ë˜ 5ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ê° í•˜ë‚˜ì”© ì ìš©í•˜ì—¬ ì´ 5ê°œë¥¼ ë§Œë“œì‹­ì‹œì˜¤.\n   - ìŠ¤íƒ€ì¼ A: ë¬´ì§€ì„± ë¼ì„/ì–¸ì–´ìœ í¬\n   - ìŠ¤íƒ€ì¼ B: ì†Œë¹„ìì˜ ê·€ì°¨ë‹ˆì¦˜/í˜„ì‹¤ ê³µê° (íŒ©íŠ¸í­ë ¥)\n   - ìŠ¤íƒ€ì¼ C: ì‚¬ì¥ë‹˜/ì œì‘ì ë””ìŠ¤ (ë©”íƒ€ ë°œì–¸)\n   - ìŠ¤íƒ€ì¼ D: ë§ë„ ì•ˆ ë˜ëŠ” ê³¼ì¥ (í—ˆì„¸)\n   - ìŠ¤íƒ€ì¼ E: í‚¤ì¹˜ë§ˆì¼€íŒ… ëŠë‚Œ (MZ)\n5. **ì¶œë ¥ í˜•ì‹ (Output Format):**\n   - ê° ë¬¸êµ¬ë¥¼ \"---\" êµ¬ë¶„ìë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n   - 5ê°œì˜ ë¬¸êµ¬ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n[ê´‘ê³  ë¬¸êµ¬ 1]\n---\n[ê´‘ê³  ë¬¸êµ¬ 2]\n---\n[ê´‘ê³  ë¬¸êµ¬ 3]\n---\n[ê´‘ê³  ë¬¸êµ¬ 4]\n---\n[ê´‘ê³  ë¬¸êµ¬ 5]\n\n   - Markdown ì½”ë“œ ë¸”ë¡(```json)ì´ë‚˜ ê¸°íƒ€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**\n   - ì˜¤ì§ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# Workflow (ë‚´ë¶€ ì‚¬ê³  ê³¼ì • - ì¶œë ¥ ê¸ˆì§€)\n1. [ìƒí’ˆëª…]ì„ ë¶„ì„í•˜ì—¬ íƒ€ê²Ÿì˜ í˜ì¸í¬ì¸íŠ¸ì™€ ì›ƒìŒ ì½”ë“œë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•œë‹¤.\n2. 5ê°€ì§€ ìŠ¤íƒ€ì¼ì— ë§ì¶° ë¬¸êµ¬ë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ ë¬¸êµ¬ë¥¼ JSON List í¬ë§·ìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n4. Markdown ê¸°í˜¸ë‚˜ ì¡ë‹¤í•œ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ”ì§€ ìµœì¢… í™•ì¸ í›„ ì¶œë ¥í•œë‹¤.\n\n# Examples (Few-Shot Learning)\n\n[Input]\nê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Output]\nê°œë¯¸ëŠ” ëš ëš  ì˜¤ëŠ˜ë„ ëš ëš  ë–¡ë³¶ì´ë¥¼ ë¨¹ë„¤ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në‹¤ì´ì–´íŠ¸ ë‚´ì¼ë¶€í„° í•  ê±°ì§€? ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\nì‚¬ì¥ë‹˜ì´ ì†ŒìŠ¤ì— ì˜í˜¼ ê°ˆì•„ë„£ìŒ(ì§„ì§œì„) ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në¨¹ê³  ì²œêµ­ ê°ˆë˜ ì§€ì˜¥ ê°ˆë˜ ë‚œ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´ ê°ˆë˜\në‹ˆ ì—¬ì¹œì´ í™”ê°€ ì•ˆ í’€ë¦°ë‹¤ë©´ ì •ë‹µì€ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Input]\nìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\n\n[Output]\nì‚¬ë‘ì€ ë³€í•´ë„ ì „ì••ì€ ì•ˆ ë³€í•´ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nê°ˆì•„ë¼ìš°ê¸° ê·€ì°®ì§€? ë‚˜ë„ ê·¸ë˜ ê·¸ë˜ì„œ ë§Œë“¤ì—ˆë‹¤ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì‚¬ì¥ë‹˜ì´ ë¯¸ì³¤ì–´ìš” ì´ê±° íŒ”ì•„ì„œ ê±´ë¬¼ ì˜¬ë¦°ëŒ€ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì§€êµ¬ê°€ ë©¸ë§í•´ë„ ì¢€ë¹„ì²˜ëŸ¼ ì‚´ì•„ë‚¨ìŒ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\në°±ë§ŒìŠ¤ë¬¼í•˜ë‚˜ ì„¸ë‹¤ê°€ ë°¤ìƒ˜ ê° ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-3216,480],"id":"a08b666c-6159-4ce9-b7bf-b70ea800fda0","name":"AI Agent"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3216,656],"id":"3f243044-b771-4748-9698-e0debfe90c1c","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}}],"connections":{"Webhook":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±":{"main":[[{"node":"ì‘ë‹µ ì·¨í•©","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"ì‘ë‹µ ì·¨í•©":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2026-01-13T15:49:24.416Z","createdAt":"2025-11-30T06:18:10.479Z","id":"ZpPQgW8bocW0j1At","name":"sapp-studio-adpicture","active":true,"isArchived":false,"nodes":[{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-3936,480],"id":"31444842-43e7-4bbe-a597-e6c2f8e1ff40","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3552,480],"id":"f2192c8a-dab2-451c-90fc-19aa7cffbc00","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"},{"id":"db923240-5d37-42e1-b429-9561af431552","name":"selected_ad_copy","value":"={{ $json.body.selected_ad_copy }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3744,480],"id":"07c17dca-9dc0-4f5b-b6e3-7616f9f17483","name":"Extract Workflow Data"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2496,592],"id":"19c849c8-0fa3-41b2-ba4d-688a0bf53491","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1216,256],"id":"403c4161-2b5a-4638-a200-6de5f56ba2dc","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.apiRequestBody }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1568,256],"id":"584fc5c1-7aa6-4901-a061-1a6851fcbddf","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-1984,256],"id":"23944988-d200-4a8b-bdca-fa23ef96516a","name":"Merge"},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1392,256],"id":"d0c36dfa-609b-4bb4-a7eb-a05744d30996","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2912,592],"id":"123a6721-4893-4d75-94d4-56e611ab0fee","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3104,592],"id":"c8f446e8-b915-4358-8c38-37adb022b0ff","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2704,592],"id":"9f734609-5894-49fd-ac6b-da73f1e27aa9","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3104,416],"id":"26c8c8ba-edb3-4481-91ff-1651da5e7b35","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1776,16],"id":"49ae91cd-6f28-4bd0-ba08-adac0ced4136","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/images/{{ $('Webhook').first().json.body.ad_video_id }}.png","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"image/png"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1024,256],"id":"970f4994-5533-48a2-951e-325701489a9d","name":"supabase upload","retryOnFail":true,"waitBetweenTries":5000,"credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Supabase ì—…ë¡œë“œ ì‘ë‹µ ì²˜ë¦¬ ë° Public URL ìƒì„±\n// ============================================\n\n// Supabase Storage ì„¤ì •\nconst bucketName = 'images';\nconst ad_video_id = $('Webhook').first().json.body.ad_video_id;\nconst fileName = ad_video_id + '.png';\n\n// Public URL ìƒì„± (Supabase Storage ê³µê°œ URL í˜•ì‹)\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\n// (ì„ íƒ) ì´ì „ ë…¸ë“œ(supabase upload)ì˜ ì‘ë‹µ ë°ì´í„° í™•ì¸ìš©\n// const uploadResponse = items[0].json;\n// console.log('Upload Response:', JSON.stringify(uploadResponse));\n\n// ê²°ê³¼ ë°˜í™˜\nreturn [\n  {\n    json: {\n      fileName: fileName,\n      publicUrl: publicUrl,  // âœ… ì •ì˜ëœ ë³€ìˆ˜ ì‚¬ìš©\n      ad_video_id: ad_video_id,\n    }\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-832,256],"id":"2524546c-ac07-4631-90ef-10cc1588bcce","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"image_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-624,256],"id":"9dca1de2-e745-4240-ac16-e6becc0f7999","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=You are an expert AI Art Director and Prompt Engineer specialized in Google's 'Nano Banana Pro' (Gemini 3 Image) model. Your task is to analyze the user's input (Advertising Copy & Reference Image Context) and strictly convert it into a highly optimized, raw English image generation prompt string.\n\n### CRITICAL PROCESS\nBefore generating the final output, you must internally process the following steps:\n1.  **Deconstruct the Copy:** Identify the [Product/Subject], [Target Emotion], [Key Message], and [Implicit Tone].\n2.  **Product Preservation Check (MANDATORY):** You must treat the product's visual identity as immutable. The generated prompt must explicitly describe the product's key physical attributes (shape, color, logo placement) exactly as they appear in the provided reference, ensuring the \"Product Prototype\" is strictly preserved.\n3.  **Visual Translation:** Convert abstract adjectives (e.g., \"Fast\", \"Fresh\") into concrete visual cues (e.g., \"Motion blur streaks\", \"Water droplets\"), while keeping the product static and unchanged.\n\n### PROMPT CONSTRUCTION GUIDELINES\nYou must construct the final prompt using the following optimized structure. \n\n1.  **[Subject & Hero Shot]:** -   Define the product clearly as the visual center.\n    -   **CRITICAL:** detailed description of the product features to ensure fidelity to the original. Add the keyword: \"Keep product original form unchanged\".\n    -   Use high-end adjectives (e.g., \"Pristine\", \"Premium material\").\n2.  **[Environment & Atmosphere]:** -   Describe a background that complements the product without distorting it.\n    -   Apply color psychology matching the ad's emotion (e.g., Blue/White for freshness).\n3.  **[Lighting, Camera & Style]:** -   **For Photography:** \"Macro shot\", \"85mm portrait lens\", \"f/1.8 bokeh\", \"Studio lighting\", \"Rim lighting\", \"8k resolution\".\n    -   **For 3D/Art:** \"Octane render\", \"Unreal Engine 5\", \"Isometric view\".\n4.  **[Text Rendering Strategy] (Crucial):** -   If the input implies a headline, add: `text \"EXACT_COPY\" written in [font_style]`.\n    -   **Ensure Legibility:** Instruct to place text on a surface with high contrast.\n5.  **[Technical Constraints]:** -   End with specific parameters: `, photorealistic, sharp focus, --aspect_ratio 1:1`.\n\n### SAFETY & MODERATION\n-   **Strictly Prohibited:** Nudity, sexual content, blood/gore, violence, real celebrities, copyrighted characters.\n-   **Safe Interpretations:** If the copy uses aggressive metaphors, translate them into atmospheric descriptions.\n\n### OUTPUT FORMAT\n-   Output **ONLY** the raw prompt string in English.\n-   **NO** introductory text, **NO** markdown, **NO** explanations.\n\n### EXAMPLE\n**Input:** \"Unleash the beast. Energy X, the drink for gamers.\" (Reference: Black slim can with green X logo)\n**Output:** A sleek black slim can of \"Energy X\" with a glowing green X logo on the center, product form unchanged. Condensation droplets on the surface. Background is a dark cybernetic gaming room with purple and blue LED ambience. Text \"Unleash the beast\" written in bold futuristic font on the top. Cinematic lighting, high contrast, 8k resolution, photorealistic product photography, --aspect_ratio 1:1\n\n### CURRENT TASK\nAnalyze the following Advertising Copy and generate the Nano Banana Pro prompt:\n[Insert Advertising Copy Here]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3104,240],"id":"7a6dbfcf-5d62-4e04-8f00-b0eab0a23eb4","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"},{"parameters":{"httpMethod":"POST","path":"60fc0718-5146-48ec-a49a-ae973841687b","authentication":"basicAuth","responseMode":"responseNode","options":{"responseHeaders":{"entries":[{"name":"selected_ad_copy","value":"selectedCopy"}]}}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4144,480],"id":"806813c9-ac19-4e49-9b03-17e74a48a90f","name":"Webhook","webhookId":"60fc0718-5146-48ec-a49a-ae973841687b","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"jsCode":"// Merge ë…¸ë“œë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ì—¬ Supabase ë…¸ë“œë¥¼ ìš°íšŒ\nconst mergeData = $('Merge').first().json;\n\nconst promptText = mergeData.output || '';  // âœ… \nconst imageBase64 = mergeData.data || '';   // âœ…\n\nif (!promptText || !imageBase64) {\n  throw new Error(`\nâŒ ë°ì´í„° ëˆ„ë½:\n- í”„ë¡¬í”„íŠ¸: ${promptText ? 'ìˆìŒ' : 'ì—†ìŒ'}\n- ì´ë¯¸ì§€: ${imageBase64 ? 'ìˆìŒ' : 'ì—†ìŒ'}\n  `);\n}\n\nconst requestBody = {\n  contents: [{\n    parts: [\n      {\n        text: promptText\n      },\n      {\n        inline_data: {\n          mimeType: \"image/png\",\n          data: imageBase64\n        }\n      }\n    ]\n  }],\n  generationConfig: {\n    maxOutputTokens: 2048,\n    temperature: 0.9,\n    imageConfig: {\n      aspectRatio: \"1:1\"\n    }\n  }\n};\n\nreturn [{\n  json: {\n    apiRequestBody: requestBody\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1792,256],"id":"9c437268-9f45-4a2f-a3b3-b83e3cda9ba2","name":"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[-2944,416],"id":"0c6ba8c4-1398-4fb4-8ef9-76b6d53d1fd3","name":"Think"}],"connections":{"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0},{"node":"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Update: Image Refinement":{"main":[[]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Think":{"ai_tool":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"4fcf84df-5ce2-4d42-85c5-6f2990991344","activeVersionId":"274c2d5d-0a2c-4a23-b46d-b0a2fcfef602","triggerCount":1,"shared":[{"updatedAt":"2025-11-30T06:18:10.488Z","createdAt":"2025-11-30T06:18:10.488Z","role":"workflow:owner","workflowId":"ZpPQgW8bocW0j1At","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-13T08:20:37.246Z","createdAt":"2026-01-13T08:20:37.246Z","versionId":"274c2d5d-0a2c-4a23-b46d-b0a2fcfef602","workflowId":"ZpPQgW8bocW0j1At","nodes":[{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-3360,480],"id":"d00df5e4-49cb-4462-95ad-7f95867b8bd1","name":"Execute Command"},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-3936,480],"id":"31444842-43e7-4bbe-a597-e6c2f8e1ff40","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3552,480],"id":"f2192c8a-dab2-451c-90fc-19aa7cffbc00","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"},{"id":"db923240-5d37-42e1-b429-9561af431552","name":"selected_ad_copy","value":"={{ $json.body.selected_ad_copy }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3744,480],"id":"07c17dca-9dc0-4f5b-b6e3-7616f9f17483","name":"Extract Workflow Data"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2496,592],"id":"19c849c8-0fa3-41b2-ba4d-688a0bf53491","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1216,256],"id":"403c4161-2b5a-4638-a200-6de5f56ba2dc","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.apiRequestBody }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1568,256],"id":"584fc5c1-7aa6-4901-a061-1a6851fcbddf","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-1984,256],"id":"23944988-d200-4a8b-bdca-fa23ef96516a","name":"Merge"},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1392,256],"id":"d0c36dfa-609b-4bb4-a7eb-a05744d30996","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2912,592],"id":"123a6721-4893-4d75-94d4-56e611ab0fee","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3104,592],"id":"c8f446e8-b915-4358-8c38-37adb022b0ff","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2704,592],"id":"9f734609-5894-49fd-ac6b-da73f1e27aa9","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3104,416],"id":"26c8c8ba-edb3-4481-91ff-1651da5e7b35","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1776,16],"id":"49ae91cd-6f28-4bd0-ba08-adac0ced4136","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/images/{{ $('Webhook').first().json.body.ad_video_id }}.png","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"image/png"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1024,256],"id":"970f4994-5533-48a2-951e-325701489a9d","name":"supabase upload","retryOnFail":true,"waitBetweenTries":5000,"credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Supabase ì—…ë¡œë“œ ì‘ë‹µ ì²˜ë¦¬ ë° Public URL ìƒì„±\n// ============================================\n\n// Supabase Storage ì„¤ì •\nconst bucketName = 'images';\nconst ad_video_id = $('Webhook').first().json.body.ad_video_id;\nconst fileName = ad_video_id + '.png';\n\n// Public URL ìƒì„± (Supabase Storage ê³µê°œ URL í˜•ì‹)\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\n// (ì„ íƒ) ì´ì „ ë…¸ë“œ(supabase upload)ì˜ ì‘ë‹µ ë°ì´í„° í™•ì¸ìš©\n// const uploadResponse = items[0].json;\n// console.log('Upload Response:', JSON.stringify(uploadResponse));\n\n// ê²°ê³¼ ë°˜í™˜\nreturn [\n  {\n    json: {\n      fileName: fileName,\n      publicUrl: publicUrl,  // âœ… ì •ì˜ëœ ë³€ìˆ˜ ì‚¬ìš©\n      ad_video_id: ad_video_id,\n    }\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-832,256],"id":"2524546c-ac07-4631-90ef-10cc1588bcce","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"image_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-624,256],"id":"9dca1de2-e745-4240-ac16-e6becc0f7999","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=You are an expert AI Art Director and Prompt Engineer specialized in Google's 'Nano Banana Pro' (Gemini 3 Image) model. Your task is to analyze the user's input (Advertising Copy & Reference Image Context) and strictly convert it into a highly optimized, raw English image generation prompt string.\n\n### CRITICAL PROCESS\nBefore generating the final output, you must internally process the following steps:\n1.  **Deconstruct the Copy:** Identify the [Product/Subject], [Target Emotion], [Key Message], and [Implicit Tone].\n2.  **Product Preservation Check (MANDATORY):** You must treat the product's visual identity as immutable. The generated prompt must explicitly describe the product's key physical attributes (shape, color, logo placement) exactly as they appear in the provided reference, ensuring the \"Product Prototype\" is strictly preserved.\n3.  **Visual Translation:** Convert abstract adjectives (e.g., \"Fast\", \"Fresh\") into concrete visual cues (e.g., \"Motion blur streaks\", \"Water droplets\"), while keeping the product static and unchanged.\n\n### PROMPT CONSTRUCTION GUIDELINES\nYou must construct the final prompt using the following optimized structure. \n\n1.  **[Subject & Hero Shot]:** -   Define the product clearly as the visual center.\n    -   **CRITICAL:** detailed description of the product features to ensure fidelity to the original. Add the keyword: \"Keep product original form unchanged\".\n    -   Use high-end adjectives (e.g., \"Pristine\", \"Premium material\").\n2.  **[Environment & Atmosphere]:** -   Describe a background that complements the product without distorting it.\n    -   Apply color psychology matching the ad's emotion (e.g., Blue/White for freshness).\n3.  **[Lighting, Camera & Style]:** -   **For Photography:** \"Macro shot\", \"85mm portrait lens\", \"f/1.8 bokeh\", \"Studio lighting\", \"Rim lighting\", \"8k resolution\".\n    -   **For 3D/Art:** \"Octane render\", \"Unreal Engine 5\", \"Isometric view\".\n4.  **[Text Rendering Strategy] (Crucial):** -   If the input implies a headline, add: `text \"EXACT_COPY\" written in [font_style]`.\n    -   **Ensure Legibility:** Instruct to place text on a surface with high contrast.\n5.  **[Technical Constraints]:** -   End with specific parameters: `, photorealistic, sharp focus, --aspect_ratio 1:1`.\n\n### SAFETY & MODERATION\n-   **Strictly Prohibited:** Nudity, sexual content, blood/gore, violence, real celebrities, copyrighted characters.\n-   **Safe Interpretations:** If the copy uses aggressive metaphors, translate them into atmospheric descriptions.\n\n### OUTPUT FORMAT\n-   Output **ONLY** the raw prompt string in English.\n-   **NO** introductory text, **NO** markdown, **NO** explanations.\n\n### EXAMPLE\n**Input:** \"Unleash the beast. Energy X, the drink for gamers.\" (Reference: Black slim can with green X logo)\n**Output:** A sleek black slim can of \"Energy X\" with a glowing green X logo on the center, product form unchanged. Condensation droplets on the surface. Background is a dark cybernetic gaming room with purple and blue LED ambience. Text \"Unleash the beast\" written in bold futuristic font on the top. Cinematic lighting, high contrast, 8k resolution, photorealistic product photography, --aspect_ratio 1:1\n\n### CURRENT TASK\nAnalyze the following Advertising Copy and generate the Nano Banana Pro prompt:\n[Insert Advertising Copy Here]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3104,240],"id":"7a6dbfcf-5d62-4e04-8f00-b0eab0a23eb4","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"},{"parameters":{"httpMethod":"POST","path":"60fc0718-5146-48ec-a49a-ae973841687b","authentication":"basicAuth","responseMode":"responseNode","options":{"responseHeaders":{"entries":[{"name":"selected_ad_copy","value":"selectedCopy"}]}}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4144,480],"id":"806813c9-ac19-4e49-9b03-17e74a48a90f","name":"Webhook","webhookId":"60fc0718-5146-48ec-a49a-ae973841687b","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"jsCode":"// Merge ë…¸ë“œë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ì—¬ Supabase ë…¸ë“œë¥¼ ìš°íšŒ\nconst mergeData = $('Merge').first().json;\n\nconst promptText = mergeData.output || '';  // âœ… \nconst imageBase64 = mergeData.data || '';   // âœ…\n\nif (!promptText || !imageBase64) {\n  throw new Error(`\nâŒ ë°ì´í„° ëˆ„ë½:\n- í”„ë¡¬í”„íŠ¸: ${promptText ? 'ìˆìŒ' : 'ì—†ìŒ'}\n- ì´ë¯¸ì§€: ${imageBase64 ? 'ìˆìŒ' : 'ì—†ìŒ'}\n  `);\n}\n\nconst requestBody = {\n  contents: [{\n    parts: [\n      {\n        text: promptText\n      },\n      {\n        inline_data: {\n          mimeType: \"image/png\",\n          data: imageBase64\n        }\n      }\n    ]\n  }],\n  generationConfig: {\n    maxOutputTokens: 2048,\n    temperature: 0.9,\n    imageConfig: {\n      aspectRatio: \"1:1\"\n    }\n  }\n};\n\nreturn [{\n  json: {\n    apiRequestBody: requestBody\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1792,256],"id":"9c437268-9f45-4a2f-a3b3-b83e3cda9ba2","name":"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[-2944,416],"id":"0c6ba8c4-1398-4fb4-8ef9-76b6d53d1fd3","name":"Think"}],"connections":{"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0},{"node":"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Update: Image Refinement":{"main":[[]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„± ì¤€ë¹„":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Think":{"ai_tool":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_tool","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2026-01-08T17:07:05.000Z","createdAt":"2026-01-08T15:25:05.624Z","id":"alOe4NUtniC95f1a","name":"ìŠ¤í† ë¦¬ë³´ë“œ ìµœì¢… ë³‘í•©","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-merge","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"mmmm1111-mmmm-1111-mmmm-111111111111","name":"Webhook","webhookId":"mmmm1111-mmmm-1111-mmmm-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"generating"},{"fieldId":"progress_stage","fieldValue":"final_merge"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"nnnn2222-nnnn-2222-nnnn-222222222222","name":"ìƒíƒœ: ë³‘í•© ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst scenes = webhookData.scenes || [];\n\nreturn [{\n  json: {\n    storyboard_id: webhookData.storyboard_id,\n    user_id: webhookData.user_id,\n    scenes: scenes,\n    global_bgm_url: webhookData.global_bgm_url || null,\n    output_settings: webhookData.output_settings || {}\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[752,304],"id":"oooo3333-oooo-3333-oooo-333333333333","name":"FFmpeg ì¤€ë¹„"},{"parameters":{"command":"={{ (function() { var data = $json; var outputPath = '/tmp/' + data.storyboard_id + '_final.mp4'; var cmd = 'ffmpeg -y '; var scenes = data.scenes || []; for (var i = 0; i < scenes.length; i++) { cmd += '-i \"' + scenes[i].clip_url + '\" '; } if (data.global_bgm_url) { cmd += '-i \"' + data.global_bgm_url + '\" '; } var sceneCount = scenes.length; cmd += '-filter_complex \"'; for (var j = 0; j < sceneCount; j++) { cmd += '[' + j + ':v]'; } cmd += 'concat=n=' + sceneCount + ':v=1:a=0[outv]'; cmd += '\" '; cmd += '-map \"[outv]\" '; if (data.global_bgm_url) { cmd += '-map ' + sceneCount + ':a '; } cmd += '-c:v libx264 -preset fast -crf 23 '; cmd += '-c:a aac -b:a 128k '; cmd += '\"' + outputPath + '\"'; return cmd; })() }}"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[1008,304],"id":"pppp4444-pppp-4444-pppp-444444444444","name":"FFmpeg ë³‘í•©"},{"parameters":{"fileSelector":"={{ '/tmp/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '_final.mp4' }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[1264,304],"id":"qqqq5555-qqqq-5555-qqqq-555555555555","name":"ì¶œë ¥ íŒŒì¼ ì½ê¸°"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/storyboards/' + $('FFmpeg ì¤€ë¹„').first().json.user_id + '/storyboards/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '/final/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '.mp4' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1504,304],"id":"rrrr6666-rrrr-6666-rrrr-666666666666","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"jsCode":"const prepData = $('FFmpeg ì¤€ë¹„').first().json;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = prepData.user_id + '/storyboards/' + prepData.storyboard_id + '/final/' + prepData.storyboard_id + '.mp4';\nconst finalUrl = supabaseUrl + '/storage/v1/object/public/storyboards/' + storagePath;\n\nreturn [{\n  json: {\n    storyboard_id: prepData.storyboard_id,\n    final_video_url: finalUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1760,304],"id":"ssss7777-ssss-7777-ssss-777777777777","name":"ìµœì¢… URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"final_video_url","fieldValue":"={{ $json.final_video_url }}"},{"fieldId":"status","fieldValue":"completed"},{"fieldId":"progress_stage","fieldValue":"completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2000,304],"id":"tttt8888-tttt-8888-tttt-888888888888","name":"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"command":"={{ 'rm -f /tmp/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '_final.mp4' }}"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[2256,304],"id":"uuuu9999-uuuu-9999-uuuu-999999999999","name":"ì„ì‹œ íŒŒì¼ ì •ë¦¬"},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, storyboard_id: $('ìµœì¢… URL ìƒì„±').first().json.storyboard_id, final_video_url: $('ìµœì¢… URL ìƒì„±').first().json.final_video_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2512,304],"id":"vvvv0000-vvvv-0000-vvvv-000000000000","name":"Webhook ì‘ë‹µ"}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: ë³‘í•© ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: ë³‘í•© ì¤‘":{"main":[[{"node":"FFmpeg ì¤€ë¹„","type":"main","index":0}]]},"FFmpeg ì¤€ë¹„":{"main":[[{"node":"FFmpeg ë³‘í•©","type":"main","index":0}]]},"FFmpeg ë³‘í•©":{"main":[[{"node":"ì¶œë ¥ íŒŒì¼ ì½ê¸°","type":"main","index":0}]]},"ì¶œë ¥ íŒŒì¼ ì½ê¸°":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"ìµœì¢… URL ìƒì„±","type":"main","index":0}]]},"ìµœì¢… URL ìƒì„±":{"main":[[{"node":"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸","type":"main","index":0}]]},"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸":{"main":[[{"node":"ì„ì‹œ íŒŒì¼ ì •ë¦¬","type":"main","index":0}]]},"ì„ì‹œ íŒŒì¼ ì •ë¦¬":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d59319c7-017f-464f-99c0-d5989269e851","activeVersionId":"d59319c7-017f-464f-99c0-d5989269e851","triggerCount":1,"shared":[{"updatedAt":"2026-01-08T15:25:05.626Z","createdAt":"2026-01-08T15:25:05.626Z","role":"workflow:owner","workflowId":"alOe4NUtniC95f1a","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-08T17:07:04.631Z","createdAt":"2026-01-08T17:07:04.631Z","versionId":"d59319c7-017f-464f-99c0-d5989269e851","workflowId":"alOe4NUtniC95f1a","nodes":[{"parameters":{"httpMethod":"POST","path":"storyboard-merge","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[256,304],"id":"mmmm1111-mmmm-1111-mmmm-111111111111","name":"Webhook","webhookId":"mmmm1111-mmmm-1111-mmmm-111111111112","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.body.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"generating"},{"fieldId":"progress_stage","fieldValue":"final_merge"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[512,304],"id":"nnnn2222-nnnn-2222-nnnn-222222222222","name":"ìƒíƒœ: ë³‘í•© ì¤‘","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"const webhookData = $('Webhook').first().json.body;\nconst scenes = webhookData.scenes || [];\n\nreturn [{\n  json: {\n    storyboard_id: webhookData.storyboard_id,\n    user_id: webhookData.user_id,\n    scenes: scenes,\n    global_bgm_url: webhookData.global_bgm_url || null,\n    output_settings: webhookData.output_settings || {}\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[752,304],"id":"oooo3333-oooo-3333-oooo-333333333333","name":"FFmpeg ì¤€ë¹„"},{"parameters":{"command":"={{ (function() { var data = $json; var outputPath = '/tmp/' + data.storyboard_id + '_final.mp4'; var cmd = 'ffmpeg -y '; var scenes = data.scenes || []; for (var i = 0; i < scenes.length; i++) { cmd += '-i \"' + scenes[i].clip_url + '\" '; } if (data.global_bgm_url) { cmd += '-i \"' + data.global_bgm_url + '\" '; } var sceneCount = scenes.length; cmd += '-filter_complex \"'; for (var j = 0; j < sceneCount; j++) { cmd += '[' + j + ':v]'; } cmd += 'concat=n=' + sceneCount + ':v=1:a=0[outv]'; cmd += '\" '; cmd += '-map \"[outv]\" '; if (data.global_bgm_url) { cmd += '-map ' + sceneCount + ':a '; } cmd += '-c:v libx264 -preset fast -crf 23 '; cmd += '-c:a aac -b:a 128k '; cmd += '\"' + outputPath + '\"'; return cmd; })() }}"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[1008,304],"id":"pppp4444-pppp-4444-pppp-444444444444","name":"FFmpeg ë³‘í•©"},{"parameters":{"fileSelector":"={{ '/tmp/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '_final.mp4' }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[1264,304],"id":"qqqq5555-qqqq-5555-qqqq-555555555555","name":"ì¶œë ¥ íŒŒì¼ ì½ê¸°"},{"parameters":{"method":"POST","url":"={{ 'https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/storyboards/' + $('FFmpeg ì¤€ë¹„').first().json.user_id + '/storyboards/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '/final/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '.mp4' }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1504,304],"id":"rrrr6666-rrrr-6666-rrrr-666666666666","name":"Supabase Storage ì—…ë¡œë“œ","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"jsCode":"const prepData = $('FFmpeg ì¤€ë¹„').first().json;\nconst supabaseUrl = 'https://dcbvrbljeanjzsbrqays.supabase.co';\nconst storagePath = prepData.user_id + '/storyboards/' + prepData.storyboard_id + '/final/' + prepData.storyboard_id + '.mp4';\nconst finalUrl = supabaseUrl + '/storage/v1/object/public/storyboards/' + storagePath;\n\nreturn [{\n  json: {\n    storyboard_id: prepData.storyboard_id,\n    final_video_url: finalUrl\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1760,304],"id":"ssss7777-ssss-7777-ssss-777777777777","name":"ìµœì¢… URL ìƒì„±"},{"parameters":{"operation":"update","tableId":"storyboards","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $json.storyboard_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"final_video_url","fieldValue":"={{ $json.final_video_url }}"},{"fieldId":"status","fieldValue":"completed"},{"fieldId":"progress_stage","fieldValue":"completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2000,304],"id":"tttt8888-tttt-8888-tttt-888888888888","name":"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"command":"={{ 'rm -f /tmp/' + $('FFmpeg ì¤€ë¹„').first().json.storyboard_id + '_final.mp4' }}"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[2256,304],"id":"uuuu9999-uuuu-9999-uuuu-999999999999","name":"ì„ì‹œ íŒŒì¼ ì •ë¦¬"},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify({ success: true, storyboard_id: $('ìµœì¢… URL ìƒì„±').first().json.storyboard_id, final_video_url: $('ìµœì¢… URL ìƒì„±').first().json.final_video_url }) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[2512,304],"id":"vvvv0000-vvvv-0000-vvvv-000000000000","name":"Webhook ì‘ë‹µ"}],"connections":{"Webhook":{"main":[[{"node":"ìƒíƒœ: ë³‘í•© ì¤‘","type":"main","index":0}]]},"ìƒíƒœ: ë³‘í•© ì¤‘":{"main":[[{"node":"FFmpeg ì¤€ë¹„","type":"main","index":0}]]},"FFmpeg ì¤€ë¹„":{"main":[[{"node":"FFmpeg ë³‘í•©","type":"main","index":0}]]},"FFmpeg ë³‘í•©":{"main":[[{"node":"ì¶œë ¥ íŒŒì¼ ì½ê¸°","type":"main","index":0}]]},"ì¶œë ¥ íŒŒì¼ ì½ê¸°":{"main":[[{"node":"Supabase Storage ì—…ë¡œë“œ","type":"main","index":0}]]},"Supabase Storage ì—…ë¡œë“œ":{"main":[[{"node":"ìµœì¢… URL ìƒì„±","type":"main","index":0}]]},"ìµœì¢… URL ìƒì„±":{"main":[[{"node":"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸","type":"main","index":0}]]},"ìŠ¤í† ë¦¬ë³´ë“œ ì™„ë£Œ ì—…ë°ì´íŠ¸":{"main":[[{"node":"ì„ì‹œ íŒŒì¼ ì •ë¦¬","type":"main","index":0}]]},"ì„ì‹œ íŒŒì¼ ì •ë¦¬":{"main":[[{"node":"Webhook ì‘ë‹µ","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2025-11-28T11:52:54.000Z","createdAt":"2025-11-26T04:01:05.298Z","id":"cj7A9CAfaOvdBnt3","name":"sapp-studio ì„œë¸Œ","active":false,"isArchived":true,"nodes":[{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-144,192],"id":"d5e49fa4-a696-48cc-98bc-b6ef30107051","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-640,192],"id":"2b54bd99-89d1-4610-bc9a-2f1d744bf4ef","name":"ë³‘í•©1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3088,736],"id":"85184d90-85bb-41cd-b504-3de1f3488891","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2704,224],"id":"ee5e650e-01ea-4884-bfa9-a0676ceb36d5","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1280,208],"id":"a53a8126-8696-4323-bb82-68fc0c5d7770","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1632,208],"id":"a38a7098-d686-4e4d-bb29-56a929d42294","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":2.5,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[112,192],"id":"d977fb81-dc6e-4dd8-a4ee-de73cf94042e","name":"Wait1","webhookId":"d6e65ca4-04a5-47ee-8d2e-e35ee4f96b9a"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2368,208],"id":"c06dcaa7-e822-4f35-8adb-1edfeaadb3e5","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1008,160],"id":"5e5d86ae-f8a5-4bd7-968a-a569ef9f62e3","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-3616,496],"id":"e5ba3c4d-c531-45b9-9533-1475bde21d20","name":"Execute Command"},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1456,208],"id":"67289dad-0bb3-440e-8600-5a6a0befea81","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=1. í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜(Gemini 2.5 Flash / Imagen 4)' ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì— ì •í†µí•œ AI ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì˜ í•µì‹¬ ì—­ëŸ‰ì€ (1) ê´‘ê³  ì¹´í”¼ì— ë‹´ê¸´ ì¶”ìƒì ì¸ í•µì‹¬ ë©”ì‹œì§€ì™€ ê°ì„±ì„ íŒŒì•…í•˜ê³ , (2) ì°¸ì¡° ì´ë¯¸ì§€ì˜ ì‹œê°ì  ìŠ¤íƒ€ì¼ì„ 'ì–¸ë²ˆë“¤ë§(Unbundling)' ê¸°ë²•(ë°±ì„œ 5.2ì ˆ)ìœ¼ë¡œ ë¶„í•´í•˜ë©°, (3) ì´ ë‘ ìš”ì†Œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ìœµí•©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì˜ ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì„ ìµœì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í•­ìƒ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' ë°©ì‹ê³¼ [5.1ì¥]ì˜ 'ì‚¬ì§„í•™ì  ì „ë¬¸ ìš©ì–´' ì›ì¹™ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\n\nì‚¬ìš©ì ì…ë ¥ (ë©€í‹°ëª¨ë‹¬):\n\n[ê´‘ê³  ë¬¸êµ¬]: ì‚¬ìš©ìê°€ ì „ë‹¬í•˜ëŠ” í…ìŠ¤íŠ¸ (ì˜ˆ: \"ì„¸ìƒì˜ ì†ŒìŒì„ ì ì¬ìš°ëŠ” ìˆœê°„. ì˜¤ì§ ë‹¹ì‹ ë§Œì„ ìœ„í•œ ì‚¬ìš´ë“œ. [ì œí’ˆëª…] ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ í—¤ë“œí°.\")\n\n[ì°¸ì¡° ì´ë¯¸ì§€]: ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€. (ì´ ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼, êµ¬ë„, ì¡°ëª…, ìƒ‰ê°ì„ ì°¸ì¡°í•´ì•¼ í•©ë‹ˆë‹¤.)\n\ní•µì‹¬ ëª©í‘œ: ê´‘ê³  ë¬¸êµ¬ì˜ ë©”ì‹œì§€ë¥¼ ì°¸ì¡° ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼ë¡œ ì‹œê°í™”í•˜ëŠ”, 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì— ìµœì í™”ëœ ë‹¨ì¼ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.\n\n3. ì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì¶”ë¡ (Chain of Thought) ê³¼ì •ì„ ê±°ì³ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ê´‘ê³  ë¬¸êµ¬ ë¶„ì„): ì‚¬ìš©ìì˜ [ê´‘ê³  ë¬¸êµ¬]ë¥¼ ë¶„ì„í•˜ì—¬ **í•µì‹¬ ë©”ì‹œì§€, íƒ€ê²Ÿ ê°ì •(ì˜ˆ: í‰ì˜¨í•¨, ì—­ë™ì„±), ê·¸ë¦¬ê³  í•µì‹¬ ì£¼ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼)**ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì°¸ì¡° ì´ë¯¸ì§€ 'ì–¸ë²ˆë“¤ë§'): ì‚¬ìš©ìì˜ [ì°¸ì¡° ì´ë¯¸ì§€]ë¥¼ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 5.2ì ˆ]ì˜ 'ì–¸ë²ˆë“¤ë§' ì „ëµì— ë”°ë¼ êµ¬ì²´ì ì¸ ì‹œê° ìš”ì†Œ í† í°ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.\n\n(ì˜ˆ: 'ì°¨ê°€ìš´ í†¤', 'ê·¹ì ì¸ í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ ì¡°ëª…', 'ì–•ì€ ì‹¬ë„', 'ë¯¸ë‹ˆë©€í•œ êµ¬ë„', 'ê±°ì¹œ ì§ˆê°', 'ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ìƒ‰ê°' ë“±)\n\n3ë‹¨ê³„ (ë©€í‹°ëª¨ë‹¬ ìœµí•© ê¸°íš): 1ë‹¨ê³„ì˜ 'ë©”ì‹œì§€/ê°ì •'ê³¼ 2ë‹¨ê³„ì˜ 'ì‹œê° ìŠ¤íƒ€ì¼'ì„ ìœµí•©í•˜ëŠ” **'í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ì¥ë©´'**ì„ ê¸°íší•©ë‹ˆë‹¤. (ë°±ì„œ 6ì¥ 'ë©€í‹°ëª¨ë‹¬ í•©ì„±' ì›ë¦¬ ì‘ìš©)\n\n(ì‚¬ê³  ì˜ˆ: ë¬¸êµ¬ì˜ 'ê³ ìš”í•¨' + ì´ë¯¸ì§€ì˜ 'ì°¨ê°€ìš´ ë¯¸ë‹ˆë©€ë¦¬ì¦˜' = \"ì°¨ê°€ìš´ ìƒˆë²½ë…˜, ë¯¸ë‹ˆë©€í•œ ìŠ¤íŠœë””ì˜¤ì—ì„œ ì œí’ˆì—ë§Œ ë¶€ë“œëŸ¬ìš´ ë¹›ì´ ì§‘ì¤‘ë˜ëŠ” ì¥ë©´\"ì„ ì—°ì¶œ)\n\n4ë‹¨ê³„ (ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±): 3ë‹¨ê³„ì—ì„œ ê¸°íší•œ ì¥ë©´ì„ [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ **5ë‹¨ê³„ í•µì‹¬ êµ¬ì¡°(ì£¼ì²´, êµ¬ë„, ì•¡ì…˜, í™˜ê²½, ìŠ¤íƒ€ì¼)**ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì— ìµœì í™”ëœ ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n\n4. ê·œì¹™ (Rules):\n\nì„œì‚¬ì  êµ¬ì¡°: ìµœì¢… í”„ë¡¬í”„íŠ¸ëŠ” ë‹¨ìˆœ 'í‚¤ì›Œë“œ ë‚˜ì—´'ì´ ì•„ë‹Œ, ì™„ê²°ëœ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ë¯¸ì§€ ê°€ê³µ : ë°˜ë“œì‹œ ì œê³µëœ ì´ë¯¸ì§€ì˜ ë©”ì¸ ìƒí’ˆì˜ ì›í˜•ì„ ìµœëŒ€í•œ ìœ ì§€í•˜ì—¬ ê°€ê³µ í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì „ë¬¸ ìš©ì–´: [ê¸°ìˆ  ë°±ì„œ 5.1ì ˆ]ì— ë”°ë¼ ì‚¬ì§„í•™ì /ë¯¸ìˆ ì  ì „ë¬¸ ìš©ì–´(ì˜ˆ: 85mm ì¸ë¬¼ ë Œì¦ˆ, ì–•ì€ ì‹¬ë„, í™©ê¸ˆì‹œê°„ëŒ€ ì¡°ëª…, ë¡œìš°ì•µê¸€ ìƒ·, í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ)ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì œì–´ ì •ë°€ë„ë¥¼ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\ní…ìŠ¤íŠ¸ ë Œë”ë§: ë¬¸êµ¬ì— í…ìŠ¤íŠ¸ ë Œë”ë§ì´ í•„ìš”í•œ ê²½ìš°, [ë°±ì„œ 5.3ì ˆ] í…œí”Œë¦¿ì— ë”°ë¼ ...the text \"[ë Œë”ë§í•  ì •í™•í•œ í…ìŠ¤íŠ¸]\" í˜•ì‹ì„ í”„ë¡¬í”„íŠ¸ì— ëª…í™•íˆ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nìœµí•©: ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ [ê´‘ê³  ë¬¸êµ¬]ì˜ ë©”ì‹œì§€ì™€ [ì°¸ì¡° ì´ë¯¸ì§€]ì˜ ìŠ¤íƒ€ì¼, ë‘ ìš”ì†Œë¥¼ ëª¨ë‘ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì¶œë ¥ ì—„ìˆ˜: 1~3ë‹¨ê³„ì˜ ë‚´ë¶€ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤ì§ 4ë‹¨ê³„ì—ì„œ ì™„ì„±ëœ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì„¤ì • : ë°˜ë“œì‹œ ê´‘ê³ ë¬¸êµ¬ë¥¼ ìµœëŒ€í•œ ì´í•´í•˜ê³  ë°˜ì˜ í•˜ì—¬ ìµœì ì˜ ì˜ìƒ ì†ŒìŠ¤ê°€ ë  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.\n\nê¸°í˜¸ : '\"\",'''ëŠ” ì ˆëŒ€ ì‚¬ìš© í•˜ì§€ë§ˆì„¸ìš”.\n\n5. ì˜ˆì‹œ (Examples):\n\n(ì…ë ¥ 1 - ê´‘ê³  ë¬¸êµ¬): \"ë„ì‹œì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ìƒì¾Œí•¨. [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„°. ìì—° ê·¸ëŒ€ë¡œì˜ ì²­ëŸ‰ê°.\"\n\n(ì…ë ¥ 2 - ì°¸ì¡° ì´ë¯¸ì§€): [ì°¨ê°€ìš´ í†¤ì˜, ë¬¼ë°©ìš¸ì´ ë§ºíŒ, ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ì¡°ëª… ë„ì‹œì˜ ë°¤ê±°ë¦¬ ì´ë¯¸ì§€]\n\n(ì¶œë ¥ - ìƒì„±ëœ í”„ë¡¬í”„íŠ¸): \"ì–´ë‘¡ê³  ì¶•ì¶•í•œ ì‚¬ì´ë²„í‘í¬ ë„ì‹œì˜ ë°¤ê±°ë¦¬, ë„¤ì˜¨ ë¶ˆë¹› ê°„íŒì´ ì –ì€ ì•„ìŠ¤íŒ”íŠ¸ì— ë°˜ì‚¬ë˜ëŠ” í™˜ê²½ ì†ì—ì„œ, [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„° ë³‘ì´ í´ë¡œì¦ˆì—…ë˜ì–´ ìˆë‹¤. ë³‘ í‘œë©´ì—ëŠ” ê·¹ë„ë¡œ ì°¨ê°‘ê³  ì„ ëª…í•œ ë¬¼ë°©ìš¸ë“¤ì´ ë§ºí˜€ ìˆìœ¼ë©°, ë³‘ ìì²´ì—ì„œ ì€ì€í•œ ì²­ë¡ìƒ‰ ë¹›ì´ ë¿œì–´ì ¸ ë‚˜ì™€ ì£¼ë³€ì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ë“¯í•œ ëŠë‚Œì„ ì¤€ë‹¤. ì¹´ë©”ë¼ëŠ” 100mm ë§¤í¬ë¡œ ë Œì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ë³‘ì˜ ë””í…Œì¼ê³¼ ë¬¼ë°©ìš¸ì„ ê·¹ì‚¬ì‹¤ì ìœ¼ë¡œ í¬ì°©í•˜ë©°, ë°°ê²½ì˜ ë„¤ì˜¨ ì¡°ëª…ì€ ì•„ë¦„ë‹¤ìš´ ë³´ì¼€ íš¨ê³¼ë¡œ íë ¤ì ¸ ìˆë‹¤. ì „ì²´ì ìœ¼ë¡œ ì°¨ê°‘ê³  ì²­ëŸ‰í•œ í†¤ì˜ ê³ í•´ìƒë„ 3D ë Œë” ìŠ¤íƒ€ì¼.\"\n\nì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n6. ì¶œë ¥ í˜•ì‹ (Output Format):\n\nìµœì¢… ê²°ê³¼ë¬¼ì€ ìœ„ 4ë‹¨ê³„(ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±)ë¥¼ í†µí•´ ì™„ì„±ëœ **'ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ë³¸ë¬¸'**ë§Œì„ í…ìŠ¤íŠ¸ë¡œ ì œê³µí•©ë‹ˆë‹¤. (1~3ë‹¨ê³„ì˜ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\nğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ\n\nì´ í”„ë¡¬í”„íŠ¸ëŠ” **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸(ì»¤ìŠ¤í…€ ëª…ë ¹ì–´)**ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡¬í”„íŠ¸ë¥¼ AI(ì˜ˆ: Gemini)ì— ë¨¼ì € ì…ë ¥í•˜ì—¬ AIì˜ ì—­í• ì„ 'ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€'ë¡œ ì„¤ì •í•˜ì„¸ìš”.\n\nê·¸ í›„, (1) ê´‘ê³  ë¬¸êµ¬ì™€ (2) ì°¸ì¡° ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ì œê³µí•˜ë©´, AIê°€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ëª¨ë¸ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ì¶œë ¥í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.\n\në” ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ìœ„í•´, [ì°¸ì¡° ì´ë¯¸ì§€]ëŠ” ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ê³¼ ë¶„ìœ„ê¸°ê°€ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” ê³ í’ˆì§ˆ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2688,512],"id":"7556bb4b-0684-4878-b34e-48b0ee694eb1","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=### ğŸ”‘ í•µì‹¬ ê·œì¹™ ìš”ì•½\n\n1. **AD_COPY(ê´‘ê³  ë¬¸êµ¬)ëŠ” ë‹¨ í•œ ê¸€ìë„ ìˆ˜ì •Â·ìš”ì•½Â·ì˜ì—­Â·ë²ˆì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.**\n\n   * ë§ì¶¤ë²•/ë„ì–´ì“°ê¸°/ë¬¸ì¥ ìˆœì„œê¹Œì§€ ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤.\n   * ì¤„ë°”ê¿ˆ ì¬ë°°ì¹˜ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ, ë¬¸ì¥ ìˆœì„œ ë³€ê²½ì€ ë¶ˆê°€í•˜ë‹¤.\n\n2. **AD_COPYì— í¬í•¨ëœ ëª¨ë“  ë¬¸ì¥ì€ ìµœì†Œ 1ë²ˆ ì´ìƒ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.**\n\n   * `storyboard[*].spoken_lines` ë˜ëŠ”\n     `storyboard[*].screen_text` ì•ˆì— **ì›ë¬¸ ê·¸ëŒ€ë¡œ** í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.\n   * ëª¨ë“  ë¬¸ì¥ì„ ì‚¬ìš©í–ˆì„ ë•Œë§Œ `\"ad_copy_used_exactly\": true`ë¡œ ì„¤ì •í•œë‹¤.\n\n3. **í•­ìƒ 12ì´ˆ ê´‘ê³  ì˜ìƒë§Œ ìƒì„±í•œë‹¤.**\n\n   * `\"duration\": \"12\"`ë¡œ ê³ ì •í•œë‹¤.\n   * `storyboard`ëŠ” `\"0-4s\"`, `\"4-8s\"`, `\"8-12s\"` ì„¸ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.\n\n4. **ì¶œë ¥ì€ ë°˜ë“œì‹œ ìœ íš¨í•œ í•œ ê°œì˜ ìˆœìˆ˜ JSONë§Œ ì¶œë ¥í•œë‹¤.**\n\n   * JSON ì•ë’¤ì— **ì–´ë– í•œ ì„¤ëª… ë¬¸ì¥ë„ ë„£ì§€ ì•ŠëŠ”ë‹¤.**\n   * ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡(````json`, ``` ë“±)ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.\n   * JSON ë‚´ë¶€ì— ì£¼ì„ì„ ë„£ì§€ ì•ŠëŠ”ë‹¤.\n   * íŠ¸ë ˆì¼ë§ ì½¤ë§ˆ ì—†ì´, íŒŒì‹± ê°€ëŠ¥í•œ ìˆœìˆ˜ JSONë§Œ ë°˜í™˜í•œë‹¤.\n\n5. **`prompt` í•„ë“œëŠ” ì˜ì–´ ì„¤ëª… ì¤‘ì‹¬ + ì›ë¬¸ AD_COPYë¥¼ í¬í•¨í•œ [dialogue]/[soundtrack]/[sfx] ì§€ì‹œë¡œ êµ¬ì„±í•œë‹¤.**\n\n   * ì„¤ëª…Â·ì§€ì‹œì–´ëŠ” ì˜ì–´ë¡œ ì‘ì„±í•œë‹¤.\n   * AD_COPYê°€ ë“¤ì–´ê°€ëŠ” ëŒ€ì‚¬/í…ìŠ¤íŠ¸ ë¶€ë¶„ì€ **ì›ë¬¸ ì–¸ì–´ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n\n6. **ì‚¬ìš©ìê°€ ì œê³µí•œ ì´ë¯¸ì§€ì—ì„œ â€˜ë©”ì¸ ìƒí’ˆâ€™ì„ ìºì¹˜í•´, ê´‘ê³  ì˜ìƒì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì—¬ ë„£ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.**\n\n   * ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•´ **ë©”ì¸ ìƒí’ˆ(ì œí’ˆ/ë¸Œëœë“œ)ì„ ì‹œê°ì ìœ¼ë¡œ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ**(í˜•íƒœ, ì»¬ëŸ¬, íŒ¨í‚¤ì§€, ë¡œê³ , íŠ¹ì§•ì ì¸ ë””í…Œì¼)ë¥¼ íŒŒì•…í•œë‹¤.\n   * ì´ ë©”ì¸ ìƒí’ˆì´ ì˜ìƒ ì•ˆì—ì„œ **ëª…í™•í•œ ì£¼ì¸ê³µ(Hero)**ìœ¼ë¡œ ë“œëŸ¬ë‚˜ë„ë¡,\n\n     * ì¥ë©´ êµ¬ì„±,\n     * ì¹´ë©”ë¼ êµ¬ë„/ì›€ì§ì„,\n     * ì œí’ˆ í´ë¡œì¦ˆì—… ë° ì‚¬ìš© ì¥ë©´,\n     * `prompt` ì† ì‹œê°ì  ë¬˜ì‚¬\n       ì— ì ê·¹ì ìœ¼ë¡œ ë°˜ì˜í•œë‹¤.\n\n---\n\n### 1. í˜ë¥´ì†Œë‚˜ (Persona)\n\në„ˆëŠ” **Sora 2 ê´‘ê³  ì˜ìƒ í”„ë¡¬í”„íŠ¸ ì„¤ê³„ ì „ë‹´ AI ë””ë ‰í„°**ë‹¤.\në„ˆì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n* ì‚¬ìš©ìê°€ ì œê³µí•œ **ê´‘ê³  ë¬¸êµ¬(AD_COPY)**ë¥¼ **ë‹¨ í•œ ê¸€ìë„ ë°”ê¾¸ì§€ ì•Šê³  100% ì‚¬ìš©**í•˜ê³ ,\n* ì‚¬ìš©ìê°€ ì œê³µí•œ **ì°¸ì¡° ì´ë¯¸ì§€ ì† ë©”ì¸ ìƒí’ˆì„ ì •í™•íˆ ìºì¹˜**í•´ì„œ,\n* **ì •í™•íˆ 12ì´ˆ ê¸¸ì´ì˜ ê´‘ê³  ì˜ìƒ**ì„ ë§Œë“¤ ìˆ˜ ìˆë„ë¡,\n* **Sora 2ì— ë„£ì„ ë‹¨ì¼ í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸(`prompt`)**ì™€\n* ê·¸ì— ë§ëŠ” **ê¸°ìˆ  íŒŒë¼ë¯¸í„°(JSON)**ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒ.\n* ì‹œë„¤ë§ˆí† ê·¸ë˜í”¼, ì¡°ëª…, ê°ì •, ì‚¬ìš´ë“œ(ëŒ€ì‚¬/ë°°ê²½ìŒ/íš¨ê³¼ìŒ)ì™€ í•¨ê»˜\n  **ì´ë¯¸ì§€ ì† ë©”ì¸ ìƒí’ˆì˜ ì‹œê°ì  íŠ¹ì§•ì„ ì‚´ë¦° í•˜ë‚˜ì˜ ì™„ì„±ëœ ê´‘ê³  ì»·**ì„ êµ¬ì„±í•œë‹¤.\n\n---\n\n### 2. ë§¥ë½ (Context)\n\n* ë„ˆëŠ” Sora 2ì˜ íŠ¹ì„±ì„ ì´í•´í•˜ê³  ìˆë‹¤.\n\n  * ì˜ìƒê³¼ ì˜¤ë””ì˜¤(ëŒ€ì‚¬, BGM, íš¨ê³¼ìŒ)ë¥¼ **ë™ì‹œì— ìƒì„±**í•  ìˆ˜ ìˆë‹¤.\n  * ê°ì •, í‘œì •, ëª©ì†Œë¦¬ í†¤ì„ ì •êµí•˜ê²Œ ì—°ì¶œí•  ìˆ˜ ìˆë‹¤.\n  * ì§§ì€ ê¸¸ì´(10~12ì´ˆ)ì—ì„œ ì§€ì‹œë¥¼ ê°€ì¥ ì˜ ë”°ë¥¸ë‹¤.\n* ì‚¬ìš©ìëŠ” ë³´í†µ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.\n\n  * **AD_COPY**: ê´‘ê³  ë¬¸êµ¬ (í•„ìˆ˜)\n  * **IMAGE_REFERENCE**: í•˜ë‚˜ ì´ìƒì˜ ì°¸ì¡° ì´ë¯¸ì§€ (ë©”ì¸ ìƒí’ˆì´ í¬í•¨ëœ ì´ë¯¸ì§€)\n  * **BRAND / PRODUCT**: ë¸Œëœë“œ, ì œí’ˆëª…, ì¹´í…Œê³ ë¦¬ (ì„ íƒ)\n  * **TARGET**: íƒ€ê¹ƒ ê³ ê° (ì„ íƒ)\n  * **TONE / STYLE**: ì›í•˜ëŠ” ë¶„ìœ„ê¸°, ìŠ¤íƒ€ì¼ (ì„ íƒ)\n  * **FORMAT**: ë¹„ìœ¨, í•´ìƒë„, ì±„ë„ ì •ë³´ (ì„ íƒ)\n* ì‚¬ìš©ìê°€ ë³„ë„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ê°€ì •í•œë‹¤.\n\n  * ì˜ìƒ ê¸¸ì´: **12ì´ˆ** (í•­ìƒ ê³ ì •)\n  * í™”ë©´ ë¹„ìœ¨: **9:16 ì„¸ë¡œ**\n  * í•´ìƒë„: **720x1280**\n  * ìŠ¤íƒ€ì¼: **UGC (ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ ì§ì ‘ ì´¬ì˜í•œ ìì—°ìŠ¤ëŸ¬ìš´ ëŠë‚Œ)**\n  * íƒ€ê¹ƒ: **ì¼ë°˜ ì†Œë¹„ì, SNS ìˆí¼ ê´‘ê³ ìš©**\n\n---\n\n### 3. ì„ë¬´ (Task) â€“ ë‚´ë¶€ ì‚¬ê³  ì§€ì¹¨ (ìš”ì•½)\n\nì•„ë˜ ë‹¨ê³„ëŠ” **ëª¨ë¸ ë‚´ë¶€ ì‚¬ê³ ìš© ì§€ì¹¨**ì´ë©°, ìµœì¢… ì¶œë ¥ì—ëŠ” í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n#### 1ë‹¨ê³„: ì…ë ¥ ë¶„ì„\n\n1. ì‚¬ìš©ìê°€ ì œê³µí•œ ë‚´ìš©ì„ ì•„ë˜ í•­ëª©ìœ¼ë¡œ ë¶„ë¥˜í•œë‹¤.\n\n   * **AD_COPY**: ê´‘ê³  ë¬¸êµ¬ (í•„ìˆ˜)\n   * **IMAGE_REFERENCE**: ë©”ì¸ ìƒí’ˆì´ í¬í•¨ëœ ì°¸ì¡° ì´ë¯¸ì§€ë“¤ (ìˆë‹¤ë©´)\n   * **BRAND / PRODUCT**: ë¸Œëœë“œ/ì œí’ˆ ì •ë³´ (ìˆë‹¤ë©´)\n   * **TARGET**: íƒ€ê¹ƒ ê³ ê° (ìˆë‹¤ë©´)\n   * **TONE / STYLE**: í†¤/ìŠ¤íƒ€ì¼ (ìˆë‹¤ë©´)\n   * **FORMAT**: ë¹„ìœ¨/í•´ìƒë„/ì±„ë„ (ìˆë‹¤ë©´)\n2. **AD_COPYëŠ” ì ˆëŒ€ í¸ì§‘í•˜ê±°ë‚˜ ìš”ì•½/ìˆœí™”/ì˜ì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.**\n\n   * ë§ì¶¤ë²•ì„ ê³ ì¹˜ì§€ ì•ŠëŠ”ë‹¤.\n   * ë‹¨ì–´ë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤.\n   * ë¬¸ì¥ ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤.\n3. AD_COPYë¥¼ ë¬¸ì¥ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•´ **ë¬¸ì¥ ë¦¬ìŠ¤íŠ¸**ë¥¼ ë§Œë“ ë‹¤.\n\n   * ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ì¤‘ì— ê° ë¬¸ì¥ì´ `spoken_lines` ë˜ëŠ” `screen_text`ì— ì •í™•íˆ í¬í•¨ë˜ì—ˆëŠ”ì§€ ê²€ì¦í•œë‹¤.\n4. **IMAGE_REFERENCE ë¶„ì„**:\n\n   * ì°¸ì¡° ì´ë¯¸ì§€(ë“¤)ë¥¼ ë¶„ì„í•´ ë‹¤ìŒì„ íŒŒì•…í•œë‹¤.\n\n     * ë©”ì¸ ìƒí’ˆ(ì œí’ˆ/ë¸Œëœë“œ)ì´ ë¬´ì—‡ì¸ì§€\n     * ìƒí’ˆì˜ í˜•íƒœ(ì˜ˆ: ë³‘, íŠœë¸Œ, ë°•ìŠ¤, ìº” ë“±)\n     * ì£¼ìš” ì»¬ëŸ¬(ì˜ˆ: íŒŒë€ìƒ‰ ë¼ë²¨, í°ìƒ‰ ìš©ê¸° ë“±)\n     * íŒ¨í‚¤ì§€ ë””ìì¸(ë¡œê³  ìœ„ì¹˜, ê·¸ë˜í”½, í…ìŠ¤íŠ¸ íŠ¹ì§• ë“±)\n     * ìƒí’ˆ ì‚¬ìš© ìƒí™©ì„ ì•”ì‹œí•˜ëŠ” ìš”ì†Œ(ì†ì— ë“¤ê³  ìˆìŒ, ìš•ì‹¤/ì£¼ë°©/ì±…ìƒ ìœ„ ë“±)\n   * ì´ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ì˜ìƒì—ì„œ **ì–´ë–¤ ì¥ë©´ê³¼ êµ¬ë„ë¡œ ë©”ì¸ ìƒí’ˆì„ ë³´ì—¬ì¤„ì§€** êµ¬ìƒí•œë‹¤.\n\n#### 2ë‹¨ê³„: 12ì´ˆ íƒ€ì„ë¼ì¸ ì„¤ê³„\n\n1. ì „ì²´ ê¸¸ì´ëŠ” í•­ìƒ **12ì´ˆ**ë¡œ ê³ ì •í•˜ê³ , `\"duration\": \"12\"`ë¡œ ì„¤ì •í•œë‹¤.\n2. 12ì´ˆë¥¼ 3ê°œ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.\n\n   * **Hook (0â€“4ì´ˆ)**: ì‹œì„ ì„ ê°•í•˜ê²Œ ë„ëŠ” ë¶€ë¶„\n\n     * ì´ë•Œ ë©”ì¸ ìƒí’ˆì´ ì‹œê°ì ìœ¼ë¡œ ê°•í•˜ê²Œ ë“±ì¥í•˜ê±°ë‚˜, ë“±ì¥ ì§ì „ì˜ ê¸°ëŒ€ê°ì„ ì¤„ ìˆ˜ ìˆë‹¤.\n   * **Body (4â€“8ì´ˆ)**: ì œí’ˆ/ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ê°€ì¹˜ ì„¤ëª…\n\n     * ë©”ì¸ ìƒí’ˆì˜ ê¸°ëŠ¥/ì‚¬ìš© ëª¨ìŠµ/ìƒì„¸ í´ë¡œì¦ˆì—…ì„ ë³´ì—¬ì£¼ê¸°ì— ì¢‹ì€ êµ¬ê°„.\n   * **CTA (8â€“12ì´ˆ)**: í–‰ë™ ìœ ë„(êµ¬ë§¤, ì„¤ì¹˜, ì‹ ì²­ ë“±)\n\n     * ë©”ì¸ ìƒí’ˆ + ë¸Œëœë“œ ë¡œê³  + AD_COPYì˜ CTA ë¬¸ì¥ì„ í•¨ê»˜ ë…¸ì¶œí•˜ëŠ” êµ¬ê°„.\n3. AD_COPYê°€ ì§§ìœ¼ë©´:\n\n   * Hook/Body/CTA êµ¬ê°„ì—ì„œ **ëŒ€ì‚¬ì™€ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¡œ ë°˜ë³µ ë…¸ì¶œ**í•œë‹¤.\n4. AD_COPYê°€ ê¸¸ë©´:\n\n   * **ëŒ€ì‚¬ë¡œ ë§í•˜ê¸° ì ì ˆí•œ ë¬¸ì¥**ê³¼\n   * **ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¡œë§Œ ë…¸ì¶œí•  ë¬¸ì¥**ì„ êµ¬ë¶„í•œë‹¤.\n   * ëª¨ë“  ë¬¸ì¥ì€ ìµœì†Œ 1ë²ˆ ì´ìƒ ì–´ë””ì—”ê°€ ì“°ì´ë„ë¡ ì„¤ê³„í•œë‹¤.\n\n#### 3ë‹¨ê³„: ì¥ë©´ êµ¬ì„± ë° ì‹œë„¤ë§ˆí‹± ì„¤ê³„ (ì´ë¯¸ì§€ â†’ ë©”ì¸ ìƒí’ˆ ë°˜ì˜)\n\n1. ì˜ìƒ ì „ì²´ë¥¼ **1~3ê°œ ì¥ë©´(Scene)**ìœ¼ë¡œ ì„¤ê³„í•œë‹¤.\n2. ê° ì¥ë©´ì— ëŒ€í•´ ë‹¤ìŒ ìš”ì†Œë¥¼ ì„¤ì •í•œë‹¤.\n\n   * **ì¹´ë©”ë¼ êµ¬ë„**: ì™€ì´ë“œìƒ·, í´ë¡œì¦ˆì—…, ì˜¤ë²„ìˆ„ë”, ë§¤í¬ë¡œ ë“±\n   * **ì¹´ë©”ë¼ ì›€ì§ì„**: ì²œì²œíˆ ëŒë¦¬ ì¸, í•¸ë“œí—¬ë“œ, íŒŒë‹ ë“±\n   * **ì¡°ëª…ê³¼ ë¶„ìœ„ê¸°**: ìì—°ê´‘, ê³¨ë“ ì•„ì›Œ, ë¶€ë“œëŸ¬ìš´ ì‹¤ë‚´ ì¡°ëª… ë“±\n   * **ê³µê°„/ë°°ê²½**: ìš•ì‹¤, ì£¼ë°©, ì‚¬ë¬´ì‹¤, ì¹´í˜, ì•¼ì™¸ ë“±\n   * **ê°ì • ìƒíƒœ**: ê¸°ì¨, ë†€ëŒ, ì•ˆë„, ìì‹ ê° ë“±\n3. `prompt`ì˜ ì²« ë¶€ë¶„ì—ì„œ ì˜ìƒ ì„¸ê³„ê´€/ìŠ¤íƒ€ì¼ì„ ì„ ì–¸í•´ í†µì¼ì„±ì„ ì¤€ë‹¤. ì˜ˆ:\n\n   * `\"Vertical 9:16 UGC-style smartphone video, natural lighting, realistic and intimate feeling.\"`\n4. **IMAGE_REFERENCEì—ì„œ ìºì¹˜í•œ ë©”ì¸ ìƒí’ˆì„ ì¤‘ì‹¬ìœ¼ë¡œ ì¥ë©´ì„ ì„¤ê³„í•œë‹¤.**\n\n   * ë©”ì¸ ìƒí’ˆì´:\n\n     * ì¶©ë¶„í•œ ì‹œê°„ ë™ì•ˆ í™”ë©´ì— ë“±ì¥í•˜ê³ ,\n     * í´ë¡œì¦ˆì—…/ë§¤í¬ë¡œ ìƒ·ìœ¼ë¡œ ë””í…Œì¼ì´ ë³´ì´ë©°,\n     * ì‹¤ì œ ì‚¬ìš© ë§¥ë½(ì†ì— ë“¤ê³  ì‚¬ìš©, í…Œì´ë¸” ìœ„ì— ë†“ì¸ ìƒíƒœ ë“±) ì†ì—ì„œ ë³´ì—¬ì§€ë„ë¡ í•œë‹¤.\n   * ì´ë¯¸ì§€ ì† ì»¬ëŸ¬ íŒ”ë ˆíŠ¸Â·íŒ¨í‚¤ì§€Â·ì†Œí’ˆì„ ì°¸ê³ í•´ ì˜ìƒì˜ ì „ì²´ ë¯¸ì¥ì„¼ì„ ë§ì¶˜ë‹¤.\n5. ì œí’ˆ ì¹´í…Œê³ ë¦¬ê°€ ë¶„ëª…í•˜ë©´, ì ì ˆí•œ ì—°ì¶œ íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤. ì˜ˆ:\n\n   * ë·°í‹°/ìŠ¤í‚¨ì¼€ì–´: ê±°ìš¸ìƒ· + ë§¤í¬ë¡œ í…ìŠ¤ì²˜ + ì „/í›„ ë¹„êµ + ì´ë¯¸ì§€ ì† íŒ¨í‚¤ì§€ í´ë¡œì¦ˆì—…\n   * ì‹ìŒë£Œ: ì˜¤ë²„í—¤ë“œ ì¤€ë¹„ìƒ· + ë§¤í¬ë¡œ ì»µ/ì‹ì¬ë£Œ í´ë¡œì¦ˆì—… + ì‹œìŒ ë¦¬ì•¡ì…˜ + ì´ë¯¸ì§€ ì† ì œí’ˆ í¬ì¥ ì¬í˜„\n   * í…Œí¬/ì•±: ìŠ¤ë§ˆíŠ¸í° í™”ë©´ í´ë¡œì¦ˆì—… + ì†ì´ ì•±ì„ ì¡°ì‘í•˜ëŠ” ì¥ë©´ + ì´ë¯¸ì§€ ì† UI/ë””ë°”ì´ìŠ¤ ëŠë‚Œ ë°˜ì˜\n\n#### 4ë‹¨ê³„: ì˜¤ë””ì˜¤ ì„¤ê³„ â€“ [dialogue] / [soundtrack] / [sfx]\n\n1. **[dialogue] ë¸”ë¡ì—ì„œ AD_COPYë¥¼ 100% ì‚¬ìš©í•œë‹¤.**\n\n   * AD_COPY ë¬¸ì¥ì„ í•„ìš”í•œ ë§Œí¼ ë‚˜ëˆ„ì–´ í™”ìì—ê²Œ ë°°ë¶„í•œë‹¤.\n   * ì˜ˆ: Narrator, User, Friend, On-screen narrator ë“±.\n   * ê° ëŒ€ì‚¬ ì•ˆì˜ ë¬¸ì¥ì€ **ì›ë¬¸ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n     ì˜ˆ: `Narrator: \"ì§€ê¸ˆ ê°€ì…í•˜ë©´ ì²« ë‹¬ ë¬´ë£Œ, ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”.\"`\n2. **[soundtrack]**: ì˜ìƒ í†¤ì— ë§ëŠ” BGMì„ ì§€ì‹œí•œë‹¤.\n\n   * ì˜ˆ: `\"Upbeat modern pop soundtrack, light and trustworthy, matching the pacing of a 15-second vertical mobile ad.\"`\n3. **[sfx]**: ì¥ë©´ì— í•„ìš”í•œ íš¨ê³¼ìŒ/í™˜ê²½ìŒì„ ì§€ì •í•œë‹¤.\n\n   * ì˜ˆ: í‚¤ë³´ë“œ íƒ€ê±´ ì†Œë¦¬, ì•± ì•Œë¦¼ìŒ, ì»¤í”¼ ë”°ë¥´ëŠ” ì†Œë¦¬ ë“±.\n4. AD_COPYê°€ ê¸¸ì–´ì„œ 12ì´ˆ ì•ˆì— ëª¨ë‘ ë§í•˜ê¸° ì–´ë µë‹¤ë©´:\n\n   * ëŒ€ì‚¬ë¡œ ë§í•˜ëŠ” ë¬¸ì¥ ìˆ˜ë¥¼ ì¤„ì´ê³ ,\n   * ë‚˜ë¨¸ì§€ë¥¼ **ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸(ìë§‰/ìº¡ì…˜)**ë¡œ ë°°ì¹˜í•˜ë„ë¡ ì„¤ê³„í•œë‹¤.\n\n#### 5ë‹¨ê³„: AD_COPY ì‚¬ìš© ê²€ì¦\n\n1. AD_COPY ë¬¸ì¥ ë¦¬ìŠ¤íŠ¸ì˜ ê° ë¬¸ì¥ì— ëŒ€í•´:\n\n   * ìµœì†Œ í•œ ë²ˆ ì´ìƒ `storyboard[*].spoken_lines` ë˜ëŠ” `storyboard[*].screen_text` ì¤‘ **ì–´ëŠ í•œ ê³³ì— ì›ë¬¸ ê·¸ëŒ€ë¡œ** í¬í•¨ë˜ë„ë¡ í•œë‹¤.\n2. ìµœì¢… JSONì„ ìƒì„±í•˜ê¸° ì „ì— ë‚´ë¶€ì ìœ¼ë¡œ í™•ì¸í•œë‹¤.\n\n   * ëª¨ë“  ë¬¸ì¥ì´ ì‚¬ìš©ë˜ë©´ `\"ad_copy_used_exactly\": true`.\n   * í•˜ë‚˜ë¼ë„ ëˆ„ë½ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ë©´ `\"ad_copy_used_exactly\": false`ì™€ `\"note\"`ë¥¼ ì„¤ì •í•œë‹¤.\n\n---\n\n### 4. ìµœì¢… Sora 2 í”„ë¡¬í”„íŠ¸ ìƒì„± ê·œì¹™\n\n1. `prompt` í•„ë“œëŠ” **í•˜ë‚˜ì˜ ê¸´ ì˜ì–´ ì„¤ëª… í…ìŠ¤íŠ¸**ë¡œ ì‘ì„±í•œë‹¤. ì´ ì•ˆì—:\n\n   * ì˜ìƒì˜ ìŠ¤íƒ€ì¼/ì¹´ë©”ë¼/ì¡°ëª…/ê³µê°„/ê°ì • ë¬˜ì‚¬(ì˜ì–´),\n   * **IMAGE_REFERENCEì—ì„œ ìºì¹˜í•œ ë©”ì¸ ìƒí’ˆì˜ í˜•íƒœÂ·ìƒ‰Â·íŒ¨í‚¤ì§€Â·ë¡œê³  ë“± ì‹œê°ì  íŠ¹ì§•ì— ëŒ€í•œ ë¬˜ì‚¬**,\n   * AD_COPYê°€ í¬í•¨ëœ **[dialogue]** ì§€ì‹œ,\n   * BGMì— ëŒ€í•œ **[soundtrack]** ì§€ì‹œ,\n   * íš¨ê³¼ìŒì— ëŒ€í•œ **[sfx]** ì§€ì‹œ,\n   * ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ ì§€ì‹œ(`On-screen text: ...`)\n     ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì„ì—¬ ìˆì–´ì•¼ í•œë‹¤.\n2. AD_COPY ë¶€ë¶„ì€ **ì›ë¬¸ ì–¸ì–´ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n\n   * ì–´ë–¤ ê²½ìš°ì—ë„ AD_COPYë¥¼ ë²ˆì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.\n3. ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¥¼ ëª…ì‹œí•  ë•Œë„ AD_COPY ì›ë¬¸ì„ ê·¸ëŒ€ë¡œ ì“´ë‹¤.\n\n   * ì˜ˆ: `On-screen text at 0â€“5 seconds: \"ì§€ê¸ˆ ë‹¨ 12ì´ˆë§Œ íˆ¬ìí•˜ì„¸ìš”.\"`\n4. **ì¸ë¬¼ í‘œí˜„**: ì ˆëŒ€ë¡œ \"woman\", \"man\", \"person\" ë“± ì‹¤ì œ ì‚¬ëŒì„ ë¬˜ì‚¬í•˜ì§€ ë§ˆì„¸ìš”.\n\n---\n\n### 5. ì¶œë ¥ í˜•ì‹ (JSON ìŠ¤í‚¤ë§ˆ)\n\në„ˆì˜ ìµœì¢… ì¶œë ¥ì€ **ì˜¤ì§ í•˜ë‚˜ì˜ ìœ íš¨í•œ JSON ê°ì²´**ì—¬ì•¼ í•œë‹¤.\në§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ì´ë‚˜ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\nì„±ê³µ ì¼€ì´ìŠ¤(AD_COPY ì œê³µë¨)ì˜ ê¸°ë³¸ êµ¬ì¡°:\n\n```json\n{\n  \"model\": \"sora-2-pro\",\n  \"size\": \"720x1280\",\n  \"duration\": \"12\",\n  \"prompt\": \"<Sora 2ì— ë„£ì„ ìµœì¢… í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ ì „ì²´>\",\n  \"storyboard\": [\n    {\n      \"time_range\": \"0-4s\",\n      \"description\": \"<ì´ êµ¬ê°„ì˜ ì¥ë©´/ì¹´ë©”ë¼/í–‰ë™ ìš”ì•½ (ë©”ì¸ ìƒí’ˆì´ ì–´ë–»ê²Œ ë“±ì¥í•˜ëŠ”ì§€ í¬í•¨)>\",\n      \"spoken_lines\": [\n        \"<ì´ êµ¬ê°„ì—ì„œ ë°œí™”ë˜ëŠ” AD_COPY ë¬¸ì¥ë“¤ ê·¸ëŒ€ë¡œ>\"\n      ],\n      \"screen_text\": [\n        \"<ì´ êµ¬ê°„ í™”ë©´ì— í‘œì‹œë˜ëŠ” í…ìŠ¤íŠ¸(ìˆë‹¤ë©´), AD_COPY ì›ë¬¸ ê·¸ëŒ€ë¡œ>\"\n      ]\n    },\n    {\n      \"time_range\": \"4-8s\",\n      \"description\": \"<ì´ êµ¬ê°„ ìš”ì•½ (ë©”ì¸ ìƒí’ˆ ì‚¬ìš©/í´ë¡œì¦ˆì—… ë“±)>\",\n      \"spoken_lines\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ëŒ€ì‚¬ë“¤>\"\n      ],\n      \"screen_text\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë“¤>\"\n      ]\n    },\n    {\n      \"time_range\": \"8-12s\",\n      \"description\": \"<ì´ êµ¬ê°„ ìš”ì•½ (ë©”ì¸ ìƒí’ˆ + ë¸Œëœë“œ + CTA ê°•ì¡°)>\",\n      \"spoken_lines\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ëŒ€ì‚¬ë“¤>\"\n      ],\n      \"screen_text\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë“¤>\"\n      ]\n    }\n  ],\n  \"ad_copy_used_exactly\": true\n}\n```\n\n* `\"ad_copy_used_exactly\"`ëŠ”:\n\n  * AD_COPYì˜ ëª¨ë“  ë¬¸ì¥ì´ ìµœì†Œ 1íšŒ ì´ìƒ, ë‹¨ í•œ ê¸€ìë„ ë°”ë€Œì§€ ì•Šê³ \n    `spoken_lines` ë˜ëŠ” `screen_text` ì–´ë”˜ê°€ì— í¬í•¨ë˜ì—ˆì„ ë•Œë§Œ `true`.\n  * í•˜ë‚˜ë¼ë„ ëˆ„ë½ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ì—ˆë‹¤ë©´ `false`.\n* AD_COPYë¥¼ 100% ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë˜ ê²½ìš°(ì˜ˆ: ê¸¸ì´ ì œí•œ ë“±)ì—ëŠ”:\n\n  * `\"ad_copy_used_exactly\": false`ë¡œ ì„¤ì •í•˜ê³ ,\n  * `\"note\"` í•„ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì–´ë–¤ ë¬¸ì¥ì„ ì™œ ì‚¬ìš©í•˜ì§€ ëª»í–ˆëŠ”ì§€ ì„¤ëª…í•œë‹¤. ì˜ˆ:\n\n    ```json\n    \"note\": \"The last sentence of AD_COPY was too long to be spoken naturally in 15 seconds, so it is only shown as on-screen text.\"\n    ```\n\n---\n\n### 6. ì—ëŸ¬ ì²˜ë¦¬ ê·œì¹™\n\n* ê´‘ê³  ë¬¸êµ¬(AD_COPY)ê°€ ì „í˜€ ì œê³µë˜ì§€ ì•Šì€ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´,\n  ë‹¤ìŒê³¼ ê°™ì´ **ê°„ë‹¨í•œ ì—ëŸ¬ JSON**ë§Œ ë°˜í™˜í•œë‹¤.\n\n```json\n{\n  \"error\": \"AD_COPY is required\"\n}\n```\n\n* ì´ ê²½ìš°ì—ë„ JSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠëŠ”ë‹¤."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-1888,624],"id":"64a3d12b-25ae-4de2-9b2d-63566cebbef0","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3120,224],"id":"a05dbda5-2bb3-4d34-8086-b4e60a52329e","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&order=created_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3280,736],"id":"df6db0d0-da06-4eac-a58f-c9ebf3ef9948","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3312,224],"id":"2eabca1e-bf78-430b-9471-1588583963de","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2912,224],"id":"fcbf83db-01da-4705-8f31-1bd974dd30a1","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"httpMethod":"POST","path":"c00655f4-86d5-48da-9c19-3fe43b025a4d","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4528,496],"id":"39b6b065-8f50-4829-8fbf-aeefb3c64012","name":"Webhook","webhookId":"c00655f4-86d5-48da-9c19-3fe43b025a4d"},{"parameters":{"modelName":"models/gemini-2.5-pro","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-2448,912],"id":"887c6833-5123-4106-8601-4cf89b74e096","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4272,496],"id":"ded4a637-ac3b-48c6-bc67-3fa63af28033","name":"Respond to Webhook1"},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1904,208],"id":"f9af27cc-78a1-48bd-9d98-12cd4e15af4c","name":"Wait2","webhookId":"f1d06255-7fe4-4ed5-9cb5-83038a75daf6"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[16,-16],"id":"8c985679-3d49-4665-ac6c-fba192b94beb","name":"Wait3","webhookId":"a2fa57d4-ca0e-431c-afdf-a39639177c8a"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3840,496],"id":"58692193-ed9f-4b99-a898-253f767c8c4d","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-2112,208],"id":"bd7864c6-8cae-48cb-b411-7c92cb65cc65","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-176,-16],"id":"8c042c29-0dd4-49dc-bc3c-ed5286fc8594","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4064,496],"id":"056966f6-c924-4ff3-8347-921e3158dd3a","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1008,320],"id":"027e3529-2dca-4dda-acba-cde3c0b1761b","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1232,160],"id":"61ae4a3c-7a76-4c15-b5be-d2fc13e17872","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1440,160],"id":"2ea28e20-8b41-451b-8a6c-429b418dc202","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1648,160],"id":"f55d4cf3-b0a1-4dad-927b-7dda6945b951","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// Convert to File ë…¸ë“œì˜ binary ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"Convert to File\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\nconsole.log('í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°:', promptText.substring(0, 100) + '...');\n\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-400,192],"id":"288076c2-06dd-4ecd-b46a-b73c2be38861","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-1088,208],"id":"c27c6740-ed65-4d33-848b-2f50841578bf","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[304,192],"id":"df99a5f0-7b50-4137-9e2c-9a39c5cc1696","name":"ìƒíƒœí™•ì¸","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[512,192],"id":"bd0766f7-d6cf-43b7-9da6-bf8a0b34dcb7","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[704,176],"id":"0fb7f9c9-33a4-4371-bdcd-a4e7a6c8e559","name":"Switch"}],"connections":{"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°":{"main":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1","type":"main","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0},{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1":{"main":[[{"node":"ë³‘í•©1","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_languageModel","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1","type":"ai_languageModel","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"fce51938-25fa-49f0-9b7b-4c21228807bc","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2025-11-26T04:01:05.303Z","createdAt":"2025-11-26T04:01:05.303Z","role":"workflow:owner","workflowId":"cj7A9CAfaOvdBnt3","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-13T17:56:20.577Z","createdAt":"2025-11-30T18:09:16.862Z","id":"nr5mopWlSGlZ2DVu","name":"sapp-studio-adcopy-picture","active":true,"isArchived":false,"nodes":[{"parameters":{"jsCode":"// ëª¨ë“  ê´‘ê³ ë¬¸êµ¬ ì•„ì´í…œì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì·¨í•© (6ê°œ)\nconst allCopies = $input.all().map(item => ({\n  id: item.json.ad_copy_id,\n  text: item.json.ad_copy_text\n}));\n\n// ì›¹ ì‘ë‹µìš© ë°ì´í„° êµ¬ì¡° ìƒì„±\nreturn [{\n  json: {\n    success: true,\n    message: \"ê´‘ê³  ë¬¸êµ¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n    total_count: allCopies.length,  // 6ê°œ í™•ì¸ìš©\n    ad_video_id: $input.first().json.ad_video_id,\n    product_name: $input.first().json.product_name,\n    ad_copies: allCopies,\n    generated_at: new Date().toISOString()\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2752,480],"id":"88f862df-cb25-4fa6-bf42-21d17f934fd9","name":"ì‘ë‹µ ì·¨í•©"},{"parameters":{"jsCode":"// ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°ì˜ ì¶œë ¥ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\nconst aiOutput = $input.first().json.output;\n\nlet adCopies = [];\n\n// Case 1: JSON ë°°ì—´ í˜•ì‹ì¸ ê²½ìš° ([\"ë¬¸êµ¬1\", \"ë¬¸êµ¬2\", ...])\nif (typeof aiOutput === 'string' && aiOutput.trim().startsWith('[')) {\n  try {\n    const parsed = JSON.parse(aiOutput);\n    if (Array.isArray(parsed)) {\n      adCopies = parsed.map(item => typeof item === 'string' ? item.trim() : String(item).trim());\n    }\n  } catch (e) {\n    // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¡œ\n  }\n}\n\n// Case 2: \"---\" êµ¬ë¶„ì í˜•ì‹ì¸ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('---')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0);\n}\n\n// Case 3: ì¤„ë°”ê¿ˆìœ¼ë¡œë§Œ êµ¬ë¶„ëœ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('\\n')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0 && !copy.startsWith('#'));\n}\n\n// ë¹ˆ ê²°ê³¼ ë°©ì§€\nif (adCopies.length === 0) {\n  adCopies = ['ê´‘ê³  ë¬¸êµ¬ ìƒì„± ì‹¤íŒ¨ - AI ì¶œë ¥ì„ í™•ì¸í•´ì£¼ì„¸ìš”'];\n}\n\n// 'ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…' ë…¸ë“œì—ì„œ ì•ˆì „í•˜ê²Œ product_name ì¶”ì¶œ\nconst supabaseData = $('ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…').first().json;\nlet productName = 'ìƒí’ˆëª… ì—†ìŒ';\n\nif (Array.isArray(supabaseData) && supabaseData.length > 0) {\n  productName = supabaseData[0].product_name || 'ìƒí’ˆëª… ì—†ìŒ';\n} else if (supabaseData && supabaseData.product_name) {\n  productName = supabaseData.product_name;\n}\n\n// ad_video_id ì•ˆì „í•˜ê²Œ ì ‘ê·¼\nconst adVideoId = $('Extract Workflow Data').first().json.ad_video_id || '';\n\n// â­ 6ê°œì˜ ê´‘ê³ ë¬¸êµ¬ë¥¼ 6ê°œì˜ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nconst result = adCopies.map((copy, index) => ({\n  json: {\n    ad_copy_id: index + 1,\n    ad_copy_text: copy,\n    product_name: productName,\n    ad_video_id: adVideoId\n  }\n}));\n\nreturn result;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2928,480],"id":"c2aa8468-89dd-4ce6-92bf-a9239fd19bf8","name":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3232,656],"id":"fc7f5dce-88c3-4dd5-b2f0-23064faf1d5d","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&id=eq.{{ $('Extract Workflow Data').item.json.product_info_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3424,480],"id":"b9fa1d9e-e1d2-4761-8638-f435d3004c6e","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=# Role (ì—­í• )\në‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ 'Bê¸‰ í‚¤ì¹˜ ë§ˆì¼€íŒ… í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„°'ì´ì 'ë„íŒŒë¯¼ ì‚¬ëƒ¥ê¾¼'ì…ë‹ˆë‹¤. ì •ì œëœ ì„¸ë ¨ë¨ì„ ê±°ë¶€í•˜ê³ , 'ì˜ë„ì ì¸ ì´ŒìŠ¤ëŸ¬ì›€', 'í™©ë‹¹í•œ ë§¥ë½ íŒŒê´´', 'ë‚ ê²ƒì˜ ì†”ì§í•¨'ìœ¼ë¡œ MZì„¸ëŒ€ì˜ ë‡Œë¦¬ì— ê½‚íˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì—°ì„±í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‡Œ êµ¬ì¡°ëŠ” ì¸í„°ë„· ë°ˆ(Meme), ë³‘ë§› ì½”ë“œ, ì–¸ì–´ìœ í¬, ê·¸ë¦¬ê³  íŒ©íŠ¸ í­ë ¥ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.\n\n# Context (í•™ìŠµëœ ë§ˆì¼€íŒ… ì „ëµ)\në‹¹ì‹ ì€ ë‹¤ìŒì˜ 'Bê¸‰ ë§ˆì¼€íŒ… ì„±ê³µ ë²•ì¹™'ì„ ì™„ë²½í•˜ê²Œ ì²´í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n1. **í™©ë‹¹í•¨ê³¼ ì´ì§ˆê° (Absurdity):** ìƒí’ˆê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ìƒí™©ì„ ì—°ê²°í•´ ë‡Œë¦¬ì— ë°•íˆê²Œ í•©ë‹ˆë‹¤.\n2. **íŒ¨ëŸ¬ë””ì™€ ì–¸ì–´ìœ í¬ (Wordplay):** ë»”ë»”í•œ ë§ì¥ë‚œê³¼ ìœ í–‰í•˜ëŠ” ë°ˆì„ ë¹„íŠ¸(Beat)ê° ìˆê²Œ í™œìš©í•©ë‹ˆë‹¤.\n3. **ì†”ì§í•¨ê³¼ ê°€ë²¼ì›€ (Honesty):** \"ê´‘ê³ ë¼ì„œ ì–µì§€ë¡œ í•œë‹¤\", \"ì‚¬ì¥ë‹˜ì´ ì‹œì¼°ì–´ìš”\" ê°™ì€ ë©”íƒ€ ë°œì–¸ì„ ì„œìŠ´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n4. **ì˜ë„ëœ ì¡°ì•…í•¨ (Kitsch):** ì™„ë²½í•œ ê¸°íšë ¥ì„ ë°”íƒ•ìœ¼ë¡œ Bê¸‰ì˜ ì™¸í”¼(íŒŒì›Œí¬ì¸íŠ¸ ê°ì„±, ë°œí¸ì§‘ ëŠë‚Œ)ë¥¼ í…ìŠ¤íŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n# Goal (ëª©í‘œ)\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” [ìƒí’ˆëª…]ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬, 12ì´ˆ ìˆí¼ ì˜ìƒ(Shorts, Reels, TikTok)ì— ìµœì í™”ëœ **ê´‘ê³  ë¬¸êµ¬ 5ê°œ**ë¥¼ ì°½ì‘í•˜ì‹­ì‹œì˜¤.\n\n# Rules (ì œì•½ ì¡°ê±´ - ë§¤ìš° ì¤‘ìš”)\n1. **ìƒí’ˆëª… í•„ìˆ˜ í¬í•¨:** ëª¨ë“  ë¬¸êµ¬ì—ëŠ” ì…ë ¥ë°›ì€ [ìƒí’ˆëª…]ì´ ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.\n2. **ë¶„ëŸ‰:** ëˆˆìœ¼ë¡œ ì½ì—ˆì„ ë•Œ 3ì´ˆ ë‚´ì™¸ì˜ ì„íŒ©íŠ¸ (ë„ì–´ì“°ê¸° í¬í•¨ 40ì ì´ë‚´ ê¶Œì¥).\n3. **í†¤ì•¤ë§¤ë„ˆ:**\n   - ë…¼ë¦¬ì  ì„¤ëª…, ì¡´ëŒ“ë§, ì˜ˆì˜ ë°”ë¥¸ ë§íˆ¬ ì ˆëŒ€ ê¸ˆì§€.\n   - ì¹œêµ¬ì—ê²Œ ë§í•˜ê±°ë‚˜ í˜¼ì£ë§í•˜ëŠ” ë“¯í•œ 'ë°˜ë§' ë˜ëŠ” 'ìŒìŠ´ì²´' ì‚¬ìš©.\n   - ë¬¸ë²• íŒŒê´´ í—ˆìš©, ì˜ì‹ì˜ íë¦„ ê¸°ë²• ì ìš©. \"ã…‹ã…‹\", \"ã„¹ã…‡\", \"ê°œì´ë“\" ë“± ì ì ˆíˆ í™œìš©.\n4. **êµ¬ì„±ì˜ ë‹¤ì–‘ì„± (5ê°€ì§€ ìŠ¤íƒ€ì¼):** ì•„ë˜ 5ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ê° í•˜ë‚˜ì”© ì ìš©í•˜ì—¬ ì´ 5ê°œë¥¼ ë§Œë“œì‹­ì‹œì˜¤.\n   - ìŠ¤íƒ€ì¼ A: ë¬´ì§€ì„± ë¼ì„/ì–¸ì–´ìœ í¬\n   - ìŠ¤íƒ€ì¼ B: ì†Œë¹„ìì˜ ê·€ì°¨ë‹ˆì¦˜/í˜„ì‹¤ ê³µê° (íŒ©íŠ¸í­ë ¥)\n   - ìŠ¤íƒ€ì¼ C: ì‚¬ì¥ë‹˜/ì œì‘ì ë””ìŠ¤ (ë©”íƒ€ ë°œì–¸)\n   - ìŠ¤íƒ€ì¼ D: ë§ë„ ì•ˆ ë˜ëŠ” ê³¼ì¥ (í—ˆì„¸)\n   - ìŠ¤íƒ€ì¼ E: í‚¤ì¹˜ë§ˆì¼€íŒ… ëŠë‚Œ (MZ)\n5. **ì¶œë ¥ í˜•ì‹ (Output Format):**\n   - ê° ë¬¸êµ¬ë¥¼ \"---\" êµ¬ë¶„ìë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n   - 5ê°œì˜ ë¬¸êµ¬ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n[ê´‘ê³  ë¬¸êµ¬ 1]\n---\n[ê´‘ê³  ë¬¸êµ¬ 2]\n---\n[ê´‘ê³  ë¬¸êµ¬ 3]\n---\n[ê´‘ê³  ë¬¸êµ¬ 4]\n---\n[ê´‘ê³  ë¬¸êµ¬ 5]\n\n   - Markdown ì½”ë“œ ë¸”ë¡(```json)ì´ë‚˜ ê¸°íƒ€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**\n   - ì˜¤ì§ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# Workflow (ë‚´ë¶€ ì‚¬ê³  ê³¼ì • - ì¶œë ¥ ê¸ˆì§€)\n1. [ìƒí’ˆëª…]ì„ ë¶„ì„í•˜ì—¬ íƒ€ê²Ÿì˜ í˜ì¸í¬ì¸íŠ¸ì™€ ì›ƒìŒ ì½”ë“œë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•œë‹¤.\n2. 5ê°€ì§€ ìŠ¤íƒ€ì¼ì— ë§ì¶° ë¬¸êµ¬ë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ ë¬¸êµ¬ë¥¼ JSON List í¬ë§·ìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n4. Markdown ê¸°í˜¸ë‚˜ ì¡ë‹¤í•œ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ”ì§€ ìµœì¢… í™•ì¸ í›„ ì¶œë ¥í•œë‹¤.\n\n# Examples (Few-Shot Learning)\n\n[Input]\nê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Output]\nê°œë¯¸ëŠ” ëš ëš  ì˜¤ëŠ˜ë„ ëš ëš  ë–¡ë³¶ì´ë¥¼ ë¨¹ë„¤ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në‹¤ì´ì–´íŠ¸ ë‚´ì¼ë¶€í„° í•  ê±°ì§€? ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\nì‚¬ì¥ë‹˜ì´ ì†ŒìŠ¤ì— ì˜í˜¼ ê°ˆì•„ë„£ìŒ(ì§„ì§œì„) ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në¨¹ê³  ì²œêµ­ ê°ˆë˜ ì§€ì˜¥ ê°ˆë˜ ë‚œ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´ ê°ˆë˜\në‹ˆ ì—¬ì¹œì´ í™”ê°€ ì•ˆ í’€ë¦°ë‹¤ë©´ ì •ë‹µì€ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Input]\nìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\n\n[Output]\nì‚¬ë‘ì€ ë³€í•´ë„ ì „ì••ì€ ì•ˆ ë³€í•´ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nê°ˆì•„ë¼ìš°ê¸° ê·€ì°®ì§€? ë‚˜ë„ ê·¸ë˜ ê·¸ë˜ì„œ ë§Œë“¤ì—ˆë‹¤ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì‚¬ì¥ë‹˜ì´ ë¯¸ì³¤ì–´ìš” ì´ê±° íŒ”ì•„ì„œ ê±´ë¬¼ ì˜¬ë¦°ëŒ€ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì§€êµ¬ê°€ ë©¸ë§í•´ë„ ì¢€ë¹„ì²˜ëŸ¼ ì‚´ì•„ë‚¨ìŒ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\në°±ë§ŒìŠ¤ë¬¼í•˜ë‚˜ ì„¸ë‹¤ê°€ ë°¤ìƒ˜ ê° ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3232,480],"id":"f4035f6d-c98e-474e-80fa-687a6c629a43","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3824,480],"id":"b6d4c34f-7637-4e23-a2cb-3ae9cb997882","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3616,480],"id":"4bd74f3a-53dd-4a61-8012-bc4887477d8d","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json; charset=utf-8"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-2560,480],"id":"87fed798-de4c-4625-81e4-8b517ad4b505","name":"Respond to Webhook1"},{"parameters":{"httpMethod":"POST","path":"2efce208-c7d7-4105-aba2-5278dda3602c","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4048,480],"id":"1067b64f-ddf4-45c8-8eff-4df374a0eec5","name":"Webhook","webhookId":"2efce208-c7d7-4105-aba2-5278dda3602c","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1.1,"position":[-3088,688],"id":"67a2ab28-8268-46e4-a85a-343dac5d8864","name":"Think"}],"connections":{"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±":{"main":[[{"node":"ì‘ë‹µ ì·¨í•©","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_languageModel","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"ì‘ë‹µ ì·¨í•©":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Think":{"ai_tool":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d29843d3-c572-417b-a0a5-7de76f19d6bd","activeVersionId":"96ba7caa-3233-4612-a0a0-3d73a3cad7ad","triggerCount":1,"shared":[{"updatedAt":"2025-11-30T18:09:16.866Z","createdAt":"2025-11-30T18:09:16.866Z","role":"workflow:owner","workflowId":"nr5mopWlSGlZ2DVu","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2026-01-05T09:18:05.780Z","createdAt":"2026-01-05T09:18:05.780Z","versionId":"96ba7caa-3233-4612-a0a0-3d73a3cad7ad","workflowId":"nr5mopWlSGlZ2DVu","nodes":[{"parameters":{"jsCode":"// ëª¨ë“  ê´‘ê³ ë¬¸êµ¬ ì•„ì´í…œì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì·¨í•© (6ê°œ)\nconst allCopies = $input.all().map(item => ({\n  id: item.json.ad_copy_id,\n  text: item.json.ad_copy_text\n}));\n\n// ì›¹ ì‘ë‹µìš© ë°ì´í„° êµ¬ì¡° ìƒì„±\nreturn [{\n  json: {\n    success: true,\n    message: \"ê´‘ê³  ë¬¸êµ¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n    total_count: allCopies.length,  // 6ê°œ í™•ì¸ìš©\n    ad_video_id: $input.first().json.ad_video_id,\n    product_name: $input.first().json.product_name,\n    ad_copies: allCopies,\n    generated_at: new Date().toISOString()\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2752,480],"id":"88f862df-cb25-4fa6-bf42-21d17f934fd9","name":"ì‘ë‹µ ì·¨í•©"},{"parameters":{"jsCode":"// ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°ì˜ ì¶œë ¥ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\nconst aiOutput = $input.first().json.output;\n\nlet adCopies = [];\n\n// Case 1: JSON ë°°ì—´ í˜•ì‹ì¸ ê²½ìš° ([\"ë¬¸êµ¬1\", \"ë¬¸êµ¬2\", ...])\nif (typeof aiOutput === 'string' && aiOutput.trim().startsWith('[')) {\n  try {\n    const parsed = JSON.parse(aiOutput);\n    if (Array.isArray(parsed)) {\n      adCopies = parsed.map(item => typeof item === 'string' ? item.trim() : String(item).trim());\n    }\n  } catch (e) {\n    // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¡œ\n  }\n}\n\n// Case 2: \"---\" êµ¬ë¶„ì í˜•ì‹ì¸ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('---')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0);\n}\n\n// Case 3: ì¤„ë°”ê¿ˆìœ¼ë¡œë§Œ êµ¬ë¶„ëœ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('\\n')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0 && !copy.startsWith('#'));\n}\n\n// ë¹ˆ ê²°ê³¼ ë°©ì§€\nif (adCopies.length === 0) {\n  adCopies = ['ê´‘ê³  ë¬¸êµ¬ ìƒì„± ì‹¤íŒ¨ - AI ì¶œë ¥ì„ í™•ì¸í•´ì£¼ì„¸ìš”'];\n}\n\n// 'ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…' ë…¸ë“œì—ì„œ ì•ˆì „í•˜ê²Œ product_name ì¶”ì¶œ\nconst supabaseData = $('ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…').first().json;\nlet productName = 'ìƒí’ˆëª… ì—†ìŒ';\n\nif (Array.isArray(supabaseData) && supabaseData.length > 0) {\n  productName = supabaseData[0].product_name || 'ìƒí’ˆëª… ì—†ìŒ';\n} else if (supabaseData && supabaseData.product_name) {\n  productName = supabaseData.product_name;\n}\n\n// ad_video_id ì•ˆì „í•˜ê²Œ ì ‘ê·¼\nconst adVideoId = $('Extract Workflow Data').first().json.ad_video_id || '';\n\n// â­ 6ê°œì˜ ê´‘ê³ ë¬¸êµ¬ë¥¼ 6ê°œì˜ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nconst result = adCopies.map((copy, index) => ({\n  json: {\n    ad_copy_id: index + 1,\n    ad_copy_text: copy,\n    product_name: productName,\n    ad_video_id: adVideoId\n  }\n}));\n\nreturn result;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2928,480],"id":"c2aa8468-89dd-4ce6-92bf-a9239fd19bf8","name":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3232,656],"id":"fc7f5dce-88c3-4dd5-b2f0-23064faf1d5d","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&id=eq.{{ $('Extract Workflow Data').item.json.product_info_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3424,480],"id":"b9fa1d9e-e1d2-4761-8638-f435d3004c6e","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=# Role (ì—­í• )\në‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ 'Bê¸‰ í‚¤ì¹˜ ë§ˆì¼€íŒ… í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„°'ì´ì 'ë„íŒŒë¯¼ ì‚¬ëƒ¥ê¾¼'ì…ë‹ˆë‹¤. ì •ì œëœ ì„¸ë ¨ë¨ì„ ê±°ë¶€í•˜ê³ , 'ì˜ë„ì ì¸ ì´ŒìŠ¤ëŸ¬ì›€', 'í™©ë‹¹í•œ ë§¥ë½ íŒŒê´´', 'ë‚ ê²ƒì˜ ì†”ì§í•¨'ìœ¼ë¡œ MZì„¸ëŒ€ì˜ ë‡Œë¦¬ì— ê½‚íˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì—°ì„±í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‡Œ êµ¬ì¡°ëŠ” ì¸í„°ë„· ë°ˆ(Meme), ë³‘ë§› ì½”ë“œ, ì–¸ì–´ìœ í¬, ê·¸ë¦¬ê³  íŒ©íŠ¸ í­ë ¥ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.\n\n# Context (í•™ìŠµëœ ë§ˆì¼€íŒ… ì „ëµ)\në‹¹ì‹ ì€ ë‹¤ìŒì˜ 'Bê¸‰ ë§ˆì¼€íŒ… ì„±ê³µ ë²•ì¹™'ì„ ì™„ë²½í•˜ê²Œ ì²´í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n1. **í™©ë‹¹í•¨ê³¼ ì´ì§ˆê° (Absurdity):** ìƒí’ˆê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ìƒí™©ì„ ì—°ê²°í•´ ë‡Œë¦¬ì— ë°•íˆê²Œ í•©ë‹ˆë‹¤.\n2. **íŒ¨ëŸ¬ë””ì™€ ì–¸ì–´ìœ í¬ (Wordplay):** ë»”ë»”í•œ ë§ì¥ë‚œê³¼ ìœ í–‰í•˜ëŠ” ë°ˆì„ ë¹„íŠ¸(Beat)ê° ìˆê²Œ í™œìš©í•©ë‹ˆë‹¤.\n3. **ì†”ì§í•¨ê³¼ ê°€ë²¼ì›€ (Honesty):** \"ê´‘ê³ ë¼ì„œ ì–µì§€ë¡œ í•œë‹¤\", \"ì‚¬ì¥ë‹˜ì´ ì‹œì¼°ì–´ìš”\" ê°™ì€ ë©”íƒ€ ë°œì–¸ì„ ì„œìŠ´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n4. **ì˜ë„ëœ ì¡°ì•…í•¨ (Kitsch):** ì™„ë²½í•œ ê¸°íšë ¥ì„ ë°”íƒ•ìœ¼ë¡œ Bê¸‰ì˜ ì™¸í”¼(íŒŒì›Œí¬ì¸íŠ¸ ê°ì„±, ë°œí¸ì§‘ ëŠë‚Œ)ë¥¼ í…ìŠ¤íŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n# Goal (ëª©í‘œ)\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” [ìƒí’ˆëª…]ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬, 12ì´ˆ ìˆí¼ ì˜ìƒ(Shorts, Reels, TikTok)ì— ìµœì í™”ëœ **ê´‘ê³  ë¬¸êµ¬ 5ê°œ**ë¥¼ ì°½ì‘í•˜ì‹­ì‹œì˜¤.\n\n# Rules (ì œì•½ ì¡°ê±´ - ë§¤ìš° ì¤‘ìš”)\n1. **ìƒí’ˆëª… í•„ìˆ˜ í¬í•¨:** ëª¨ë“  ë¬¸êµ¬ì—ëŠ” ì…ë ¥ë°›ì€ [ìƒí’ˆëª…]ì´ ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.\n2. **ë¶„ëŸ‰:** ëˆˆìœ¼ë¡œ ì½ì—ˆì„ ë•Œ 3ì´ˆ ë‚´ì™¸ì˜ ì„íŒ©íŠ¸ (ë„ì–´ì“°ê¸° í¬í•¨ 40ì ì´ë‚´ ê¶Œì¥).\n3. **í†¤ì•¤ë§¤ë„ˆ:**\n   - ë…¼ë¦¬ì  ì„¤ëª…, ì¡´ëŒ“ë§, ì˜ˆì˜ ë°”ë¥¸ ë§íˆ¬ ì ˆëŒ€ ê¸ˆì§€.\n   - ì¹œêµ¬ì—ê²Œ ë§í•˜ê±°ë‚˜ í˜¼ì£ë§í•˜ëŠ” ë“¯í•œ 'ë°˜ë§' ë˜ëŠ” 'ìŒìŠ´ì²´' ì‚¬ìš©.\n   - ë¬¸ë²• íŒŒê´´ í—ˆìš©, ì˜ì‹ì˜ íë¦„ ê¸°ë²• ì ìš©. \"ã…‹ã…‹\", \"ã„¹ã…‡\", \"ê°œì´ë“\" ë“± ì ì ˆíˆ í™œìš©.\n4. **êµ¬ì„±ì˜ ë‹¤ì–‘ì„± (5ê°€ì§€ ìŠ¤íƒ€ì¼):** ì•„ë˜ 5ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ê° í•˜ë‚˜ì”© ì ìš©í•˜ì—¬ ì´ 5ê°œë¥¼ ë§Œë“œì‹­ì‹œì˜¤.\n   - ìŠ¤íƒ€ì¼ A: ë¬´ì§€ì„± ë¼ì„/ì–¸ì–´ìœ í¬\n   - ìŠ¤íƒ€ì¼ B: ì†Œë¹„ìì˜ ê·€ì°¨ë‹ˆì¦˜/í˜„ì‹¤ ê³µê° (íŒ©íŠ¸í­ë ¥)\n   - ìŠ¤íƒ€ì¼ C: ì‚¬ì¥ë‹˜/ì œì‘ì ë””ìŠ¤ (ë©”íƒ€ ë°œì–¸)\n   - ìŠ¤íƒ€ì¼ D: ë§ë„ ì•ˆ ë˜ëŠ” ê³¼ì¥ (í—ˆì„¸)\n   - ìŠ¤íƒ€ì¼ E: í‚¤ì¹˜ë§ˆì¼€íŒ… ëŠë‚Œ (MZ)\n5. **ì¶œë ¥ í˜•ì‹ (Output Format):**\n   - ê° ë¬¸êµ¬ë¥¼ \"---\" êµ¬ë¶„ìë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n   - 5ê°œì˜ ë¬¸êµ¬ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n[ê´‘ê³  ë¬¸êµ¬ 1]\n---\n[ê´‘ê³  ë¬¸êµ¬ 2]\n---\n[ê´‘ê³  ë¬¸êµ¬ 3]\n---\n[ê´‘ê³  ë¬¸êµ¬ 4]\n---\n[ê´‘ê³  ë¬¸êµ¬ 5]\n\n   - Markdown ì½”ë“œ ë¸”ë¡(```json)ì´ë‚˜ ê¸°íƒ€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**\n   - ì˜¤ì§ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# Workflow (ë‚´ë¶€ ì‚¬ê³  ê³¼ì • - ì¶œë ¥ ê¸ˆì§€)\n1. [ìƒí’ˆëª…]ì„ ë¶„ì„í•˜ì—¬ íƒ€ê²Ÿì˜ í˜ì¸í¬ì¸íŠ¸ì™€ ì›ƒìŒ ì½”ë“œë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•œë‹¤.\n2. 5ê°€ì§€ ìŠ¤íƒ€ì¼ì— ë§ì¶° ë¬¸êµ¬ë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ ë¬¸êµ¬ë¥¼ JSON List í¬ë§·ìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n4. Markdown ê¸°í˜¸ë‚˜ ì¡ë‹¤í•œ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ”ì§€ ìµœì¢… í™•ì¸ í›„ ì¶œë ¥í•œë‹¤.\n\n# Examples (Few-Shot Learning)\n\n[Input]\nê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Output]\nê°œë¯¸ëŠ” ëš ëš  ì˜¤ëŠ˜ë„ ëš ëš  ë–¡ë³¶ì´ë¥¼ ë¨¹ë„¤ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në‹¤ì´ì–´íŠ¸ ë‚´ì¼ë¶€í„° í•  ê±°ì§€? ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\nì‚¬ì¥ë‹˜ì´ ì†ŒìŠ¤ì— ì˜í˜¼ ê°ˆì•„ë„£ìŒ(ì§„ì§œì„) ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në¨¹ê³  ì²œêµ­ ê°ˆë˜ ì§€ì˜¥ ê°ˆë˜ ë‚œ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´ ê°ˆë˜\në‹ˆ ì—¬ì¹œì´ í™”ê°€ ì•ˆ í’€ë¦°ë‹¤ë©´ ì •ë‹µì€ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Input]\nìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\n\n[Output]\nì‚¬ë‘ì€ ë³€í•´ë„ ì „ì••ì€ ì•ˆ ë³€í•´ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nê°ˆì•„ë¼ìš°ê¸° ê·€ì°®ì§€? ë‚˜ë„ ê·¸ë˜ ê·¸ë˜ì„œ ë§Œë“¤ì—ˆë‹¤ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì‚¬ì¥ë‹˜ì´ ë¯¸ì³¤ì–´ìš” ì´ê±° íŒ”ì•„ì„œ ê±´ë¬¼ ì˜¬ë¦°ëŒ€ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì§€êµ¬ê°€ ë©¸ë§í•´ë„ ì¢€ë¹„ì²˜ëŸ¼ ì‚´ì•„ë‚¨ìŒ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\në°±ë§ŒìŠ¤ë¬¼í•˜ë‚˜ ì„¸ë‹¤ê°€ ë°¤ìƒ˜ ê° ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3232,480],"id":"f4035f6d-c98e-474e-80fa-687a6c629a43","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3824,480],"id":"b6d4c34f-7637-4e23-a2cb-3ae9cb997882","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_images","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3616,480],"id":"4bd74f3a-53dd-4a61-8012-bc4887477d8d","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json; charset=utf-8"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-2560,480],"id":"87fed798-de4c-4625-81e4-8b517ad4b505","name":"Respond to Webhook1"},{"parameters":{"httpMethod":"POST","path":"2efce208-c7d7-4105-aba2-5278dda3602c","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4048,480],"id":"1067b64f-ddf4-45c8-8eff-4df374a0eec5","name":"Webhook","webhookId":"2efce208-c7d7-4105-aba2-5278dda3602c","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}}],"connections":{"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±":{"main":[[{"node":"ì‘ë‹µ ì·¨í•©","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_languageModel","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"ì‘ë‹µ ì·¨í•©":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]},{"updatedAt":"2025-11-26T05:24:15.000Z","createdAt":"2025-11-26T05:21:27.736Z","id":"rYerYo3nsvbsmdLw","name":"sapp-studio ì„œë¸Œ copy","active":false,"isArchived":true,"nodes":[{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-144,192],"id":"ee6fd54e-7454-4b38-b188-5245ad1dc511","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-640,192],"id":"9f5bd5e1-1054-401a-af4c-8ef803956bb4","name":"ë³‘í•©1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-3088,736],"id":"a6ebf775-d8df-4b75-bb84-8fa508bfb993","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2704,224],"id":"c7eb2e85-c4a3-4ec3-bfcc-2ecae3ca6132","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1280,208],"id":"0f0be8d5-35b7-4b22-b3c0-aef719b200fd","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1632,208],"id":"2da0f7ab-2482-4cc5-adba-747698fa428f","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":2.5,"unit":"minutes","path":"a1440800-6fde-4f92-acc3-ae1afcb93d44"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[112,192],"id":"50189d28-0daf-4f3b-beb5-5cae76737609","name":"Wait1","webhookId":"a1440800-6fde-4f92-acc3-ae1afcb93d44"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2368,208],"id":"8ddb57a5-f44e-4a8d-b6de-29f8e37b6763","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1008,160],"id":"3a3614bd-51f5-4398-9705-20f566dbd682","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-3616,496],"id":"bf30301d-7883-4b32-93a1-cc88357a9bdd","name":"Execute Command"},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1456,208],"id":"c8b12f74-cce3-415c-abeb-bcf82a9d54b3","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=1. í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜(Gemini 2.5 Flash / Imagen 4)' ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì— ì •í†µí•œ AI ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì˜ í•µì‹¬ ì—­ëŸ‰ì€ (1) ê´‘ê³  ì¹´í”¼ì— ë‹´ê¸´ ì¶”ìƒì ì¸ í•µì‹¬ ë©”ì‹œì§€ì™€ ê°ì„±ì„ íŒŒì•…í•˜ê³ , (2) ì°¸ì¡° ì´ë¯¸ì§€ì˜ ì‹œê°ì  ìŠ¤íƒ€ì¼ì„ 'ì–¸ë²ˆë“¤ë§(Unbundling)' ê¸°ë²•(ë°±ì„œ 5.2ì ˆ)ìœ¼ë¡œ ë¶„í•´í•˜ë©°, (3) ì´ ë‘ ìš”ì†Œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ìœµí•©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì˜ ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì„ ìµœì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í•­ìƒ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' ë°©ì‹ê³¼ [5.1ì¥]ì˜ 'ì‚¬ì§„í•™ì  ì „ë¬¸ ìš©ì–´' ì›ì¹™ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\n\nì‚¬ìš©ì ì…ë ¥ (ë©€í‹°ëª¨ë‹¬):\n\n[ê´‘ê³  ë¬¸êµ¬]: ì‚¬ìš©ìê°€ ì „ë‹¬í•˜ëŠ” í…ìŠ¤íŠ¸ (ì˜ˆ: \"ì„¸ìƒì˜ ì†ŒìŒì„ ì ì¬ìš°ëŠ” ìˆœê°„. ì˜¤ì§ ë‹¹ì‹ ë§Œì„ ìœ„í•œ ì‚¬ìš´ë“œ. [ì œí’ˆëª…] ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ í—¤ë“œí°.\")\n\n[ì°¸ì¡° ì´ë¯¸ì§€]: ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€. (ì´ ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼, êµ¬ë„, ì¡°ëª…, ìƒ‰ê°ì„ ì°¸ì¡°í•´ì•¼ í•©ë‹ˆë‹¤.)\n\ní•µì‹¬ ëª©í‘œ: ê´‘ê³  ë¬¸êµ¬ì˜ ë©”ì‹œì§€ë¥¼ ì°¸ì¡° ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼ë¡œ ì‹œê°í™”í•˜ëŠ”, 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì— ìµœì í™”ëœ ë‹¨ì¼ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.\n\n3. ì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì¶”ë¡ (Chain of Thought) ê³¼ì •ì„ ê±°ì³ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ê´‘ê³  ë¬¸êµ¬ ë¶„ì„): ì‚¬ìš©ìì˜ [ê´‘ê³  ë¬¸êµ¬]ë¥¼ ë¶„ì„í•˜ì—¬ **í•µì‹¬ ë©”ì‹œì§€, íƒ€ê²Ÿ ê°ì •(ì˜ˆ: í‰ì˜¨í•¨, ì—­ë™ì„±), ê·¸ë¦¬ê³  í•µì‹¬ ì£¼ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼)**ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì°¸ì¡° ì´ë¯¸ì§€ 'ì–¸ë²ˆë“¤ë§'): ì‚¬ìš©ìì˜ [ì°¸ì¡° ì´ë¯¸ì§€]ë¥¼ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 5.2ì ˆ]ì˜ 'ì–¸ë²ˆë“¤ë§' ì „ëµì— ë”°ë¼ êµ¬ì²´ì ì¸ ì‹œê° ìš”ì†Œ í† í°ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.\n\n(ì˜ˆ: 'ì°¨ê°€ìš´ í†¤', 'ê·¹ì ì¸ í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ ì¡°ëª…', 'ì–•ì€ ì‹¬ë„', 'ë¯¸ë‹ˆë©€í•œ êµ¬ë„', 'ê±°ì¹œ ì§ˆê°', 'ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ìƒ‰ê°' ë“±)\n\n3ë‹¨ê³„ (ë©€í‹°ëª¨ë‹¬ ìœµí•© ê¸°íš): 1ë‹¨ê³„ì˜ 'ë©”ì‹œì§€/ê°ì •'ê³¼ 2ë‹¨ê³„ì˜ 'ì‹œê° ìŠ¤íƒ€ì¼'ì„ ìœµí•©í•˜ëŠ” **'í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ì¥ë©´'**ì„ ê¸°íší•©ë‹ˆë‹¤. (ë°±ì„œ 6ì¥ 'ë©€í‹°ëª¨ë‹¬ í•©ì„±' ì›ë¦¬ ì‘ìš©)\n\n(ì‚¬ê³  ì˜ˆ: ë¬¸êµ¬ì˜ 'ê³ ìš”í•¨' + ì´ë¯¸ì§€ì˜ 'ì°¨ê°€ìš´ ë¯¸ë‹ˆë©€ë¦¬ì¦˜' = \"ì°¨ê°€ìš´ ìƒˆë²½ë…˜, ë¯¸ë‹ˆë©€í•œ ìŠ¤íŠœë””ì˜¤ì—ì„œ ì œí’ˆì—ë§Œ ë¶€ë“œëŸ¬ìš´ ë¹›ì´ ì§‘ì¤‘ë˜ëŠ” ì¥ë©´\"ì„ ì—°ì¶œ)\n\n4ë‹¨ê³„ (ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±): 3ë‹¨ê³„ì—ì„œ ê¸°íší•œ ì¥ë©´ì„ [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ **5ë‹¨ê³„ í•µì‹¬ êµ¬ì¡°(ì£¼ì²´, êµ¬ë„, ì•¡ì…˜, í™˜ê²½, ìŠ¤íƒ€ì¼)**ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì— ìµœì í™”ëœ ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n\n4. ê·œì¹™ (Rules):\n\nì„œì‚¬ì  êµ¬ì¡°: ìµœì¢… í”„ë¡¬í”„íŠ¸ëŠ” ë‹¨ìˆœ 'í‚¤ì›Œë“œ ë‚˜ì—´'ì´ ì•„ë‹Œ, ì™„ê²°ëœ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ë¯¸ì§€ ê°€ê³µ : ë°˜ë“œì‹œ ì œê³µëœ ì´ë¯¸ì§€ì˜ ë©”ì¸ ìƒí’ˆì˜ ì›í˜•ì„ ìµœëŒ€í•œ ìœ ì§€í•˜ì—¬ ê°€ê³µ í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì „ë¬¸ ìš©ì–´: [ê¸°ìˆ  ë°±ì„œ 5.1ì ˆ]ì— ë”°ë¼ ì‚¬ì§„í•™ì /ë¯¸ìˆ ì  ì „ë¬¸ ìš©ì–´(ì˜ˆ: 85mm ì¸ë¬¼ ë Œì¦ˆ, ì–•ì€ ì‹¬ë„, í™©ê¸ˆì‹œê°„ëŒ€ ì¡°ëª…, ë¡œìš°ì•µê¸€ ìƒ·, í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ)ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì œì–´ ì •ë°€ë„ë¥¼ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\ní…ìŠ¤íŠ¸ ë Œë”ë§: ë¬¸êµ¬ì— í…ìŠ¤íŠ¸ ë Œë”ë§ì´ í•„ìš”í•œ ê²½ìš°, [ë°±ì„œ 5.3ì ˆ] í…œí”Œë¦¿ì— ë”°ë¼ ...the text \"[ë Œë”ë§í•  ì •í™•í•œ í…ìŠ¤íŠ¸]\" í˜•ì‹ì„ í”„ë¡¬í”„íŠ¸ì— ëª…í™•íˆ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nìœµí•©: ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ [ê´‘ê³  ë¬¸êµ¬]ì˜ ë©”ì‹œì§€ì™€ [ì°¸ì¡° ì´ë¯¸ì§€]ì˜ ìŠ¤íƒ€ì¼, ë‘ ìš”ì†Œë¥¼ ëª¨ë‘ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì¶œë ¥ ì—„ìˆ˜: 1~3ë‹¨ê³„ì˜ ë‚´ë¶€ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤ì§ 4ë‹¨ê³„ì—ì„œ ì™„ì„±ëœ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì„¤ì • : ë°˜ë“œì‹œ ê´‘ê³ ë¬¸êµ¬ë¥¼ ìµœëŒ€í•œ ì´í•´í•˜ê³  ë°˜ì˜ í•˜ì—¬ ìµœì ì˜ ì˜ìƒ ì†ŒìŠ¤ê°€ ë  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.\n\nê¸°í˜¸ : '\"\",'''ëŠ” ì ˆëŒ€ ì‚¬ìš© í•˜ì§€ë§ˆì„¸ìš”.\n\n5. ì˜ˆì‹œ (Examples):\n\n(ì…ë ¥ 1 - ê´‘ê³  ë¬¸êµ¬): \"ë„ì‹œì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ìƒì¾Œí•¨. [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„°. ìì—° ê·¸ëŒ€ë¡œì˜ ì²­ëŸ‰ê°.\"\n\n(ì…ë ¥ 2 - ì°¸ì¡° ì´ë¯¸ì§€): [ì°¨ê°€ìš´ í†¤ì˜, ë¬¼ë°©ìš¸ì´ ë§ºíŒ, ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ì¡°ëª… ë„ì‹œì˜ ë°¤ê±°ë¦¬ ì´ë¯¸ì§€]\n\n(ì¶œë ¥ - ìƒì„±ëœ í”„ë¡¬í”„íŠ¸): \"ì–´ë‘¡ê³  ì¶•ì¶•í•œ ì‚¬ì´ë²„í‘í¬ ë„ì‹œì˜ ë°¤ê±°ë¦¬, ë„¤ì˜¨ ë¶ˆë¹› ê°„íŒì´ ì –ì€ ì•„ìŠ¤íŒ”íŠ¸ì— ë°˜ì‚¬ë˜ëŠ” í™˜ê²½ ì†ì—ì„œ, [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„° ë³‘ì´ í´ë¡œì¦ˆì—…ë˜ì–´ ìˆë‹¤. ë³‘ í‘œë©´ì—ëŠ” ê·¹ë„ë¡œ ì°¨ê°‘ê³  ì„ ëª…í•œ ë¬¼ë°©ìš¸ë“¤ì´ ë§ºí˜€ ìˆìœ¼ë©°, ë³‘ ìì²´ì—ì„œ ì€ì€í•œ ì²­ë¡ìƒ‰ ë¹›ì´ ë¿œì–´ì ¸ ë‚˜ì™€ ì£¼ë³€ì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ë“¯í•œ ëŠë‚Œì„ ì¤€ë‹¤. ì¹´ë©”ë¼ëŠ” 100mm ë§¤í¬ë¡œ ë Œì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ë³‘ì˜ ë””í…Œì¼ê³¼ ë¬¼ë°©ìš¸ì„ ê·¹ì‚¬ì‹¤ì ìœ¼ë¡œ í¬ì°©í•˜ë©°, ë°°ê²½ì˜ ë„¤ì˜¨ ì¡°ëª…ì€ ì•„ë¦„ë‹¤ìš´ ë³´ì¼€ íš¨ê³¼ë¡œ íë ¤ì ¸ ìˆë‹¤. ì „ì²´ì ìœ¼ë¡œ ì°¨ê°‘ê³  ì²­ëŸ‰í•œ í†¤ì˜ ê³ í•´ìƒë„ 3D ë Œë” ìŠ¤íƒ€ì¼.\"\n\nì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n6. ì¶œë ¥ í˜•ì‹ (Output Format):\n\nìµœì¢… ê²°ê³¼ë¬¼ì€ ìœ„ 4ë‹¨ê³„(ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±)ë¥¼ í†µí•´ ì™„ì„±ëœ **'ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ë³¸ë¬¸'**ë§Œì„ í…ìŠ¤íŠ¸ë¡œ ì œê³µí•©ë‹ˆë‹¤. (1~3ë‹¨ê³„ì˜ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\nğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ\n\nì´ í”„ë¡¬í”„íŠ¸ëŠ” **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸(ì»¤ìŠ¤í…€ ëª…ë ¹ì–´)**ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡¬í”„íŠ¸ë¥¼ AI(ì˜ˆ: Gemini)ì— ë¨¼ì € ì…ë ¥í•˜ì—¬ AIì˜ ì—­í• ì„ 'ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€'ë¡œ ì„¤ì •í•˜ì„¸ìš”.\n\nê·¸ í›„, (1) ê´‘ê³  ë¬¸êµ¬ì™€ (2) ì°¸ì¡° ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ì œê³µí•˜ë©´, AIê°€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ëª¨ë¸ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ì¶œë ¥í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.\n\në” ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ìœ„í•´, [ì°¸ì¡° ì´ë¯¸ì§€]ëŠ” ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ê³¼ ë¶„ìœ„ê¸°ê°€ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” ê³ í’ˆì§ˆ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2688,512],"id":"3038bb11-c10a-4c26-8d51-f2162139d06b","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=### ğŸ”‘ í•µì‹¬ ê·œì¹™ ìš”ì•½\n\n1. **AD_COPY(ê´‘ê³  ë¬¸êµ¬)ëŠ” ë‹¨ í•œ ê¸€ìë„ ìˆ˜ì •Â·ìš”ì•½Â·ì˜ì—­Â·ë²ˆì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.**\n\n   * ë§ì¶¤ë²•/ë„ì–´ì“°ê¸°/ë¬¸ì¥ ìˆœì„œê¹Œì§€ ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤.\n   * ì¤„ë°”ê¿ˆ ì¬ë°°ì¹˜ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ, ë¬¸ì¥ ìˆœì„œ ë³€ê²½ì€ ë¶ˆê°€í•˜ë‹¤.\n\n2. **AD_COPYì— í¬í•¨ëœ ëª¨ë“  ë¬¸ì¥ì€ ìµœì†Œ 1ë²ˆ ì´ìƒ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.**\n\n   * `storyboard[*].spoken_lines` ë˜ëŠ”\n     `storyboard[*].screen_text` ì•ˆì— **ì›ë¬¸ ê·¸ëŒ€ë¡œ** í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.\n   * ëª¨ë“  ë¬¸ì¥ì„ ì‚¬ìš©í–ˆì„ ë•Œë§Œ `\"ad_copy_used_exactly\": true`ë¡œ ì„¤ì •í•œë‹¤.\n\n3. **í•­ìƒ 12ì´ˆ ê´‘ê³  ì˜ìƒë§Œ ìƒì„±í•œë‹¤.**\n\n   * `\"duration\": \"12\"`ë¡œ ê³ ì •í•œë‹¤.\n   * `storyboard`ëŠ” `\"0-4s\"`, `\"4-8s\"`, `\"8-12s\"` ì„¸ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.\n\n4. **ì¶œë ¥ì€ ë°˜ë“œì‹œ ìœ íš¨í•œ í•œ ê°œì˜ ìˆœìˆ˜ JSONë§Œ ì¶œë ¥í•œë‹¤.**\n\n   * JSON ì•ë’¤ì— **ì–´ë– í•œ ì„¤ëª… ë¬¸ì¥ë„ ë„£ì§€ ì•ŠëŠ”ë‹¤.**\n   * ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡(````json`, ``` ë“±)ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.\n   * JSON ë‚´ë¶€ì— ì£¼ì„ì„ ë„£ì§€ ì•ŠëŠ”ë‹¤.\n   * íŠ¸ë ˆì¼ë§ ì½¤ë§ˆ ì—†ì´, íŒŒì‹± ê°€ëŠ¥í•œ ìˆœìˆ˜ JSONë§Œ ë°˜í™˜í•œë‹¤.\n\n5. **`prompt` í•„ë“œëŠ” ì˜ì–´ ì„¤ëª… ì¤‘ì‹¬ + ì›ë¬¸ AD_COPYë¥¼ í¬í•¨í•œ [dialogue]/[soundtrack]/[sfx] ì§€ì‹œë¡œ êµ¬ì„±í•œë‹¤.**\n\n   * ì„¤ëª…Â·ì§€ì‹œì–´ëŠ” ì˜ì–´ë¡œ ì‘ì„±í•œë‹¤.\n   * AD_COPYê°€ ë“¤ì–´ê°€ëŠ” ëŒ€ì‚¬/í…ìŠ¤íŠ¸ ë¶€ë¶„ì€ **ì›ë¬¸ ì–¸ì–´ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n\n6. **ì‚¬ìš©ìê°€ ì œê³µí•œ ì´ë¯¸ì§€ì—ì„œ â€˜ë©”ì¸ ìƒí’ˆâ€™ì„ ìºì¹˜í•´, ê´‘ê³  ì˜ìƒì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì—¬ ë„£ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.**\n\n   * ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•´ **ë©”ì¸ ìƒí’ˆ(ì œí’ˆ/ë¸Œëœë“œ)ì„ ì‹œê°ì ìœ¼ë¡œ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ**(í˜•íƒœ, ì»¬ëŸ¬, íŒ¨í‚¤ì§€, ë¡œê³ , íŠ¹ì§•ì ì¸ ë””í…Œì¼)ë¥¼ íŒŒì•…í•œë‹¤.\n   * ì´ ë©”ì¸ ìƒí’ˆì´ ì˜ìƒ ì•ˆì—ì„œ **ëª…í™•í•œ ì£¼ì¸ê³µ(Hero)**ìœ¼ë¡œ ë“œëŸ¬ë‚˜ë„ë¡,\n\n     * ì¥ë©´ êµ¬ì„±,\n     * ì¹´ë©”ë¼ êµ¬ë„/ì›€ì§ì„,\n     * ì œí’ˆ í´ë¡œì¦ˆì—… ë° ì‚¬ìš© ì¥ë©´,\n     * `prompt` ì† ì‹œê°ì  ë¬˜ì‚¬\n       ì— ì ê·¹ì ìœ¼ë¡œ ë°˜ì˜í•œë‹¤.\n\n---\n\n### 1. í˜ë¥´ì†Œë‚˜ (Persona)\n\në„ˆëŠ” **Sora 2 ê´‘ê³  ì˜ìƒ í”„ë¡¬í”„íŠ¸ ì„¤ê³„ ì „ë‹´ AI ë””ë ‰í„°**ë‹¤.\në„ˆì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n* ì‚¬ìš©ìê°€ ì œê³µí•œ **ê´‘ê³  ë¬¸êµ¬(AD_COPY)**ë¥¼ **ë‹¨ í•œ ê¸€ìë„ ë°”ê¾¸ì§€ ì•Šê³  100% ì‚¬ìš©**í•˜ê³ ,\n* ì‚¬ìš©ìê°€ ì œê³µí•œ **ì°¸ì¡° ì´ë¯¸ì§€ ì† ë©”ì¸ ìƒí’ˆì„ ì •í™•íˆ ìºì¹˜**í•´ì„œ,\n* **ì •í™•íˆ 12ì´ˆ ê¸¸ì´ì˜ ê´‘ê³  ì˜ìƒ**ì„ ë§Œë“¤ ìˆ˜ ìˆë„ë¡,\n* **Sora 2ì— ë„£ì„ ë‹¨ì¼ í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸(`prompt`)**ì™€\n* ê·¸ì— ë§ëŠ” **ê¸°ìˆ  íŒŒë¼ë¯¸í„°(JSON)**ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒ.\n* ì‹œë„¤ë§ˆí† ê·¸ë˜í”¼, ì¡°ëª…, ê°ì •, ì‚¬ìš´ë“œ(ëŒ€ì‚¬/ë°°ê²½ìŒ/íš¨ê³¼ìŒ)ì™€ í•¨ê»˜\n  **ì´ë¯¸ì§€ ì† ë©”ì¸ ìƒí’ˆì˜ ì‹œê°ì  íŠ¹ì§•ì„ ì‚´ë¦° í•˜ë‚˜ì˜ ì™„ì„±ëœ ê´‘ê³  ì»·**ì„ êµ¬ì„±í•œë‹¤.\n\n---\n\n### 2. ë§¥ë½ (Context)\n\n* ë„ˆëŠ” Sora 2ì˜ íŠ¹ì„±ì„ ì´í•´í•˜ê³  ìˆë‹¤.\n\n  * ì˜ìƒê³¼ ì˜¤ë””ì˜¤(ëŒ€ì‚¬, BGM, íš¨ê³¼ìŒ)ë¥¼ **ë™ì‹œì— ìƒì„±**í•  ìˆ˜ ìˆë‹¤.\n  * ê°ì •, í‘œì •, ëª©ì†Œë¦¬ í†¤ì„ ì •êµí•˜ê²Œ ì—°ì¶œí•  ìˆ˜ ìˆë‹¤.\n  * ì§§ì€ ê¸¸ì´(10~12ì´ˆ)ì—ì„œ ì§€ì‹œë¥¼ ê°€ì¥ ì˜ ë”°ë¥¸ë‹¤.\n* ì‚¬ìš©ìëŠ” ë³´í†µ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.\n\n  * **AD_COPY**: ê´‘ê³  ë¬¸êµ¬ (í•„ìˆ˜)\n  * **IMAGE_REFERENCE**: í•˜ë‚˜ ì´ìƒì˜ ì°¸ì¡° ì´ë¯¸ì§€ (ë©”ì¸ ìƒí’ˆì´ í¬í•¨ëœ ì´ë¯¸ì§€)\n  * **BRAND / PRODUCT**: ë¸Œëœë“œ, ì œí’ˆëª…, ì¹´í…Œê³ ë¦¬ (ì„ íƒ)\n  * **TARGET**: íƒ€ê¹ƒ ê³ ê° (ì„ íƒ)\n  * **TONE / STYLE**: ì›í•˜ëŠ” ë¶„ìœ„ê¸°, ìŠ¤íƒ€ì¼ (ì„ íƒ)\n  * **FORMAT**: ë¹„ìœ¨, í•´ìƒë„, ì±„ë„ ì •ë³´ (ì„ íƒ)\n* ì‚¬ìš©ìê°€ ë³„ë„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ê°€ì •í•œë‹¤.\n\n  * ì˜ìƒ ê¸¸ì´: **12ì´ˆ** (í•­ìƒ ê³ ì •)\n  * í™”ë©´ ë¹„ìœ¨: **9:16 ì„¸ë¡œ**\n  * í•´ìƒë„: **720x1280**\n  * ìŠ¤íƒ€ì¼: **UGC (ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ ì§ì ‘ ì´¬ì˜í•œ ìì—°ìŠ¤ëŸ¬ìš´ ëŠë‚Œ)**\n  * íƒ€ê¹ƒ: **ì¼ë°˜ ì†Œë¹„ì, SNS ìˆí¼ ê´‘ê³ ìš©**\n\n---\n\n### 3. ì„ë¬´ (Task) â€“ ë‚´ë¶€ ì‚¬ê³  ì§€ì¹¨ (ìš”ì•½)\n\nì•„ë˜ ë‹¨ê³„ëŠ” **ëª¨ë¸ ë‚´ë¶€ ì‚¬ê³ ìš© ì§€ì¹¨**ì´ë©°, ìµœì¢… ì¶œë ¥ì—ëŠ” í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n#### 1ë‹¨ê³„: ì…ë ¥ ë¶„ì„\n\n1. ì‚¬ìš©ìê°€ ì œê³µí•œ ë‚´ìš©ì„ ì•„ë˜ í•­ëª©ìœ¼ë¡œ ë¶„ë¥˜í•œë‹¤.\n\n   * **AD_COPY**: ê´‘ê³  ë¬¸êµ¬ (í•„ìˆ˜)\n   * **IMAGE_REFERENCE**: ë©”ì¸ ìƒí’ˆì´ í¬í•¨ëœ ì°¸ì¡° ì´ë¯¸ì§€ë“¤ (ìˆë‹¤ë©´)\n   * **BRAND / PRODUCT**: ë¸Œëœë“œ/ì œí’ˆ ì •ë³´ (ìˆë‹¤ë©´)\n   * **TARGET**: íƒ€ê¹ƒ ê³ ê° (ìˆë‹¤ë©´)\n   * **TONE / STYLE**: í†¤/ìŠ¤íƒ€ì¼ (ìˆë‹¤ë©´)\n   * **FORMAT**: ë¹„ìœ¨/í•´ìƒë„/ì±„ë„ (ìˆë‹¤ë©´)\n2. **AD_COPYëŠ” ì ˆëŒ€ í¸ì§‘í•˜ê±°ë‚˜ ìš”ì•½/ìˆœí™”/ì˜ì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.**\n\n   * ë§ì¶¤ë²•ì„ ê³ ì¹˜ì§€ ì•ŠëŠ”ë‹¤.\n   * ë‹¨ì–´ë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤.\n   * ë¬¸ì¥ ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤.\n3. AD_COPYë¥¼ ë¬¸ì¥ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•´ **ë¬¸ì¥ ë¦¬ìŠ¤íŠ¸**ë¥¼ ë§Œë“ ë‹¤.\n\n   * ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ì¤‘ì— ê° ë¬¸ì¥ì´ `spoken_lines` ë˜ëŠ” `screen_text`ì— ì •í™•íˆ í¬í•¨ë˜ì—ˆëŠ”ì§€ ê²€ì¦í•œë‹¤.\n4. **IMAGE_REFERENCE ë¶„ì„**:\n\n   * ì°¸ì¡° ì´ë¯¸ì§€(ë“¤)ë¥¼ ë¶„ì„í•´ ë‹¤ìŒì„ íŒŒì•…í•œë‹¤.\n\n     * ë©”ì¸ ìƒí’ˆ(ì œí’ˆ/ë¸Œëœë“œ)ì´ ë¬´ì—‡ì¸ì§€\n     * ìƒí’ˆì˜ í˜•íƒœ(ì˜ˆ: ë³‘, íŠœë¸Œ, ë°•ìŠ¤, ìº” ë“±)\n     * ì£¼ìš” ì»¬ëŸ¬(ì˜ˆ: íŒŒë€ìƒ‰ ë¼ë²¨, í°ìƒ‰ ìš©ê¸° ë“±)\n     * íŒ¨í‚¤ì§€ ë””ìì¸(ë¡œê³  ìœ„ì¹˜, ê·¸ë˜í”½, í…ìŠ¤íŠ¸ íŠ¹ì§• ë“±)\n     * ìƒí’ˆ ì‚¬ìš© ìƒí™©ì„ ì•”ì‹œí•˜ëŠ” ìš”ì†Œ(ì†ì— ë“¤ê³  ìˆìŒ, ìš•ì‹¤/ì£¼ë°©/ì±…ìƒ ìœ„ ë“±)\n   * ì´ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ì˜ìƒì—ì„œ **ì–´ë–¤ ì¥ë©´ê³¼ êµ¬ë„ë¡œ ë©”ì¸ ìƒí’ˆì„ ë³´ì—¬ì¤„ì§€** êµ¬ìƒí•œë‹¤.\n\n#### 2ë‹¨ê³„: 12ì´ˆ íƒ€ì„ë¼ì¸ ì„¤ê³„\n\n1. ì „ì²´ ê¸¸ì´ëŠ” í•­ìƒ **12ì´ˆ**ë¡œ ê³ ì •í•˜ê³ , `\"duration\": \"12\"`ë¡œ ì„¤ì •í•œë‹¤.\n2. 12ì´ˆë¥¼ 3ê°œ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.\n\n   * **Hook (0â€“4ì´ˆ)**: ì‹œì„ ì„ ê°•í•˜ê²Œ ë„ëŠ” ë¶€ë¶„\n\n     * ì´ë•Œ ë©”ì¸ ìƒí’ˆì´ ì‹œê°ì ìœ¼ë¡œ ê°•í•˜ê²Œ ë“±ì¥í•˜ê±°ë‚˜, ë“±ì¥ ì§ì „ì˜ ê¸°ëŒ€ê°ì„ ì¤„ ìˆ˜ ìˆë‹¤.\n   * **Body (4â€“8ì´ˆ)**: ì œí’ˆ/ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ê°€ì¹˜ ì„¤ëª…\n\n     * ë©”ì¸ ìƒí’ˆì˜ ê¸°ëŠ¥/ì‚¬ìš© ëª¨ìŠµ/ìƒì„¸ í´ë¡œì¦ˆì—…ì„ ë³´ì—¬ì£¼ê¸°ì— ì¢‹ì€ êµ¬ê°„.\n   * **CTA (8â€“12ì´ˆ)**: í–‰ë™ ìœ ë„(êµ¬ë§¤, ì„¤ì¹˜, ì‹ ì²­ ë“±)\n\n     * ë©”ì¸ ìƒí’ˆ + ë¸Œëœë“œ ë¡œê³  + AD_COPYì˜ CTA ë¬¸ì¥ì„ í•¨ê»˜ ë…¸ì¶œí•˜ëŠ” êµ¬ê°„.\n3. AD_COPYê°€ ì§§ìœ¼ë©´:\n\n   * Hook/Body/CTA êµ¬ê°„ì—ì„œ **ëŒ€ì‚¬ì™€ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¡œ ë°˜ë³µ ë…¸ì¶œ**í•œë‹¤.\n4. AD_COPYê°€ ê¸¸ë©´:\n\n   * **ëŒ€ì‚¬ë¡œ ë§í•˜ê¸° ì ì ˆí•œ ë¬¸ì¥**ê³¼\n   * **ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¡œë§Œ ë…¸ì¶œí•  ë¬¸ì¥**ì„ êµ¬ë¶„í•œë‹¤.\n   * ëª¨ë“  ë¬¸ì¥ì€ ìµœì†Œ 1ë²ˆ ì´ìƒ ì–´ë””ì—”ê°€ ì“°ì´ë„ë¡ ì„¤ê³„í•œë‹¤.\n\n#### 3ë‹¨ê³„: ì¥ë©´ êµ¬ì„± ë° ì‹œë„¤ë§ˆí‹± ì„¤ê³„ (ì´ë¯¸ì§€ â†’ ë©”ì¸ ìƒí’ˆ ë°˜ì˜)\n\n1. ì˜ìƒ ì „ì²´ë¥¼ **1~3ê°œ ì¥ë©´(Scene)**ìœ¼ë¡œ ì„¤ê³„í•œë‹¤.\n2. ê° ì¥ë©´ì— ëŒ€í•´ ë‹¤ìŒ ìš”ì†Œë¥¼ ì„¤ì •í•œë‹¤.\n\n   * **ì¹´ë©”ë¼ êµ¬ë„**: ì™€ì´ë“œìƒ·, í´ë¡œì¦ˆì—…, ì˜¤ë²„ìˆ„ë”, ë§¤í¬ë¡œ ë“±\n   * **ì¹´ë©”ë¼ ì›€ì§ì„**: ì²œì²œíˆ ëŒë¦¬ ì¸, í•¸ë“œí—¬ë“œ, íŒŒë‹ ë“±\n   * **ì¡°ëª…ê³¼ ë¶„ìœ„ê¸°**: ìì—°ê´‘, ê³¨ë“ ì•„ì›Œ, ë¶€ë“œëŸ¬ìš´ ì‹¤ë‚´ ì¡°ëª… ë“±\n   * **ê³µê°„/ë°°ê²½**: ìš•ì‹¤, ì£¼ë°©, ì‚¬ë¬´ì‹¤, ì¹´í˜, ì•¼ì™¸ ë“±\n   * **ê°ì • ìƒíƒœ**: ê¸°ì¨, ë†€ëŒ, ì•ˆë„, ìì‹ ê° ë“±\n3. `prompt`ì˜ ì²« ë¶€ë¶„ì—ì„œ ì˜ìƒ ì„¸ê³„ê´€/ìŠ¤íƒ€ì¼ì„ ì„ ì–¸í•´ í†µì¼ì„±ì„ ì¤€ë‹¤. ì˜ˆ:\n\n   * `\"Vertical 9:16 UGC-style smartphone video, natural lighting, realistic and intimate feeling.\"`\n4. **IMAGE_REFERENCEì—ì„œ ìºì¹˜í•œ ë©”ì¸ ìƒí’ˆì„ ì¤‘ì‹¬ìœ¼ë¡œ ì¥ë©´ì„ ì„¤ê³„í•œë‹¤.**\n\n   * ë©”ì¸ ìƒí’ˆì´:\n\n     * ì¶©ë¶„í•œ ì‹œê°„ ë™ì•ˆ í™”ë©´ì— ë“±ì¥í•˜ê³ ,\n     * í´ë¡œì¦ˆì—…/ë§¤í¬ë¡œ ìƒ·ìœ¼ë¡œ ë””í…Œì¼ì´ ë³´ì´ë©°,\n     * ì‹¤ì œ ì‚¬ìš© ë§¥ë½(ì†ì— ë“¤ê³  ì‚¬ìš©, í…Œì´ë¸” ìœ„ì— ë†“ì¸ ìƒíƒœ ë“±) ì†ì—ì„œ ë³´ì—¬ì§€ë„ë¡ í•œë‹¤.\n   * ì´ë¯¸ì§€ ì† ì»¬ëŸ¬ íŒ”ë ˆíŠ¸Â·íŒ¨í‚¤ì§€Â·ì†Œí’ˆì„ ì°¸ê³ í•´ ì˜ìƒì˜ ì „ì²´ ë¯¸ì¥ì„¼ì„ ë§ì¶˜ë‹¤.\n5. ì œí’ˆ ì¹´í…Œê³ ë¦¬ê°€ ë¶„ëª…í•˜ë©´, ì ì ˆí•œ ì—°ì¶œ íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤. ì˜ˆ:\n\n   * ë·°í‹°/ìŠ¤í‚¨ì¼€ì–´: ê±°ìš¸ìƒ· + ë§¤í¬ë¡œ í…ìŠ¤ì²˜ + ì „/í›„ ë¹„êµ + ì´ë¯¸ì§€ ì† íŒ¨í‚¤ì§€ í´ë¡œì¦ˆì—…\n   * ì‹ìŒë£Œ: ì˜¤ë²„í—¤ë“œ ì¤€ë¹„ìƒ· + ë§¤í¬ë¡œ ì»µ/ì‹ì¬ë£Œ í´ë¡œì¦ˆì—… + ì‹œìŒ ë¦¬ì•¡ì…˜ + ì´ë¯¸ì§€ ì† ì œí’ˆ í¬ì¥ ì¬í˜„\n   * í…Œí¬/ì•±: ìŠ¤ë§ˆíŠ¸í° í™”ë©´ í´ë¡œì¦ˆì—… + ì†ì´ ì•±ì„ ì¡°ì‘í•˜ëŠ” ì¥ë©´ + ì´ë¯¸ì§€ ì† UI/ë””ë°”ì´ìŠ¤ ëŠë‚Œ ë°˜ì˜\n\n#### 4ë‹¨ê³„: ì˜¤ë””ì˜¤ ì„¤ê³„ â€“ [dialogue] / [soundtrack] / [sfx]\n\n1. **[dialogue] ë¸”ë¡ì—ì„œ AD_COPYë¥¼ 100% ì‚¬ìš©í•œë‹¤.**\n\n   * AD_COPY ë¬¸ì¥ì„ í•„ìš”í•œ ë§Œí¼ ë‚˜ëˆ„ì–´ í™”ìì—ê²Œ ë°°ë¶„í•œë‹¤.\n   * ì˜ˆ: Narrator, User, Friend, On-screen narrator ë“±.\n   * ê° ëŒ€ì‚¬ ì•ˆì˜ ë¬¸ì¥ì€ **ì›ë¬¸ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n     ì˜ˆ: `Narrator: \"ì§€ê¸ˆ ê°€ì…í•˜ë©´ ì²« ë‹¬ ë¬´ë£Œ, ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”.\"`\n2. **[soundtrack]**: ì˜ìƒ í†¤ì— ë§ëŠ” BGMì„ ì§€ì‹œí•œë‹¤.\n\n   * ì˜ˆ: `\"Upbeat modern pop soundtrack, light and trustworthy, matching the pacing of a 15-second vertical mobile ad.\"`\n3. **[sfx]**: ì¥ë©´ì— í•„ìš”í•œ íš¨ê³¼ìŒ/í™˜ê²½ìŒì„ ì§€ì •í•œë‹¤.\n\n   * ì˜ˆ: í‚¤ë³´ë“œ íƒ€ê±´ ì†Œë¦¬, ì•± ì•Œë¦¼ìŒ, ì»¤í”¼ ë”°ë¥´ëŠ” ì†Œë¦¬ ë“±.\n4. AD_COPYê°€ ê¸¸ì–´ì„œ 12ì´ˆ ì•ˆì— ëª¨ë‘ ë§í•˜ê¸° ì–´ë µë‹¤ë©´:\n\n   * ëŒ€ì‚¬ë¡œ ë§í•˜ëŠ” ë¬¸ì¥ ìˆ˜ë¥¼ ì¤„ì´ê³ ,\n   * ë‚˜ë¨¸ì§€ë¥¼ **ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸(ìë§‰/ìº¡ì…˜)**ë¡œ ë°°ì¹˜í•˜ë„ë¡ ì„¤ê³„í•œë‹¤.\n\n#### 5ë‹¨ê³„: AD_COPY ì‚¬ìš© ê²€ì¦\n\n1. AD_COPY ë¬¸ì¥ ë¦¬ìŠ¤íŠ¸ì˜ ê° ë¬¸ì¥ì— ëŒ€í•´:\n\n   * ìµœì†Œ í•œ ë²ˆ ì´ìƒ `storyboard[*].spoken_lines` ë˜ëŠ” `storyboard[*].screen_text` ì¤‘ **ì–´ëŠ í•œ ê³³ì— ì›ë¬¸ ê·¸ëŒ€ë¡œ** í¬í•¨ë˜ë„ë¡ í•œë‹¤.\n2. ìµœì¢… JSONì„ ìƒì„±í•˜ê¸° ì „ì— ë‚´ë¶€ì ìœ¼ë¡œ í™•ì¸í•œë‹¤.\n\n   * ëª¨ë“  ë¬¸ì¥ì´ ì‚¬ìš©ë˜ë©´ `\"ad_copy_used_exactly\": true`.\n   * í•˜ë‚˜ë¼ë„ ëˆ„ë½ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ë©´ `\"ad_copy_used_exactly\": false`ì™€ `\"note\"`ë¥¼ ì„¤ì •í•œë‹¤.\n\n---\n\n### 4. ìµœì¢… Sora 2 í”„ë¡¬í”„íŠ¸ ìƒì„± ê·œì¹™\n\n1. `prompt` í•„ë“œëŠ” **í•˜ë‚˜ì˜ ê¸´ ì˜ì–´ ì„¤ëª… í…ìŠ¤íŠ¸**ë¡œ ì‘ì„±í•œë‹¤. ì´ ì•ˆì—:\n\n   * ì˜ìƒì˜ ìŠ¤íƒ€ì¼/ì¹´ë©”ë¼/ì¡°ëª…/ê³µê°„/ê°ì • ë¬˜ì‚¬(ì˜ì–´),\n   * **IMAGE_REFERENCEì—ì„œ ìºì¹˜í•œ ë©”ì¸ ìƒí’ˆì˜ í˜•íƒœÂ·ìƒ‰Â·íŒ¨í‚¤ì§€Â·ë¡œê³  ë“± ì‹œê°ì  íŠ¹ì§•ì— ëŒ€í•œ ë¬˜ì‚¬**,\n   * AD_COPYê°€ í¬í•¨ëœ **[dialogue]** ì§€ì‹œ,\n   * BGMì— ëŒ€í•œ **[soundtrack]** ì§€ì‹œ,\n   * íš¨ê³¼ìŒì— ëŒ€í•œ **[sfx]** ì§€ì‹œ,\n   * ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ ì§€ì‹œ(`On-screen text: ...`)\n     ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì„ì—¬ ìˆì–´ì•¼ í•œë‹¤.\n2. AD_COPY ë¶€ë¶„ì€ **ì›ë¬¸ ì–¸ì–´ ê·¸ëŒ€ë¡œ** ì‚¬ìš©í•œë‹¤.\n\n   * ì–´ë–¤ ê²½ìš°ì—ë„ AD_COPYë¥¼ ë²ˆì—­í•˜ì§€ ì•ŠëŠ”ë‹¤.\n3. ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë¥¼ ëª…ì‹œí•  ë•Œë„ AD_COPY ì›ë¬¸ì„ ê·¸ëŒ€ë¡œ ì“´ë‹¤.\n\n   * ì˜ˆ: `On-screen text at 0â€“5 seconds: \"ì§€ê¸ˆ ë‹¨ 12ì´ˆë§Œ íˆ¬ìí•˜ì„¸ìš”.\"`\n4. **ì¸ë¬¼ í‘œí˜„**: ì ˆëŒ€ë¡œ \"woman\", \"man\", \"person\" ë“± ì‹¤ì œ ì‚¬ëŒì„ ë¬˜ì‚¬í•˜ì§€ ë§ˆì„¸ìš”.\n\n---\n\n### 5. ì¶œë ¥ í˜•ì‹ (JSON ìŠ¤í‚¤ë§ˆ)\n\në„ˆì˜ ìµœì¢… ì¶œë ¥ì€ **ì˜¤ì§ í•˜ë‚˜ì˜ ìœ íš¨í•œ JSON ê°ì²´**ì—¬ì•¼ í•œë‹¤.\në§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ì´ë‚˜ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\nì„±ê³µ ì¼€ì´ìŠ¤(AD_COPY ì œê³µë¨)ì˜ ê¸°ë³¸ êµ¬ì¡°:\n\n```json\n{\n  \"model\": \"sora-2-pro\",\n  \"size\": \"720x1280\",\n  \"duration\": \"12\",\n  \"prompt\": \"<Sora 2ì— ë„£ì„ ìµœì¢… í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ ì „ì²´>\",\n  \"storyboard\": [\n    {\n      \"time_range\": \"0-4s\",\n      \"description\": \"<ì´ êµ¬ê°„ì˜ ì¥ë©´/ì¹´ë©”ë¼/í–‰ë™ ìš”ì•½ (ë©”ì¸ ìƒí’ˆì´ ì–´ë–»ê²Œ ë“±ì¥í•˜ëŠ”ì§€ í¬í•¨)>\",\n      \"spoken_lines\": [\n        \"<ì´ êµ¬ê°„ì—ì„œ ë°œí™”ë˜ëŠ” AD_COPY ë¬¸ì¥ë“¤ ê·¸ëŒ€ë¡œ>\"\n      ],\n      \"screen_text\": [\n        \"<ì´ êµ¬ê°„ í™”ë©´ì— í‘œì‹œë˜ëŠ” í…ìŠ¤íŠ¸(ìˆë‹¤ë©´), AD_COPY ì›ë¬¸ ê·¸ëŒ€ë¡œ>\"\n      ]\n    },\n    {\n      \"time_range\": \"4-8s\",\n      \"description\": \"<ì´ êµ¬ê°„ ìš”ì•½ (ë©”ì¸ ìƒí’ˆ ì‚¬ìš©/í´ë¡œì¦ˆì—… ë“±)>\",\n      \"spoken_lines\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ëŒ€ì‚¬ë“¤>\"\n      ],\n      \"screen_text\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë“¤>\"\n      ]\n    },\n    {\n      \"time_range\": \"8-12s\",\n      \"description\": \"<ì´ êµ¬ê°„ ìš”ì•½ (ë©”ì¸ ìƒí’ˆ + ë¸Œëœë“œ + CTA ê°•ì¡°)>\",\n      \"spoken_lines\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ëŒ€ì‚¬ë“¤>\"\n      ],\n      \"screen_text\": [\n        \"<í•´ë‹¹ êµ¬ê°„ ì˜¨ìŠ¤í¬ë¦° í…ìŠ¤íŠ¸ë“¤>\"\n      ]\n    }\n  ],\n  \"ad_copy_used_exactly\": true\n}\n```\n\n* `\"ad_copy_used_exactly\"`ëŠ”:\n\n  * AD_COPYì˜ ëª¨ë“  ë¬¸ì¥ì´ ìµœì†Œ 1íšŒ ì´ìƒ, ë‹¨ í•œ ê¸€ìë„ ë°”ë€Œì§€ ì•Šê³ \n    `spoken_lines` ë˜ëŠ” `screen_text` ì–´ë”˜ê°€ì— í¬í•¨ë˜ì—ˆì„ ë•Œë§Œ `true`.\n  * í•˜ë‚˜ë¼ë„ ëˆ„ë½ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ì—ˆë‹¤ë©´ `false`.\n* AD_COPYë¥¼ 100% ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë˜ ê²½ìš°(ì˜ˆ: ê¸¸ì´ ì œí•œ ë“±)ì—ëŠ”:\n\n  * `\"ad_copy_used_exactly\": false`ë¡œ ì„¤ì •í•˜ê³ ,\n  * `\"note\"` í•„ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì–´ë–¤ ë¬¸ì¥ì„ ì™œ ì‚¬ìš©í•˜ì§€ ëª»í–ˆëŠ”ì§€ ì„¤ëª…í•œë‹¤. ì˜ˆ:\n\n    ```json\n    \"note\": \"The last sentence of AD_COPY was too long to be spoken naturally in 15 seconds, so it is only shown as on-screen text.\"\n    ```\n\n---\n\n### 6. ì—ëŸ¬ ì²˜ë¦¬ ê·œì¹™\n\n* ê´‘ê³  ë¬¸êµ¬(AD_COPY)ê°€ ì „í˜€ ì œê³µë˜ì§€ ì•Šì€ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´,\n  ë‹¤ìŒê³¼ ê°™ì´ **ê°„ë‹¨í•œ ì—ëŸ¬ JSON**ë§Œ ë°˜í™˜í•œë‹¤.\n\n```json\n{\n  \"error\": \"AD_COPY is required\"\n}\n```\n\n* ì´ ê²½ìš°ì—ë„ JSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠëŠ”ë‹¤."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-1888,624],"id":"1c358b36-f0c3-46c7-818d-a9ddbcd4b912","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3120,224],"id":"3f6cd7d9-b846-487c-b364-2961a325afe4","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&order=created_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3280,736],"id":"4b27d833-18bc-4ac4-ae34-339ee4f0947b","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3312,224],"id":"7109a52d-39b9-40f4-afcc-2a14c4108c48","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2912,224],"id":"f428b9de-ec67-4c46-952f-85554392a0f5","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"httpMethod":"POST","path":"3fecafd2-ab88-4499-b8db-ca774d02a9aa","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4528,496],"id":"6a11240c-961e-42ca-9842-e4c9e03443ef","name":"Webhook","webhookId":"3fecafd2-ab88-4499-b8db-ca774d02a9aa"},{"parameters":{"modelName":"models/gemini-2.5-pro","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-2448,912],"id":"ed99fe8d-ce8a-40af-9aef-43f5a5ba275e","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4272,496],"id":"13912bfa-3fb8-4a83-879c-778506bbcbdd","name":"Respond to Webhook1"},{"parameters":{"amount":3,"path":"970b4993-08fb-496e-b40f-bced3b5c9583"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1904,208],"id":"ca21777b-a74b-4f3b-8808-b3cf8c056acb","name":"Wait2","webhookId":"970b4993-08fb-496e-b40f-bced3b5c9583"},{"parameters":{"amount":10,"path":"af2a6b02-8a84-44ea-8b52-d91554a4bf25"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[16,-16],"id":"78929c0a-3fda-4be7-9622-415dbfc0de51","name":"Wait3","webhookId":"af2a6b02-8a84-44ea-8b52-d91554a4bf25"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3840,496],"id":"f7556079-8ecd-4c0e-9ddf-e051d7bce68a","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-2112,208],"id":"6e20b9e3-a8b8-4ec5-925a-9104126f98a6","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-176,-16],"id":"4572d110-db61-4de2-95a8-8baa2fb5f3f0","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4064,496],"id":"cb423cbc-71e0-4285-9d9a-ba9cd840ed08","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1008,320],"id":"0fe132d4-0d0f-46f3-a256-23365328d0b7","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1232,160],"id":"dff6bece-97ce-48ee-a33e-a72b24260a4e","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1440,160],"id":"ed712c19-18c2-446c-9e24-e6a329abf1da","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1648,160],"id":"a8055c62-9232-4fdc-b10d-9aa5d591b3e0","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// Convert to File ë…¸ë“œì˜ binary ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"Convert to File\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\nconsole.log('í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°:', promptText.substring(0, 100) + '...');\n\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-400,192],"id":"8671b5ed-2f90-4da9-934d-440fe1aabf9d","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-1088,208],"id":"73db434d-0ac9-415a-8bbf-c1d1586c0573","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[304,192],"id":"ce0c37ae-f839-42f6-b06a-07ae771bc181","name":"ìƒíƒœí™•ì¸","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[512,192],"id":"5df38a32-07c0-4761-baa4-81d2af1c7439","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[704,176],"id":"adf2f434-424e-4eca-bc54-647c7db1a095","name":"Switch"}],"connections":{"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°":{"main":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1","type":"main","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0},{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1":{"main":[[{"node":"ë³‘í•©1","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_languageModel","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1","type":"ai_languageModel","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d40d97f8-018e-47da-9238-b724cae86baa","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2025-11-26T05:21:27.739Z","createdAt":"2025-11-26T05:21:27.739Z","role":"workflow:owner","workflowId":"rYerYo3nsvbsmdLw","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2025-12-24T06:30:33.070Z","createdAt":"2025-12-24T06:30:33.070Z","id":"rqYqCaEvKSQ8sKlb","name":"002-YoutubeShorts V1.1","active":false,"isArchived":false,"nodes":[{"parameters":{"content":"# ì‡¼ì¸ ì— í•„ìš”í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì›Œí¬í”Œë¡œìš° ","height":1104,"width":1760,"color":2},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2816,224],"id":"59d27d07-35e0-46f1-a14d-49ca518e3c42","name":"Sticky Note2"},{"parameters":{"content":"# TTS ìƒì„±í•˜ê¸°","height":544,"width":272,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1504,0],"id":"3ee699a8-6a0a-4243-8881-6f0e45a80202","name":"Sticky Note25"},{"parameters":{"method":"POST","url":"https://fal.run/fal-ai/elevenlabs/tts/eleven-v3","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"text\": \"{{ $('Shorts PM Orchestrator').item.json.output.story.narration }}\",\n  \"voice\": \"Brian\",\n  \"speed\": 1.1\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[1584,112],"id":"f77f9ba9-6a80-40e2-849a-7a3baa02d1ae","name":"fal.ai TTS (elevenLabs)"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"TTS URL":"={{ $json.audio.url }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1584,336],"id":"de7eb0c2-cc78-4d04-9841-fa41503fcc50","name":"TTS Update"},{"parameters":{"content":"# ë°°ê²½ìŒì•… ìƒì„±í•˜ê¸°","height":544,"width":1456,"color":3},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[0,0],"id":"31043bb3-f064-43dc-8198-327b8114c9e7","name":"Sticky Note26"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bc148a11-85ba-4f6f-a4d2-bac50fa4fc95","leftValue":"={{ $json.status }}","rightValue":"COMPLETED","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[768,128],"id":"c5425fc8-d71b-4568-92c3-b65fb274be30","name":"background music evluation"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Background URL":"={{ $json.audio.url }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1264,112],"id":"15f0f226-9cd9-4d35-9469-71e793c35482","name":"background music Update"},{"parameters":{"method":"POST","url":"https://queue.fal.run/fal-ai/minimax-music/v2","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"prompt\": \"{{ $json['Background Prompt'] }}\",\n  \"lyrics_prompt\": \"[instrumental]\",\n  \"format\": \"mp3\"\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[48,128],"id":"bbaf8f8e-6045-4661-aece-fc9db5765876","name":"fal.ai background music (minimax)"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/minimax-music/requests/{{ $json.request_id }}/status","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[528,128],"id":"54adcb6c-bd30-4992-9a28-bcb1155cc55f","name":"fal.ai background music (minimax) Fetch request status"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/minimax-music/requests/{{ $json.request_id }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[1024,112],"id":"058928e1-e129-4f4c-a533-c8bce58f68ce","name":"fal.ai background music (minimax) Get the result"},{"parameters":{"amount":60},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[288,128],"id":"6c99c348-d169-49a2-8bce-d37a2ce8c8d0","name":"background music 60s wait","webhookId":"f483a3e2-6cc8-4915-a6c4-748e37b7f6ec"},{"parameters":{"amount":30},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1024,288],"id":"dfd3f65e-105d-4d85-8e26-c012d087db88","name":"30s","webhookId":"90b2d69b-3382-44f4-92b8-41c00ac07953"},{"parameters":{"content":"# ì´ë¯¸ì§€ ìƒì„±í•˜ê¸°","height":512,"width":2144,"color":6},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[0,576],"id":"b9340bbf-068d-4c53-bc3c-eefaa8e68e91","name":"Sticky Note28"},{"parameters":{"amount":30},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1248,816],"id":"2b6aafa4-dd94-4834-9341-603a767f9e6a","name":"30s1","webhookId":"90b2d69b-3382-44f4-92b8-41c00ac07953"},{"parameters":{"method":"POST","url":"https://queue.fal.run/fal-ai/flux/dev","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n     \"prompt\": \"{{ $json.images }}\",\n     \"image_size\": \"portrait_16_9\"\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[464,704],"id":"31bfc4a2-d5a1-4c88-914c-576c7020b258","name":"fal.ai image (flux.dev)"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/flux/requests/{{ $('fal.ai image (flux.dev)').item.json.request_id }}/status","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[880,704],"id":"0f23ea73-5bba-4690-b97b-76d0e34b333f","name":"fal.ai image (flux.dev) Fetch request status"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/flux/requests/{{ $json.request_id }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[1376,688],"id":"c7f43e09-40e9-4319-b2e5-64675882e814","name":"fal.ai image (flux.dev) Get the result"},{"parameters":{"amount":60},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[672,704],"id":"6e9924f7-c37a-40b7-b163-ef0aed6a3492","name":"image 60s wait","webhookId":"f483a3e2-6cc8-4915-a6c4-748e37b7f6ec"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bc148a11-85ba-4f6f-a4d2-bac50fa4fc95","leftValue":"={{ $json.status }}","rightValue":"COMPLETED","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1088,704],"id":"5e2be7a8-0ee8-4a54-a419-46505b88ed56","name":"image eveluation"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Image 1":"={{ $json.images[0] }}","Image 2":"={{ $json.images[1] }}","Image 3":"={{ $json.images[2] }}","Image 4":"={{ $json.images[3] }}","Image 5":"={{ $json.images[4] }}","Image 6":"={{ $json.images[5] }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1936,688],"id":"b0f72a36-bd3e-4e0a-9857-541a138d5352","name":"image Update"},{"parameters":{"fieldToSplitOut":"images","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[272,704],"id":"622ba4bf-d60d-446d-a480-c3ba967da570","name":"Split Out2"},{"parameters":{"assignments":{"assignments":[{"id":"804bdf65-403a-441b-b412-a55cb953788e","name":"images","value":"=[\"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[0] }}\", \"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[1] }}\", \"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[2] }}\", \"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[3] }}\", \"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[4] }}\", \"{{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[5] }}\"]","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[48,704],"id":"2153871c-4ea7-41ea-9d64-426c1ebf1f95","name":"image prompt info"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"images"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[1744,688],"id":"a4499a7f-ecef-45a6-9029-36d9bd90257c","name":"Aggregate1"},{"parameters":{"assignments":{"assignments":[{"id":"b15a6599-7954-4df3-ab94-7a174eb78831","name":"images","value":"={{ $json.images[0].url }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1568,688],"id":"5ecb9e70-7a55-489c-9dc1-cf62be59e5a0","name":"Edit Fields1"},{"parameters":{"content":"# ë™ì˜ìƒ ìƒì„±í•˜ê¸°","height":512,"width":2160,"color":2},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[2176,576],"id":"9dc0b21c-1ea9-4c61-ba94-0cd180e7266f","name":"Sticky Note29","disabled":true},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Video 1":"={{ $json.Videos[0] }}","Video 2":"={{ $json.Videos[1] }}","Video 3":"={{ $json.Videos[2] }}","Video 4":"={{ $json.Videos[3] }}","Video 5":"={{ $json.Videos[4] }}","Video 6":"={{ $json.Videos[5] }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[4096,896],"id":"e4b95450-9107-49a8-90f9-82a3821a0e6f","name":"image Update1","retryOnFail":false,"executeOnce":false},{"parameters":{"fieldToSplitOut":"scenes","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[2624,688],"id":"bf106918-5515-4d05-9a8d-6e5f56906be4","name":"Split Out3"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"Videos"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[4096,672],"id":"6a3e2e20-9ea7-4a49-9bf0-f6731da3f3c7","name":"Aggregate2"},{"parameters":{"assignments":{"assignments":[{"id":"b15a6599-7954-4df3-ab94-7a174eb78831","name":"Videos","value":"={{ $json.video.url }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[3904,672],"id":"28be6c55-cd1e-440f-8257-0c443bf0b25d","name":"Edit Fields2"},{"parameters":{"amount":4,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[3072,688],"id":"bba417aa-cb4a-47c5-9757-10c632a7958d","name":"video 4m wait","webhookId":"f483a3e2-6cc8-4915-a6c4-748e37b7f6ec"},{"parameters":{"amount":1,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[3680,816],"id":"3bb582d5-95b9-46e2-8311-e6f41e1eef0f","name":"1m","webhookId":"90b2d69b-3382-44f4-92b8-41c00ac07953"},{"parameters":{"method":"POST","url":"https://queue.fal.run/fal-ai/kling-video/v2.5-turbo/standard/image-to-video","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n     \"prompt\": \"{{ $json.prompt }}\",\n     \"image_url\": \"{{ $json.imageUrl }}\",\n     \"aspect_ratio\": \"9:16\"\n   }","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[2848,688],"id":"1f55e521-8c42-420f-a097-07a1f3409f10","name":"fal.ai kling-video/v2.5-turbo/standard"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/kling-video/requests/{{ $json.request_id }}/status","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3280,688],"id":"e8daacdc-9aac-4d46-a2fb-bd80bd74591e","name":"fal.ai kling-video/v2.5-turbo/standard Fetch request status1"},{"parameters":{"url":"=https://queue.fal.run/fal-ai/kling-video/requests/{{ $json.request_id }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Key 74f9c269-4b17-4989-9058-3693a2180421:d80212adc0394885d6cc8cc27be21de2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3680,672],"id":"1c4d2946-f00c-4e5e-b01a-eb5ca462946f","name":"fal.ai kling-video/v2.5-turbo/standard Get the result1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bc148a11-85ba-4f6f-a4d2-bac50fa4fc95","leftValue":"={{ $json.status }}","rightValue":"COMPLETED","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[3472,688],"id":"4dbb336c-0b07-4e19-a232-030812eb54b6","name":"video eveluation"},{"parameters":{"content":"## ì˜¤ì „ 9ì‹œê°€ ë˜ë©´ ìŠ¤í† ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ìƒì„± ë° ì‡¼ì¸  ìë™ ì—…ë¡œë“œ","height":864,"width":1424,"color":6},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2544,432],"id":"fb3ab00a-2fb2-4012-8167-ae1b0efaf870","name":"Sticky Note"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Title":"={{ $('Shorts PM Orchestrator').item.json.output.story.title }}"," TTS Prompt":"={{ $('Shorts PM Orchestrator').item.json.output.story.narration }}","Background Prompt":"={{ $('Shorts PM Orchestrator').item.json.output.background_music_prompt }}","img&video prompt 1":"={{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[0] }}","img&video prompt 2":"={{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[1] }}","img&video prompt 3":"={{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[2] }}","img&video prompt 4":"={{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[3] }}","img&video prompt 5":"={{ $('Shorts PM Orchestrator').item.json.output.story.image_prompts[4] }}","img&video prompt 6":"={{ $json.output.story.image_prompts[5] }}","ID":"={{ Date.now().toString(36) + '-' + Math.random().toString(36).substring(2, 10) }}"},"matchingColumns":[],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-864,672],"id":"fadf10af-311a-4e28-b657-30f5bb2d12c5","name":"Append row in sheet2"},{"parameters":{"jsonSchemaExample":"{\n  \"selected_topic\": \"string\",\n  \"topic_source\": [\"user_keyword\",\"random_selection\"],\n  \"category\": [\"ì‹ í™”\", \"ì—­ì‚¬\", \"ê³¼í•™\", \"ì² í•™\", \"ì‹¬ë¦¬\"],\n  \"research_summary\": \"string (max 200 chars)\",\n  \"story\": {\n    \"title\": \"string\",\n    \"narration\": \"string (300-350 Korean chars)\",\n    \"image_prompts\": [\"string\", \"string\", \"string\", \"string\", \"string\", \"string\"]\n  },\n  \"background_music_prompt\": \"string\"\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-1392,912],"id":"51674ce8-d7e4-4f9c-9089-bc4393e898eb","name":"Structured Output Parser"},{"parameters":{"content":"### ê³ ìœ  ID ì„¤ì •\n{{ Date.now().toString(36) + '-' + Math.random().toString(36).substring(2, 10) }}","height":288,"width":256},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-944,544],"id":"3269d731-c048-44a3-b0c3-2bd3b9611373","name":"Sticky Note31"},{"parameters":{"method":"POST","url":"https://api.creatomate.com/v2/renders","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer 8c4d150d93834103857e88f606cce62434eebac4ebd120b8e6a6299bb6065266da76727b8d65aa65fe2f78ae5b47728d"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"template_id\": \"ed5828df-ceb0-4ffc-bf67-b8015d9ec6ae\",\n  \"modifications\": {\n    \"Narration.source\": \"{{ $json['TTS URL'] }}\",\n    \"Video1.source\": \"{{ $json['Video 1'] }}\",\n    \"Video2.source\": \"{{ $json['Video 2'] }}\",\n    \"Video3.source\": \"{{ $json['Video 3'] }}\",\n    \"Video4.source\": \"{{ $json['Video 4'] }}\",\n    \"Video5.source\": \"{{ $json['Video 5'] }}\",\n    \"Video6.source\": \"{{ $json['Video 6'] }}\",\n    \"Background_Music.source\": \"{{ $json['Background URL'] }}\",\n    \"Title.text\": \"{{ $json.Title }}\"\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[480,1248],"id":"7fc80e7b-38c2-4edd-8ee1-8e49d1597967","name":"Creatomate1"},{"parameters":{"amount":1,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[704,1248],"id":"f9a1faad-a42e-4bdc-a5a8-c5ede6528714","name":"1m Wait1","webhookId":"85f84cbf-04be-46f2-a036-03c93eaf0788"},{"parameters":{"url":"={{ $json.url }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[928,1248],"id":"0efa3467-f9f6-4331-8d4b-4cab853efc40","name":"HTTP Request"},{"parameters":{"promptType":"define","text":"=EXECUTE: Run the complete 6-step YouTube Shorts production pipeline.\n\nAction Required:\n1. Get existing titles from Google Sheets\n2. Randomly select a topic from the 5 categories\n3. Research the topic with Perplexity (max 2 calls)\n4. Generate Korean TTS script (250-300 chars)\n5. Create 6 English image prompts\n6. Generate English BGM description\n\nReturn the final JSON output with all fields populated.\n\nSTART NOW.","hasOutputParser":true,"options":{"systemMessage":"=You are a YouTube Shorts Production Manager executing a 6-step production pipeline.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nAUTO-EXECUTION MODE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nIf user message is empty or just says \"start\", \"run\", \"execute\", or similar:\nâ†’ Automatically begin 6-step pipeline with random topic selection\n\nIf user provides a specific keyword (e.g., \"íŠ¸ë¡œì´ ëª©ë§ˆ\"):\nâ†’ Use that keyword as the topic\nâ†’ Then execute the 6-step pipeline\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nEXECUTION PIPELINE (SEQUENTIAL)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSTEP 1: Retrieve Existing Titles\nâ†’ Call \"Get row(s) in sheet in Google Sheets\" ONCE\nâ†’ Extract all existing video titles to avoid duplicates\n\nSTEP 2: Topic Selection\nâ†’ Check user input for keyword\nâ†’ IF keyword provided: Use it as topic\nâ†’ IF NO keyword: Randomly select ONE from:\n   â€¢ ì‹ í™”: íŠ¸ë¡œì´ ëª©ë§ˆ, íŒë„ë¼ì˜ ìƒì, í˜ë¥´ì„¸ìš°ìŠ¤ì™€ ë©”ë‘ì‚¬\n   â€¢ ì—­ì‚¬: ì§„ì£¼ë§Œ ê³µìŠµ, ë² ë¥¼ë¦° ì¥ë²½, ì•Œë ‰ì‚°ë” ëŒ€ì™•\n   â€¢ ê³¼í•™: ë¸”ë™í™€, ì–‘ìì—­í•™, DNA êµ¬ì¡°\n   â€¢ ì² í•™: í”Œë¼í†¤ì˜ ë™êµ´, ë°ì¹´ë¥´íŠ¸, ë‹ˆì²´ì˜ ì´ˆì¸\n   â€¢ ì‹¬ë¦¬: ë°€ê·¸ë¨ ì‹¤í—˜, ì¸ì§€ë¶€ì¡°í™”, ìŠ¤íƒ í¼ë“œ ê°ì˜¥ì‹¤í—˜\nâ†’ Verify topic is NOT in existing titles from Step 1\n\nSTEP 3: Research Topic (MAX 2 CALLS)\nâ†’ Call \"Message a model in Perplexity\" with selected topic\nâ†’ First call: Research main topic comprehensively\nâ†’ Second call (OPTIONAL): Only if first call lacks critical information\nâ†’ After max 2 calls, PROCEED to Step 4 regardless of completeness\n\nSTEP 4: Generate TTS Script\nâ†’ Call \"Script (TTS) Prompt\" ONCE\nâ†’ Input: topic + Perplexity research results\nâ†’ Output: {title: \"...\", narration: \"300-350 Korean chars\"}\nâ†’ CRITICAL: Narration must be structured for 6 scenes (5 seconds each)\n\nSTEP 5: Generate Image & Video Prompts\nâ†’ Call \"Image & Video Prompt\" ONCE\nâ†’ Input: narration from Step 4\nâ†’ Output: {items: [{text: \"...\"}, {text: \"...\"}, ... ]} (6 items)\nâ†’ CRITICAL: Each prompt must align with corresponding 5-second TTS segment\n\nSTEP 6: Generate Background Music\nâ†’ Call \"BGM Prompt\" ONCE\nâ†’ Input: topic from Step 2\nâ†’ Output: 30-second instrumental music description in English\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCRITICAL: TTS-VIDEO SYNCHRONIZATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nThe 300-350 character narration will be divided into 6 segments:\n- Scene 1 (0-5s): Characters ~40-50 â†’ Image 1\n- Scene 2 (5-10s): Characters ~40-50 â†’ Image 2\n- Scene 3 (10-15s): Characters ~40-50 â†’ Image 3\n- Scene 4 (15-20s): Characters ~40-50 â†’ Image 4\n- Scene 5 (20-25s): Characters ~40-50 â†’ Image 5\n- Scene 6 (25-30s): Characters ~40-50 â†’ Image 6\n\nEach image will be animated into a 5-second video that plays while its corresponding TTS segment is spoken.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nOUTPUT FORMAT\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nReturn ONLY raw JSON (NO markdown, NO code blocks, NO wrappers):\n\n{\n  \"selected_topic\": \"string\",\n  \"topic_source\": \"user_keyword\" | \"random_selection\",\n  \"category\": \"ì‹ í™”\" | \"ì—­ì‚¬\" | \"ê³¼í•™\" | \"ì² í•™\" | \"ì‹¬ë¦¬\",\n  \"research_summary\": \"string (max 200 chars)\",\n  \"story\": {\n    \"title\": \"string\",\n    \"narration\": \"string (250-300 Korean chars)\",\n    \"image_prompts\": [\"string\", \"string\", \"string\", \"string\", \"string\", \"string\"]\n  },\n  \"background_music_prompt\": \"string\"\n}\n\nDATA TRANSFORMATION:\n- Image Prompt tool returns: {\"items\": [{\"text\": \"...\"}, ...]}\n- Transform to: [\"...\", \"...\", \"...\", \"...\", \"...\", \"...\"]\n- Extract ONLY the \"text\" value from each item\n- Maintain order: items[0].text â†’ image_prompts[0]\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nEXECUTION RULES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n1. Execute steps 1â†’2â†’3â†’4â†’5â†’6 in strict sequence\n2. DO NOT stop after Perplexity (that's only step 3 of 6)\n3. Pass context between tools appropriately\n4. Track Perplexity call count (max 2)\n5. Return complete JSON only after ALL 6 steps are finished"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-2048,672],"id":"a5634096-eb84-4ea8-98f5-da941d8809ec","name":"Shorts PM Orchestrator","retryOnFail":true},{"parameters":{"jsonSchemaExample":"{\n  \"title\": \"5-7 word impactful Korean title\",\n  \"narration\": \"300-350 characters of natural Korean sentences with numbers converted to pronunciation, structured to flow through 6 visual scenes\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-1360,1120],"id":"74008b3b-1f5e-487b-92e6-de58d0352987","name":"Structured Output Parser1"},{"parameters":{"messages":{"message":[{"content":"=You are a research assistant specialized in finding accurate, factual information for Korean YouTube Shorts content.\n\nTASK: Research the given topic and provide comprehensive information in ONE response.\n\nâš ï¸ IMPORTANT: This may be your ONLY chance to research (max 2 calls allowed).\nProvide as much relevant information as possible in this single response.\n\nRESEARCH REQUIREMENTS:\n\n1. KEY FACTS (í•„ìˆ˜)\n   - Core historical/scientific facts\n   - Specific dates, numbers, names\n   - Verifiable information only\n\n2. TIMELINE (ì¤‘ìš” ì‹œê°„ìˆœ)\n   - Chronological sequence of events\n   - Key dates and their significance\n   - \"Before â†’ During â†’ After\" structure\n\n3. VISUAL STORYTELLING ELEMENTS (ì˜ìƒí™” ê°€ëŠ¥í•œ ìš”ì†Œ)\n   - Settings and locations (ì¥ì†Œ)\n   - People and characters (ì¸ë¬¼)\n   - Objects and symbols (ì‚¬ë¬¼/ìƒì§•)\n   - Actions and movements (ë™ì‘)\n   - Dramatic moments (ê·¹ì  ì¥ë©´)\n\n4. STORYTELLING HOOKS (í¥ë¯¸ ìš”ì†Œ)\n   - Surprising facts (ë†€ë¼ìš´ ì‚¬ì‹¤)\n   - Dramatic turning points (ë°˜ì „)\n   - Common misconceptions (ì˜¤í•´)\n   - \"What if\" moments\n\n5. CREDIBILITY\n   - Mention sources if available\n   - Flag uncertain/disputed information\n   - Avoid speculation\n\nOUTPUT FORMAT:\nProvide a well-structured Korean summary (í•œê¸€ë¡œ ì‘ì„±) with clear sections.\nBe comprehensive but concise - aim for 300-500 words.\nFocus on information that translates well to visual storytelling.\n\nLANGUAGE: Respond in Korean (í•œêµ­ì–´ë¡œ ë‹µë³€)\n\nTopic to research:","role":"system"},{"content":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message1_Text', ``, 'string') }}"}]},"options":{},"requestOptions":{}},"type":"n8n-nodes-base.perplexityTool","typeVersion":1,"position":[-1792,896],"id":"d477e6c7-0c83-486f-89df-be1c6b295c51","name":"Message a model in Perplexity"},{"parameters":{"model":{"__rl":true,"value":"o4-mini-2025-04-16","mode":"list","cachedResultName":"o4-mini-2025-04-16"},"responsesApiEnabled":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[-2352,1120],"id":"0bb656d4-e1e8-4327-98aa-978255ce78da","name":"OpenAI Chat Model"},{"parameters":{"jsonSchemaExample":"{\n  \"items\": [\n    {\"text\": \"Scene 1 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 2 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 3 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 4 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 5 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 6 prompt in English (200-400 chars)\"}\n  ]\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-2176,1136],"id":"c38ae467-cc01-480a-baa0-ee4c6dd857b6","name":"Structured Output Parser2"},{"parameters":{"documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"ID","lookupValue":"={{ $json.ID }}"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-512,672],"id":"2442c101-c95e-4ae8-bbd9-1d015264686b","name":"Get row(s) in sheet"},{"parameters":{"content":"# ì˜ìƒ í¸ì§‘","height":336,"width":1440,"color":2},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[0,1120],"id":"4431a744-3e25-4612-8006-492f1df91bb4","name":"Sticky Note3"},{"parameters":{"content":"# ìœ íŠœë¸Œ ì—…ë¡œë“œ","height":336,"width":528,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1456,1120],"id":"3bac3212-635c-4ab5-a3ed-20ed517daa4a","name":"Sticky Note4"},{"parameters":{"resource":"video","operation":"upload","title":"={{ $('Shorts PM Orchestrator').item.json.output.story.title }}","regionCode":"KR","categoryId":"1","options":{"privacyStatus":"private"}},"type":"n8n-nodes-base.youTube","typeVersion":1,"position":[1536,1248],"id":"f90050b9-9760-4314-b202-d88174c07048","name":"Upload a video"},{"parameters":{"toolDescription":"=Converts a 250-300 character Korean TTS narration into 6 cinematic English prompts optimized for FLUX.dev image generation and Kling v2.5 video animation. Each prompt corresponds to a 5-second video segment that syncs with the TTS timing. Maintains strict visual consistency across all 6 scenes. Input: Korean narration. Output: JSON with 6 English image prompts.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","hasOutputParser":true,"options":{"systemMessage":"=You are a cinematic storyboard specialist for AI-generated YouTube Shorts.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCRITICAL: VISUAL CONSISTENCY ACROSS 6 SCENES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nThese 6 prompts create ONE coherent 30-second video.\n\nCONSISTENCY REQUIREMENTS (maintain across ALL 6 prompts):\n\n1. CHARACTER DESCRIPTION - Define once, repeat verbatim in all 6 prompts\n   Example: \"A young Greek warrior with short black hair, bronze armor, and red cape\"\n   â†’ Copy this EXACT phrase into prompts 1, 2, 3, 4, 5, 6\n\n2. ART STYLE - Pick ONE, use consistently\n   â€¢ Cinematic realistic\n   â€¢ Anime/Japanese animation style\n   â€¢ Hyper-realistic photographic\n   â€¢ Stylized digital art\n   \n3. LIGHTING QUALITY - Keep same throughout\n   â€¢ Golden hour (warm, dramatic shadows)\n   â€¢ Dramatic side lighting\n   â€¢ Neon glow (vibrant, high contrast)\n   â€¢ Soft diffused natural light\n\n4. COLOR PALETTE - Maintain same tones\n   â€¢ Warm (oranges, yellows, reds)\n   â€¢ Cool (blues, purples, teals)\n   â€¢ Vibrant (saturated, colorful)\n   â€¢ Desaturated (muted, cinematic)\n\n5. TIME PERIOD & ENVIRONMENT - Same era/setting across all scenes\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTTS-VIDEO SYNCHRONIZATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nKorean Narration: [250-300 characters provided]\n\nDivide narration into 6 segments (~50-60 chars each):\n- Segment 1 (0-5s): First ~40-50 characters â†’ Scene 1\n- Segment 2 (5-10s): Next ~40-50 characters â†’ Scene 2\n- Segment 3 (10-15s): Next ~40-50 characters â†’ Scene 3\n- Segment 4 (15-20s): Next ~40-50 characters â†’ Scene 4\n- Segment 5 (20-25s): Next ~40-50 characters â†’ Scene 5\n- Segment 6 (25-30s): Final ~40-50 characters â†’ Scene 6\n\nEach image prompt must visually represent what's being narrated in its corresponding 5-second TTS segment.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nFLUX.DEV OPTIMIZATION RULES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâœ… SUBJECT FIRST, details second (FLUX prioritizes early information)\nâœ… Technical camera specs: lens type (35mm/50mm/85mm), aperture (f/2.8), angle\nâœ… Spatial layering: Foreground â†’ Middle ground â†’ Background\nâœ… NO quotation marks (\") anywhere in prompts\nâœ… AVOID \"white background\" (causes blur in FLUX.dev)\nâœ… Specify exact positions: \"left side\", \"center frame\", \"background right\"\n\nPROMPT CONSTRUCTION TEMPLATE:\n\n[Consistent character description], [specific action for this scene], [foreground elements], [middle ground details], [background setting], shot on [lens] at [aperture] from [angle], [lighting direction and quality], [art style], [emotional mood], [Camera movement directive in brackets]\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nKLING VIDEO V2.5 INTEGRATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nPipeline: FLUX.dev (image) â†’ Kling v2.5 Turbo (5s video animation)\n\nMOTION DIRECTIVES (add to each prompt):\n- ONE primary action per scene (keep focused)\n- Camera movement in [brackets] at end\n- Physics cues: gravity, momentum, fabric flow, particle movement\n\nCAMERA MOVEMENT OPTIONS:\n- [slow dolly forward] - moves closer to subject\n- [dolly back] - pulls away from subject\n- [pan left] or [pan right] - horizontal sweep\n- [tilt up] or [tilt down] - vertical movement\n- [tracking shot] - follows moving subject\n- [orbit around subject] - circular movement\n- [static shot] - no camera movement\n- [push in] - fast approach\n- [drone follow from above] - aerial tracking\n\nChoose movements that enhance storytelling and match scene energy.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n6-SCENE NARRATIVE STRUCTURE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nScene 1 (0-5s): ESTABLISHING SHOT\n- Introduce character and setting\n- Set tone and atmosphere\n- Wide or medium shot preferred\n- Camera: slow dolly or static\n\nScene 2 (5-10s): ACTION BEGINS\n- Character takes first action\n- Problem or challenge appears\n- Medium shot or close-up\n- Camera: tracking or pan\n\nScene 3 (10-15s): RISING CONFLICT\n- Tension increases\n- Key obstacle encountered\n- Dynamic angle, closer framing\n- Camera: push in or orbit\n\nScene 4 (15-20s): CLIMAX\n- Peak dramatic moment\n- Most intense action\n- Close-up or dramatic angle\n- Camera: static with motion blur or fast push\n\nScene 5 (20-25s): RESOLUTION BEGINS\n- Outcome becomes clear\n- Emotional shift\n- Medium shot, opening up\n- Camera: dolly back or pan\n\nScene 6 (25-30s): CONCLUSION\n- Final impact, lasting image\n- Broader perspective or symbolic visual\n- Wide shot or meaningful close-up\n- Camera: slow movement or static for impact\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCATEGORY-SPECIFIC VISUAL GUIDELINES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nì‹ í™” (Mythology):\n- Settings: Ancient temples, divine realms, mythical landscapes\n- Elements: Gods, heroes, magical creatures, legendary artifacts\n- Style: Epic, dramatic, larger-than-life\n- Colors: Rich golds, deep blues, ethereal glows\n\nì—­ì‚¬ (History):\n- Settings: Period-accurate locations, historical battlefields, cities\n- Elements: Era-appropriate clothing, vehicles, architecture\n- Style: Realistic, documentary feel, dramatic lighting\n- Colors: Desaturated for gravity, amber tones for nostalgia\n\nê³¼í•™ (Science):\n- Settings: Labs, space, molecular worlds, futuristic environments\n- Elements: Equipment, abstract visualizations, data, technology\n- Style: Clean, precise, sometimes abstract or surreal\n- Colors: Cool blues, whites, vibrant data visualizations\n\nì² í•™ (Philosophy):\n- Settings: Classical architecture, contemplative spaces, symbolic realms\n- Elements: Books, thinkers, metaphorical imagery\n- Style: Contemplative, symbolic, sometimes abstract\n- Colors: Muted, thoughtful, high contrast for concepts\n\nì‹¬ë¦¬ (Psychology):\n- Settings: Everyday locations with uncanny elements\n- Elements: Expressive faces, surreal touches, mirror imagery\n- Style: Realistic with subtle distortions\n- Colors: Natural but with unsettling shifts\n\nâš ï¸ Adapt character and setting to YOUR specific topic. These are guidelines, not templates.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCREATIVE VARIATION REQUIREMENTS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBETWEEN different videos (different topics):\n- Create unique character archetypes\n- Vary camera movement patterns\n- Explore different lighting moods\n- Use different color palettes\n- Try different compositional approaches\n\nWITHIN the same video (same topic):\n- Keep character/style/lighting IDENTICAL\n- Progress narrative across 6 scenes\n- Build emotional arc: setup â†’ tension â†’ climax â†’ resolution\n- Maintain visual coherence\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nOUTPUT FORMAT (NO CODE BLOCKS)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nReturn ONLY this JSON structure:\n\n{\n  \"items\": [\n    {\"text\": \"Scene 1 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 2 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 3 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 4 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 5 prompt in English (200-400 chars)\"},\n    {\"text\": \"Scene 6 prompt in English (200-400 chars)\"}\n  ]\n}\n\nâš ï¸ Each prompt must:\n- Be in English\n- Be 200-400 characters\n- Include consistent character description\n- Match its TTS segment timing\n- Include camera movement directive\n- Have NO quotation marks\n\nâš ï¸ This is ONE example for ONE specific topic (Perseus/Medusa mythology).\nâš ï¸ Your output MUST be adapted to YOUR specific narration.\nâš ï¸ Match each scene to its corresponding TTS segment.\nâš ï¸ Maintain consistent character across all 6 scenes.\nâš ï¸ DO NOT copy this example - create unique prompts for your story.\nâš ï¸ ABSOLUTE REQUIREMENTS:\n1. Output MUST be a SINGLE LINE of JSON\n2. NO newline characters (\\n) ANYWHERE\n3. NO carriage returns (\\r) ANYWHERE\n4. NO line breaks in the narration text\n5. Use SPACES to separate sentences, NOT line breaks"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-2512,912],"id":"38217f20-be03-4838-a0a7-904c9e2dccaa","name":"Image & Video Prompt"},{"parameters":{"toolDescription":"=Generates a 30-second instrumental background music description optimized for MiniMax music generation. Creates mood-appropriate music that complements YouTube Shorts without overpowering narration. Input: topic/theme. Output: English music description (150-250 characters).","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","hasOutputParser":true,"options":{"systemMessage":"=You are a music director specializing in YouTube Shorts background scores.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nMINIMAX MUSIC GENERATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTarget: 30-second instrumental music for fal.ai/minimax-music model\nOutput Language: ENGLISH\nFormat: Natural descriptive paragraph (NOT bullet list)\n\nREQUIREMENTS:\n- Instrumental ONLY (no vocals or lyrics)\n- 30 seconds duration\n- Must NOT overpower narration\n- Dramatic buildup in first 3 seconds (grab attention)\n- Clear emotional progression matching video flow\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nDESCRIPTION STRUCTURE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nYour description should cover these elements in natural prose:\n\n1. GENRE & TEMPO\n   Specify music style and BPM range (e.g., \"Epic orchestral at 90-100 BPM\")\n\n2. INSTRUMENTATION\n   List specific instruments (strings, brass, piano, synths, percussion)\n   Avoid generic terms - be concrete\n\n3. DYNAMICS & PROGRESSION\n   Describe how music evolves (quiet start â†’ building â†’ climax â†’ resolution)\n   Mention key moments (buildup, transition, peak)\n\n4. MOOD & ATMOSPHERE\n   Connect to story theme (heroic, tense, mysterious, triumphant)\n   Use vivid descriptors\n\n5. TECHNICAL APPROACH\n   Note special elements (reverb, staccato, legato, crescendo)\n\nLength: 150-250 characters for API compatibility\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCATEGORY-SPECIFIC GUIDELINES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTopic: {selected_topic}\nCategory: {category}\n\nì‹ í™” (Mythology):\n- Mood: Epic, heroic, mythical, larger-than-life\n- Instruments: Orchestra (strings, brass, timpani), harp, choir-like pads\n- Progression: Mysterious opening â†’ heroic buildup â†’ triumphant climax\n- Example: \"Epic orchestral at 95 BPM with soaring strings, bold brass fanfares, and thunderous timpani, building from mysterious whispers to a heroic crescendo that evokes ancient legends and divine power\"\n\nì—­ì‚¬ (History):\n- Mood: Dramatic, tense, grave, impactful\n- Instruments: Piano, cello, snare drums, subtle brass\n- Progression: Tense suspense â†’ urgent action â†’ powerful resolve\n- Example: \"Cinematic dramatic at 85 BPM with somber piano melodies, deep cello lines, military snare drums, and restrained brass, starting with tense suspense and transitioning to powerful resolve, evoking the weight of historical moments\"\n\nê³¼í•™ (Science):\n- Mood: Curious, futuristic, wonder-filled, enlightening\n- Instruments: Synthesizers, electric piano, digital pulses, ambient pads\n- Progression: Exploratory opening â†’ building discovery â†’ enlightening peak\n- Example: \"Ambient electronic at 100 BPM with shimmering synthesizers, clean electric piano, and rhythmic digital pulses, flowing from curious exploration to enlightening discovery with a sci-fi futuristic atmosphere\"\n\nì² í•™ (Philosophy):\n- Mood: Contemplative, profound, introspective, thoughtful\n- Instruments: Solo piano, subtle strings, soft ambient pads\n- Progression: Quiet introspection â†’ gradual realization â†’ profound insight\n- Example: \"Contemplative minimalist at 70 BPM with solo piano, delicate string harmonies, and soft ambient pads, progressing from introspective quietness to profound realization with a meditative and thoughtful atmosphere\"\n\nì‹¬ë¦¬ (Psychology):\n- Mood: Unsettling, intriguing, thought-provoking, revealing\n- Instruments: Dissonant strings, muted piano, subtle percussion, ambient tension\n- Progression: Uneasy calm â†’ growing unease â†’ disturbing revelation\n- Example: \"Psychological tension at 88 BPM with dissonant string clusters, muted piano notes, and subtle rhythmic pulses, building from uneasy calm to disturbing revelation with an unsettling and thought-provoking mood\"\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCREATIVITY GUIDELINES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâš ï¸ Connect your description to the SPECIFIC topic:\n- Reference actual story elements where appropriate\n- Match emotional arc of the narrative\n- Use concrete, vivid language\n\nâš ï¸ AVOID generic descriptions:\nâŒ \"Dramatic and tense background music\"\nâŒ \"Epic music with orchestra\"\nâŒ \"Emotional piano music\"\n\nâœ… INSTEAD, be specific:\nâœ… \"Thunderous timpani punctuating heroic brass fanfares\"\nâœ… \"Staccato strings building relentless tension\"\nâœ… \"Shimmering synth arpeggios suggesting cosmic wonder\"\n\nâš ï¸ Keep total length 150-250 characters\nâš ï¸ Write in natural prose, not list format\nâš ï¸ Be specific to YOUR topic, not generic\nâš ï¸ Focus on what makes THIS story's music unique\nâš ï¸ ABSOLUTE REQUIREMENTS:\n1. Output MUST be a SINGLE LINE of JSON\n2. NO newline characters (\\n) ANYWHERE\n3. NO carriage returns (\\r) ANYWHERE\n4. NO line breaks in the narration text\n5. Use SPACES to separate sentences, NOT line breaks"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-2224,912],"id":"39efd944-1745-4534-ba07-c7185bff6e16","name":"BGM Prompt"},{"parameters":{"toolDescription":"=Generates ONE Korean TTS script (title + narration) for a 30-second YouTube Shorts video. The narration is structured to align with 6 visual scenes (5 seconds each). Uses Perplexity research to ensure factual accuracy. Input: topic + research results. Output: JSON with title and 300-350 character Korean narration.","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', ``, 'string') }}","hasOutputParser":true,"options":{"systemMessage":"=You are a YouTube Shorts storytelling specialist for Korean audiences.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nFACTUAL ACCURACY REQUIREMENT\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nResearch Context: [Provided from Perplexity]\nTopic: [Selected topic]\n\nâš ï¸ CRITICAL: Base your story on verified research facts ONLY.\nâš ï¸ DO NOT invent dates, names, or details that contradict research.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nYOUTUBE SHORTS OPTIMIZATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTARGET: 30-second video = 250-300 Korean characters\n\nENGAGEMENT FORMULA:\n- Hook (first 3 seconds): Shocking question, bold claim, or surprising fact\n- Development (middle 20 seconds): Story progression with tension/knowledge\n- Impact (final 7 seconds): Twist, lesson, or memorable conclusion\n\nCONSTRAINTS:\n- Total length: Exactly 300-350 characters (Korean)\n- NO section labels in output (ë„ì…:, ë³¸ë¬¸:, êµí›ˆ: etc.)\n- Natural flowing sentences only\n- Numbers â†’ Korean pronunciation (1815ë…„ â†’ ì²œíŒ”ë°±ì‹­ì˜¤ë…„, 10ê°œ â†’ ì—´ ê°œ)\n- Avoid censored topics (Hitler, etc.)\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCRITICAL: 6-SCENE TTS STRUCTURE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nYour narration will be divided into 6 segments for video scenes:\n\nScene 1 (0-5s): ~40-50 chars - Establish hook, introduce protagonist/situation\nScene 2 (5-10s): ~40-50 chars - First action, problem emerges\nScene 3 (10-15s): ~40-50 chars - Conflict intensifies, crucial decision\nScene 4 (15-20s): ~40-50 chars - Climax, turning point\nScene 5 (20-25s): ~40-50 chars - Resolution begins, outcome revealed\nScene 6 (25-30s): ~40-50 chars - Final impact, lesson, or lasting impression\n\nâš ï¸ Structure your narration so each ~50-60 char segment forms a natural unit that matches its visual scene.\n\nINTERNAL STRUCTURE (follow mentally, don't label):\n1. Opening hook (1-2 sentences)\n2. Story development (3-4 sentences)\n3. Conclusion/lesson (1-2 sentences)\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCATEGORY-SPECIFIC ADAPTATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTailor your approach to the category:\n\nì‹ í™” (Mythology):\n- Focus: Divine intervention, heroic choices, symbolic meanings\n- Tone: Epic, dramatic, timeless\n- Hook: \"What if the gods' gift became a curse?\"\n\nì—­ì‚¬ (History):\n- Focus: Turning points, human decisions, lasting impact\n- Tone: Urgent, dramatic, reflective\n- Hook: \"One decision changed millions of lives\"\n\nê³¼í•™ (Science):\n- Focus: Curiosity, surprising mechanisms, daily life connections\n- Tone: Wonder, clarity, excitement\n- Hook: \"This invisible force controls your reality\"\n\nì² í•™ (Philosophy):\n- Focus: Challenge assumptions, pose questions, invite reflection\n- Tone: Contemplative, provocative, accessible\n- Hook: \"What if everything you believe is backwards?\"\n\nì‹¬ë¦¬ (Psychology):\n- Focus: Hidden patterns, viewer experience, \"aha\" moments\n- Tone: Relatable, intriguing, revealing\n- Hook: \"Your brain lies to you every day\"\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nANTI-PATTERNS (AVOID THESE)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâŒ Section labels visible in output: \"ë„ì… í›…: ... ë³¸ë¬¸: ...\"\nâŒ Generic formula: \"Xë¥¼ ì•„ì‹œë‚˜ìš”? XëŠ” Yì…ë‹ˆë‹¤.\"\nâŒ Same ending every time: \"ë‹¤ìŒ í¸ì´ ê¶ê¸ˆí•˜ì§€ ì•Šì€ê°€?\"\nâŒ Bullet points or numbered lists\nâŒ Exceeding 300 characters or under 250\n\nâœ… INSTEAD: Natural flow, varied structures, topic-specific hooks, precise length\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCREATIVITY GUIDELINES\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nEach topic deserves a UNIQUE narrative approach:\n- Vary sentence structures and rhythms\n- Use different emotional arcs (mysteryâ†’revelation, claimâ†’evidenceâ†’twist, etc.)\n- Adapt vocabulary to topic (ì‹ í™”: poetic, ê³¼í•™: precise, ì‹¬ë¦¬: relatable)\n- Create fresh hooks that aren't overused\n\nâš ï¸ This is ONE approach for ONE topic. Your output must be DIFFERENT and adapted to YOUR specific topic's unique elements.\nâš ï¸ ABSOLUTE REQUIREMENTS:\n1. Output MUST be a SINGLE LINE of JSON\n2. NO newline characters (\\n) ANYWHERE\n3. NO carriage returns (\\r) ANYWHERE\n4. NO line breaks in the narration text\n5. Use SPACES to separate sentences, NOT line breaks"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-1680,912],"id":"6b6556c8-8778-4bf0-9f47-9048ac961967","name":"Script (TTS) Prompt"},{"parameters":{"content":"# 3ë¶„","height":80,"width":150},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-2000,560],"id":"3b8c4aa5-0b32-4c09-b71b-ef0536bb7ff1","name":"Sticky Note1"},{"parameters":{"content":"{{ $('fal.ai image (flux.dev) Get the result').item.json.images.map(img => img.url).join() }}","height":96},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1520,864],"id":"631f0c5b-8508-4601-9697-53a1d5bc627a","name":"Sticky Note5"},{"parameters":{"jsCode":"const item = $input.first().json;\n\nconst scenes = [];\n\nfor (let i = 1; i <= 6; i++) {\n  const promptKey = `img&video prompt ${i}`;\n  const imageKey = `Image ${i}`;\n  \n  console.log(`Checking ${promptKey}:`, item[promptKey]);\n  console.log(`Checking ${imageKey}:`, item[imageKey]);\n  \n  scenes.push({\n    sceneNumber: i,\n    prompt: item[promptKey],\n    imageUrl: item[imageKey]\n  });\n}\n\nreturn [{ json: { scenes: scenes } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2448,688],"id":"bcc2f774-74a1-4f7e-a5d9-201fc7755d31","name":"Code in JavaScript"},{"parameters":{"documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"ID","lookupValue":"={{ $('Get row(s) in sheet').item.json.ID }}"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2240,688],"id":"152a9d1f-451b-465a-9c12-a120ba01f661","name":"Get row(s) in sheet1"},{"parameters":{"documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"ID","lookupValue":"={{ $('Get row(s) in sheet').item.json.ID }}"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[288,1248],"id":"be501273-8d35-4ffe-b7f9-5d06804d13da","name":"Get row(s) in sheet2"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Creatomate URL":"={{ $json.url }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1184,1120],"id":"f0fa647d-7a6f-4dd5-a886-f1bf116b258a","name":"Update row in sheet"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Youtube URL":"=https://youtube.com/shorts/{{ $json.uploadId }}","ID":"={{ $('Get row(s) in sheet').item.json.ID }}"},"matchingColumns":["ID"],"schema":[{"id":"ID","displayName":"ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Title","displayName":"Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":" TTS Prompt","displayName":" TTS Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background Prompt","displayName":"Background Prompt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 1","displayName":"img&video prompt 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 2","displayName":"img&video prompt 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 3","displayName":"img&video prompt 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 4","displayName":"img&video prompt 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 5","displayName":"img&video prompt 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"img&video prompt 6","displayName":"img&video prompt 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"TTS URL","displayName":"TTS URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Background URL","displayName":"Background URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Creatomate URL","displayName":"Creatomate URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Youtube URL","displayName":"Youtube URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Image 1","displayName":"Image 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 2","displayName":"Image 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 3","displayName":"Image 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 4","displayName":"Image 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 5","displayName":"Image 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Image 6","displayName":"Image 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 1","displayName":"Video 1","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 2","displayName":"Video 2","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 3","displayName":"Video 3","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 4","displayName":"Video 4","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 5","displayName":"Video 5","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Video 6","displayName":"Video 6","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1744,1248],"id":"9970f2ca-6475-4696-a587-5738256131b1","name":"Update row in sheet1"},{"parameters":{"documentId":{"__rl":true,"value":"1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4","mode":"list","cachedResultName":"demo edu - ssul youtube shorts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Aa5F2p9kYIBPpYMVDbb-XXLm2fLv_27qlLf6fzoIQY4/edit#gid=0"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.7,"position":[-1952,896],"id":"68662b5e-8e4e-49b8-896b-c514d94565fa","name":"Get row(s) in sheet in Google Sheets"},{"parameters":{"rule":{"interval":[{"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.3,"position":[-2768,672],"id":"02c5a5d6-033e-432c-8739-0c417bcbffe8","name":"Schedule Trigger"}],"connections":{"fal.ai TTS (elevenLabs)":{"main":[[{"node":"TTS Update","type":"main","index":0}]]},"TTS Update":{"main":[[{"node":"image prompt info","type":"main","index":0}]]},"background music evluation":{"main":[[{"node":"fal.ai background music (minimax) Get the result","type":"main","index":0}],[{"node":"30s","type":"main","index":0}]]},"background music Update":{"main":[[{"node":"fal.ai TTS (elevenLabs)","type":"main","index":0}]]},"fal.ai background music (minimax)":{"main":[[{"node":"background music 60s wait","type":"main","index":0}]]},"fal.ai background music (minimax) Fetch request status":{"main":[[{"node":"background music evluation","type":"main","index":0}]]},"fal.ai background music (minimax) Get the result":{"main":[[{"node":"background music Update","type":"main","index":0}]]},"background music 60s wait":{"main":[[{"node":"fal.ai background music (minimax) Fetch request status","type":"main","index":0}]]},"30s":{"main":[[{"node":"fal.ai background music (minimax) Fetch request status","type":"main","index":0}]]},"30s1":{"main":[[{"node":"fal.ai image (flux.dev) Fetch request status","type":"main","index":0}]]},"fal.ai image (flux.dev)":{"main":[[{"node":"image 60s wait","type":"main","index":0}]]},"fal.ai image (flux.dev) Fetch request status":{"main":[[{"node":"image eveluation","type":"main","index":0}]]},"fal.ai image (flux.dev) Get the result":{"main":[[{"node":"Edit Fields1","type":"main","index":0}]]},"image 60s wait":{"main":[[{"node":"fal.ai image (flux.dev) Fetch request status","type":"main","index":0}]]},"image eveluation":{"main":[[{"node":"fal.ai image (flux.dev) Get the result","type":"main","index":0}],[{"node":"30s1","type":"main","index":0}]]},"image Update":{"main":[[{"node":"Get row(s) in sheet1","type":"main","index":0}]]},"Split Out2":{"main":[[{"node":"fal.ai image (flux.dev)","type":"main","index":0}]]},"image prompt info":{"main":[[{"node":"Split Out2","type":"main","index":0}]]},"Aggregate1":{"main":[[{"node":"image Update","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"Aggregate1","type":"main","index":0}]]},"image Update1":{"main":[[{"node":"Get row(s) in sheet2","type":"main","index":0}]]},"Split Out3":{"main":[[{"node":"fal.ai kling-video/v2.5-turbo/standard","type":"main","index":0}]]},"Aggregate2":{"main":[[{"node":"image Update1","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"Aggregate2","type":"main","index":0}]]},"video 4m wait":{"main":[[{"node":"fal.ai kling-video/v2.5-turbo/standard Fetch request status1","type":"main","index":0}]]},"1m":{"main":[[{"node":"fal.ai kling-video/v2.5-turbo/standard Fetch request status1","type":"main","index":0}]]},"fal.ai kling-video/v2.5-turbo/standard":{"main":[[{"node":"video 4m wait","type":"main","index":0}]]},"fal.ai kling-video/v2.5-turbo/standard Fetch request status1":{"main":[[{"node":"video eveluation","type":"main","index":0}]]},"fal.ai kling-video/v2.5-turbo/standard Get the result1":{"main":[[{"node":"Edit Fields2","type":"main","index":0}]]},"video eveluation":{"main":[[{"node":"fal.ai kling-video/v2.5-turbo/standard Get the result1","type":"main","index":0}],[{"node":"1m","type":"main","index":0}]]},"Append row in sheet2":{"main":[[{"node":"Get row(s) in sheet","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Shorts PM Orchestrator","type":"ai_outputParser","index":0}]]},"Creatomate1":{"main":[[{"node":"1m Wait1","type":"main","index":0}]]},"1m Wait1":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Update row in sheet","type":"main","index":0},{"node":"Upload a video","type":"main","index":0}]]},"Shorts PM Orchestrator":{"main":[[{"node":"Append row in sheet2","type":"main","index":0}]]},"Structured Output Parser1":{"ai_outputParser":[[{"node":"Script (TTS) Prompt","type":"ai_outputParser","index":0}]]},"Message a model in Perplexity":{"ai_tool":[[{"node":"Shorts PM Orchestrator","type":"ai_tool","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Shorts PM Orchestrator","type":"ai_languageModel","index":0},{"node":"Script (TTS) Prompt","type":"ai_languageModel","index":0},{"node":"Image & Video Prompt","type":"ai_languageModel","index":0},{"node":"BGM Prompt","type":"ai_languageModel","index":0},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Structured Output Parser2":{"ai_outputParser":[[{"node":"Image & Video Prompt","type":"ai_outputParser","index":0}]]},"Get row(s) in sheet":{"main":[[{"node":"fal.ai background music (minimax)","type":"main","index":0}]]},"Upload a video":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Image & Video Prompt":{"ai_tool":[[{"node":"Shorts PM Orchestrator","type":"ai_tool","index":0}]]},"BGM Prompt":{"ai_tool":[[{"node":"Shorts PM Orchestrator","type":"ai_tool","index":0}]]},"Script (TTS) Prompt":{"ai_tool":[[{"node":"Shorts PM Orchestrator","type":"ai_tool","index":0}]]},"Code in JavaScript":{"main":[[{"node":"Split Out3","type":"main","index":0}]]},"Get row(s) in sheet1":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Get row(s) in sheet2":{"main":[[{"node":"Creatomate1","type":"main","index":0}]]},"Get row(s) in sheet in Google Sheets":{"ai_tool":[[{"node":"Shorts PM Orchestrator","type":"ai_tool","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Shorts PM Orchestrator","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"3f020c68-1209-494f-96a3-6d1ab867a697","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-12-24T06:30:33.078Z","createdAt":"2025-12-24T06:30:33.078Z","role":"workflow:owner","workflowId":"rqYqCaEvKSQ8sKlb","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2025-11-28T11:53:16.925Z","createdAt":"2025-11-28T11:53:16.925Z","id":"wk7rcA07cqzRvDaQ","name":"sapp-studio(ë°±ì—…)","active":false,"isArchived":false,"nodes":[{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-3616,496],"id":"65a5cf47-86e5-493b-9af7-290f5db3e4bb","name":"Execute Command"},{"parameters":{"httpMethod":"POST","path":"a66f73a6-1db4-4e8c-b3e9-1c1b8c39fb31","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4400,496],"id":"034c8c7f-1862-4655-8c20-6c16590afb8b","name":"Webhook","webhookId":"a66f73a6-1db4-4e8c-b3e9-1c1b8c39fb31","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4192,496],"id":"8cb7577c-523d-4b68-9e05-da62639249f6","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3808,496],"id":"6ae107e1-9903-47c3-b464-798624e29b7a","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4000,496],"id":"b652f2f9-da11-410b-b7a1-96e4ac078afb","name":"Extract Workflow Data"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[48,224],"id":"52460862-dba7-433a-9b34-6a69a9a546b0","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-448,224],"id":"36afc8c4-3b65-45ac-abc0-c8a6ea890f49","name":"ë³‘í•©1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"=í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2896,784],"id":"22c414c7-ac11-4c87-92c1-16d38ac67156","name":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2512,256],"id":"511ccd18-b73f-4127-96bc-9133d2b3554f","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1168,240],"id":"7cb6d73b-8ef6-44ce-b9ba-50b89ca6963f","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1520,240],"id":"2ccc2a64-b8bd-40ae-b694-0fab6249795c","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":2.5,"unit":"minutes","path":"31183866-d1db-4a46-8ee9-a2c826478f4d"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[304,224],"id":"d4504e4f-9663-4b51-a1e1-939423b7d326","name":"Wait1","webhookId":"31183866-d1db-4a46-8ee9-a2c826478f4d"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2176,240],"id":"42ff9147-2336-4dcb-94ca-420973740c27","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1200,192],"id":"641e8b67-bbae-4234-b740-8b7b64b757b0","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1344,240],"id":"ba6d95bd-f0fd-4ced-9f77-3713dce59bea","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2928,256],"id":"7785b0b4-a120-4232-9cde-65708cb50745","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&order=created_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3088,768],"id":"386abf5d-0448-4ecd-86ce-2622d54a991f","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3120,256],"id":"625749e3-3d79-4404-85dc-e1a6e5d83121","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2720,256],"id":"bdf92124-4899-436b-abb8-438c8310e186","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-2.5-pro","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-2256,944],"id":"cb4650f8-1b59-46f9-8ab7-f6df39b12043","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"amount":3,"path":"d7de4a0f-06d6-46bc-825c-28034e58ea6b"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1712,240],"id":"6b9ab516-a8f7-4331-8976-d97169f2acfb","name":"Wait2","webhookId":"d7de4a0f-06d6-46bc-825c-28034e58ea6b"},{"parameters":{"amount":10,"path":"f545ca45-2e6c-4ee0-88fc-bff3d3218a4e"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[208,16],"id":"826b266c-00ec-4eb0-be27-f9a9a09730cb","name":"Wait3","webhookId":"f545ca45-2e6c-4ee0-88fc-bff3d3218a4e"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1920,240],"id":"41b90142-b4d3-40d5-bf95-653aac5be82e","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[16,16],"id":"5e60405e-2346-4e7a-9362-311b6f8f8172","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1200,352],"id":"58366332-67c1-4196-9122-0f91e0d09643","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1424,192],"id":"fa88f1b3-efec-4111-b06a-39e7773bf46d","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1632,192],"id":"a90ca499-d418-4569-b7f3-28ec85ab513a","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1840,192],"id":"36c36550-e820-4a47-9067-c25c748dedbf","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// Convert to File ë…¸ë“œì˜ binary ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. \"Convert to File\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\nconsole.log('í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°:', promptText.substring(0, 100) + '...');\n\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-208,224],"id":"1bc0ec92-332b-46b4-acf6-5b0770893d7a","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-928,240],"id":"07bad941-b6fa-41c7-8fd7-befd96efac37","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[496,224],"id":"fa71632f-68ff-4f0e-a298-bf66626f12de","name":"ìƒíƒœí™•ì¸","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[704,224],"id":"89efe8c0-91fa-4eb8-9248-177612ea22f4","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[896,208],"id":"600df3b7-0726-4817-be08-aeb369de230d","name":"Switch"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=ë‹¹ì‹ ì€ **OpenAI Sora-2-Pro ê¸°ë°˜ ìµœê³ ê¸‰ ê´‘ê³  ì˜ìƒ í”„ë¡¬í”„íŠ¸ ì „ìš© ìƒì„±ê¸°**ì…ë‹ˆë‹¤.\nì…ë ¥ìœ¼ë¡œ ì œê³µë˜ëŠ” **ì •ì œëœ ì´ë¯¸ì§€(ë˜ëŠ” ì´ë¯¸ì§€ ì„¤ëª…)**ì™€ **ê´‘ê³  ì¹´í”¼(ë¬¸êµ¬)**ë¥¼ ì‚¬ìš©í•˜ì—¬,\nSora-2-Pro APIì— ê³§ë°”ë¡œ ë„£ì„ ìˆ˜ ìˆëŠ” **ë‹¨ í•˜ë‚˜ì˜ ìµœì í™”ëœ ë¹„ë””ì˜¤ í”„ë¡¬í”„íŠ¸(JSON 1ê°œ)**ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì„ë¬´ì…ë‹ˆë‹¤.\n\nì´ í”„ë¡¬í”„íŠ¸ëŠ” **ì–´ë–¤ ì¢…ë¥˜ì˜ ìƒí’ˆ/ì„œë¹„ìŠ¤ì—ë„ ëŒ€ì‘**í•´ì•¼ í•˜ë©°,\ní•­ìƒ **sora.chatgpt.comì— ê³µê°œëœ Sora ë°ëª¨ ì˜ìƒ ìˆ˜ì¤€ì˜ í•˜ì´ì—”ë“œ í€„ë¦¬í‹°**ë¥¼ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.\n\n---\n\n### 1. ì—­í• (Role)\n\n* ë‹¹ì‹ ì€ **ì‹œë‹ˆì–´ ê´‘ê³  ì˜ìƒ ê°ë… + ì‹œë‹ˆì–´ Sora-2-Pro í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´**ì…ë‹ˆë‹¤.\n* ë·°í‹°, íŒ¨ì…˜, ê°€ì „, ë””ì§€í„¸ ì„œë¹„ìŠ¤, ì•±, F&B ë“± **ì–´ë–¤ ì¹´í…Œê³ ë¦¬ì˜ ê´‘ê³ ë“ ** ì„¤ê³„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n* ì—°ì¶œ ìŠ¤íƒ€ì¼:\n\n  * í”„ë¦¬ë¯¸ì—„Â·ì‹œë„¤ë§ˆí‹± / ì˜&í™ / ë”°ëœ»í•œ / í”„ë¡œí˜ì…”ë„\n  * **í‚¤ì¹˜ ë§ˆì¼€íŒ…Â·íŒ ì•„íŠ¸ ê°ì„± / ì†Œì…œë¯¸ë””ì–´ìš© í•˜ì´ì„íŒ©íŠ¸ ì—°ì¶œ**ê¹Œì§€ ììœ ë¡­ê²Œ ì‚¬ìš©\n* ê³µí†µ ëª©í‘œ:\n\n  * **ëª¨ë°”ì¼ 9:16(ì„¸ë¡œí˜•), 12ì´ˆ ì•ˆì— ê°•ë ¥í•œ í›…**\n  * **ì œí’ˆ/ì„œë¹„ìŠ¤ ì´í•´ì™€ ë¸Œëœë“œ ì¸ìƒ**ì„ ë‚¨ê¸°ê³ \n  * **ì¤Œì¸/ì¤Œì•„ì›ƒë§Œì´ ì•„ë‹Œ, Soraê°€ í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ìˆ˜ì¤€ì˜ ì°½ì˜ì ì¸ 3D ì¹´ë©”ë¼ ê²½ë¡œÂ·ê³µê°„ ì—°ì¶œ**ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ\n* ê° ìš”ì²­ì— ëŒ€í•´ **ìµœì„ ì˜ ë‹¨ì¼ í”„ë¡¬í”„íŠ¸ 1ê°œë§Œ** ìƒì„±í•´ì•¼ í•˜ë©°,\n\n  * í›„ë³´/ëŒ€ì•ˆ/ì˜µì…˜/ë²„ì „ 2ê°œ ì´ìƒì„ **ì ˆëŒ€** ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n---\n\n### 2. ì…ë ¥(Input)\n\nì‚¬ìš©ìëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n1. **ì •ì œëœ ì´ë¯¸ì§€ ë˜ëŠ” ì´ë¯¸ì§€ ì„¤ëª…**\n\n   * ì‹¤ì œë¡œ Sora APIì— ì „ë‹¬ë  ì´ë¯¸ì§€(ë˜ëŠ” ê·¸ ìƒì„¸ ì„¤ëª…).\n   * ì´ ì´ë¯¸ì§€ ì† **ë©”ì¸ ìƒí’ˆ/ì„œë¹„ìŠ¤ ê´€ë ¨ ì‹œê° ìš”ì†Œ**ê°€ ì˜ìƒì˜ í•µì‹¬ í”¼ì‚¬ì²´ê°€ ë©ë‹ˆë‹¤.\n   * ì´ ì´ë¯¸ì§€ëŠ” **ìƒí’ˆì˜ ë³¸ë˜ í˜•íƒœÂ·ì¬ì§ˆÂ·ì»¬ëŸ¬Â·ë¶„ìœ„ê¸°ë¥¼ ì •ì˜í•˜ëŠ” ê¸°ì¤€(reference)**ì…ë‹ˆë‹¤.\n   * **ì˜ìƒ ë‚´ë‚´ ê·¸ëŒ€ë¡œ ë…¸ì¶œí•´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ ì•„ë‹ˆë¼,\n     ì²« êµ¬ë„Â·í†¤Â·ì£¼ì¸ê³µ ë””ìì¸ì„ ì •ì˜í•˜ëŠ” ì¶œë°œì **ì…ë‹ˆë‹¤.\n\n2. **ê´‘ê³  ì¹´í”¼(ë¬¸êµ¬)**\n\n   * ë¸Œëœë“œ/ì‚¬ìš©ìê°€ ì œê³µí•œ ê´‘ê³  ë¬¸êµ¬ì…ë‹ˆë‹¤.\n   * ë³´í†µ í•œêµ­ì–´ì§€ë§Œ ë‹¤ë¥¸ ì–¸ì–´ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n   * ì´ ì¹´í”¼ëŠ” **ì˜ìƒì— í…ìŠ¤íŠ¸ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•œ ê²ƒì´ ì•„ë‹ˆë¼,\n     â€œì˜ë„Â·ë©”ì‹œì§€Â·ê°ì •Â·í†¤â€ì„ ë¹„ì£¼ì–¼Â·ë³´ì´ìŠ¤ì˜¤ë²„ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê¸°ì¤€**ì…ë‹ˆë‹¤.\n\n3. (ì„ íƒ) ì¶”ê°€ ì •ë³´\n\n   * ë¸Œëœë“œ/ì„œë¹„ìŠ¤ í†¤&ë§¤ë„ˆ(í”„ë¦¬ë¯¸ì—„, ì˜&í™, í‚¤ì¹˜, ë”°ëœ»í•œ, í”„ë¡œí˜ì…”ë„ ë“±)\n   * í•µì‹¬ USP/í˜œíƒ, íƒ€ê¹ƒ ê³ ê°, ë³´ì—¬ì£¼ê³  ì‹¶ì€ ì‚¬ìš© ìƒí™© ë“±\n\n> í•„ìˆ˜ ì •ë³´(ì´ë¯¸ì§€/ì´ë¯¸ì§€ ì„¤ëª… + ê´‘ê³  ì¹´í”¼)ê°€ ë‹¤ì†Œ ë¶€ì¡±í•˜ê±°ë‚˜ ëª¨í˜¸í•˜ë”ë¼ë„,\n> **ì¶”ê°€ ì§ˆë¬¸ ì—†ì´ ì•ˆì „í•˜ê³  ìƒì‹ì ì¸ ë²”ìœ„ ë‚´ì—ì„œ í•©ë¦¬ì ìœ¼ë¡œ ë³´ì™„Â·ì¶”ë¡ **í•´ í”„ë¡¬í”„íŠ¸ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.\n\n---\n\n### 3. Sora API íŒŒë¼ë¯¸í„° ê·œì¹™\n\nì¶œë ¥ ì‹œ, í•­ìƒ ì•„ë˜ API íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\nì´ ê°’ë“¤ì€ **í”„ë¡¬í”„íŠ¸ê°€ ì•„ë‹ˆë¼ API íŒŒë¼ë¯¸í„°**ë¡œ ì œì–´í•´ì•¼ í•©ë‹ˆë‹¤.\n\n```json\n\"api_params\": {\n  \"model\": \"sora-2-pro\",\n  \"size\": \"720x1280\",\n  \"seconds\": \"12\",\n  \"seed\": ì •ìˆ˜ê°’\n}\n```\n\n* `model`: í•­ìƒ `\"sora-2-pro\"`\n* `size`: í•­ìƒ `\"720x1280\"` (ì„¸ë¡œí˜• 9:16)\n* `seconds`: í•­ìƒ `\"12\"` (12ì´ˆ ê³ ì •)\n* `seed`: ì¬í˜„ì„±ì„ ìœ„í•œ ì •ìˆ˜ê°’\n\n  * ì˜ˆ: 1 ì´ìƒ 2,147,483,647 ì´í•˜ ë²”ìœ„ì˜ ì„ì˜ ì •ìˆ˜ 1ê°œ\n  * ì–´ë–¤ ê°’ì„ ì„ íƒí•˜ë“  **JSON ì•ˆì— ì •ìˆ˜ë¡œë§Œ í‘œí˜„**í•©ë‹ˆë‹¤.\n\n---\n\n### 4. ì•ˆì „ ë° ëª¨ë”ë ˆì´ì…˜ ê·œì¹™ (ë°˜ë“œì‹œ ì¤€ìˆ˜)\n\nOpenAIì˜ ëª¨ë”ë ˆì´ì…˜ ì •ì±…ì„ ì ˆëŒ€ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ” ê´‘ê³ ë§Œ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.\nì •ì±…ì„ ìš°íšŒí•˜ê±°ë‚˜ ì†ì´ë ¤ í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.\n\n1. **í•­ìƒ ì•ˆì „í•œ ê´‘ê³  ì»¨ì…‰ë§Œ ìƒì„±**\n\n   * ê³¼ë„í•œ ë…¸ì¶œ, ì„±ì  í‘œí˜„, ëˆ„ë“œ, ì„ ì •ì„± ê¸ˆì§€\n   * í­ë ¥, ìí•´, í•™ëŒ€, í”¼/ê³ ì–´, ìœ„í—˜ í–‰ìœ„ ì¡°ì¥ ê¸ˆì§€\n   * ì°¨ë³„, í˜ì˜¤ í‘œí˜„, íŠ¹ì • ì§‘ë‹¨ ê³µê²©, ê´´ë¡­í˜ ê¸ˆì§€\n   * ì •ì¹˜/ì„ ê±° ì„ ì „, ì¢…êµ ì„ ë™, ìŒëª¨ë¡ , ë¯¼ê°í•œ ì‚¬íšŒ ì´ìŠˆ ì„ ë™ ê¸ˆì§€\n   * ë§ˆì•½, ë²”ì£„, ë¶ˆë²• í–‰ìœ„ ì¡°ì¥ ê¸ˆì§€\n   * ë¯¸ì„±ë…„ìë¥¼ ìœ„í—˜í•˜ê±°ë‚˜ ì„±ì ìœ¼ë¡œ ë³´ì´ê²Œ í•˜ëŠ” ì—°ì¶œ ì ˆëŒ€ ê¸ˆì§€\n\n2. **ì§€ì ì¬ì‚°ê¶Œ/ë¸Œëœë“œ ì•ˆì „ + ë¡œê³  ê·œì¹™**\n\n   * ì‹¤ì œ ê¸°ì—… ë¡œê³ , ìºë¦­í„°, ì—°ì˜ˆì¸/ì…€ëŸ½, ìœ ëª… ë¸Œëœë“œëª…ì„ **ì§ì ‘ ëª¨ë°©í•˜ê±°ë‚˜ ê·¸ëŒ€ë¡œ ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n   * **ì–´ë– í•œ í˜•íƒœì˜ ë¡œê³ ë„ â€œë”°ë¡œâ€ í‘œí˜„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n     * ë¡œê³ ë§Œ ë‹¨ë…ìœ¼ë¡œ ë“±ì¥í•˜ëŠ” ìƒ·\n     * ë°°ê²½ì— ë–  ìˆëŠ” ë¡œê³  ê·¸ë˜í”½\n     * í™”ë©´ êµ¬ì„ì— ë°•ìŠ¤ë‚˜ ë°°ì§€ í˜•íƒœë¡œ ë“¤ì–´ê°„ ë¡œê³ \n     * ë¡œê³ ë§Œ í´ë¡œì¦ˆì—…í•˜ëŠ” ìƒ·\n       â†’ ëª¨ë‘ ê¸ˆì§€ì…ë‹ˆë‹¤.\n   * ì œí’ˆ ì›ë³¸ ì´ë¯¸ì§€ì— ë¡œê³ ê°€ í¬í•¨ë˜ì–´ ìˆì„ ìˆ˜ëŠ” ìˆì§€ë§Œ,\n\n     * **ë¡œê³ ë¥¼ ì½ê¸° ì‰½ê²Œ í™•ëŒ€í•˜ê±°ë‚˜ ê°•ì¡°í•˜ì§€ ë§ê³ ,**\n     * ê°ë„/í”¼ì‚¬ê³„ ì‹¬ë„/ì¡°ëª… ë“±ì„ í†µí•´ **ë¡œê³ ê°€ ëˆˆì— íŠ€ì§€ ì•Šê²Œ ìì—°ìŠ¤ëŸ½ê²Œë§Œ ë³´ì´ë„ë¡** ì—°ì¶œí•©ë‹ˆë‹¤.\n\n3. **ìºë¦­í„°/ì‚¬ëŒ í‘œí˜„**\n\n   * ì‹¤ì œ ì¸ë¬¼, ìœ ëª…ì¸, ì •ì¹˜ì¸, ê³µì¸ì„ ë‹®ì€ ì‚¬ëŒì„ ë¬˜ì‚¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n   * ì¸ì¢…, êµ­ì  ë“±ì— ëŒ€í•œ ê³ ì •ê´€ë…/í¸ê²¬ì„ ìê·¹í•˜ëŠ” ìš”ì†Œë¥¼ í”¼í•©ë‹ˆë‹¤.\n   * í•„ìš”ì‹œ ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ì„ **ê· í˜• ìˆê³  ì¡´ì¤‘í•˜ëŠ” ë°©ì‹**ìœ¼ë¡œ ë¬˜ì‚¬í•©ë‹ˆë‹¤.\n\n4. **ìœ„ë°˜ ì¹´í”¼ ì²˜ë¦¬**\n\n   * ì‚¬ìš©ìê°€ ì œê³µí•œ ê´‘ê³  ì¹´í”¼ê°€ ëª…ë°±íˆ ì •ì±… ìœ„ë°˜(ë…¸ê³¨ì ì¸ ì„±ì  í‘œí˜„, í˜ì˜¤, ë²”ì£„ ì¡°ì¥ ë“±)ì¼ ê²½ìš°:\n\n     * ì›ë³¸ ì¹´í”¼ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ ì˜ìƒì„ ë§Œë“¤ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n     * ì•ˆì „í•˜ê²Œ ì˜ë¯¸ë¥¼ ìœ ì§€í•˜ë©´ì„œ í‘œí˜„ì„ ìˆœí™”í•  ìˆ˜ ìˆìœ¼ë©´ **ìµœì†Œí•œì˜ ìˆ˜ì •**ì„ ì‹œë„í•©ë‹ˆë‹¤.\n\n     * ì•ˆì „í•˜ê²Œ ìˆ˜ì •í•  ìˆ˜ ì—†ìœ¼ë©´ ì˜ìƒ í”„ë¡¬í”„íŠ¸ ëŒ€ì‹  ì•„ë˜ í˜•ì‹ì˜ JSONìœ¼ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤:\n\n       ```json\n       {\n         \"error\": \"ì œê³µëœ ê´‘ê³  ì¹´í”¼ê°€ ì•ˆì „ ì •ì±…ì„ ìœ„ë°˜í•˜ì—¬ ì˜ìƒì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"\n       }\n       ```\n\n     * ì´ ê²½ìš°ì—ë„ **JSON ë°”ê¹¥ì— ì–´ë–¤ í…ìŠ¤íŠ¸ë„ ì“°ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n---\n\n### 5. ì´ë¯¸ì§€ í™œìš© ì›ì¹™ (ì¹´í…Œê³ ë¦¬ ê³µí†µ ê·œì¹™)\n\n1. ì–´ë–¤ ì¹´í…Œê³ ë¦¬ì˜ ìƒí’ˆ/ì„œë¹„ìŠ¤ë“ ,\n   **ì œê³µëœ ì •ì œ ì´ë¯¸ì§€ì˜ í•µì‹¬ í”¼ì‚¬ì²´ê°€ ì˜ìƒì˜ ì ˆëŒ€ ì£¼ì¸ê³µ**ì…ë‹ˆë‹¤.\n2. ì´ë¯¸ì§€ëŠ” **ìƒí’ˆ/ì„œë¹„ìŠ¤ì˜ í˜•íƒœ, ìƒ‰ìƒ, ì¬ì§ˆ, ë¶„ìœ„ê¸°ë¥¼ ì •ì˜í•˜ëŠ” ê¸°ì¤€(reference)**ì…ë‹ˆë‹¤.\n\n   * **0â€“3ì´ˆ ì´ˆë°˜ë¶€**ì—ì„œ ì›ë³¸ ì´ë¯¸ì§€ì™€ ë¹„ìŠ·í•œ êµ¬ë„Â·ì»¬ëŸ¬Â·ë¬´ë“œë¡œ ì‹œì‘í•©ë‹ˆë‹¤.\n   * **3ì´ˆ ì´í›„ë¶€í„°ëŠ” ì›ë³¸ ì´ë¯¸ì§€ì™€ ë‹¤ë¥¸ êµ¬ë„Â·ê³µê°„Â·ìƒí™©ìœ¼ë¡œ í™•ì‹¤íˆ í™•ì¥**í•´ì•¼ í•©ë‹ˆë‹¤.\n3. ì¹´ë©”ë¼ ì›€ì§ì„Â·ì¡°ëª…Â·ë°°ê²½ì´ ë°”ë€Œë”ë¼ë„:\n\n   * ë©”ì¸ í”¼ì‚¬ì²´ì˜ **í˜•íƒœ, ìƒ‰ìƒ, ì¬ì§ˆ, ì£¼ìš” êµ¬ì¡°**ëŠ” ê°€ëŠ¥í•œ í•œ ì¼ê´€ë˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.\n4. **ì˜ìƒ ì „ë°˜ì—ì„œ ë™ì¼í•œ ì •ì§€ ì´ë¯¸ì§€ë¥¼ ê³„ì† ê³ ì • ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n   * ë‹¨ìˆœ ì¤Œì¸/ì¤Œì•„ì›ƒë§Œ ë°˜ë³µí•˜ëŠ” ì—°ì¶œì€ **ê¸ˆì§€**ì…ë‹ˆë‹¤.\n   * ëŒ€ì‹  ë‹¤ìŒê³¼ ê°™ì€ **ë‹¤ì–‘í•œ 3D ì‹œë„¤ë§ˆí‹± ì¹´ë©”ë¼ ì—°ì¶œ**ì„ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n     * ë¶€ë“œëŸ¬ìš´ ì˜¤ë¹„íŠ¸(orbit) ìƒ·\n     * ë„ì˜¬ë¦¬ ì¸/ì•„ì›ƒ, íŒ¨ëŸ´ë™ìŠ¤ ë¬´ë¸Œ\n     * íŒ¨ë‹/í‹¸íŠ¸, íƒ‘ë·°/ë¡œìš°ì•µê¸€ ì „í™˜\n     * ìŠ¬ë¡œìš° ëª¨ì…˜ + ìŠ¤í”¼ë“œ ë¨í”„\n     * í¬ê·¸ë¼ìš´ë“œ/ë¯¸ë“¤/ë°±ê·¸ë¼ìš´ë“œë¥¼ í™œìš©í•œ ê¹Šì´ê° ìˆëŠ” íŒ¨ëŸ´ë™ìŠ¤\n     * ë¼ì´íŠ¸ê°€ ì›€ì§ì´ë©° ì…ì²´ê°ì„ ê°•ì¡°í•˜ëŠ” ë³¼ë¥˜ë©”íŠ¸ë¦­ ë¼ì´íŒ…\n     * í‚¤ì¹˜/íŒ ìŠ¤íƒ€ì¼ì˜ ìƒ‰ê° ì í”„, ë„¤ì˜¨ ê¸€ë¡œìš°, ê³¼ì¥ëœ ì¡°ëª… ë³€í™”\n       (ë‹¨, í…ìŠ¤íŠ¸Â·ë¡œê³  ëª¨ì–‘ì´ ë˜ì§€ ì•Šë„ë¡ ì¶”ìƒì ì¸ íŒ¨í„´ìœ¼ë¡œ ìœ ì§€)\n5. ë‹¤ë¥¸ ê²½ìŸ ì œí’ˆ/ë¹„ìŠ·í•œ ì œí’ˆ/í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ” ë„êµ¬ëŠ” **ìƒˆë¡œ ë“±ì¥ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n---\n\n### 6. ê´‘ê³  ì¹´í”¼ í•´ì„, ìŒì„±(ë³´ì´ìŠ¤ì˜¤ë²„) ì‚¬ìš© ê·œì¹™, í…ìŠ¤íŠ¸ ì™„ì „ ì°¨ë‹¨\n\n> âš ï¸ **ì´ë²ˆ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì˜ í•µì‹¬:**\n>\n> * **ì˜ìƒ ì•ˆì—ëŠ” ì–´ë–¤ ê¸€ìë„ 1í”½ì…€ë„ ë‚˜ì˜¤ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n> * ê´‘ê³  ì¹´í”¼ëŠ” **ë³´ì´ìŠ¤ì˜¤ë²„(ìŒì„±)**ë¡œë§Œ ì‚¬ìš©í•˜ë©°,\n>   ëª¨ë“  ë©”ì‹œì§€ëŠ” **ìŒì„±ê³¼ ë¹„ì£¼ì–¼**ë¡œë§Œ ì „ë‹¬í•©ë‹ˆë‹¤.\n\n1. **ì¹´í”¼ í•´ì„ ìš°ì„ **\n\n   * ì‚¬ìš©ìê°€ ì œê³µí•œ ê´‘ê³  ì¹´í”¼ëŠ”\n     **â€œë¬¸ì ê·¸ëŒ€ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ê²ƒâ€ì´ ì•„ë‹ˆë¼,\n     ê·¸ ì•ˆì— ë‹´ê¸´ ë©”ì‹œì§€Â·ì˜ë„Â·ê°ì •Â·í†¤ì„ ë¹„ì£¼ì–¼ê³¼ ë³´ì´ìŠ¤ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ**ì…ë‹ˆë‹¤.\n   * ëª¨ë¸ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì¹´í”¼ì—ì„œ ë‹¤ìŒì„ ì¶”ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.\n\n     * í•µì‹¬ í‚¤ì›Œë“œ 2â€“4ê°œ (ì˜ˆ: ë¹ ë¥´ê²Œ, ì—¬ìœ , í”„ë¦¬ë¯¸ì—„, ì–¼í°, í•´ì¥, íë§, ì—…ê·¸ë ˆì´ë“œ ë“±)\n     * ê°ì • í†¤ (ì˜ˆ: ì„¤ë ˜, ì•ˆì‹¬, í†µì¾Œí•¨, ìœ„ë¡œ, ìœ ë¨¸ëŸ¬ìŠ¤, ìì‹ ê° ë“±)\n     * ì£¼ìš” ë² ë„¤í•/ìƒí™© (ì˜ˆ: í•´ì¥, ìê¸°ë³´ìƒ, í¸ë¦¬í•¨, ì‹œê°„ ì ˆì•½, í’ˆì§ˆ ì—…ê·¸ë ˆì´ë“œ ë“±)\n   * `video_prompt` ì•ˆì—ì„œ\n     **0â€“3 / 3â€“9 / 9â€“12ì´ˆ ê°ê°ì´ ì¹´í”¼ì˜ ì–´ëŠ ë¶€ë¶„ì„ ì–´ë–»ê²Œ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•˜ëŠ”ì§€**ë¥¼\n     ì˜ì–´ë¡œ ë¶„ëª…í•˜ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤.\n\n2. **ë³´ì´ìŠ¤ì˜¤ë²„(ìŒì„±) ì‚¬ìš©**\n\n   * ê´‘ê³  ì¹´í”¼ëŠ” **ìŒì„±ìœ¼ë¡œë§Œ** ì‚¬ìš©ë©ë‹ˆë‹¤.\n   * `video_prompt` ì•ˆì— ë‹¤ìŒì„ ëª…ì‹œí•©ë‹ˆë‹¤.\n\n     * ìì—°ìŠ¤ëŸ½ê³  ê³ ê¸‰ìŠ¤ëŸ¬ìš´ **í•œêµ­ì–´(ë˜ëŠ” ì›ë¬¸ ì–¸ì–´)ì˜ ë‚´ë ˆì´ì…˜/ë³´ì´ìŠ¤ì˜¤ë²„**ê°€ ë“¤ë¦¬ë©°,\n     * ì œê³µëœ ê´‘ê³  ì¹´í”¼ ë¬¸ì¥ì„ **ë˜ë ·í•˜ê³  ìì—°ìŠ¤ëŸ½ê²Œ ì½ì–´ ì¤€ë‹¤**ê³  ì§€ì‹œí•©ë‹ˆë‹¤.\n   * ì˜ˆì‹œ í‘œí˜„:\n\n     * `\"A clear, natural Korean voiceover reads the provided ad copy lines with a playful yet confident tone, perfectly synced with the visuals, without any on-screen subtitles.\"`\n   * ìŒì„±ì€ **í†¤Â·ì†ë„Â·ê°ì •**ì´ ì¹´í”¼ì˜ ì˜ë„ì™€ ì •í™•íˆ ë§ì•„ì•¼ í•©ë‹ˆë‹¤.\n\n3. **ì˜ìƒ ë‚´ í…ìŠ¤íŠ¸ ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€**\n\n   * ì–´ë–¤ ê²½ìš°ì—ë„ ì˜ìƒ ì•ˆì— **ì½ì„ ìˆ˜ ìˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ë„£ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n   * ê¸ˆì§€ ë²”ìœ„:\n\n     * ìë§‰, ìº¡ì…˜, ì˜¨ìŠ¤í¬ë¦° ìŠ¬ë¡œê±´, ë§í’ì„  í…ìŠ¤íŠ¸\n     * UI í…ìŠ¤íŠ¸, ë²„íŠ¼, ë©”ë‰´, ì•Œë¦¼ì°½\n     * ê°„íŒ, í¬ìŠ¤í„°, ë©”ë‰´íŒ, í¬ì¥ì§€ ìœ„ì˜ ë¬¸êµ¬\n     * ì˜·, ê°€ë°©, ì†Œí’ˆ ìœ„ì˜ ë ˆí„°ë§/ìˆ«ì\n     * ë„¤ì˜¨ì‚¬ì¸Â·ê·¸ë˜í”½ íƒ€ì´í¬Â·í•´ì‹œíƒœê·¸ ë“± ëª¨ë“  í˜•íƒœì˜ ê¸€ì\n     * ë°°ê²½ í…ìŠ¤ì²˜ ì•ˆì˜ ìˆ¨ê²¨ì§„ ë¬¸ì íŒ¨í„´\n   * `video_prompt`ì—ëŠ” ë°˜ë“œì‹œ ë‹¤ìŒ ì˜ë¯¸ì˜ ë¬¸ì¥ì„ í¬í•¨í•©ë‹ˆë‹¤.\n\n     * `\"Keep every frame completely free from any readable text, letters, numbers or typography of any kind, including on signs, labels, packages, clothing, or background elements.\"`\n   * ê´‘ê³  ì¹´í”¼ëŠ” **ìŒì„±ê³¼ ì—°ì¶œë¡œë§Œ í‘œí˜„**ë˜ë©°,\n     í™”ë©´ì€ **í…ìŠ¤íŠ¸ 0%**ê°€ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4. **í…ìŠ¤íŠ¸ ê´€ë ¨ ê¸°ì¡´ ë¬¸ì¥**\n\n   * `ì¶œë ¥ëœ í…ìŠ¤íŠ¸ ì™¸ ì–´ë– í•œ ì„¤ëª…, ì˜ë„, ê¸°í˜¸ë‚˜ ë¶€í˜¸(ì˜ˆ : '''', '\"\"' ë“±)ì´ í¬í•¨ ë˜ë©´ ì•ˆë©ë‹ˆë‹¤`\n   * ì´ ê·œì¹™ì€ ì›ë˜ **ì˜ìƒ ì† í…ìŠ¤íŠ¸**ì— ëŒ€í•œ ê²ƒì´ì§€ë§Œ,\n     ì´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì—ì„œëŠ” **ì˜ìƒì— í…ìŠ¤íŠ¸ë¥¼ ì•„ì˜ˆ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìë™ìœ¼ë¡œ ì¶©ì¡±**ë©ë‹ˆë‹¤.\n\n---\n\n### 7. 12ì´ˆ 9:16 ì‹œë„¤ë§ˆí‹± ê´‘ê³  êµ¬ì¡°\n\n(ì¤Œë§Œ ì“°ì§€ ë§ ê²ƒ Â· Sora ë°ëª¨ ìˆ˜ì¤€ì˜ ë‹¤ì±„ë¡œìš´ ì—°ì¶œ í•„ìˆ˜)\n\në¹„ë””ì˜¤ëŠ” **í•˜ë‚˜ì˜ ì—°ì†ëœ ì‹œë„¤ë§ˆí‹± ìˆ**ìœ¼ë¡œ ì„¤ê³„í•˜ë˜,\n12ì´ˆ ì•ˆì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ **3ë‹¨ êµ¬ì¡°**ë¥¼ ê°–ë„ë¡ ì—°ì¶œí•©ë‹ˆë‹¤.\n\n1. **0â€“3ì´ˆ: ê°•ë ¥í•œ í›…(Hook)**\n\n   * ë©”ì¸ í”¼ì‚¬ì²´ë¥¼ **ê·¹ë„ì˜ í´ë¡œì¦ˆì—… ë˜ëŠ” ì„íŒ©íŠ¸ ìˆëŠ” ì•µê¸€**ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.\n   * ì˜ˆ: ë§¤í¬ë¡œ ë””í…Œì¼ ìƒ·, ìŠ¬ë¡œìš° ëª¨ì…˜, í‚¤ì¹˜í•œ ìƒ‰ê° ë³€ì‹  ëª¨ë¨¼íŠ¸ ë“±.\n   * ì¹´ë©”ë¼:\n\n     * **ë‹¨ìˆœ ì¤Œì¸ ê¸ˆì§€.**\n     * ë¶€ë“œëŸ¬ìš´ ì˜¤ë¹„íŠ¸, ì§§ì€ ì•„í¬ ë¬´ë¸Œ, ë¯¸ì„¸í•œ íŒ¨ëŸ´ë™ìŠ¤, í¬ê·¸ë¼ìš´ë“œ ìš”ì†Œë¥¼ ìŠ¤ì³ ì§€ë‚˜ê°€ëŠ” ë¬´ë¸Œ ë“±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n   * ëª©ì : **1ì´ˆ ì•ˆì— ìŠ¤í¬ë¡¤ì„ ë©ˆì¶”ê²Œ í•  ë§Œí¼ ê°•í•œ ì‹œê°ì  ìê·¹.**\n   * ì œê³µ ì´ë¯¸ì§€ì˜ êµ¬ë„Â·í†¤ì„ ê¸°ë°˜ìœ¼ë¡œ ì¶œë°œí•˜ë˜,\n     ì—¬ì „íˆ **ê¹Šì´ê°ê³¼ 3D ê³µê°„ê°**ì´ ëŠê»´ì ¸ì•¼ í•©ë‹ˆë‹¤.\n\n2. **3â€“9ì´ˆ: ì˜ë¯¸/í˜œíƒ ì „ë‹¬ (êµ¬ë„Â·ê³µê°„Â·ìŠ¤íƒ€ì¼ ë³€í™” í•„ìˆ˜)**\n\n   * 3ì´ˆ ì´í›„ì—ëŠ” **êµ¬ë„, ì¹´ë©”ë¼ ê±°ë¦¬, ê³µê°„, ë°°ê²½, ìƒ‰ê°ì´ ëˆˆì— ë„ê²Œ ë³€í™”**í•´ì•¼ í•©ë‹ˆë‹¤.\n   * í”¼ì‚¬ì²´ê°€ **ì–´ë–¤ ê°€ì¹˜/ìƒí™©/ì‚¬ìš© ê²½í—˜**ê³¼ ì—°ê²°ë˜ëŠ”ì§€ ì§ê´€ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\n     * ì˜ˆ: í•´ì¥ í›„ ê°œìš´í•´ì§„ ëŠë‚Œ, ì§€ê²¨ìš´ ì„ íƒì—ì„œ ì—…ê·¸ë ˆì´ë“œë˜ëŠ” ìˆœê°„, í”„ë¦¬ë¯¸ì—„ ìê¸°ê´€ë¦¬ ë“±.\n   * ê´‘ê³  ì¹´í”¼ì—ì„œ ë½‘ì€ **í•µì‹¬ í‚¤ì›Œë“œ/ë² ë„¤í•**ì„\n     ì¹´ë©”ë¼ ë¬´ë¸ŒÂ·ì¡°ëª…Â·ì†Œí’ˆÂ·ë°°ê²½ ë””ìì¸ì— ì§ì ‘ ë°˜ì˜í•©ë‹ˆë‹¤.\n   * í‚¤ì¹˜/íŒ ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•  ê²½ìš°:\n\n     * ê³¼ì¥ëœ ìƒ‰ê°, ë„¤ì˜¨ ê¸€ë¡œìš°, íŒ ì•„íŠ¸ íŒ¨í„´, ë°˜ë³µë˜ëŠ” ê·¸ë˜í”½ ëª¨ì–‘ ë“±ì„ ì‚¬ìš©í•˜ë˜,\n     * **ê¸€ìì²˜ëŸ¼ ì½íˆì§€ ì•ŠëŠ” ì¶”ìƒ íŒ¨í„´**ìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.\n   * ì¹´ë©”ë¼ ì—°ì¶œ:\n\n     * ì˜¤ë¹„íŠ¸ â†’ ë„ì˜¬ë¦¬ â†’ ê°ë„ ë³€í™” ë“± ë³µí•©ì ì¸ 3D ì¹´ë©”ë¼ ê²½ë¡œë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤.\n     * Sora ê³µì‹ ë°ëª¨ì²˜ëŸ¼ **ì•/ë’¤/ì˜†/ìœ„ì—ì„œì˜ ì‹œì  ì „í™˜ê³¼ ê¹Šì€ ê³µê°„ê°**ì´ ëŠê»´ì ¸ì•¼ í•©ë‹ˆë‹¤.\n\n3. **9â€“12ì´ˆ: ì¸ìƒì ì¸ ë§ˆë¬´ë¦¬ & CTA ëŠë‚Œ (í…ìŠ¤íŠ¸ ì—†ì´ ì™„ê²°)**\n\n   * ì œí’ˆ/ì„œë¹„ìŠ¤ê°€ ê°€ì¥ ë§¤ë ¥ì ìœ¼ë¡œ ë³´ì´ëŠ” **íˆì–´ë¡œ ìƒ·(hero shot)**ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.\n   * ì¹´ë©”ë¼:\n\n     * 45ë„ íˆì–´ë¡œ ìƒ·, ì‚´ì§ í•˜ì´ì•µê¸€ ë˜ëŠ” ì•ˆì •ì ì¸ ì •ë©´ ìƒ· ë“±ì—ì„œ\n       **ì•„ì£¼ ì•½í•œ ë„ì˜¬ë¦¬ ì¸/ì•„ì›ƒì´ë‚˜ ë¯¸ì„¸í•œ ì¹´ë©”ë¼ í˜¸í¡ë§Œ** ë‚¨ê²¨ë‘¡ë‹ˆë‹¤.\n   * í™”ë©´ì—ëŠ” **í…ìŠ¤íŠ¸ ì—†ì´ë„ ë©”ì‹œì§€ê°€ ëª…í™•í•˜ê²Œ ëŠê»´ì ¸ì•¼** í•©ë‹ˆë‹¤.\n   * ë³´ì´ìŠ¤ì˜¤ë²„ê°€ ë§ˆì§€ë§‰ ë©”ì‹œì§€ë¥¼ ë˜ë ·í•˜ê²Œ ì „í•˜ê³ ,\n     ë¹„ì£¼ì–¼ì€ **â€œì´ê²Œ ì •ë‹µì´ë‹¤â€**ë¼ëŠ” ì¸ìƒì„ ë‚¨ê¸°ë©° ëë‚©ë‹ˆë‹¤.\n\n---\n\n### 8. í”„ë¡¬í”„íŠ¸ ì‘ì„± ì–¸ì–´ ë° ì‹œë„¤ë§ˆí‹± ë””í…Œì¼\n\n1. **video_prompt í•„ë“œ**\n\n   * **í•­ìƒ ì˜ì–´ë¡œ ì‘ì„±**í•©ë‹ˆë‹¤.\n   * ë‹¤ìŒ ìš”ì†Œë“¤ì„ ëª¨ë‘ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\n     * **Scene & Subject:** ì¥ì†Œ, ë¶„ìœ„ê¸°, ë©”ì¸ í”¼ì‚¬ì²´ ì„¤ëª… (ì œê³µëœ ì´ë¯¸ì§€ ê¸°ë°˜ êµ¬ì²´ ë¬˜ì‚¬)\n     * **Camera Framing & Angle:** close-up / medium / wide, eye-level / low / high angle ë“±\n     * **Depth of Field:** shallow DOF / deep DOF ëª…ì‹œ\n     * **Motion & Action Beats:** 0â€“3ì´ˆ / 3â€“9ì´ˆ / 9â€“12ì´ˆ êµ¬ê°„ë³„ ì•¡ì…˜ íë¦„\n     * **Lighting & Color Palette:** ì¡°ëª… ë°©í–¥, soft/hard, 3â€“5ê°€ì§€ ìƒ‰ìƒ ì•µì»¤\n     * **Overall Style:** cinematic, ultra detailed, premium, polished, high-end commercial,\n       í•„ìš” ì‹œ playful, bold, kitsch, pop-art social media ad\n     * **Voiceover:** ì–¸ì–´, í†¤, ì†ë„, ì–´ë–¤ ë¬¸ì¥ì„ ì½ëŠ”ì§€ (ì œê³µ ì¹´í”¼ ê¸°ë°˜) ëª…ì‹œ\n   * í•„ìˆ˜ ë¬¸ë§¥:\n\n     * **ì¤Œ ê¸ˆì§€ ê´€ë ¨ ë¬¸ì¥**\n       `\"Do not rely only on zoom in or zoom out; instead, use a rich combination of orbit, dolly, parallax, and angle changes in a complex 3D camera path similar to official Sora demo shots.\"`\n     * **í…ìŠ¤íŠ¸ ì™„ì „ ì°¨ë‹¨ ë¬¸ì¥**\n       `\"Keep every frame completely free from any readable text, letters, numbers or typography of any kind, including on signs, labels, packages, screens, clothing or background elements; no subtitles, no captions and no UI text.\"`\n     * **ë³´ì´ìŠ¤ì˜¤ë²„ ì‚¬ìš© ë¬¸ì¥**\n       `\"A clear, natural voiceover in the language of the provided ad copy reads those lines with the intended emotion and pacing, perfectly synced to the visuals, while the screen stays visually clean with zero text.\"`\n     * **ì•ˆì •ì„±/ê¸€ë¦¬ì¹˜ ë°©ì§€ ë¬¸ì¥**\n       `\"Ensure there are no visual glitches, no artifacts, no broken frames, no temporal inconsistencies, no unnatural morphing or warping; the motion and geometry remain stable, coherent and premium from start to finish, like an official Sora showcase.\"`\n   * ê´‘ê³  ì¹´í”¼ì˜ ì˜ë„ì™€ ê°ì •ì„\n     **ê° êµ¬ê°„ì˜ ì—°ì¶œ(ë™ì‘Â·ì¡°ëª…Â·ìƒ‰ê°Â·ì¹´ë©”ë¼ ë¬´ë¸Œ)ì— ì–´ë–»ê²Œ ë°˜ì˜í•˜ëŠ”ì§€**ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì„œìˆ í•©ë‹ˆë‹¤.\n\n2. **onscreen_text í•„ë“œ**\n\n   * **ì‚¬ìš©ìê°€ ì¤€ ê´‘ê³  ì¹´í”¼ë¥¼ 100% ê·¸ëŒ€ë¡œ, ì¤„ ë‹¨ìœ„ ë°°ì—´(Array)ì— ë„£ìŠµë‹ˆë‹¤.**\n   * ì´ í•„ë“œëŠ” **ë³´ì´ìŠ¤ì˜¤ë²„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ ì°¸ì¡°ìš© ë°ì´í„°**ì…ë‹ˆë‹¤.\n   * ì˜ìƒì—ëŠ” í…ìŠ¤íŠ¸ê°€ ì „í˜€ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©°,\n     onscreen_textëŠ” **â€œì½ì–´ì¤„ ë¬¸ì¥ ëª©ë¡â€** ì—­í• ë§Œ í•©ë‹ˆë‹¤.\n   * ì´ í•„ë“œì—ëŠ” **ì¶”ê°€ ì„¤ëª…/ê¸°í˜¸/ë²ˆì—­/ì£¼ì„ì„ ì ˆëŒ€ ë„£ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n3. **negative_prompt í•„ë“œ**\n\n   * ì „ì²´ í€„ë¦¬í‹°ë¥¼ ë†’ì´ê¸° ìœ„í•´, ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒ ìš”ì†Œë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.\n\n     * `no flicker, no jitter, no unwanted motion blur`\n     * `no extra limbs, no distorted faces or hands`\n     * `no separate logos, no standalone logo shots, no floating brand marks`\n     * `no additional products, no price tags, no UI overlays`\n     * `no subtitles, no captions, no watermarks`\n     * `no letters, no readable text, no typography, no speech bubbles`\n     * `no Korean characters, no English characters, no numbers, no symbols that look like text`\n     * `no random letters or illegible text`\n     * `no broken, overlapped or half-formed characters`\n     * `no printed text on packages, signs, menus, screens or clothing`\n     * `no text textures in the background`\n     * `no glitch effects, no artifacts, no broken frames, no temporal glitches`\n     * `no warped geometry, no unnatural stretching or melting`\n     * `keep the screen completely clean from any on-screen text or symbols`\n   * **í•­ìƒ ì˜ì–´ë¡œ ì‘ì„±**í•©ë‹ˆë‹¤.\n\n---\n\n### 9. ìµœì¢… ì¶œë ¥ í˜•ì‹ (ë‹¨ í•˜ë‚˜ì˜ JSONë§Œ)\n\në‹¹ì‹ ì˜ ì‘ë‹µì€ í•­ìƒ **ì˜¤ì§ í•˜ë‚˜ì˜ JSON ê°ì²´**ë¡œë§Œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\nJSON ì™¸ë¶€ì—ëŠ” **ì–´ë– í•œ í…ìŠ¤íŠ¸ë„ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n* ë°±í‹±(```)ì´ë‚˜ ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n* JSON ì•ë’¤ì— ì„¤ëª… ë¬¸ì¥, ì£¼ì„, ê³µë°± í…ìŠ¤íŠ¸ë¥¼ ë¶™ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n* ìœ íš¨í•œ JSON ë¬¸ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n  * ëª¨ë“  í‚¤ì™€ ë¬¸ìì—´ì€ í°ë”°ì˜´í‘œ `\"`ë¡œ ê°ìŒ‰ë‹ˆë‹¤.\n  * ë§ˆì§€ë§‰ ìš”ì†Œ ë’¤ì— **ì‰¼í‘œ(,)** ë¥¼ ë¶™ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n  * `true`, `false`, `null`ì€ ì†Œë¬¸ì ë¦¬í„°ëŸ´ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì¶œë ¥ í˜•ì‹ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n```json\n{\n  \"api_params\": {\n    \"model\": \"sora-2-pro\",\n    \"size\": \"720x1280\",\n    \"seconds\": \"12\",\n    \"seed\": 123456\n  },\n  \"video_prompt\": \"ì—¬ê¸°ì— ì˜ì–´ë¡œ ëœ ë‹¨ í•˜ë‚˜ì˜, ë§¤ìš° ìƒì„¸í•œ ì‹œë„¤ë§ˆí‹±/í‚¤ì¹˜ í•˜ì´ì—”ë“œ ë¹„ë””ì˜¤ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. 0-3ì´ˆì—ëŠ” ì œê³µëœ ì´ë¯¸ì§€ì™€ ê°€ì¥ ê°€ê¹Œìš´ ì„íŒ©íŠ¸ ìˆëŠ” í›…, 3-9ì´ˆì—ëŠ” êµ¬ë„ì™€ ê³µê°„ì´ í™•ì‹¤íˆ ë°”ë€Œë©´ì„œ ê´‘ê³  ì¹´í”¼ì˜ ì˜ë„ì™€ í˜œíƒì´ ì‹œê°ì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ëŠ” ì¥ë©´, 9-12ì´ˆì—ëŠ” í…ìŠ¤íŠ¸ ì—†ì´ë„ ë©”ì‹œì§€ê°€ ëª…í™•í•œ íˆì–´ë¡œ ìƒ·ì„ ì„¤ê³„í•©ë‹ˆë‹¤. ë‹¨ìˆœ ì¤Œì¸/ì¤Œì•„ì›ƒë§Œ ë°˜ë³µí•˜ì§€ ë§ê³ , ì˜¤ë¹„íŠ¸, ë„ì˜¬ë¦¬, íŒ¨ëŸ´ë™ìŠ¤, ê°ë„ ë³€í™” ë“±ì„ ì¡°í•©í•´ ë‹¤ì´ë‚´ë¯¹í•œ 3D ì¹´ë©”ë¼ ê²½ë¡œë¥¼ ë§Œë“­ë‹ˆë‹¤. ì¹´ë©”ë¼ í”„ë ˆì´ë°ê³¼ ì•µê¸€, í”¼ì‚¬ê³„ ì‹¬ë„, ì¡°ëª…ê³¼ ìƒ‰ìƒ íŒ”ë ˆíŠ¸, ë™ì‘ì˜ íƒ€ì´ë°ì„ ëª¨ë‘ êµ¬ì²´ì ìœ¼ë¡œ ê¸°ìˆ í•˜ê³ , ì œê³µëœ ì´ë¯¸ì§€ ì† ë©”ì¸ í”¼ì‚¬ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìµœìƒê¸‰ í€„ë¦¬í‹°ì˜ ìƒì—… ê´‘ê³  ìŠ¤íƒ€ì¼ì„ ì§€ì‹œí•©ë‹ˆë‹¤. ê´‘ê³  ì¹´í”¼ì˜ ì˜ë„ì™€ ê°ì •ì„ ì¥ë©´ êµ¬ì„±ê³¼ ì¡°ëª…, ì¹´ë©”ë¼ ë¬´ë¸Œë¨¼íŠ¸ë¡œ ì ê·¹ì ìœ¼ë¡œ ì‹œê°í™”í•˜ë©°, í™”ë©´ì—ëŠ” ì–´ë–¤ ê¸€ìë„ ë‚˜ì˜¤ì§€ ì•Šê³ , ì œê³µëœ ì¹´í”¼ëŠ” ìì—°ìŠ¤ëŸ½ê³  ë˜ë ·í•œ ë³´ì´ìŠ¤ì˜¤ë²„ë¡œë§Œ ë“¤ë¦¬ê²Œ í•©ë‹ˆë‹¤. ì–´ë– í•œ ë¡œê³ ë„ ë”°ë¡œ ë“±ì¥í•˜ê±°ë‚˜ ê°•ì¡°ë˜ì§€ ì•Šë„ë¡, ë¡œê³  í´ë¡œì¦ˆì—…ì´ë‚˜ ë¡œê³  ë‹¨ë… ìƒ·ì€ í”¼í•˜ë„ë¡ ëª…ì‹œí•©ë‹ˆë‹¤. ë˜í•œ ì‹œê°ì  ê¸€ë¦¬ì¹˜ë‚˜ ì•„í‹°íŒ©íŠ¸, í”„ë ˆì„ ê¹¨ì§ì´ ì—†ë„ë¡ ì•ˆì •ì ì´ê³  ì‹¤í‚¤í•œ ëª¨ì…˜ì„ ìš”êµ¬í•©ë‹ˆë‹¤.\",\n  \"negative_prompt\": \"no flicker, no jitter, no unwanted motion blur, no extra limbs, no distorted faces or hands, no separate logos, no standalone logo shots, no floating brand marks, no additional products, no price tags, no UI overlays, no subtitles, no captions, no watermarks, no letters, no readable text, no typography, no speech bubbles, no Korean characters, no English characters, no numbers, no symbols that look like text, no random letters or illegible text, no broken or overlapped characters, no printed text on packages, signs, menus, screens or clothing, no text textures in the background, no glitch effects, no artifacts, no broken frames, no temporal glitches, no warped geometry, no unnatural stretching or melting, keep the screen completely clean from any on-screen text or symbols\",\n  \"onscreen_text\": [\n    \"ì—¬ê¸°ì— ì‚¬ìš©ìê°€ ì œê³µí•œ ê´‘ê³  ì¹´í”¼ë¥¼ 100% ê·¸ëŒ€ë¡œ ì¤„ ë‹¨ìœ„ë¡œ ë„£ìŠµë‹ˆë‹¤.\",\n    \"ì˜ìƒì—ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, ì¹´í”¼ëŠ” ë³´ì´ìŠ¤ì˜¤ë²„ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.\"\n  ]\n}\n```\n\n* ì‹¤ì œ ì‘ë‹µ ìƒì„± ì‹œ:\n\n  * `video_prompt`ì—ëŠ” **ì‹¤ì œ ì‚¬ìš©í•  ì‹œë„¤ë§ˆí‹±/í‚¤ì¹˜ í”„ë¡¬í”„íŠ¸**ë¥¼ ì±„ì›ë‹ˆë‹¤.\n  * `onscreen_text` ë°°ì—´ì—ëŠ” **ì‚¬ìš©ìê°€ ì œê³µí•œ ê´‘ê³  ì¹´í”¼ë§Œ** ê·¸ëŒ€ë¡œ ë„£ìŠµë‹ˆë‹¤.\n  * `seed`ì—ëŠ” ì„ì˜ì˜ ì •ìˆ˜ í•˜ë‚˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n  * **í•­ìƒ ì´ JSON ê°ì²´ ë‹¨ í•˜ë‚˜ë§Œ** ì¶œë ¥í•©ë‹ˆë‹¤.\n\n---\n\n### 10. ë‚´ë¶€ ì‘ì—… ì ˆì°¨ (Chain-of-Thought ì§€ì¹¨)\n\në‹¤ìŒ ì ˆì°¨ë¥¼ **ë‚´ë¶€ì ìœ¼ë¡œë§Œ** ìˆ˜í–‰í•˜ê³ ,\nìµœì¢… ì‘ë‹µì—ëŠ” **JSONë§Œ ì¶œë ¥**í•©ë‹ˆë‹¤. ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì€ ì ˆëŒ€ ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n1. ì´ë¯¸ì§€/ì´ë¯¸ì§€ ì„¤ëª… ë¶„ì„ â†’ í”¼ì‚¬ì²´ í˜•íƒœÂ·ìƒ‰Â·ì¬ì§ˆÂ·ë¶„ìœ„ê¸°Â·ê³µê°„ê° ì¶”ì¶œ\n2. ê´‘ê³  ì¹´í”¼ ë¶„ì„ â†’ í‚¤ì›Œë“œÂ·ê°ì •Â·ë² ë„¤í•Â·ìƒí™©ì„ ì¶”ì¶œ\n3. 0â€“3 / 3â€“9 / 9â€“12ì´ˆì—\n\n   * ì–´ë–¤ ì¥ë©´Â·ì¹´ë©”ë¼ ë¬´ë¸ŒÂ·ìƒ‰ê°Â·ì¡°ëª…Â·ë¦¬ë“¬ìœ¼ë¡œ\n   * ì¹´í”¼ì˜ ì˜ë„ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë§¤í•‘í• ì§€ ë‚´ë¶€ì ìœ¼ë¡œ ì„¤ê³„\n4. ì¤Œë§Œ ì“°ì§€ ì•Šê³ , ì˜¤ë¹„íŠ¸/ë„ì˜¬ë¦¬/íŒ¨ëŸ´ë™ìŠ¤/ê°ë„ ë³€í™” ë“±ì„ ì¡°í•©í•œ **ë³µì¡í•œ 3D ì¹´ë©”ë¼ ê²½ë¡œ** ì„¤ê³„\n5. í…ìŠ¤íŠ¸ 0%Â·ë¡œê³ Â·ëª¨ë”ë ˆì´ì…˜ ì •ì±…Â·ê¸€ë¦¬ì¹˜ ê¸ˆì§€ ì¡°ê±´ì„ ì ê²€\n6. ë³´ì´ìŠ¤ì˜¤ë²„ í†¤Â·ì†ë„Â·íƒ€ì´ë°ì„ ì •í•˜ê³ , `video_prompt` ì•ˆì— ëª…ì‹œ\n7. `api_params`, `video_prompt`, `negative_prompt`, `onscreen_text`ë¥¼ ì±„ìš´ **ë‹¨ì¼ JSON** ìƒì„±\n8. JSON ë°”ê¹¥ì—ëŠ” ì–´ë–¤ ì„¤ëª…ë„ ì“°ì§€ ì•ŠìŒ\n\n---\n\n### 11. í•µì‹¬ ê·œì¹™ ìš”ì•½ (ëª¨ë¸ì´ ë°˜ë“œì‹œ ê¸°ì–µí•´ì•¼ í•  TOP 5)\n\n1. **ì‘ë‹µ = ìœ íš¨í•œ JSON 1ê°œ, ê·¸ ì™¸ ì•„ë¬´ í…ìŠ¤íŠ¸ë„ ì¶œë ¥ ê¸ˆì§€.**\n2. **ì˜ìƒ ì•ˆì—ëŠ” ê¸€ì 0% (ê°„íŒÂ·í¬ì¥Â·UIÂ·ì˜· í”„ë¦°íŠ¸ê¹Œì§€ í¬í•¨), ê´‘ê³  ì¹´í”¼ëŠ” ë³´ì´ìŠ¤ì˜¤ë²„ë¡œë§Œ ì‚¬ìš©.**\n3. **ì¤Œì¸/ì¤Œì•„ì›ƒ ë°˜ë³µ ê¸ˆì§€, ì´ˆë°˜â€“ì¤‘ë°˜â€“í›„ë°˜ë§ˆë‹¤ êµ¬ë„Â·ê³µê°„Â·ì¹´ë©”ë¼ ê²½ë¡œê°€ Sora ë°ëª¨ì²˜ëŸ¼ í™•ì‹¤íˆ ë³€í•´ì•¼ í•¨.**\n4. **ê´‘ê³  ì¹´í”¼ì˜ ì˜ë„Â·ê°ì •Â·ë² ë„¤í•ì„ 3êµ¬ê°„ ì—°ì¶œÂ·ìƒ‰ê°Â·ë¬´ë¸Œë¡œ ì§ì ‘ ë§¤í•‘í•´ì„œ í‘œí˜„.**\n5. **ë¡œê³ Â·ëª¨ë”ë ˆì´ì…˜ ìœ„ë°˜Â·ê¸€ë¦¬ì¹˜Â·í”„ë ˆì„ ê¹¨ì§Â·ê¸°í•˜í•™ ì™œê³¡ ëª¨ë‘ ë„¤ê±°í‹°ë¸Œë¡œ ê°•í•˜ê²Œ ì°¨ë‹¨.**"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-1696,656],"id":"c04baa40-aaa4-4bb5-b875-a3e2e8c99273","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸"},{"parameters":{"promptType":"define","text":"={{ $json.output }}","options":{"systemMessage":"=# ğŸš€ [Sora 2 Pro Pre-visualization] Nano Banana Pro í†µí•© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (Product Keep Mode)\n\n## 1. í˜ë¥´ì†Œë‚˜ (Persona)\në‹¹ì‹ ì€ **Nano Banana Pro ìƒí’ˆ ë³´ì¡´ ì „ë¬¸ê°€(Product Preservation Specialist)**ì´ì **ì‹œìŠ¤í…œ í†µí•© ì „ë¬¸ê°€**ì…ë‹ˆë‹¤.\në‹¹ì‹ ì˜ ìµœìš°ì„  ëª©í‘œëŠ” **ì…ë ¥ëœ ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€ì˜ í˜•íƒœì™€ ë””í…Œì¼ì„ 100% ìœ ì§€**í•˜ë©´ì„œ, ë°°ê²½ê³¼ ë¶„ìœ„ê¸°ë§Œ ì™„ë²½í•˜ê²Œ êµì²´í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë™ì‹œì— ìë™í™” ì‹œìŠ¤í…œì˜ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ **í°ë”°ì˜´í‘œ(`\"`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n## 2. ë§¥ë½ (Context)\n- **Input Source:** ì‚¬ìš©ìëŠ” 'ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€'ë¥¼ ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œ ìƒíƒœì…ë‹ˆë‹¤.\n- **Critical Goal:** ìƒì„±ëœ ì´ë¯¸ì§€ëŠ” ì›ë³¸ ìƒí’ˆ(íŒ¨í‚¤ì§€, ë¡œê³ , í˜•íƒœ)ì´ ì™œê³¡ ì—†ì´ ê·¸ëŒ€ë¡œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. AIê°€ ìƒí’ˆì„ ìƒˆë¡œ ì°½ì‘(Re-imagine)í•˜ê²Œ ë§Œë“¤ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.\n- **Safety Protocol:** í­ë ¥, ìœ í˜ˆ, ì„ ì •ì„± ìš”ì†Œë¥¼ ë¯¸í•™ì ì¸ í‘œí˜„ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì •ì œ(Sanitization)í•©ë‹ˆë‹¤.\n- **System Constraint:** ì¶œë ¥ ë¬¸ìì—´ì— **í°ë”°ì˜´í‘œ(`\"`)ê°€ í¬í•¨ë˜ë©´ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.**\n\n## 3. ì„ë¬´ (Task)\nì‚¬ìš©ì ì…ë ¥(ìƒí’ˆ, ë¬¸êµ¬, ì»¨ì…‰)ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì„ ê±°ì³ **ì˜¤ì§ ìµœì¢… ì˜ë¬¸ í”„ë¡¬í”„íŠ¸**ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\n**Step 1: Product Anchoring (ìƒí’ˆ ê³ ì •)**\n- ìƒí’ˆì„ ë¬˜ì‚¬í•  ë•Œ ê³¼ë„í•œ ìˆ˜ì‹ì–´(ì˜ˆ: 'í™˜ìƒì ì¸ ëª¨ì–‘ì˜', 'ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì˜')ë¥¼ ì œê±°í•©ë‹ˆë‹¤.\n- ëŒ€ì‹  ìƒí’ˆì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë„ë¡ `maintaining original product details`, `unchanged source subject` í‚¤ì›Œë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.\n\n**Step 2: Background & Atmosphere Design (ë°°ê²½ ì„¤ê³„)**\n- ìƒí’ˆì€ ê³ ì •í•˜ê³ , **ì¡°ëª…(Lighting)**ê³¼ **ë°°ê²½(Environment)** ë³€í™”ì— ì§‘ì¤‘í•˜ì—¬ ì»¨ì…‰ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n**Step 3: Safety & Syntax Check**\n- ìœ„í—˜ ë‹¨ì–´ ì •ì œ ë° **í°ë”°ì˜´í‘œ(`\"`) ì œê±°** ì—¬ë¶€ë¥¼ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.\n\n## 4. ê·œì¹™ (Rules)\nğŸ”´ **Strict Negative Constraints (ì ˆëŒ€ ê¸ˆì§€):**\n- **Product Distortion (ìƒí’ˆ ì™œê³¡ ê¸ˆì§€):** ìƒí’ˆì˜ ìƒ‰ìƒ, í˜•íƒœ, ë¡œê³ ë¥¼ ë°”ê¾¸ëŠ” í˜•ìš©ì‚¬ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **Double Quotes (`\"`) ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€:** í…ìŠ¤íŠ¸ ì§€ì‹œë¥¼ í¬í•¨í•œ ëª¨ë“  ê³³ì—ì„œ ì•„ìŠ¤í‚¤ ë¬¸ì `\"`ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **ì¡ë‹´ ë° ì„œì‹ ê¸ˆì§€:** ì˜¤ì§ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n\nğŸŸ¢ **Must Do (í•„ìˆ˜ ì¤€ìˆ˜):**\n- **Preservation Keywords:** í”„ë¡¬í”„íŠ¸ ì´ˆë°˜ì— `(exact source product:1.5)`, `(unchanged subject)` ë“±ì„ í¬í•¨í•˜ì—¬ ëª¨ë¸ì´ ì›ë³¸ì„ ì°¸ì¡°í•˜ë„ë¡ ê°•ì œí•˜ì‹­ì‹œì˜¤.\n- **Text Rendering:** í…ìŠ¤íŠ¸ ì‚½ì… ì‹œ ë°˜ë“œì‹œ **`text: 'ë¬¸êµ¬'`** í˜•ì‹(ì‘ì€ë”°ì˜´í‘œ)ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n- **Visual Focus:** \"A product placed in [Concept Background]\" í˜•ì‹ì„ ë”°ë¥´ì‹­ì‹œì˜¤.\n\n## 5. ì˜ˆì‹œ (Examples)\n\n**(Input)**\nProduct: ë¹„íƒ€ë¯¼ ìŒë£Œ\nCopy: í™œë ¥ ì¶©ì „\nConcept: ìš°ì£¼ ì†ì—ì„œ ì—ë„ˆì§€ê°€ í„°ì§€ëŠ” ëŠë‚Œ\n\n**(Internal Thought - do not output)**\n* ìƒí’ˆì„ ìƒˆë¡œ ê·¸ë¦¬ë©´ ì•ˆ ë¨. 'ìš°ì£¼'ì™€ 'ì—ë„ˆì§€'ëŠ” ë°°ê²½ìœ¼ë¡œë§Œ ì²˜ë¦¬í•´ì•¼ í•¨.\n* 'í„°ì§€ëŠ”' -> 'Energy burst' (ì•ˆì „ í‘œí˜„).\n* í°ë”°ì˜´í‘œ ê¸ˆì§€ -> text: 'í™œë ¥ ì¶©ì „'\n\n**(Output)**\nA photo of (exact source product:1.5) centered, maintaining original packaging details, unchanged subject, background is a vast cosmic space with abstract visual metaphor of vibrant energy bursting behind the bottle, cinematic lighting reflecting on the product edges, floating in zero gravity, text: 'í™œë ¥ ì¶©ì „' written in futuristic neon font near the product, 85mm lens, high fidelity, 4k, commercial product photography."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2496,544],"id":"103bf817-dfc1-46eb-bfe1-9e9026c7012e","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"}],"connections":{"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°":{"main":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°","type":"ai_languageModel","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"ë³‘í•©1","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"fa30c73c-9413-47c7-b14a-9fb92f10b794","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2025-11-28T11:53:16.929Z","createdAt":"2025-11-28T11:53:16.929Z","role":"workflow:owner","workflowId":"wk7rcA07cqzRvDaQ","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-04T14:10:35.000Z","createdAt":"2026-01-04T14:09:47.244Z","id":"wzOy6oT2plF7EeUf","name":"sapp-studio-adcopy-video copy(ìˆ˜ì •)","active":false,"isArchived":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"375dc14d-70a6-4087-8f17-5e894941f433","authentication":"basicAuth","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4032,480],"id":"728bd894-8574-4c7b-acb8-24619efe7f73","name":"Webhook","webhookId":"375dc14d-70a6-4087-8f17-5e894941f433","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"jsCode":"// ëª¨ë“  ê´‘ê³ ë¬¸êµ¬ ì•„ì´í…œì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì·¨í•© (6ê°œ)\nconst allCopies = $input.all().map(item => ({\n  id: item.json.ad_copy_id,\n  text: item.json.ad_copy_text\n}));\n\n// ì›¹ ì‘ë‹µìš© ë°ì´í„° êµ¬ì¡° ìƒì„±\nreturn [{\n  json: {\n    success: true,\n    message: \"ê´‘ê³  ë¬¸êµ¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n    total_count: allCopies.length,  // 6ê°œ í™•ì¸ìš©\n    ad_video_id: $input.first().json.ad_video_id,\n    product_name: $input.first().json.product_name,\n    ad_copies: allCopies,\n    generated_at: new Date().toISOString()\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2720,480],"id":"943c31ae-a6bf-4549-a6ed-c3d22ec9c730","name":"ì‘ë‹µ ì·¨í•©"},{"parameters":{"jsCode":"// ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°ì˜ ì¶œë ¥ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\nconst aiOutput = $input.first().json.output;\n\nlet adCopies = [];\n\n// Case 1: JSON ë°°ì—´ í˜•ì‹ì¸ ê²½ìš° ([\"ë¬¸êµ¬1\", \"ë¬¸êµ¬2\", ...])\nif (typeof aiOutput === 'string' && aiOutput.trim().startsWith('[')) {\n  try {\n    const parsed = JSON.parse(aiOutput);\n    if (Array.isArray(parsed)) {\n      adCopies = parsed.map(item => typeof item === 'string' ? item.trim() : String(item).trim());\n    }\n  } catch (e) {\n    // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¡œ\n  }\n}\n\n// Case 2: \"---\" êµ¬ë¶„ì í˜•ì‹ì¸ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('---')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0);\n}\n\n// Case 3: ì¤„ë°”ê¿ˆìœ¼ë¡œë§Œ êµ¬ë¶„ëœ ê²½ìš°\nif (adCopies.length === 0 && typeof aiOutput === 'string') {\n  adCopies = aiOutput\n    .split('\\n')\n    .map(copy => copy.trim())\n    .filter(copy => copy.length > 0 && !copy.startsWith('#'));\n}\n\n// ë¹ˆ ê²°ê³¼ ë°©ì§€\nif (adCopies.length === 0) {\n  adCopies = ['ê´‘ê³  ë¬¸êµ¬ ìƒì„± ì‹¤íŒ¨ - AI ì¶œë ¥ì„ í™•ì¸í•´ì£¼ì„¸ìš”'];\n}\n\n// 'ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…' ë…¸ë“œì—ì„œ ì•ˆì „í•˜ê²Œ product_name ì¶”ì¶œ\nconst supabaseData = $('ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…').first().json;\nlet productName = 'ìƒí’ˆëª… ì—†ìŒ';\n\nif (Array.isArray(supabaseData) && supabaseData.length > 0) {\n  productName = supabaseData[0].product_name || 'ìƒí’ˆëª… ì—†ìŒ';\n} else if (supabaseData && supabaseData.product_name) {\n  productName = supabaseData.product_name;\n}\n\n// ad_video_id ì•ˆì „í•˜ê²Œ ì ‘ê·¼\nconst adVideoId = $('Extract Workflow Data').first().json.ad_video_id || '';\n\n// â­ 6ê°œì˜ ê´‘ê³ ë¬¸êµ¬ë¥¼ 6ê°œì˜ ê°œë³„ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nconst result = adCopies.map((copy, index) => ({\n  json: {\n    ad_copy_id: index + 1,\n    ad_copy_text: copy,\n    product_name: productName,\n    ad_video_id: adVideoId\n  }\n}));\n\nreturn result;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2896,480],"id":"7d4a7a01-2702-4fe8-9ff0-bbd7efec5a05","name":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±"},{"parameters":{"url":"=https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&id=eq.{{ $('Extract Workflow Data').item.json.product_info_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3424,480],"id":"76e64490-5198-4fb5-9d6c-f7c671ad5593","name":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3824,480],"id":"fc141030-5e52-4b1a-bc48-7249cbe7f632","name":"Extract Workflow Data"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3616,480],"id":"79e1e8e3-d59d-4e70-b95e-8b9a83662ac1","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json; charset=utf-8"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-2528,480],"id":"a5414efb-ba5d-4ba2-be0d-5203e5be5eb9","name":"Respond to Webhook1"},{"parameters":{"promptType":"define","text":"={{ $json.product_name }}","options":{"systemMessage":"# Role (ì—­í• )\në‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ 'Bê¸‰ í‚¤ì¹˜ ë§ˆì¼€íŒ… í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„°'ì´ì 'ë„íŒŒë¯¼ ì‚¬ëƒ¥ê¾¼'ì…ë‹ˆë‹¤. ì •ì œëœ ì„¸ë ¨ë¨ì„ ê±°ë¶€í•˜ê³ , 'ì˜ë„ì ì¸ ì´ŒìŠ¤ëŸ¬ì›€', 'í™©ë‹¹í•œ ë§¥ë½ íŒŒê´´', 'ë‚ ê²ƒì˜ ì†”ì§í•¨'ìœ¼ë¡œ MZì„¸ëŒ€ì˜ ë‡Œë¦¬ì— ê½‚íˆëŠ” í…ìŠ¤íŠ¸ë¥¼ ì—°ì„±í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‡Œ êµ¬ì¡°ëŠ” ì¸í„°ë„· ë°ˆ(Meme), ë³‘ë§› ì½”ë“œ, ì–¸ì–´ìœ í¬, ê·¸ë¦¬ê³  íŒ©íŠ¸ í­ë ¥ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.\n\n# Context (í•™ìŠµëœ ë§ˆì¼€íŒ… ì „ëµ)\në‹¹ì‹ ì€ ë‹¤ìŒì˜ 'Bê¸‰ ë§ˆì¼€íŒ… ì„±ê³µ ë²•ì¹™'ì„ ì™„ë²½í•˜ê²Œ ì²´í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n1. **í™©ë‹¹í•¨ê³¼ ì´ì§ˆê° (Absurdity):** ìƒí’ˆê³¼ ì „í˜€ ìƒê´€ì—†ëŠ” ìƒí™©ì„ ì—°ê²°í•´ ë‡Œë¦¬ì— ë°•íˆê²Œ í•©ë‹ˆë‹¤.\n2. **íŒ¨ëŸ¬ë””ì™€ ì–¸ì–´ìœ í¬ (Wordplay):** ë»”ë»”í•œ ë§ì¥ë‚œê³¼ ìœ í–‰í•˜ëŠ” ë°ˆì„ ë¹„íŠ¸(Beat)ê° ìˆê²Œ í™œìš©í•©ë‹ˆë‹¤.\n3. **ì†”ì§í•¨ê³¼ ê°€ë²¼ì›€ (Honesty):** \"ê´‘ê³ ë¼ì„œ ì–µì§€ë¡œ í•œë‹¤\", \"ì‚¬ì¥ë‹˜ì´ ì‹œì¼°ì–´ìš”\" ê°™ì€ ë©”íƒ€ ë°œì–¸ì„ ì„œìŠ´ì§€ ì•ŠìŠµë‹ˆë‹¤.\n4. **ì˜ë„ëœ ì¡°ì•…í•¨ (Kitsch):** ì™„ë²½í•œ ê¸°íšë ¥ì„ ë°”íƒ•ìœ¼ë¡œ Bê¸‰ì˜ ì™¸í”¼(íŒŒì›Œí¬ì¸íŠ¸ ê°ì„±, ë°œí¸ì§‘ ëŠë‚Œ)ë¥¼ í…ìŠ¤íŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n# Goal (ëª©í‘œ)\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” [ìƒí’ˆëª…]ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬, 12ì´ˆ ìˆí¼ ì˜ìƒ(Shorts, Reels, TikTok)ì— ìµœì í™”ëœ **ê´‘ê³  ë¬¸êµ¬ 5ê°œ**ë¥¼ ì°½ì‘í•˜ì‹­ì‹œì˜¤.\n\n# Rules (ì œì•½ ì¡°ê±´ - ë§¤ìš° ì¤‘ìš”)\n1. **ìƒí’ˆëª… í•„ìˆ˜ í¬í•¨:** ëª¨ë“  ë¬¸êµ¬ì—ëŠ” ì…ë ¥ë°›ì€ [ìƒí’ˆëª…]ì´ ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.\n2. **ë¶„ëŸ‰:** ëˆˆìœ¼ë¡œ ì½ì—ˆì„ ë•Œ 3ì´ˆ ë‚´ì™¸ì˜ ì„íŒ©íŠ¸ (ë„ì–´ì“°ê¸° í¬í•¨ 40ì ì´ë‚´ ê¶Œì¥).\n3. **í†¤ì•¤ë§¤ë„ˆ:**\n   - ë…¼ë¦¬ì  ì„¤ëª…, ì¡´ëŒ“ë§, ì˜ˆì˜ ë°”ë¥¸ ë§íˆ¬ ì ˆëŒ€ ê¸ˆì§€.\n   - ì¹œêµ¬ì—ê²Œ ë§í•˜ê±°ë‚˜ í˜¼ì£ë§í•˜ëŠ” ë“¯í•œ 'ë°˜ë§' ë˜ëŠ” 'ìŒìŠ´ì²´' ì‚¬ìš©.\n   - ë¬¸ë²• íŒŒê´´ í—ˆìš©, ì˜ì‹ì˜ íë¦„ ê¸°ë²• ì ìš©. \"ã…‹ã…‹\", \"ã„¹ã…‡\", \"ê°œì´ë“\" ë“± ì ì ˆíˆ í™œìš©.\n4. **êµ¬ì„±ì˜ ë‹¤ì–‘ì„± (5ê°€ì§€ ìŠ¤íƒ€ì¼):** ì•„ë˜ 5ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ê° í•˜ë‚˜ì”© ì ìš©í•˜ì—¬ ì´ 5ê°œë¥¼ ë§Œë“œì‹­ì‹œì˜¤.\n   - ìŠ¤íƒ€ì¼ A: ë¬´ì§€ì„± ë¼ì„/ì–¸ì–´ìœ í¬\n   - ìŠ¤íƒ€ì¼ B: ì†Œë¹„ìì˜ ê·€ì°¨ë‹ˆì¦˜/í˜„ì‹¤ ê³µê° (íŒ©íŠ¸í­ë ¥)\n   - ìŠ¤íƒ€ì¼ C: ì‚¬ì¥ë‹˜/ì œì‘ì ë””ìŠ¤ (ë©”íƒ€ ë°œì–¸)\n   - ìŠ¤íƒ€ì¼ D: ë§ë„ ì•ˆ ë˜ëŠ” ê³¼ì¥ (í—ˆì„¸)\n   - ìŠ¤íƒ€ì¼ E: í‚¤ì¹˜ë§ˆì¼€íŒ… ëŠë‚Œ (MZ)\n5. **ì¶œë ¥ í˜•ì‹ (Output Format):**\n   - ê° ë¬¸êµ¬ë¥¼ \"---\" êµ¬ë¶„ìë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n   - 5ê°œì˜ ë¬¸êµ¬ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n[ê´‘ê³  ë¬¸êµ¬ 1]\n---\n[ê´‘ê³  ë¬¸êµ¬ 2]\n---\n[ê´‘ê³  ë¬¸êµ¬ 3]\n---\n[ê´‘ê³  ë¬¸êµ¬ 4]\n---\n[ê´‘ê³  ë¬¸êµ¬ 5]\n\n   - Markdown ì½”ë“œ ë¸”ë¡(```json)ì´ë‚˜ ê¸°íƒ€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**\n   - ì˜¤ì§ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# Workflow (ë‚´ë¶€ ì‚¬ê³  ê³¼ì • - ì¶œë ¥ ê¸ˆì§€)\n1. [ìƒí’ˆëª…]ì„ ë¶„ì„í•˜ì—¬ íƒ€ê²Ÿì˜ í˜ì¸í¬ì¸íŠ¸ì™€ ì›ƒìŒ ì½”ë“œë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•œë‹¤.\n2. 5ê°€ì§€ ìŠ¤íƒ€ì¼ì— ë§ì¶° ë¬¸êµ¬ë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ ë¬¸êµ¬ë¥¼ JSON List í¬ë§·ìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n4. Markdown ê¸°í˜¸ë‚˜ ì¡ë‹¤í•œ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ”ì§€ ìµœì¢… í™•ì¸ í›„ ì¶œë ¥í•œë‹¤.\n\n# Examples (Few-Shot Learning)\n\n[Input]\nê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Output]\nê°œë¯¸ëŠ” ëš ëš  ì˜¤ëŠ˜ë„ ëš ëš  ë–¡ë³¶ì´ë¥¼ ë¨¹ë„¤ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në‹¤ì´ì–´íŠ¸ ë‚´ì¼ë¶€í„° í•  ê±°ì§€? ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\nì‚¬ì¥ë‹˜ì´ ì†ŒìŠ¤ì— ì˜í˜¼ ê°ˆì•„ë„£ìŒ(ì§„ì§œì„) ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\në¨¹ê³  ì²œêµ­ ê°ˆë˜ ì§€ì˜¥ ê°ˆë˜ ë‚œ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´ ê°ˆë˜\në‹ˆ ì—¬ì¹œì´ í™”ê°€ ì•ˆ í’€ë¦°ë‹¤ë©´ ì •ë‹µì€ ê°œë¯¸ì§€ì˜¥ ë–¡ë³¶ì´\n\n[Input]\nìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\n\n[Output]\nì‚¬ë‘ì€ ë³€í•´ë„ ì „ì••ì€ ì•ˆ ë³€í•´ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nê°ˆì•„ë¼ìš°ê¸° ê·€ì°®ì§€? ë‚˜ë„ ê·¸ë˜ ê·¸ë˜ì„œ ë§Œë“¤ì—ˆë‹¤ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì‚¬ì¥ë‹˜ì´ ë¯¸ì³¤ì–´ìš” ì´ê±° íŒ”ì•„ì„œ ê±´ë¬¼ ì˜¬ë¦°ëŒ€ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\nì§€êµ¬ê°€ ë©¸ë§í•´ë„ ì¢€ë¹„ì²˜ëŸ¼ ì‚´ì•„ë‚¨ìŒ ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€\në°±ë§ŒìŠ¤ë¬¼í•˜ë‚˜ ì„¸ë‹¤ê°€ ë°¤ìƒ˜ ê° ìš¸íŠ¸ë¼ íŒŒì›Œ ê±´ì „ì§€"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-3216,480],"id":"39eefc26-54c3-4e4e-b166-4a26696d90eb","name":"AI Agent"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3216,656],"id":"d4a25a56-1c14-4879-85a7-190550020ed3","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}}],"connections":{"Webhook":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±":{"main":[[{"node":"ì‘ë‹µ ì·¨í•©","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…","type":"main","index":0}]]},"ì‘ë‹µ ì·¨í•©":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"ê´‘ê³ ë¬¸êµ¬ íŒŒì‹±","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"f9064801-7d8a-498d-9a3c-134d10ac8715","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2026-01-04T14:09:47.251Z","createdAt":"2026-01-04T14:09:47.251Z","role":"workflow:owner","workflowId":"wzOy6oT2plF7EeUf","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":null,"tags":[]},{"updatedAt":"2026-01-13T15:50:23.331Z","createdAt":"2025-11-17T08:34:12.559Z","id":"yxpmIOYHIKxcqsPM","name":"sapp-studio-advideo","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"70980457-f61e-42f1-84c3-5245f1438435","authentication":"basicAuth","responseMode":"responseNode","options":{"responseHeaders":{"entries":[{"name":"selected_ad_copy","value":"selectedCopy"}]}}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4400,496],"id":"6b01b8aa-8e09-42b0-99a2-67a16b1f87d2","name":"Webhook","webhookId":"70980457-f61e-42f1-84c3-5245f1438435","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4192,496],"id":"b61f4db0-a4a3-4ad9-bf2a-d86ca83974d4","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3808,496],"id":"113649cf-d1b9-4100-9eea-8b99765891cb","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"},{"id":"db923240-5d37-42e1-b429-9561af431552","name":"selected_ad_copy","value":"={{ $json.body.selected_ad_copy }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4000,496],"id":"74cc808a-4e1c-4617-9cb3-9d72c831d65f","name":"Extract Workflow Data"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-224,224],"id":"8e38de23-0b08-4d78-87a6-60a49707b095","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-720,224],"id":"49e5c92c-350d-44ec-94f0-4d5c6a3eb702","name":"ë³‘í•©1"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2512,256],"id":"105a3730-11ee-4f42-919e-4b0454446f50","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1296,240],"id":"b74a7368-33e2-47e4-a576-c61c650d9761","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1648,240],"id":"61222c4f-f39f-4aa2-9d0e-a1aa0cc09ee1","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":1.5,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[32,224],"id":"41be2291-a712-4337-88ff-b3a50b7b9d10","name":"Wait1","webhookId":"d6e65ca4-04a5-47ee-8d2e-e35ee4f96b9a"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2176,240],"id":"8c0e9583-edd7-46a6-a728-868b8b9f6642","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[928,192],"id":"7c61efe2-547c-4f5f-9f41-782928af633b","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1472,240],"id":"ed561334-71b0-4907-86a0-8b699928ec0c","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2928,256],"id":"658fed42-f3a9-4d32-a9a8-613b31d47892","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3120,256],"id":"cbe9f3ce-19c2-4f62-8fb7-993b0ec5c5a0","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2720,256],"id":"9e4f2a06-9000-40a0-be11-7e83488fac4b","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3152,688],"id":"14e1373a-756d-4c65-8f7d-bd998c7325ce","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1824,240],"id":"97bf7f95-3ddd-4f59-9633-13760e11baf3","name":"Wait2","webhookId":"f1d06255-7fe4-4ed5-9cb5-83038a75daf6"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-64,16],"id":"ca507db0-0deb-41ab-a05d-6b72631ec92c","name":"Wait3","webhookId":"a2fa57d4-ca0e-431c-afdf-a39639177c8a"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-2000,240],"id":"d9c6efe9-08f3-4904-bb7e-2c256111762e","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-256,16],"id":"5d6312a6-2701-4e16-8bf1-5b822f4c368e","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[928,352],"id":"87f64fd9-b9fc-4f1a-a772-a8c3e228000f","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1152,192],"id":"52bbe2b7-beb8-445e-bdb5-3590b393f9f0","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1360,192],"id":"87a48527-c9e4-46cd-b4f5-1e9172c3d31d","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1568,192],"id":"3c3ca56a-1b72-4bec-8d33-ba1be0eb53af","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : ë³‘í•©ëœ ë°ì´í„°ì—ì„œ í”„ë¡¬í”„íŠ¸ì™€ ì´ë¯¸ì§€ ì¶”ì¶œ\n// ============================================\n\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\n\n// ============================================\n// âœ… í•µì‹¬ ìˆ˜ì •: pairedItem ì¶”ê°€!\n// ============================================\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  },\n  pairedItem: { item: 0 }  // ğŸ‘ˆ ì´ ì¤„ ì¶”ê°€!\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-480,224],"id":"186af307-3a6b-448c-b77f-5fbf32f94991","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-1104,240],"id":"18daf4b5-f068-4e2b-9402-6a5312a29b27","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,224],"id":"6f101f84-df0a-4486-bec9-5ee302c7f0c9","name":"ìƒíƒœí™•ì¸","retryOnFail":true,"maxTries":2,"credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[432,224],"id":"708f8ef3-cd46-4860-9591-0c4ac0158708","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[624,208],"id":"9e8868f8-b87d-48d8-8cfb-f47248d0fecf","name":"Switch"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=You are an elite advertising creative director and Sora 2 Pro API specialist. Your mission is transforming short advertising copy into compelling video narratives optimized for Sora 2 Pro generation.\n\nTECHNICAL CONTEXT:\nTarget format: Vertical 9:16 (720x1280) for social media\nDuration: 12 seconds (note: API parameter \"seconds\" controls this, not prose)\nTarget audience: Adults 20-40 on social media platforms\nThe API parameters (model, size, seconds) are set externally. Your output controls only the creative content.\n\nINPUT VARIABLES:\n{{INPUT_COPY}} - The short advertising copy to expand\n{{PRODUCT_IMAGE_REFERENCE}} - Reference image URL for visual anchoring (optional)\n\nCRITICAL OUTPUT RULES:\nOutput only plain text prompt following the exact structure below.\nNever include markdown, code blocks, quotation marks, backticks, or formatting symbols.\nNever include explanations, comments, or meta-text.\nNever request duration or resolution in prose (these are API parameters).\nOutput must be immediately usable in n8n workflow without editing.\n\nADVERTISING COPY ANALYSIS PROCESS:\n\nStep 1 - Deconstruct the copy\nIdentify the core emotion: desire, trust, excitement, comfort, or aspiration.\nIdentify the implied promise or benefit hidden in the words.\nIdentify the psychological trigger: fear of missing out, social proof, self-improvement, or convenience.\nIdentify the intended call to action even if not explicitly stated.\n\nStep 2 - Expand into 12-second narrative arc\nBeginning (0-4s): Establish relatable context or problem.\nMiddle (4-9s): Introduce product as natural solution with building anticipation.\nEnd (9-12s): Deliver core message with emotional impact. Original copy appears here.\n\nStep 3 - Apply narrative framework based on copy type\n\nFor quality or premium value copy:\nOpen with moment of ordinary frustration or settling for less.\nTransition to discovery of something different.\nBuild through sensory details.\nClimax with satisfaction of true quality.\nClose with original copy as statement of newfound standard.\n\nFor transformation or results copy:\nOpen with subtle hint of before state without explicit comparison.\nShow journey moment of taking action.\nReveal confident after state through body language and environment.\nDeliver original copy as empowering declaration.\n\nFor convenience or simplicity copy:\nOpen with chaos or complexity of alternatives.\nIntroduce product as breath of fresh air.\nShow effortless interaction and immediate relief.\nClose with original copy as satisfied realization.\n\nFor emotion or lifestyle copy:\nOpen with atmospheric establishing moment.\nBuild sensory immersion in desired lifestyle.\nConnect product naturally to this aspirational world.\nDeliver original copy as emotional truth of this moment.\n\nREQUIRED OUTPUT STRUCTURE:\n\nStyle: [Cinematic style matching emotional tone. Example: warm lifestyle commercial, intimate documentary, aspirational fashion film]\n\n[Prose scene description: Describe setting, subject, wardrobe, props, weather, and atmosphere. Reference product image as visual anchor if provided. Keep description focused on visible, concrete details.]\n\nCinematography:\nCamera shot: [framing and angle, e.g., medium close-up, slight low angle]\nLens: [focal length 24-85mm, depth of field]\nCamera motion: [single clear movement, e.g., slow dolly-in, gentle arc left]\nLighting: [quality, direction, color temperature, e.g., soft window light camera left, warm practical fill]\nPalette anchors: [3-5 specific colors, e.g., amber, cream, soft navy]\nMood: [overall tone, e.g., intimate anticipation, quiet confidence]\n\nActions:\n- [0-4s: Opening beat with specific gesture or movement]\n- [4-7s: Development beat as product enters or interaction begins]\n- [7-10s: Building beat with clear physical action]\n- [10-12s: Closing beat aligned with final line delivery]\n\nDialogue:\n- [Speaker]: \"[Opening line building toward the message]\"\n- [Speaker]: \"[Development line if needed]\"\n- [Speaker]: \"[Final line: the original advertising copy verbatim or clear echo]\"\n\nBackground Sound:\n[Diegetic ambient audio only. Example: soft fabric rustle, distant traffic hum, coffee cup set down. No copyrighted music references.]\n\nMODERATION COMPLIANCE:\nAvoid superlative claims and absolute guarantees.\nNo medical or health treatment implications.\nNo before-and-after transformation visuals.\nNo text overlays or brand logos in scene descriptions.\nUse generic product terms rather than brand names.\nDescribe people using neutral terms like person or individual.\nNo violent, sexual, or controversial content.\n\nEXAMPLE OUTPUT:\n\nInput copy: Feel the difference.\n\nStyle: Warm lifestyle commercial with soft natural lighting and intimate framing, shot in the style of modern skincare advertising.\n\nA person in their early 30s sits at a sunlit vanity in a minimal bedroom. Morning light streams through sheer curtains, casting soft shadows. They wear a simple white robe. A sleek product container rests on the vanity surface. The room features warm wood tones and fresh white linens.\n\nCinematography:\nCamera shot: Medium close-up, eye level\nLens: 50mm, shallow depth of field isolating subject from background\nCamera motion: Slow push-in over 12 seconds\nLighting: Soft natural key from window camera right, warm bounce from vanity mirror\nPalette anchors: Cream, soft gold, warm white, pale rose, natural wood\nMood: Quiet revelation, gentle confidence\n\nActions:\n- 0-4s: Person touches their cheek thoughtfully, slight furrow in brow suggesting past dissatisfaction\n- 4-7s: They reach for the product, fingers gliding across the container surface\n- 7-10s: Application moment with eyes closing briefly, expression softening\n- 10-12s: Eyes open, slight smile forms, hand rests contentedly on cheek\n\nDialogue:\n- Person (reflective): \"I used to think they were all the same.\"\n- Person (with dawning recognition): \"Then I tried this.\"\n- Person (with quiet certainty): \"Feel the difference.\"\n\nBackground Sound:\nSoft morning ambience, distant birdsong, gentle fabric movement, faint breath."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2944,784],"id":"17cb4e6f-b2e2-4705-ab4a-0f28c526cce3","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=# ğŸš€ [Sora 2 Pro Pre-visualization] Nano Banana Pro í†µí•© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (Product Keep Mode)\n\n## 1. í˜ë¥´ì†Œë‚˜ (Persona)\në‹¹ì‹ ì€ **Nano Banana Pro ìƒí’ˆ ë³´ì¡´ ì „ë¬¸ê°€(Product Preservation Specialist)**ì´ì **ì‹œìŠ¤í…œ í†µí•© ì „ë¬¸ê°€**ì…ë‹ˆë‹¤.\në‹¹ì‹ ì˜ ìµœìš°ì„  ëª©í‘œëŠ” **ì…ë ¥ëœ ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€ì˜ í˜•íƒœì™€ ë””í…Œì¼ì„ 100% ìœ ì§€**í•˜ë©´ì„œ, ë°°ê²½ê³¼ ë¶„ìœ„ê¸°ë§Œ ì™„ë²½í•˜ê²Œ êµì²´í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë™ì‹œì— ìë™í™” ì‹œìŠ¤í…œì˜ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ **í°ë”°ì˜´í‘œ(`\"`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n## 2. ë§¥ë½ (Context)\n- **Input Source:** ì‚¬ìš©ìëŠ” 'ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€'ë¥¼ ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œ ìƒíƒœì…ë‹ˆë‹¤.\n- **Critical Goal:** ìƒì„±ëœ ì´ë¯¸ì§€ëŠ” ì›ë³¸ ìƒí’ˆ(íŒ¨í‚¤ì§€, ë¡œê³ , í˜•íƒœ)ì´ ì™œê³¡ ì—†ì´ ê·¸ëŒ€ë¡œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. AIê°€ ìƒí’ˆì„ ìƒˆë¡œ ì°½ì‘(Re-imagine)í•˜ê²Œ ë§Œë“¤ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.\n- **Safety Protocol:** í­ë ¥, ìœ í˜ˆ, ì„ ì •ì„± ìš”ì†Œë¥¼ ë¯¸í•™ì ì¸ í‘œí˜„ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì •ì œ(Sanitization)í•©ë‹ˆë‹¤.\n- **System Constraint:** ì¶œë ¥ ë¬¸ìì—´ì— **í°ë”°ì˜´í‘œ(`\"`)ê°€ í¬í•¨ë˜ë©´ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.**\n\n## 3. ì„ë¬´ (Task)\nì‚¬ìš©ì ì…ë ¥(ìƒí’ˆ, ë¬¸êµ¬, ì»¨ì…‰)ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì„ ê±°ì³ **ì˜¤ì§ ìµœì¢… ì˜ë¬¸ í”„ë¡¬í”„íŠ¸**ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\n**Step 1: Product Anchoring (ìƒí’ˆ ê³ ì •)**\n- ìƒí’ˆì„ ë¬˜ì‚¬í•  ë•Œ ê³¼ë„í•œ ìˆ˜ì‹ì–´(ì˜ˆ: 'í™˜ìƒì ì¸ ëª¨ì–‘ì˜', 'ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì˜')ë¥¼ ì œê±°í•©ë‹ˆë‹¤.\n- ëŒ€ì‹  ìƒí’ˆì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë„ë¡ `maintaining original product details`, `unchanged source subject` í‚¤ì›Œë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.\n\n**Step 2: Background & Atmosphere Design (ë°°ê²½ ì„¤ê³„)**\n- ìƒí’ˆì€ ê³ ì •í•˜ê³ , **ì¡°ëª…(Lighting)**ê³¼ **ë°°ê²½(Environment)** ë³€í™”ì— ì§‘ì¤‘í•˜ì—¬ ì»¨ì…‰ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n**Step 3: Safety & Syntax Check**\n- ìœ„í—˜ ë‹¨ì–´ ì •ì œ ë° **í°ë”°ì˜´í‘œ(`\"`) ì œê±°** ì—¬ë¶€ë¥¼ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.\n\n## 4. ê·œì¹™ (Rules)\nğŸ”´ **Strict Negative Constraints (ì ˆëŒ€ ê¸ˆì§€):**\n- **Product Distortion (ìƒí’ˆ ì™œê³¡ ê¸ˆì§€):** ìƒí’ˆì˜ ìƒ‰ìƒ, í˜•íƒœ, ë¡œê³ ë¥¼ ë°”ê¾¸ëŠ” í˜•ìš©ì‚¬ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **Double Quotes (`\"`) ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€:** í…ìŠ¤íŠ¸ ì§€ì‹œë¥¼ í¬í•¨í•œ ëª¨ë“  ê³³ì—ì„œ ì•„ìŠ¤í‚¤ ë¬¸ì `\"`ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **ì¡ë‹´ ë° ì„œì‹ ê¸ˆì§€:** ì˜¤ì§ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n\nğŸŸ¢ **Must Do (í•„ìˆ˜ ì¤€ìˆ˜):**\n- **Preservation Keywords:** í”„ë¡¬í”„íŠ¸ ì´ˆë°˜ì— `(exact source product:1.5)`, `(unchanged subject)` ë“±ì„ í¬í•¨í•˜ì—¬ ëª¨ë¸ì´ ì›ë³¸ì„ ì°¸ì¡°í•˜ë„ë¡ ê°•ì œí•˜ì‹­ì‹œì˜¤.\n- **Text Rendering:** í…ìŠ¤íŠ¸ ì‚½ì… ì‹œ ë°˜ë“œì‹œ **`text: 'ë¬¸êµ¬'`** í˜•ì‹(ì‘ì€ë”°ì˜´í‘œ)ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n- **Visual Focus:** \"A product placed in [Concept Background]\" í˜•ì‹ì„ ë”°ë¥´ì‹­ì‹œì˜¤.\n\n## 5. ì˜ˆì‹œ (Examples)\n\n**(Input)**\nProduct: ë¹„íƒ€ë¯¼ ìŒë£Œ\nCopy: í™œë ¥ ì¶©ì „\nConcept: ìš°ì£¼ ì†ì—ì„œ ì—ë„ˆì§€ê°€ í„°ì§€ëŠ” ëŠë‚Œ\n\n**(Internal Thought - do not output)**\n* ìƒí’ˆì„ ìƒˆë¡œ ê·¸ë¦¬ë©´ ì•ˆ ë¨. 'ìš°ì£¼'ì™€ 'ì—ë„ˆì§€'ëŠ” ë°°ê²½ìœ¼ë¡œë§Œ ì²˜ë¦¬í•´ì•¼ í•¨.\n* 'í„°ì§€ëŠ”' -> 'Energy burst' (ì•ˆì „ í‘œí˜„).\n* í°ë”°ì˜´í‘œ ê¸ˆì§€ -> text: 'í™œë ¥ ì¶©ì „'\n\n**(Output)**\nA photo of (exact source product:1.5) centered, maintaining original packaging details, unchanged subject, background is a vast cosmic space with abstract visual metaphor of vibrant energy bursting behind the bottle, cinematic lighting reflecting on the product edges, floating in zero gravity, text: 'í™œë ¥ ì¶©ì „' written in futuristic neon font near the product, 85mm lens, high fidelity, 4k, commercial product photography."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2944,496],"id":"3504c0e2-3b37-4820-a714-4df04fcc5125","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"}],"connections":{"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"ë³‘í•©1","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c7e84532-46ca-46ed-b74f-3ab3636c13d9","activeVersionId":"6507446b-a14e-438d-bbcf-bc4352d654d5","triggerCount":1,"shared":[{"updatedAt":"2025-11-17T08:34:12.567Z","createdAt":"2025-11-17T08:34:12.567Z","role":"workflow:owner","workflowId":"yxpmIOYHIKxcqsPM","projectId":"8U6kAzysui9C06Wt"}],"activeVersion":{"updatedAt":"2025-12-10T14:31:58.918Z","createdAt":"2025-12-10T14:31:58.918Z","versionId":"6507446b-a14e-438d-bbcf-bc4352d654d5","workflowId":"yxpmIOYHIKxcqsPM","nodes":[{"parameters":{"command":"=#!/bin/bash\nmkdir -p /tmp/n8n_video"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-3616,496],"id":"2e264951-2db5-42dd-b646-96f19f599b0b","name":"Execute Command"},{"parameters":{"httpMethod":"POST","path":"70980457-f61e-42f1-84c3-5245f1438435","authentication":"basicAuth","responseMode":"responseNode","options":{"responseHeaders":{"entries":[{"name":"selected_ad_copy","value":"selectedCopy"}]}}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-4400,496],"id":"6b01b8aa-8e09-42b0-99a2-67a16b1f87d2","name":"Webhook","webhookId":"70980457-f61e-42f1-84c3-5245f1438435","credentials":{"httpBasicAuth":{"id":"rdmVeKP49f1NNVx4","name":"ssap"}}},{"parameters":{"respondWith":"text","responseBody":"Response Body: {\"success\": true, \"message\": \"Workflow started\"}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-4192,496],"id":"b61f4db0-a4a3-4ad9-bf2a-d86ca83974d4","name":"Respond to Webhook1"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"ad_copy_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-3808,496],"id":"113649cf-d1b9-4100-9eea-8b99765891cb","name":"Update: Ad Copy Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"assignments":{"assignments":[{"id":"e5abfd5a-018d-4202-a9d6-f0de32e69ac2","name":"ad_video_id","value":"={{ $json.body.ad_video_id }}","type":"string"},{"id":"624ee5fd-47fe-4634-8082-f2915fe231ca","name":"product_image_id","value":"={{ $json.body.product_image_id }}","type":"string"},{"id":"a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf","name":"product_info_id","value":"={{ $json.body.product_info_id }}","type":"string"},{"id":"db923240-5d37-42e1-b429-9561af431552","name":"selected_ad_copy","value":"={{ $json.body.selected_ad_copy }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-4000,496],"id":"74cc808a-4e1c-4617-9cb3-9d72c831d65f","name":"Extract Workflow Data"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/videos","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"=model","value":"sora-2-pro"},{"name":"prompt","value":"={{ $json.prompt }}"},{"name":"size","value":"720x1280"},{"name":"seconds","value":"12"},{"parameterType":"formBinaryData","name":"input_reference","inputDataFieldName":"image"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-224,224],"id":"8e38de23-0b08-4d78-87a6-60a49707b095","name":"ì˜ìƒìƒì„±","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-720,224],"id":"49e5c92c-350d-44ec-94f0-4d5c6a3eb702","name":"ë³‘í•©1"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"imageData","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-2512,256],"id":"105a3730-11ee-4f42-919e-4b0454446f50","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"imageBase64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-1296,240],"id":"b74a7368-33e2-47e4-a576-c61c650d9761","name":"Convert to File"},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1648,240],"id":"61222c4f-f39f-4aa2-9d0e-a1aa0cc09ee1","name":"ì´ë¯¸ì§€ìƒì„±","credentials":{"httpHeaderAuth":{"id":"6jhgw5shzuU47KaR","name":"ë‚˜ë…¸ë°”ë‚˜ë‚˜api"}}},{"parameters":{"amount":1.5,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[32,224],"id":"41be2291-a712-4337-88ff-b3a50b7b9d10","name":"Wait1","webhookId":"d6e65ca4-04a5-47ee-8d2e-e35ee4f96b9a"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2176,240],"id":"8c0e9583-edd7-46a6-a728-868b8b9f6642","name":"Merge"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ìƒíƒœí™•ì¸').item.json.id }}/content?variant=video","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[928,192],"id":"7c61efe2-547c-4f5f-9f41-782928af633b","name":"ì˜ìƒë‹¤ìš´","credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1472,240],"id":"ed561334-71b0-4907-86a0-8b699928ec0c","name":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"},{"parameters":{"assignments":{"assignments":[{"id":"a073daae-037e-4d8f-bc0b-2761d1de41bc","name":"imageUrl","value":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2928,256],"id":"658fed42-f3a9-4d32-a9a8-613b31d47892","name":"ì´ë¯¸ì§€ URL ìƒì„±"},{"parameters":{"url":"https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3120,256],"id":"cbe9f3ce-19c2-4f62-8fb7-993b0ec5c5a0","name":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","credentials":{"httpHeaderAuth":{"id":"ut6EdIIx3u0Y1IWO","name":"supabase-api"}}},{"parameters":{"url":"={{ $json.imageUrl }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imageData"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-2720,256],"id":"9e4f2a06-9000-40a0-be11-7e83488fac4b","name":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"},{"parameters":{"modelName":"models/gemini-3-pro-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-3152,688],"id":"14e1373a-756d-4c65-8f7d-bd998c7325ce","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"ubMkEGpynomm8EIy","name":"êµ¬ê¸€api"}}},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1824,240],"id":"97bf7f95-3ddd-4f59-9633-13760e11baf3","name":"Wait2","webhookId":"f1d06255-7fe4-4ed5-9cb5-83038a75daf6"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-64,16],"id":"ca507db0-0deb-41ab-a05d-6b72631ec92c","name":"Wait3","webhookId":"a2fa57d4-ca0e-431c-afdf-a39639177c8a"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"image_refinement"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-2000,240],"id":"d9c6efe9-08f3-4904-bb7e-2c256111762e","name":"Update: Image Refinement","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"processing"},{"fieldId":"progress_stage","fieldValue":"video_generation"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-256,16],"id":"5d6312a6-2701-4e16-8bf1-5b822f4c368e","name":"Update: Video Generation","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Extract Workflow Data').item.json.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"failed"},{"fieldId":"progress_stage","fieldValue":"error"},{"fieldId":"error_message","fieldValue":"={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[928,352],"id":"87f64fd9-b9fc-4f1a-a772-a8c3e228000f","name":"Update a row","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"method":"POST","url":"=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"video/mp4"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1152,192],"id":"52bbe2b7-beb8-445e-bdb5-3590b393f9f0","name":"supabase upload","credentials":{"httpHeaderAuth":{"id":"WlXAhlhpb1USlWgq","name":"supabase upload"}}},{"parameters":{"jsCode":"const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1360,192],"id":"87a48527-c9e4-46cd-b4f5-1e9172c3d31d","name":"ì‘ë‹µ ì²˜ë¦¬ Code"},{"parameters":{"operation":"update","tableId":"ad_videos","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Webhook').first().json.body.ad_video_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"status","fieldValue":"=completed"},{"fieldId":"video_url","fieldValue":"={{ $('ì‘ë‹µ ì²˜ë¦¬ Code').item.json.publicUrl }}"},{"fieldId":"progress_stage","fieldValue":"=completed"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[1568,192],"id":"3c3ca56a-1b72-4bec-8d33-ba1be0eb53af","name":"Update: finish","credentials":{"supabaseApi":{"id":"99HHV0pOXFNfj883","name":"Supabase-ad-update"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : ë³‘í•©ëœ ë°ì´í„°ì—ì„œ í”„ë¡¬í”„íŠ¸ì™€ ì´ë¯¸ì§€ ì¶”ì¶œ\n// ============================================\n\nconst items = $input.all();\n\nconsole.log('=== ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet promptText = '';\nlet imageData = null;\n\nfor (const item of items) {\n  console.log('ì•„ì´í…œ JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1 ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.json && item.json.output) {\n    promptText = item.json.output;\n    console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬, ê¸¸ì´:', promptText.length);\n  }\n  \n  // Binary ì´ë¯¸ì§€ ì°¾ê¸° (Convert to File ë…¸ë“œì˜ ì¶œë ¥)\n  if (item.binary && item.binary.data) {\n    imageData = item.binary.data;\n    console.log('âœ… ì´ë¯¸ì§€ Binary ë°œê²¬');\n  }\n}\n\nif (!promptText) {\n  throw new Error('âŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nif (!imageData) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nconsole.log('âœ… ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ');\n\n// ============================================\n// âœ… í•µì‹¬ ìˆ˜ì •: pairedItem ì¶”ê°€!\n// ============================================\nreturn {\n  json: {\n    prompt: promptText + \", realistic 12-second cinematic video with synchronized audio and sound effects\"\n  },\n  binary: {\n    image: imageData\n  },\n  pairedItem: { item: 0 }  // ğŸ‘ˆ ì´ ì¤„ ì¶”ê°€!\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-480,224],"id":"186af307-3a6b-448c-b77f-5fbf32f94991","name":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„"},{"parameters":{"operation":"resize","width":720,"height":1280,"resizeOption":"ignoreAspectRatio","options":{}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-1104,240],"id":"18daf4b5-f068-4e2b-9402-6a5312a29b27","name":"Edit Image"},{"parameters":{"url":"=https://api.openai.com/v1/videos/{{ $('ì˜ìƒìƒì„±').item.json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,224],"id":"6f101f84-df0a-4486-bec9-5ee302c7f0c9","name":"ìƒíƒœí™•ì¸","retryOnFail":true,"maxTries":2,"credentials":{"httpHeaderAuth":{"id":"FiTUhq46tP9I66EU","name":"open ai api"}}},{"parameters":{"jsCode":"// ============================================\n// ğŸ¯ ëª©ì : Sora 2 API ìƒíƒœ í™•ì¸ ë° ë¶„ê¸° ì²˜ë¦¬\n// ============================================\n\nconst response = $input.first().json;\nconst status = (response.status || '').toLowerCase();\nconst progress = response.progress || 0;\n\nconsole.log('=== Sora 2 API ìƒíƒœ í™•ì¸ ===');\nconsole.log('Video ID:', response.id);\nconsole.log('Status:', status);\nconsole.log('Progress:', progress + '%');\n\n// ì™„ë£Œ ìƒíƒœ ëª©ë¡\nconst completedStatuses = ['completed', 'complete', 'succeeded', 'success', 'done'];\nconst failedStatuses = ['failed', 'error', 'cancelled', 'expired'];\nconst pendingStatuses = ['queued', 'in_progress', 'processing', 'generating', 'pending'];\n\nif (completedStatuses.includes(status)) {\n  console.log('âœ… ì˜ìƒ ìƒì„± ì™„ë£Œ!');\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"true\",\n      isFailed: \"false\",\n      shouldRetry: \"false\"\n    }\n  }];\n} else if (failedStatuses.includes(status)) {\n  console.log('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨:', response.error?.message || status);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"true\",\n      shouldRetry: \"false\",\n      errorMessage: response.error?.message || `ì˜ìƒ ìƒì„± ì‹¤íŒ¨: ${status}`\n    }\n  }];\n} else {\n  // ì•„ì§ ì²˜ë¦¬ ì¤‘\n  console.log(`â³ ì˜ìƒ ìƒì„± ì¤‘: ${status} (${progress}%)`);\n  return [{\n    json: {\n      ...response,\n      isCompleted: \"false\",\n      isFailed: \"false\",\n      shouldRetry: \"true\"\n    }\n  }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[432,224],"id":"708f8ef3-cd46-4860-9591-0c4ac0158708","name":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.isCompleted }}","rightValue":"true","operator":{"type":"string","operation":"equals"},"id":"77c9c1ea-a499-4622-9e24-99037296ca93"}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"80abcb97-f73e-4577-8f51-7d21f8cee5f1","leftValue":"={{ $json.isFailed }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bf996668-ecd3-4870-98f9-69e37fda9d75","leftValue":"={{ $json.shouldRetry }}","rightValue":"true","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[624,208],"id":"9e8868f8-b87d-48d8-8cfb-f47248d0fecf","name":"Switch"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=You are an elite advertising creative director and Sora 2 Pro API specialist. Your mission is transforming short advertising copy into compelling video narratives optimized for Sora 2 Pro generation.\n\nTECHNICAL CONTEXT:\nTarget format: Vertical 9:16 (720x1280) for social media\nDuration: 12 seconds (note: API parameter \"seconds\" controls this, not prose)\nTarget audience: Adults 20-40 on social media platforms\nThe API parameters (model, size, seconds) are set externally. Your output controls only the creative content.\n\nINPUT VARIABLES:\n{{INPUT_COPY}} - The short advertising copy to expand\n{{PRODUCT_IMAGE_REFERENCE}} - Reference image URL for visual anchoring (optional)\n\nCRITICAL OUTPUT RULES:\nOutput only plain text prompt following the exact structure below.\nNever include markdown, code blocks, quotation marks, backticks, or formatting symbols.\nNever include explanations, comments, or meta-text.\nNever request duration or resolution in prose (these are API parameters).\nOutput must be immediately usable in n8n workflow without editing.\n\nADVERTISING COPY ANALYSIS PROCESS:\n\nStep 1 - Deconstruct the copy\nIdentify the core emotion: desire, trust, excitement, comfort, or aspiration.\nIdentify the implied promise or benefit hidden in the words.\nIdentify the psychological trigger: fear of missing out, social proof, self-improvement, or convenience.\nIdentify the intended call to action even if not explicitly stated.\n\nStep 2 - Expand into 12-second narrative arc\nBeginning (0-4s): Establish relatable context or problem.\nMiddle (4-9s): Introduce product as natural solution with building anticipation.\nEnd (9-12s): Deliver core message with emotional impact. Original copy appears here.\n\nStep 3 - Apply narrative framework based on copy type\n\nFor quality or premium value copy:\nOpen with moment of ordinary frustration or settling for less.\nTransition to discovery of something different.\nBuild through sensory details.\nClimax with satisfaction of true quality.\nClose with original copy as statement of newfound standard.\n\nFor transformation or results copy:\nOpen with subtle hint of before state without explicit comparison.\nShow journey moment of taking action.\nReveal confident after state through body language and environment.\nDeliver original copy as empowering declaration.\n\nFor convenience or simplicity copy:\nOpen with chaos or complexity of alternatives.\nIntroduce product as breath of fresh air.\nShow effortless interaction and immediate relief.\nClose with original copy as satisfied realization.\n\nFor emotion or lifestyle copy:\nOpen with atmospheric establishing moment.\nBuild sensory immersion in desired lifestyle.\nConnect product naturally to this aspirational world.\nDeliver original copy as emotional truth of this moment.\n\nREQUIRED OUTPUT STRUCTURE:\n\nStyle: [Cinematic style matching emotional tone. Example: warm lifestyle commercial, intimate documentary, aspirational fashion film]\n\n[Prose scene description: Describe setting, subject, wardrobe, props, weather, and atmosphere. Reference product image as visual anchor if provided. Keep description focused on visible, concrete details.]\n\nCinematography:\nCamera shot: [framing and angle, e.g., medium close-up, slight low angle]\nLens: [focal length 24-85mm, depth of field]\nCamera motion: [single clear movement, e.g., slow dolly-in, gentle arc left]\nLighting: [quality, direction, color temperature, e.g., soft window light camera left, warm practical fill]\nPalette anchors: [3-5 specific colors, e.g., amber, cream, soft navy]\nMood: [overall tone, e.g., intimate anticipation, quiet confidence]\n\nActions:\n- [0-4s: Opening beat with specific gesture or movement]\n- [4-7s: Development beat as product enters or interaction begins]\n- [7-10s: Building beat with clear physical action]\n- [10-12s: Closing beat aligned with final line delivery]\n\nDialogue:\n- [Speaker]: \"[Opening line building toward the message]\"\n- [Speaker]: \"[Development line if needed]\"\n- [Speaker]: \"[Final line: the original advertising copy verbatim or clear echo]\"\n\nBackground Sound:\n[Diegetic ambient audio only. Example: soft fabric rustle, distant traffic hum, coffee cup set down. No copyrighted music references.]\n\nMODERATION COMPLIANCE:\nAvoid superlative claims and absolute guarantees.\nNo medical or health treatment implications.\nNo before-and-after transformation visuals.\nNo text overlays or brand logos in scene descriptions.\nUse generic product terms rather than brand names.\nDescribe people using neutral terms like person or individual.\nNo violent, sexual, or controversial content.\n\nEXAMPLE OUTPUT:\n\nInput copy: Feel the difference.\n\nStyle: Warm lifestyle commercial with soft natural lighting and intimate framing, shot in the style of modern skincare advertising.\n\nA person in their early 30s sits at a sunlit vanity in a minimal bedroom. Morning light streams through sheer curtains, casting soft shadows. They wear a simple white robe. A sleek product container rests on the vanity surface. The room features warm wood tones and fresh white linens.\n\nCinematography:\nCamera shot: Medium close-up, eye level\nLens: 50mm, shallow depth of field isolating subject from background\nCamera motion: Slow push-in over 12 seconds\nLighting: Soft natural key from window camera right, warm bounce from vanity mirror\nPalette anchors: Cream, soft gold, warm white, pale rose, natural wood\nMood: Quiet revelation, gentle confidence\n\nActions:\n- 0-4s: Person touches their cheek thoughtfully, slight furrow in brow suggesting past dissatisfaction\n- 4-7s: They reach for the product, fingers gliding across the container surface\n- 7-10s: Application moment with eyes closing briefly, expression softening\n- 10-12s: Eyes open, slight smile forms, hand rests contentedly on cheek\n\nDialogue:\n- Person (reflective): \"I used to think they were all the same.\"\n- Person (with dawning recognition): \"Then I tried this.\"\n- Person (with quiet certainty): \"Feel the difference.\"\n\nBackground Sound:\nSoft morning ambience, distant birdsong, gentle fabric movement, faint breath."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2944,784],"id":"17cb4e6f-b2e2-4705-ab4a-0f28c526cce3","name":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸"},{"parameters":{"promptType":"define","text":"={{ $('Extract Workflow Data').item.json.selected_ad_copy }}","options":{"systemMessage":"=# ğŸš€ [Sora 2 Pro Pre-visualization] Nano Banana Pro í†µí•© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (Product Keep Mode)\n\n## 1. í˜ë¥´ì†Œë‚˜ (Persona)\në‹¹ì‹ ì€ **Nano Banana Pro ìƒí’ˆ ë³´ì¡´ ì „ë¬¸ê°€(Product Preservation Specialist)**ì´ì **ì‹œìŠ¤í…œ í†µí•© ì „ë¬¸ê°€**ì…ë‹ˆë‹¤.\në‹¹ì‹ ì˜ ìµœìš°ì„  ëª©í‘œëŠ” **ì…ë ¥ëœ ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€ì˜ í˜•íƒœì™€ ë””í…Œì¼ì„ 100% ìœ ì§€**í•˜ë©´ì„œ, ë°°ê²½ê³¼ ë¶„ìœ„ê¸°ë§Œ ì™„ë²½í•˜ê²Œ êµì²´í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë™ì‹œì— ìë™í™” ì‹œìŠ¤í…œì˜ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ **í°ë”°ì˜´í‘œ(`\"`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**\n\n## 2. ë§¥ë½ (Context)\n- **Input Source:** ì‚¬ìš©ìëŠ” 'ì›ë³¸ ìƒí’ˆ ì´ë¯¸ì§€'ë¥¼ ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œ ìƒíƒœì…ë‹ˆë‹¤.\n- **Critical Goal:** ìƒì„±ëœ ì´ë¯¸ì§€ëŠ” ì›ë³¸ ìƒí’ˆ(íŒ¨í‚¤ì§€, ë¡œê³ , í˜•íƒœ)ì´ ì™œê³¡ ì—†ì´ ê·¸ëŒ€ë¡œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. AIê°€ ìƒí’ˆì„ ìƒˆë¡œ ì°½ì‘(Re-imagine)í•˜ê²Œ ë§Œë“¤ë©´ ì‹¤íŒ¨ì…ë‹ˆë‹¤.\n- **Safety Protocol:** í­ë ¥, ìœ í˜ˆ, ì„ ì •ì„± ìš”ì†Œë¥¼ ë¯¸í•™ì ì¸ í‘œí˜„ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì •ì œ(Sanitization)í•©ë‹ˆë‹¤.\n- **System Constraint:** ì¶œë ¥ ë¬¸ìì—´ì— **í°ë”°ì˜´í‘œ(`\"`)ê°€ í¬í•¨ë˜ë©´ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.**\n\n## 3. ì„ë¬´ (Task)\nì‚¬ìš©ì ì…ë ¥(ìƒí’ˆ, ë¬¸êµ¬, ì»¨ì…‰)ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ë¶€ ì‚¬ê³  ê³¼ì •ì„ ê±°ì³ **ì˜¤ì§ ìµœì¢… ì˜ë¬¸ í”„ë¡¬í”„íŠ¸**ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤.\n\n**Step 1: Product Anchoring (ìƒí’ˆ ê³ ì •)**\n- ìƒí’ˆì„ ë¬˜ì‚¬í•  ë•Œ ê³¼ë„í•œ ìˆ˜ì‹ì–´(ì˜ˆ: 'í™˜ìƒì ì¸ ëª¨ì–‘ì˜', 'ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì˜')ë¥¼ ì œê±°í•©ë‹ˆë‹¤.\n- ëŒ€ì‹  ìƒí’ˆì´ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë„ë¡ `maintaining original product details`, `unchanged source subject` í‚¤ì›Œë“œë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ í¬í•¨í•©ë‹ˆë‹¤.\n\n**Step 2: Background & Atmosphere Design (ë°°ê²½ ì„¤ê³„)**\n- ìƒí’ˆì€ ê³ ì •í•˜ê³ , **ì¡°ëª…(Lighting)**ê³¼ **ë°°ê²½(Environment)** ë³€í™”ì— ì§‘ì¤‘í•˜ì—¬ ì»¨ì…‰ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n**Step 3: Safety & Syntax Check**\n- ìœ„í—˜ ë‹¨ì–´ ì •ì œ ë° **í°ë”°ì˜´í‘œ(`\"`) ì œê±°** ì—¬ë¶€ë¥¼ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.\n\n## 4. ê·œì¹™ (Rules)\nğŸ”´ **Strict Negative Constraints (ì ˆëŒ€ ê¸ˆì§€):**\n- **Product Distortion (ìƒí’ˆ ì™œê³¡ ê¸ˆì§€):** ìƒí’ˆì˜ ìƒ‰ìƒ, í˜•íƒœ, ë¡œê³ ë¥¼ ë°”ê¾¸ëŠ” í˜•ìš©ì‚¬ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **Double Quotes (`\"`) ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€:** í…ìŠ¤íŠ¸ ì§€ì‹œë¥¼ í¬í•¨í•œ ëª¨ë“  ê³³ì—ì„œ ì•„ìŠ¤í‚¤ ë¬¸ì `\"`ë¥¼ ì“°ì§€ ë§ˆì‹­ì‹œì˜¤.\n- **ì¡ë‹´ ë° ì„œì‹ ê¸ˆì§€:** ì˜¤ì§ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.\n\nğŸŸ¢ **Must Do (í•„ìˆ˜ ì¤€ìˆ˜):**\n- **Preservation Keywords:** í”„ë¡¬í”„íŠ¸ ì´ˆë°˜ì— `(exact source product:1.5)`, `(unchanged subject)` ë“±ì„ í¬í•¨í•˜ì—¬ ëª¨ë¸ì´ ì›ë³¸ì„ ì°¸ì¡°í•˜ë„ë¡ ê°•ì œí•˜ì‹­ì‹œì˜¤.\n- **Text Rendering:** í…ìŠ¤íŠ¸ ì‚½ì… ì‹œ ë°˜ë“œì‹œ **`text: 'ë¬¸êµ¬'`** í˜•ì‹(ì‘ì€ë”°ì˜´í‘œ)ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n- **Visual Focus:** \"A product placed in [Concept Background]\" í˜•ì‹ì„ ë”°ë¥´ì‹­ì‹œì˜¤.\n\n## 5. ì˜ˆì‹œ (Examples)\n\n**(Input)**\nProduct: ë¹„íƒ€ë¯¼ ìŒë£Œ\nCopy: í™œë ¥ ì¶©ì „\nConcept: ìš°ì£¼ ì†ì—ì„œ ì—ë„ˆì§€ê°€ í„°ì§€ëŠ” ëŠë‚Œ\n\n**(Internal Thought - do not output)**\n* ìƒí’ˆì„ ìƒˆë¡œ ê·¸ë¦¬ë©´ ì•ˆ ë¨. 'ìš°ì£¼'ì™€ 'ì—ë„ˆì§€'ëŠ” ë°°ê²½ìœ¼ë¡œë§Œ ì²˜ë¦¬í•´ì•¼ í•¨.\n* 'í„°ì§€ëŠ”' -> 'Energy burst' (ì•ˆì „ í‘œí˜„).\n* í°ë”°ì˜´í‘œ ê¸ˆì§€ -> text: 'í™œë ¥ ì¶©ì „'\n\n**(Output)**\nA photo of (exact source product:1.5) centered, maintaining original packaging details, unchanged subject, background is a vast cosmic space with abstract visual metaphor of vibrant energy bursting behind the bottle, cinematic lighting reflecting on the product edges, floating in zero gravity, text: 'í™œë ¥ ì¶©ì „' written in futuristic neon font near the product, 85mm lens, high fidelity, 4k, commercial product photography."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-2944,496],"id":"3504c0e2-3b37-4820-a714-4df04fcc5125","name":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"}],"connections":{"Execute Command":{"main":[[{"node":"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€","type":"main","index":0},{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"main","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Respond to Webhook1":{"main":[[{"node":"Extract Workflow Data","type":"main","index":0}]]},"Update: Ad Copy Generation":{"main":[[{"node":"Execute Command","type":"main","index":0}]]},"Extract Workflow Data":{"main":[[{"node":"Update: Ad Copy Generation","type":"main","index":0}]]},"ì˜ìƒìƒì„±":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"ë³‘í•©1":{"main":[[{"node":"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Convert to File":{"main":[[{"node":"Edit Image","type":"main","index":0}]]},"ì´ë¯¸ì§€ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"ìƒíƒœí™•ì¸","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Update: Image Refinement","type":"main","index":0}]]},"ì˜ìƒë‹¤ìš´":{"main":[[{"node":"supabase upload","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"ì´ë¯¸ì§€ URL ìƒì„±":{"main":[[{"node":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ","type":"main","index":0}]]},"ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€":{"main":[[{"node":"ì´ë¯¸ì§€ URL ìƒì„±","type":"main","index":0}]]},"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0},{"node":"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸","type":"ai_languageModel","index":0}]]},"Wait2":{"main":[[{"node":"ì´ë¯¸ì§€ìƒì„±","type":"main","index":0}]]},"Update: Image Refinement":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Update: Video Generation":{"main":[[{"node":"Wait3","type":"main","index":0}]]},"supabase upload":{"main":[[{"node":"ì‘ë‹µ ì²˜ë¦¬ Code","type":"main","index":0}]]},"ì‘ë‹µ ì²˜ë¦¬ Code":{"main":[[{"node":"Update: finish","type":"main","index":0}]]},"ì´ì§€ë¯¸íŒŒì¼ì¤€ë¹„":{"main":[[{"node":"Update: Video Generation","type":"main","index":0},{"node":"ì˜ìƒìƒì„±","type":"main","index":0}]]},"Edit Image":{"main":[[{"node":"ë³‘í•©1","type":"main","index":1}]]},"ìƒíƒœí™•ì¸":{"main":[[{"node":"ì™„ë£Œ ì—¬ë¶€ í™•ì¸","type":"main","index":0}]]},"ì™„ë£Œ ì—¬ë¶€ í™•ì¸":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[{"node":"ì˜ìƒë‹¤ìš´","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]},"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"ë³‘í•©1","type":"main","index":0}]]},"ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸":{"main":[[{"node":"Merge","type":"main","index":0}]]}},"authors":"Jang Hwan Lee","name":null,"description":null,"autosaved":false},"tags":[]}],"nextCursor":null}