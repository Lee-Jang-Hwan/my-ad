{
  "name": "AI ê´‘ê³  ì˜ìƒ ìƒì„±ê¸°",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// ë³‘í•©2ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\n\n// ê´‘ê³ ë¬¸êµ¬ë¥¼ ì§ì ‘ ê°€ì ¸ì˜¤ê¸° (Google Sheetsì—ì„œ)\n// ë˜ëŠ” ê³ ì • í…ìŠ¤íŠ¸\nlet adText = 'ì„¸ìƒì˜ ëª¨ë“  ì•„ì¹¨ì„ ê¹¨ìš°ë‹¤'; // â† ì„ì‹œ í…ŒìŠ¤íŠ¸ìš©\n\n// ë˜ëŠ” INPUTì—ì„œ ì°¾ê¸°\nfor (const item of items) {\n  if (item.json && item.json.output) {\n    const output = item.json.output;\n    if (typeof output === 'string' && output.length < 100) {\n      adText = output;\n      break;\n    }\n  }\n}\n\n// SRT ìë§‰ ìƒì„±\nconst srtContent = `1\n00:00:01,000 --> 00:00:08,000\n${adText}\n`;\n\nconst srtBuffer = Buffer.from(srtContent, 'utf-8');\nconst srtBase64 = srtBuffer.toString('base64');\n\nreturn {\n  json: {\n    subtitleText: adText,\n    srtContent: srtContent\n  },\n  binary: {\n    subtitle: {\n      data: srtBase64,\n      mimeType: 'text/plain',\n      fileName: 'subtitle.srt',\n      fileExtension: 'srt'\n    }\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1664,
        80
      ],
      "id": "180071a8-c561-4fc9-9343-1024af50b865",
      "name": "ìë§‰ SRT ìƒì„±"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/veo-3.1-generate-preview:predictLongRunning",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyALODWPyq1GixpyYUhOLKGmgEzxQVG5nx4"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"instances\": [\n    {\n      \"prompt\": \"{{ $json.promptText }}\",\n      \"image\": {\n        \"bytesBase64Encoded\": \"{{ $json.imageBase64 }}\",\n        \"mimeType\": \"image/png\"\n      }\n    }\n  ],\n  \"parameters\": {\n    \"aspectRatio\": \"9:16\",\n    \"resolution\": \"720p\",\n    \"durationSeconds\": 8,\n    \"sampleCount\": 1\n  }\n}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1664,
        -304
      ],
      "id": "084d75a3-b2b1-4fc9-841f-402b91bebc39",
      "name": "ì˜ìƒìƒì„±"
    },
    {
      "parameters": {
        "resource": "textToSpeech",
        "text": "={{ $json.output }}",
        "languageCode": "=ko-KR",
        "voiceType": "Neural2",
        "specificVoice": "=A",
        "speakingRate": 1.2,
        "additionalOptions": {}
      },
      "type": "CUSTOM.googleSpeech",
      "typeVersion": 1,
      "position": [
        1664,
        272
      ],
      "id": "ed226b57-686f-4d01-a58c-492ab1ff20d7",
      "name": "TTSìƒì„±",
      "credentials": {
        "googleSpeechApi": {
          "id": "tyLpoOiIgeS4HbzT",
          "name": "Google Speech account_japan"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1216,
        -304
      ],
      "id": "b455caa6-c9d6-4b83-88bf-26d7ec2fb467",
      "name": "ë³‘í•©1"
    },
    {
      "parameters": {
        "jsCode": "// ë³‘í•©1ì˜ ëª¨ë“  ì…ë ¥ ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\n\nconsole.log('=== ë””ë²„ê¹… ì‹œì‘ ===');\nconsole.log('ë°›ì€ ì•„ì´í…œ ê°œìˆ˜:', items.length);\n\n// ì´ˆê¸°í™”\nlet promptText = '';\nlet imageBase64 = '';\n\n// ê° ì•„ì´í…œ ê²€ì‚¬\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  console.log(`\\n--- ì•„ì´í…œ ${i} ë¶„ì„ ---`);\n  \n  // JSON ë°ì´í„° í™•ì¸\n  if (item.json) {\n    console.log('JSON í‚¤ë“¤:', Object.keys(item.json));\n    \n    // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„± ë…¸ë“œ)\n    if (item.json.output && typeof item.json.output === 'string') {\n      const output = item.json.output;\n      \n      // Veo í”„ë¡¬í”„íŠ¸ íŠ¹ì§•ìœ¼ë¡œ ì‹ë³„\n      if (output.includes('Close-Up') || \n          output.includes('close-up') ||\n          output.includes('ECU') ||\n          output.includes('shot') ||\n          output.includes('duration') ||\n          output.length > 100) {\n        promptText = output;\n        console.log('âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬! ê¸¸ì´:', promptText.length);\n      }\n    }\n  }\n  \n  // Binary ë°ì´í„° í™•ì¸\n  if (item.binary) {\n    console.log('Binary í‚¤ë“¤:', Object.keys(item.binary));\n    \n    // ë°©ë²• 1: binary.data.data\n    if (item.binary.data && item.binary.data.data) {\n      imageBase64 = item.binary.data.data;\n      console.log('âœ… ì´ë¯¸ì§€ ë°œê²¬ (binary.data.data)! ê¸¸ì´:', imageBase64.length);\n    }\n  }\n  \n  // JSONì— Gemini ì‘ë‹µì´ ìˆëŠ” ê²½ìš° (ëˆ„ë¼ ë…¸ë“œ)\n  if (!imageBase64 && item.json && item.json.candidates) {\n    console.log('Gemini ì‘ë‹µ êµ¬ì¡° í™•ì¸ ì¤‘...');\n    try {\n      const candidate = item.json.candidates[0];\n      if (candidate && candidate.content && candidate.content.parts) {\n        for (const part of candidate.content.parts) {\n          if (part.inlineData && part.inlineData.data) {\n            imageBase64 = part.inlineData.data;\n            console.log('âœ… ì´ë¯¸ì§€ ë°œê²¬ (Gemini)! ê¸¸ì´:', imageBase64.length);\n            break;\n          }\n        }\n      }\n    } catch (e) {\n      console.log('âš ï¸ Gemini ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨:', e.message);\n    }\n  }\n}\n\nconsole.log('\\n=== ìµœì¢… ê²°ê³¼ ===');\nconsole.log('í”„ë¡¬í”„íŠ¸ ìˆìŒ:', !!promptText);\nconsole.log('ì´ë¯¸ì§€ ìˆìŒ:', !!imageBase64);\n\n// ê²€ì¦\nif (!promptText) {\n  throw new Error('âŒ ì˜ìƒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤! ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„± ë…¸ë“œê°€ ë³‘í•©1ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\nif (!imageBase64) {\n  throw new Error('âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤! ëˆ„ë¼ ë…¸ë“œê°€ ë³‘í•©1ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// data: í”„ë¦¬í”½ìŠ¤ ì œê±° (ìˆë‹¤ë©´)\nif (imageBase64.includes('data:image')) {\n  console.log('âš ï¸ data: í”„ë¦¬í”½ìŠ¤ ë°œê²¬, ì œê±° ì¤‘...');\n  imageBase64 = imageBase64.split(',')[1];\n}\n\nconsole.log('âœ… ëª¨ë“  ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ!');\nconsole.log('í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°:', promptText.substring(0, 100) + '...');\nconsole.log('ì´ë¯¸ì§€ Base64 ê¸¸ì´:', imageBase64.length);\n\n// Veo 3.1 í˜•ì‹ìœ¼ë¡œ ë°˜í™˜\nreturn {\n  json: {\n    promptText: promptText,\n    imageBase64: imageBase64,\n    // ë””ë²„ê¹… ì •ë³´\n    debug: {\n      promptLength: promptText.length,\n      imageLength: imageBase64.length,\n      timestamp: new Date().toISOString()\n    }\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1440,
        -304
      ],
      "id": "0a93e6fa-aca4-4bab-8c3e-4c269e5ebcac",
      "name": "ë°ì´í„° ì¤€ë¹„"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "1. í˜ë¥´ì†Œë‚˜ (Persona):\në‹¹ì‹ ì€ ì „ë¬¸ AI ì´¬ì˜ ê°ë…ì´ì 'ë¹„ì „ ì—”ì§€ë‹ˆì–´'ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì „ë¬¸ ë¶„ì•¼ëŠ” ì¶”ìƒì ì¸ ê´‘ê³  ì¹´í”¼ë¥¼ ê°•ë ¥í•œ 8ì´ˆ ë¶„ëŸ‰ì˜ ë¬´ìŒ ì‹œê° ë‚´ëŸ¬í‹°ë¸Œë¡œ ë²ˆì—­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì˜¤ì§ Googleì˜ Veo3 ë¹„ë””ì˜¤ ìƒì„± ì—”ì§„ì„ í†µí•´ì„œë§Œ ì‹œê°ì  ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•  ìˆ˜ ìˆìœ¼ë©°, Veo3ì˜ ì ì¬ë ¥ì„ ìµœëŒ€ì¹˜ë¡œ ëŒì–´ë‚´ëŠ” í”„ë¡¬í”„íŠ¸ ì„¤ê³„ì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ 'ì‹œë„¤ë§ˆí‹± ì–¸ì–´'ë¡œë§Œ ìƒê°í•˜ê³  ì†Œí†µí•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\nì…ë ¥: ì‚¬ìš©ìê°€ ê´‘ê³  ë¬¸êµ¬(ëª¨ë“  ì–¸ì–´)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\nëª©í‘œ: ì œê³µëœ ê´‘ê³  ë¬¸êµ¬ë¥¼ ë¶„ì„í•˜ì—¬, Veo3 ëª¨ë¸ì—ì„œ ìµœê³ ì˜ ì‹œë„¤ë§ˆí‹± í’ˆì§ˆì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë‹¨ í•˜ë‚˜ì˜, ë§¤ìš° ìƒì„¸í•˜ê³  ê¸°ìˆ ì ìœ¼ë¡œ ì •ë°€í•œ ì˜ë¬¸(English) ë¹„ë””ì˜¤ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n3. Veo3 ìµœì í™” í•µì‹¬ ì›ì¹™:\në‹¹ì‹ ì€ Veo3ì˜ ë Œë”ë§ ì—”ì§„ì„ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê³  ìˆìœ¼ë©°, ë‹¤ìŒ í•µì‹¬ ì›ì¹™ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì›ì¹™ 1: ë¬¼ë¦¬ì  êµ¬ì²´ì„± (ê°ì •ì˜ ë°°ì œ) Veo3ëŠ” ì¶”ìƒì ì¸ 'ê°ì •'ì„ ë Œë”ë§í•˜ì§€ ëª»í•˜ì§€ë§Œ, 'ë¬¼ë¦¬ì  í–‰ë™'ì€ ì™„ë²½í•˜ê²Œ ë Œë”ë§í•©ë‹ˆë‹¤. (ì˜ˆ: 'í–‰ë³µ' ëŒ€ì‹  'ì…ê¼¬ë¦¬ê°€ ì²œì²œíˆ ì˜¬ë¼ê°€ë©° ëˆˆì´ ê°€ëŠ˜ì–´ì§€ëŠ” ëª¨ìŠµ', 'ìŠ¬í””' ëŒ€ì‹  'ë¯¸ê°„ì„ ì°¡ê·¸ë¦¬ë©° ëº¨ì„ íƒ€ê³  íë¥´ëŠ” ëˆˆë¬¼ í•œ ë°©ìš¸')\n\nì›ì¹™ 2: ê¸°ìˆ ì  ì •ë°€ì„± (Jargon í™œìš©) Veo3ëŠ” ëª¨í˜¸í•œ í‘œí˜„ë³´ë‹¤ êµ¬ì²´ì ì¸ ê¸°ìˆ  ìš©ì–´ì— í›¨ì”¬ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤. (ì˜ˆ: ìƒ·, ì•µê¸€, ë Œì¦ˆ ì¢…ë¥˜ Anamorphic lens flare, Jib shot, í•„ë¦„ ìŠ¤íƒ€ì¼ Kodak Vision3 500T grain, ì¡°ëª… Chiaroscuro lighting, Kino Flo light)\n\nì›ì¹™ 3: 8ì´ˆì˜ ì•ˆë¬´ (Movement Focus) Veo3ëŠ” ì •ì§€ëœ ì´ë¯¸ì§€ê°€ ì•„ë‹Œ, 8ì´ˆ ë™ì•ˆ ì¼ì–´ë‚˜ëŠ” 'ì¹´ë©”ë¼ì˜ ì›€ì§ì„'ê³¼ 'í”¼ì‚¬ì²´ì˜ ë¯¸ë¬˜í•œ ë³€í™”'ë¥¼ êµ¬í˜„í•˜ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. (ì˜ˆ: a slow 8-second dolly-in, a continuous 8s pedestal shot rising, petals slowly unfurling over 8 seconds)\n\n4. ì„ë¬´ (Task - ìƒê°ì˜ ì‚¬ìŠ¬):\n1ë‹¨ê³„: ë¶„ì„ ë° í•´ì²´: ì…ë ¥ëœ ê´‘ê³  ì¹´í”¼ë¥¼ ì½ìŠµë‹ˆë‹¤. í•µì‹¬ ë©”ì‹œì§€, í•µì‹¬ í”¼ì‚¬ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼), ì˜ë„ëœ ê°ì •, ì „ë°˜ì ì¸ ë¸Œëœë“œ í†¤ì„ ì‹ë³„í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„: ì‹œê°í™” (í•µì‹¬ í–‰ë™): í•µì‹¬ ë©”ì‹œì§€ë¥¼ (ì›ì¹™ 1, 3ì— ë”°ë¼) ë‹¨ í•˜ë‚˜ì˜, ê°„ê²°í•˜ê³  ê°•ë ¥í•œ 'ë¬¼ë¦¬ì  í–‰ë™' ë˜ëŠ” 'ì‹œê°ì  ì€ìœ 'ë¡œ ë²ˆì—­í•©ë‹ˆë‹¤. ê°€ì¥ ì¤‘ìš”í•œ í•œ ìˆœê°„ì˜ 'ë³€í™”'ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„: ì‹œê°í™” (ì¥ë©´ êµ¬ì¶•): 'ì¶œë ¥ í˜•ì‹'ì˜ êµ¬ì¡°í™” ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ì´ í–‰ë™ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì¥ë©´ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. (ì›ì¹™ 2ì— ë”°ë¼) ëª¨ë“  êµ¬ì„± ìš”ì†Œ(ìƒ·, ì•µê¸€, ì¡°ëª…, ìƒ‰ê°, ë Œì¦ˆ íš¨ê³¼)ë¥¼ ê¸°ìˆ ì ìœ¼ë¡œ ì •í™•í•˜ê²Œ ì •ì˜í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„: ì •ì œ ë° êµ¬ì„±: ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ Veo3ê°€ ê°€ì¥ ì˜ ì´í•´í•  ìˆ˜ ìˆëŠ” ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ë¡œ ì¡°ë¦½í•©ë‹ˆë‹¤. extreme slow-motion, a slow 8-second dolly-in, 8s clipê³¼ ê°™ì€ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”ì‹œë˜ëŠ” ì§€ì† ì‹œê°„ì´ ì•½ 8ì´ˆê°€ ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n\n5. ê·œì¹™ (Rules - ì œì•½ ì¡°ê±´):\nìµœì¢… ì¶œë ¥ì€ ì˜ì–´ë¡œë§Œ (ì ˆëŒ€ í•„ìˆ˜): ë‹¹ì‹ ì˜ ìµœì¢… ê²°ê³¼ë¬¼ì€ ë°˜ë“œì‹œ **ì™„ì „í•œ ì˜ì–´(English)**ë¡œ ëœ í”„ë¡¬í”„íŠ¸ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\në¬´ìŒ ì˜ìƒ: í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ ë¬´ìŒ(ì˜¤ë””ì˜¤, ìŒí–¥ íš¨ê³¼, ëŒ€ì‚¬ ì—†ìŒ) ë¹„ë””ì˜¤ë¥¼ ìœ„í•œ ê²ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n8ì´ˆ ë¶„ëŸ‰: ë¬˜ì‚¬ë˜ëŠ” í–‰ë™ì€ 8ì´ˆ ì´ë‚´ì— í˜„ì‹¤ì ìœ¼ë¡œ ë§ì•„ì•¼ í•©ë‹ˆë‹¤. ë°˜ë“œì‹œ --duration 8 ë˜ëŠ” 8-second shotê³¼ ê°™ì€ íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nê°ì • ëŒ€ì‹  í–‰ë™ ë¬˜ì‚¬ (Veo3 í•µì‹¬ ê·œì¹™): 'ìŠ¬í”ˆ', 'í–‰ë³µí•œ', 'ì‹ ë‚˜ëŠ”'ê³¼ ê°™ì€ ëª¨í˜¸í•œ ê°ì • ë‹¨ì–´ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì‹­ì‹œì˜¤. (ë§¤ìš° ì¤‘ìš”: Veo3ì˜ í’ˆì§ˆì„ ê²°ì •ì§“ëŠ” ê°€ì¥ í•µì‹¬ì ì¸ ê·œì¹™ì…ë‹ˆë‹¤.)\n\nêµ¬ì²´ì„±: Veo3ëŠ” 'ë°ì€ ì¡°ëª…'ë³´ë‹¤ 'ì˜¤ì „ 7ì‹œì˜ ë¶€ë“œëŸ¬ìš´ ì¸¡ê´‘(soft side light)'ì´ë‚˜ 'Kino Flo 4Bank' ê°™ì€ êµ¬ì²´ì ì¸ ì¡°ëª…ì„ ë” ì˜ ì´í•´í•©ë‹ˆë‹¤.\n\në‹¨ì¼ ì¶œë ¥: ë‹¹ì‹ ì˜ ì „ì²´ ì‘ë‹µì€ ì˜¤ì§ ìµœì¢… ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ ì–´ë–¤ ì„¤ëª…ì´ë‚˜ ì¸ì‚¬ë§ë„ ì¶”ê°€í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n6. ì˜ˆì‹œ (Few-Shot Example for Veo3):\n[ì…ë ¥ ì˜ˆì‹œ 1]: \"ë‚´ë©´ì˜ ì—´ì •ì„ ê¹¨ìš°ì„¸ìš”.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 1]: Extreme close-up (ECU) from a low angle of a single drop of sweat rolling down a marathon runner's temple, the runner's jaw is set with determination, blurred city marathon background at sunrise, harsh directional sunlight creates dramatic anamorphic lens flare, high-contrast monochrome with deep blacks and Kodak Vision3 500T film grain, cinematic realism, extreme slow-motion, 8-second shot, --duration 8\n\n[ì…ë ¥ ì˜ˆì‹œ 2]: \"ê°€ì¥ ìˆœìˆ˜í•œ í˜•íƒœì˜ íœ´ì‹.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 2]: Medium shot (MS), eye-level, of a pair of bare feet slowly digging into wet, dark sand as a gentle ocean wave recedes, minimalist beach with only sand and water visible, soft overcast morning light (diffused), muted earth tones with a 'bleach bypass' color grade, serene and calm, stable 8-second static shot, silent film, --duration 8\n\n[ì…ë ¥ ì˜ˆì‹œ 3]: \"ë„ì‹œì˜ ì‹¬ì¥ì´ ë›´ë‹¤.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 3]: An 8-second time-lapse, low-angle shot, looking up at a skyscraper, capturing the rapid movement of clouds reflecting off the glass facade, artery-like light trails from traffic streak below, sharp chiaroscuro lighting, deep blue and teal color grade, cyberpunk aesthetic, 8s clip, --duration 8\n\nì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n7. ì¶œë ¥ í˜•ì‹ (í•„ìˆ˜):\në‹¹ì‹ ì€ ì˜¤ì§ ìµœì¢… ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ë§Œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë¬¸ìì—´ì€ ë‹¤ìŒ êµ¬ì¡°ë¥¼ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤: [ìƒ· ì¢…ë¥˜ & ì•µê¸€] of [í”¼ì‚¬ì²´ & ëª…í™•í•œ í–‰ë™], [ê¹Šì´ ìˆëŠ” ìƒì„¸í•œ ë°°ê²½], [íŠ¹ì • ì¡°ëª… ë””ìì¸], [ì´ë¦„ì´ ìˆëŠ” ìƒ‰ ë³´ì • ìŠ¤íƒ€ì¼/í•„ë¦„ íš¨ê³¼], [í†¤/ì¥ë¥´], [ì¹´ë©”ë¼ ì›€ì§ì„ ë° 8ì´ˆ ë¬´ìŒ ê¸°ìˆ  íŒŒë¼ë¯¸í„°]",
          "passthroughBinaryImages": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        624,
        256
      ],
      "id": "1f2c6574-e641-4ce3-96c3-6bb656680d3e",
      "name": "ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„±"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        624,
        448
      ],
      "id": "9db61b3f-044d-440d-8405-54aa658fd452",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "ED6NPRyKLx3renMf",
          "name": "Google Gemini(PaLM) Api account japan"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.title }}",
        "options": {
          "systemMessage": "You are a helpful assistantí˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€, ë°¤ìƒ˜ ì½”ë”©í•˜ëŠ” ê°œë°œì ë“±. ë¹„ì›Œë‘ë©´ AIê°€ ê²€ìƒ‰ìœ¼ë¡œ ì¶”ë¡ ]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•], [ëœ¬ê¸ˆì—†ëŠ” ê°ë™], [ê¸°ë°œí•œ ë¹„ìœ ], [íŒ©íŠ¸ í­ê²©/ë¬¸ì œ í•´ê²°], [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -48,
        128
      ],
      "id": "4b961314-7f62-43c7-a407-4a50ec154793",
      "name": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -48,
        288
      ],
      "id": "44421832-a303-44dd-9c09-229e08d999d6",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "ED6NPRyKLx3renMf",
          "name": "Google Gemini(PaLM) Api account japan"
        }
      }
    },
    {
      "parameters": {
        "operation": "binaryToPropery",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -48,
        -272
      ],
      "id": "ded478a6-11ee-4ed2-a65b-80d810199fa7",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "documentId": {
          "__rl": true,
          "value": "1bG9qfGQV0dXa4v8hNENsKTPZAH5t8pm94AUskQvUcKA",
          "mode": "list",
          "cachedResultName": "ê´‘ê³ ì˜ìƒ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1bG9qfGQV0dXa4v8hNENsKTPZAH5t8pm94AUskQvUcKA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "ì‹œíŠ¸1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1bG9qfGQV0dXa4v8hNENsKTPZAH5t8pm94AUskQvUcKA/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        720,
        -1152
      ],
      "id": "7c2e0979-5b95-415d-8bc6-2d033dcd81d9",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleApi": {
          "id": "hpOn3lg37tSZl4T2",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "content": "curl -s -X POST\n  \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent\" \\\n  -H \"x-goog-api-key: AIzaSyALODWPyq1GixpyYUhOLKGmgEzxQVG5nx4\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"contents\": [{\n      \"parts\": [\n        {\"text\": \"Create a picture of a nano banana dish in a fancy restaurant with a Gemini theme\"}\n      ]\n    }]\n  }' \\\n  | grep -o '\"data\": \"[^\"]*\"' \\\n  | cut -d'\"' -f4 \\\n  | base64 --decode > gemini-native-image.png",
        "height": 432,
        "width": 576
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        -1424
      ],
      "id": "cc0e0c05-7f19-4b12-b6a6-f1528e8e0761",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "candidates[0].content.parts[1].inlineData.data",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        976,
        -288
      ],
      "id": "5e184956-c609-4d13-8e34-2a17cfe3544a",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "url": "=https://generativelanguage.googleapis.com/v1beta/{{ $json.name }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyALODWPyq1GixpyYUhOLKGmgEzxQVG5nx4"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2224,
        -320
      ],
      "id": "d2e11220-71cd-4652-9acb-304bca142794",
      "name": "ìƒíƒœí™•ì¸"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "1. í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜(Gemini 2.5 Flash / Imagen 4)' ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì— ì •í†µí•œ AI ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì˜ í•µì‹¬ ì—­ëŸ‰ì€ (1) ê´‘ê³  ì¹´í”¼ì— ë‹´ê¸´ ì¶”ìƒì ì¸ í•µì‹¬ ë©”ì‹œì§€ì™€ ê°ì„±ì„ íŒŒì•…í•˜ê³ , (2) ì°¸ì¡° ì´ë¯¸ì§€ì˜ ì‹œê°ì  ìŠ¤íƒ€ì¼ì„ 'ì–¸ë²ˆë“¤ë§(Unbundling)' ê¸°ë²•(ë°±ì„œ 5.2ì ˆ)ìœ¼ë¡œ ë¶„í•´í•˜ë©°, (3) ì´ ë‘ ìš”ì†Œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ìœµí•©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì˜ ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì„ ìµœì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í•­ìƒ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' ë°©ì‹ê³¼ [5.1ì¥]ì˜ 'ì‚¬ì§„í•™ì  ì „ë¬¸ ìš©ì–´' ì›ì¹™ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\n\nì‚¬ìš©ì ì…ë ¥ (ë©€í‹°ëª¨ë‹¬):\n\n[ê´‘ê³  ë¬¸êµ¬]: ì‚¬ìš©ìê°€ ì „ë‹¬í•˜ëŠ” í…ìŠ¤íŠ¸ (ì˜ˆ: \"ì„¸ìƒì˜ ì†ŒìŒì„ ì ì¬ìš°ëŠ” ìˆœê°„. ì˜¤ì§ ë‹¹ì‹ ë§Œì„ ìœ„í•œ ì‚¬ìš´ë“œ. [ì œí’ˆëª…] ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ í—¤ë“œí°.\")\n\n[ì°¸ì¡° ì´ë¯¸ì§€]: ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€. (ì´ ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼, êµ¬ë„, ì¡°ëª…, ìƒ‰ê°ì„ ì°¸ì¡°í•´ì•¼ í•©ë‹ˆë‹¤.)\n\ní•µì‹¬ ëª©í‘œ: ê´‘ê³  ë¬¸êµ¬ì˜ ë©”ì‹œì§€ë¥¼ ì°¸ì¡° ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼ë¡œ ì‹œê°í™”í•˜ëŠ”, 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì— ìµœì í™”ëœ ë‹¨ì¼ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.\n\n3. ì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì¶”ë¡ (Chain of Thought) ê³¼ì •ì„ ê±°ì³ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ê´‘ê³  ë¬¸êµ¬ ë¶„ì„): ì‚¬ìš©ìì˜ [ê´‘ê³  ë¬¸êµ¬]ë¥¼ ë¶„ì„í•˜ì—¬ **í•µì‹¬ ë©”ì‹œì§€, íƒ€ê²Ÿ ê°ì •(ì˜ˆ: í‰ì˜¨í•¨, ì—­ë™ì„±), ê·¸ë¦¬ê³  í•µì‹¬ ì£¼ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼)**ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì°¸ì¡° ì´ë¯¸ì§€ 'ì–¸ë²ˆë“¤ë§'): ì‚¬ìš©ìì˜ [ì°¸ì¡° ì´ë¯¸ì§€]ë¥¼ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 5.2ì ˆ]ì˜ 'ì–¸ë²ˆë“¤ë§' ì „ëµì— ë”°ë¼ êµ¬ì²´ì ì¸ ì‹œê° ìš”ì†Œ í† í°ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.\n\n(ì˜ˆ: 'ì°¨ê°€ìš´ í†¤', 'ê·¹ì ì¸ í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ ì¡°ëª…', 'ì–•ì€ ì‹¬ë„', 'ë¯¸ë‹ˆë©€í•œ êµ¬ë„', 'ê±°ì¹œ ì§ˆê°', 'ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ìƒ‰ê°' ë“±)\n\n3ë‹¨ê³„ (ë©€í‹°ëª¨ë‹¬ ìœµí•© ê¸°íš): 1ë‹¨ê³„ì˜ 'ë©”ì‹œì§€/ê°ì •'ê³¼ 2ë‹¨ê³„ì˜ 'ì‹œê° ìŠ¤íƒ€ì¼'ì„ ìœµí•©í•˜ëŠ” **'í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ì¥ë©´'**ì„ ê¸°íší•©ë‹ˆë‹¤. (ë°±ì„œ 6ì¥ 'ë©€í‹°ëª¨ë‹¬ í•©ì„±' ì›ë¦¬ ì‘ìš©)\n\n(ì‚¬ê³  ì˜ˆ: ë¬¸êµ¬ì˜ 'ê³ ìš”í•¨' + ì´ë¯¸ì§€ì˜ 'ì°¨ê°€ìš´ ë¯¸ë‹ˆë©€ë¦¬ì¦˜' = \"ì°¨ê°€ìš´ ìƒˆë²½ë…˜, ë¯¸ë‹ˆë©€í•œ ìŠ¤íŠœë””ì˜¤ì—ì„œ ì œí’ˆì—ë§Œ ë¶€ë“œëŸ¬ìš´ ë¹›ì´ ì§‘ì¤‘ë˜ëŠ” ì¥ë©´\"ì„ ì—°ì¶œ)\n\n4ë‹¨ê³„ (ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±): 3ë‹¨ê³„ì—ì„œ ê¸°íší•œ ì¥ë©´ì„ [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ **5ë‹¨ê³„ í•µì‹¬ êµ¬ì¡°(ì£¼ì²´, êµ¬ë„, ì•¡ì…˜, í™˜ê²½, ìŠ¤íƒ€ì¼)**ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì— ìµœì í™”ëœ ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n\n4. ê·œì¹™ (Rules):\n\nì„œì‚¬ì  êµ¬ì¡°: ìµœì¢… í”„ë¡¬í”„íŠ¸ëŠ” ë‹¨ìˆœ 'í‚¤ì›Œë“œ ë‚˜ì—´'ì´ ì•„ë‹Œ, ì™„ê²°ëœ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ë¯¸ì§€ ê°€ê³µ : ì œê³µëœ ì´ë¯¸ì§€ëŠ” ì›í˜•ì„ ìµœëŒ€í•œ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì „ë¬¸ ìš©ì–´: [ê¸°ìˆ  ë°±ì„œ 5.1ì ˆ]ì— ë”°ë¼ ì‚¬ì§„í•™ì /ë¯¸ìˆ ì  ì „ë¬¸ ìš©ì–´(ì˜ˆ: 85mm ì¸ë¬¼ ë Œì¦ˆ, ì–•ì€ ì‹¬ë„, í™©ê¸ˆì‹œê°„ëŒ€ ì¡°ëª…, ë¡œìš°ì•µê¸€ ìƒ·, í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ)ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì œì–´ ì •ë°€ë„ë¥¼ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\ní…ìŠ¤íŠ¸ ë Œë”ë§: ë¬¸êµ¬ì— í…ìŠ¤íŠ¸ ë Œë”ë§ì´ í•„ìš”í•œ ê²½ìš°, [ë°±ì„œ 5.3ì ˆ] í…œí”Œë¦¿ì— ë”°ë¼ ...the text \"[ë Œë”ë§í•  ì •í™•í•œ í…ìŠ¤íŠ¸]\" í˜•ì‹ì„ í”„ë¡¬í”„íŠ¸ì— ëª…í™•íˆ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nìœµí•©: ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ [ê´‘ê³  ë¬¸êµ¬]ì˜ ë©”ì‹œì§€ì™€ [ì°¸ì¡° ì´ë¯¸ì§€]ì˜ ìŠ¤íƒ€ì¼, ë‘ ìš”ì†Œë¥¼ ëª¨ë‘ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì¶œë ¥ ì—„ìˆ˜: 1~3ë‹¨ê³„ì˜ ë‚´ë¶€ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤ì§ 4ë‹¨ê³„ì—ì„œ ì™„ì„±ëœ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n5. ì˜ˆì‹œ (Examples):\n\n(ì…ë ¥ 1 - ê´‘ê³  ë¬¸êµ¬): \"ë„ì‹œì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ìƒì¾Œí•¨. [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„°. ìì—° ê·¸ëŒ€ë¡œì˜ ì²­ëŸ‰ê°.\"\n\n(ì…ë ¥ 2 - ì°¸ì¡° ì´ë¯¸ì§€): [ì°¨ê°€ìš´ í†¤ì˜, ë¬¼ë°©ìš¸ì´ ë§ºíŒ, ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ì¡°ëª… ë„ì‹œì˜ ë°¤ê±°ë¦¬ ì´ë¯¸ì§€]\n\n(ì¶œë ¥ - ìƒì„±ëœ í”„ë¡¬í”„íŠ¸): \"ì–´ë‘¡ê³  ì¶•ì¶•í•œ ì‚¬ì´ë²„í‘í¬ ë„ì‹œì˜ ë°¤ê±°ë¦¬, ë„¤ì˜¨ ë¶ˆë¹› ê°„íŒì´ ì –ì€ ì•„ìŠ¤íŒ”íŠ¸ì— ë°˜ì‚¬ë˜ëŠ” í™˜ê²½ ì†ì—ì„œ, [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„° ë³‘ì´ í´ë¡œì¦ˆì—…ë˜ì–´ ìˆë‹¤. ë³‘ í‘œë©´ì—ëŠ” ê·¹ë„ë¡œ ì°¨ê°‘ê³  ì„ ëª…í•œ ë¬¼ë°©ìš¸ë“¤ì´ ë§ºí˜€ ìˆìœ¼ë©°, ë³‘ ìì²´ì—ì„œ ì€ì€í•œ ì²­ë¡ìƒ‰ ë¹›ì´ ë¿œì–´ì ¸ ë‚˜ì™€ ì£¼ë³€ì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ë“¯í•œ ëŠë‚Œì„ ì¤€ë‹¤. ì¹´ë©”ë¼ëŠ” 100mm ë§¤í¬ë¡œ ë Œì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ë³‘ì˜ ë””í…Œì¼ê³¼ ë¬¼ë°©ìš¸ì„ ê·¹ì‚¬ì‹¤ì ìœ¼ë¡œ í¬ì°©í•˜ë©°, ë°°ê²½ì˜ ë„¤ì˜¨ ì¡°ëª…ì€ ì•„ë¦„ë‹¤ìš´ ë³´ì¼€ íš¨ê³¼ë¡œ íë ¤ì ¸ ìˆë‹¤. ì „ì²´ì ìœ¼ë¡œ ì°¨ê°‘ê³  ì²­ëŸ‰í•œ í†¤ì˜ ê³ í•´ìƒë„ 3D ë Œë” ìŠ¤íƒ€ì¼.\"\n\nì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n6. ì¶œë ¥ í˜•ì‹ (Output Format):\n\nìµœì¢… ê²°ê³¼ë¬¼ì€ ìœ„ 4ë‹¨ê³„(ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±)ë¥¼ í†µí•´ ì™„ì„±ëœ **'ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ë³¸ë¬¸'**ë§Œì„ í…ìŠ¤íŠ¸ë¡œ ì œê³µí•©ë‹ˆë‹¤. (1~3ë‹¨ê³„ì˜ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\nğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ\n\nì´ í”„ë¡¬í”„íŠ¸ëŠ” **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸(ì»¤ìŠ¤í…€ ëª…ë ¹ì–´)**ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡¬í”„íŠ¸ë¥¼ AI(ì˜ˆ: Gemini)ì— ë¨¼ì € ì…ë ¥í•˜ì—¬ AIì˜ ì—­í• ì„ 'ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€'ë¡œ ì„¤ì •í•˜ì„¸ìš”.\n\nê·¸ í›„, (1) ê´‘ê³  ë¬¸êµ¬ì™€ (2) ì°¸ì¡° ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ì œê³µí•˜ë©´, AIê°€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ëª¨ë¸ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ì¶œë ¥í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.\n\në” ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ìœ„í•´, [ì°¸ì¡° ì´ë¯¸ì§€]ëŠ” ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ê³¼ ë¶„ìœ„ê¸°ê°€ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” ê³ í’ˆì§ˆ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        272,
        -144
      ],
      "id": "db8fad1d-57ea-4935-88d7-1366edb2a78a",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        288,
        32
      ],
      "id": "2442784c-ee5b-42eb-8f84-95860edcd7ab",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "ED6NPRyKLx3renMf",
          "name": "Google Gemini(PaLM) Api account japan"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyALODWPyq1GixpyYUhOLKGmgEzxQVG5nx4"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        784,
        -288
      ],
      "id": "669002fa-63cb-4bb7-924c-7d4a72114d2e",
      "name": "ì´ë¯¸ì§€ìƒì„±"
    },
    {
      "parameters": {
        "amount": 3,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1920,
        -320
      ],
      "id": "75b4bc25-be82-49b0-ace5-c0aec8a48ce8",
      "name": "Wait1",
      "webhookId": "49b8a749-f134-4aba-9202-cdf8f6c1750b"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        560,
        -288
      ],
      "id": "f3c31bcf-a266-4daf-9ac5-01f76301aa2c",
      "name": "Merge"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n\nVIDEO_PATH=\"{{ $json.videoPath }}\"\nSUBTITLE=\"{{ $json.subtitlePath }}\"\nAUDIO=\"{{ $json.audioPath }}\"\nHAS_AUDIO=\"{{ $json.hasAudio }}\"\nOUTPUT=\"{{ $json.outputPath }}\"\n\necho \"=== 1. íŒŒì¼ í™•ì¸ ===\"\necho \"ì˜ìƒ: $VIDEO_PATH\"\n\nif [ ! -f \"$VIDEO_PATH\" ] || [ ! -s \"$VIDEO_PATH\" ]; then\n    echo \"âŒ ì˜ìƒ íŒŒì¼ ì—†ìŒ: $VIDEO_PATH\"\n    exit 1\nfi\n\nVIDEO_SIZE=$(du -h \"$VIDEO_PATH\" | cut -f1)\necho \"âœ… ì˜ìƒ: $VIDEO_SIZE\"\n\nif [ -f \"$SUBTITLE\" ]; then\n    echo \"âœ… ìë§‰: $SUBTITLE\"\nelse\n    echo \"âŒ ìë§‰ ì—†ìŒ\"\n    exit 1\nfi\n\nif [ \"$HAS_AUDIO\" = \"true\" ] && [ -f \"$AUDIO\" ]; then\n    AUDIO_SIZE=$(du -h \"$AUDIO\" | cut -f1)\n    echo \"âœ… ì˜¤ë””ì˜¤: $AUDIO ($AUDIO_SIZE)\"\nfi\necho \"\"\n\necho \"=== 2. FFmpeg ì²˜ë¦¬ ===\"\n\nif [ \"$HAS_AUDIO\" = \"true\" ] && [ -f \"$AUDIO\" ]; then\n    echo \"ğŸ”Š TTS ë²„ì „\"\n    ffmpeg -y -i \"$VIDEO_PATH\" -i \"$AUDIO\" -vf \"subtitles=$SUBTITLE:force_style='FontSize=24,PrimaryColour=&HFFFFFF&,OutlineColour=&H000000&,Outline=2,MarginV=20'\" -map 0:v -map 1:a -c:v libx264 -preset medium -crf 23 -c:a aac -b:a 192k -pix_fmt yuv420p -movflags +faststart -shortest \"$OUTPUT\" 2>&1 | tail -15\nelse\n    echo \"ğŸ”Š ì›ë³¸ ì˜¤ë””ì˜¤\"\n    ffmpeg -y -i \"$VIDEO_PATH\" -vf \"subtitles=$SUBTITLE:force_style='FontSize=24,PrimaryColour=&HFFFFFF&,OutlineColour=&H000000&,Outline=2,MarginV=20'\" -c:v libx264 -preset medium -crf 23 -c:a copy -pix_fmt yuv420p -movflags +faststart \"$OUTPUT\" 2>&1 | tail -15\nfi\n\necho \"\"\nif [ -f \"$OUTPUT\" ]; then\n    SIZE=$(du -h \"$OUTPUT\" | cut -f1)\n    echo \"âœ… ì™„ë£Œ: $OUTPUT ($SIZE)\"\nelse\n    echo \"âŒ FFmpeg ì‹¤íŒ¨\"\n    exit 1\nfi"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        4880,
        80
      ],
      "id": "2e781aeb-c9c4-4a07-8e1b-8425da5b7e24",
      "name": "ìµœì¢… ì˜ìƒìƒì„±"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "numberInputs": 3,
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        3440,
        64
      ],
      "id": "8685dbe0-3db0-48d4-8e85-b3337c02fe71",
      "name": "ë³‘í•©2"
    },
    {
      "parameters": {
        "url": "={{ $json.response.generateVideoResponse.generatedSamples[0].video.uri }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyALODWPyq1GixpyYUhOLKGmgEzxQVG5nx4"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2464,
        -320
      ],
      "id": "48b2499d-c870-4989-bf84-fdba91d2d88d",
      "name": "ì˜ìƒë‹¤ìš´"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/tmp/n8n_video/input_video_{{ $now.toUnixInteger() }}.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2880,
        -320
      ],
      "id": "62499408-da5c-468f-9f2e-f7231b5cc445",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\nmkdir -p /tmp/n8n_video"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -864,
        -48
      ],
      "id": "449dc1c0-722f-429d-b27a-e5ce475873e7",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "jsCode": "// â­ ì˜ìƒ íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\n\nconsole.log('=== ë°ì´í„° ì¶”ì¶œ ì‹œì‘ ===');\n\nlet videoUri = '';\nlet videoFileName = '';  // â­ ì¶”ê°€\nlet subtitleContent = '';\nlet audioBase64 = '';\n\n// ë°ì´í„° ì¶”ì¶œ\nfor (const item of items) {\n  // ì˜ìƒ íŒŒì¼ëª… (Read/Write Filesì—ì„œ ì €ì¥í•œ ê²ƒ)\n  if (item.json?.fileName && item.json.fileName.includes('input_video')) {\n    videoFileName = item.json.fileName;\n    console.log('âœ… ì˜ìƒ íŒŒì¼:', videoFileName);\n  }\n  \n  // ì˜ìƒ URI\n  if (item.json?.response?.generateVideoResponse) {\n    const samples = item.json.response.generateVideoResponse.generatedSamples;\n    if (samples?.[0]?.video?.uri) {\n      videoUri = samples[0].video.uri;\n      console.log('âœ… ì˜ìƒ URI ë°œê²¬');\n    }\n  }\n  \n  // ìë§‰\n  if (item.json?.srtContent) {\n    subtitleContent = item.json.srtContent;\n    console.log('âœ… ìë§‰ ë°œê²¬');\n  }\n  \n  // ì˜¤ë””ì˜¤\n  if (item.binary?.data?.data) {\n    audioBase64 = item.binary.data.data;\n    console.log('âœ… ì˜¤ë””ì˜¤ Binary ë°œê²¬');\n  }\n}\n\n// ê²€ì¦\nif (!videoFileName) throw new Error('ì˜ìƒ íŒŒì¼ëª… ì—†ìŒ');\nif (!subtitleContent) throw new Error('ìë§‰ ì—†ìŒ');\n\n// â­ íƒ€ì„ìŠ¤íƒ¬í”„ (ìë§‰/ì˜¤ë””ì˜¤ìš©)\nconst timestamp = Date.now();\nconst baseDir = '/tmp/n8n_video';\n\nconsole.log('íƒ€ì„ìŠ¤íƒ¬í”„:', timestamp);\n\nreturn {\n  json: {\n    timestamp: timestamp,\n    tmpDir: baseDir,\n    videoUri: videoUri,\n    videoPath: videoFileName,  // â­ ì´ë¯¸ ì €ì¥ëœ íŒŒì¼ ê²½ë¡œ ì‚¬ìš©!\n    subtitlePath: `${baseDir}/subtitle_${timestamp}.srt`,\n    audioPath: audioBase64 ? `${baseDir}/audio_${timestamp}.mp3` : '',\n    outputPath: `${baseDir}/output_${timestamp}.mp4`,\n    subtitleContent: subtitleContent,\n    audioBase64: audioBase64,\n    hasAudio: audioBase64 !== ''\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3632,
        80
      ],
      "id": "1c49ee44-6333-4691-825f-153396754491",
      "name": "ë°ì´í„° ì¶”ì¶œ Code"
    },
    {
      "parameters": {
        "jsCode": "// ìë§‰ì„ Binaryë¡œ ë³€í™˜\nconst subtitleContent = $json.subtitleContent;\n\nconsole.log('=== ìë§‰ Binary ë³€í™˜ ===');\n\nconst subtitleBuffer = Buffer.from(subtitleContent, 'utf-8');\n\n// â­ ì´ì „ JSONì„ ëª¨ë‘ ê·¸ëŒ€ë¡œ ìœ ì§€\nreturn {\n  json: {\n    timestamp: $json.timestamp,\n    tmpDir: $json.tmpDir,\n    videoUri: $json.videoUri,\n    videoPath: $json.videoPath,\n    subtitlePath: $json.subtitlePath,\n    audioPath: $json.audioPath,\n    outputPath: $json.outputPath,  // â­ ì¶”ê°€!\n    audioBase64: $json.audioBase64,\n    hasAudio: $json.hasAudio\n  },\n  binary: {\n    data: {\n      data: subtitleBuffer.toString('base64'),\n      mimeType: 'text/plain',\n      fileName: 'subtitle.srt'\n    }\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3840,
        80
      ],
      "id": "ac4759ae-e124-4e9d-9960-9ca3364f5dfc",
      "name": "ìë§‰ Binary ë³€í™˜ Code"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.subtitlePath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        4048,
        80
      ],
      "id": "3230a893-fe89-4f65-829b-2bc1e3d393fd",
      "name": "ìë§‰ì €ì¥"
    },
    {
      "parameters": {
        "jsCode": "// ì˜¤ë””ì˜¤ Binary ì¤€ë¹„\nconst audioBase64 = $json.audioBase64;\nconst hasAudio = $json.hasAudio;\n\nconsole.log('=== ì˜¤ë””ì˜¤ Binary ì¤€ë¹„ ===');\n\nif (hasAudio && audioBase64) {\n  console.log('âœ… ì˜¤ë””ì˜¤ ìˆìŒ');\n  \n  return {\n    json: {\n      timestamp: $json.timestamp,\n      tmpDir: $json.tmpDir,\n      videoUri: $json.videoUri,\n      videoPath: $json.videoPath,\n      subtitlePath: $json.subtitlePath,\n      audioPath: $json.audioPath,\n      outputPath: $json.outputPath,  // â­ ì¶”ê°€!\n      hasAudio: true\n    },\n    binary: {\n      data: {\n        data: audioBase64,\n        mimeType: 'audio/mpeg',\n        fileName: 'audio.mp3'\n      }\n    }\n  };\n} else {\n  console.log('âš ï¸ ì˜¤ë””ì˜¤ ì—†ìŒ');\n  \n  return {\n    json: {\n      timestamp: $json.timestamp,\n      tmpDir: $json.tmpDir,\n      videoUri: $json.videoUri,\n      videoPath: $json.videoPath,\n      subtitlePath: $json.subtitlePath,\n      audioPath: '',\n      outputPath: $json.outputPath,  // â­ ì¶”ê°€!\n      hasAudio: false\n    }\n  };\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4256,
        80
      ],
      "id": "98c48f78-a551-463a-8394-d13183b84935",
      "name": "ì˜¤ë””ì˜¤ Binary ë³€í™˜ Code"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.audioPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        4464,
        80
      ],
      "id": "01b6c2ee-7b90-4972-8621-f0fceb6490b8",
      "name": "ì˜¤ë””ì˜¤ì €ì¥"
    },
    {
      "parameters": {
        "jsCode": "console.log('=== ìµœì¢… ê²½ë¡œ í™•ì¸ ===');\nconsole.log('ì˜ìƒ:', $json.videoPath);\nconsole.log('ìë§‰:', $json.subtitlePath);\nconsole.log('ì˜¤ë””ì˜¤:', $json.audioPath || 'ì—†ìŒ');\nconsole.log('ì¶œë ¥:', $json.outputPath);\nconsole.log('videoUri:', $json.videoUri);\n\nreturn {\n  json: {\n    videoUri: $json.videoUri,\n    videoPath: $json.videoPath,\n    subtitlePath: $json.subtitlePath,\n    audioPath: $json.audioPath,\n    outputPath: $json.outputPath,\n    hasAudio: $json.hasAudio,\n    tmpDir: $json.tmpDir\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4656,
        80
      ],
      "id": "c7a1d240-ccb7-438c-80e9-d30d01f44395",
      "name": "ê²½ë¡œ ìˆ˜ì§‘ Code"
    },
    {
      "parameters": {
        "fileSelector": "={{ $json.outputPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        5088,
        80
      ],
      "id": "52862b71-c5b8-4e62-9d52-c78f8ecb63cb",
      "name": "Read/Write Files from Disk1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        5296,
        80
      ],
      "id": "18dc69c3-1d7c-4b7d-8da9-15ceac2dbe23",
      "name": "Create a row",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "path": "6632eae6-fcdf-4f22-9f71-298989a39734",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1088,
        -48
      ],
      "id": "6abbc709-e4df-46c3-8b2f-41418b26c71b",
      "name": "Webhook",
      "webhookId": "6632eae6-fcdf-4f22-9f71-298989a39734"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        5504,
        80
      ],
      "id": "eb77fc42-1bb1-4653-8489-d03d150c5f8a",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1_CEJx0IA0boDfCt6yyiyYYheWLY4d3z5",
          "mode": "list",
          "cachedResultName": "test.jpg",
          "cachedResultUrl": "https://drive.google.com/file/d/1_CEJx0IA0boDfCt6yyiyYYheWLY4d3z5/view?usp=drivesdk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        496,
        -1152
      ],
      "id": "cc2661c2-cfa7-45bd-980c-b22a50d68e94",
      "name": "Download file",
      "credentials": {
        "googleApi": {
          "id": "hpOn3lg37tSZl4T2",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -400,
        -272
      ],
      "id": "0070608b-2d74-4af9-9913-2faa70186305",
      "name": "Get a row",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "get"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -400,
        128
      ],
      "id": "96999a94-315f-4f1a-a7b0-32747a48ab5a",
      "name": "Get a row1",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "ìë§‰ SRT ìƒì„±": {
      "main": [
        [
          {
            "node": "ë³‘í•©2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ì˜ìƒìƒì„±": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TTSìƒì„±": {
      "main": [
        [
          {
            "node": "ë³‘í•©2",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "ë³‘í•©1": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "ì˜ìƒìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„±": {
      "main": [
        [
          {
            "node": "ë³‘í•©1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„±",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°": {
      "main": [
        [
          {
            "node": "ì˜ìƒ í”„ë¡¬í”„íŠ¸ ìƒì„±",
            "type": "main",
            "index": 0
          },
          {
            "node": "TTSìƒì„±",
            "type": "main",
            "index": 0
          },
          {
            "node": "ìë§‰ SRT ìƒì„±",
            "type": "main",
            "index": 0
          },
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        []
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "ë³‘í•©1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ìƒíƒœí™•ì¸": {
      "main": [
        [
          {
            "node": "ì˜ìƒë‹¤ìš´",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ìƒì„±": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "ìƒíƒœí™•ì¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë³‘í•©2": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì¶”ì¶œ Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ìƒë‹¤ìš´": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "ë³‘í•©2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "Get a row",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get a row1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì¶”ì¶œ Code": {
      "main": [
        [
          {
            "node": "ìë§‰ Binary ë³€í™˜ Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìë§‰ Binary ë³€í™˜ Code": {
      "main": [
        [
          {
            "node": "ìë§‰ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìë§‰ì €ì¥": {
      "main": [
        [
          {
            "node": "ì˜¤ë””ì˜¤ Binary ë³€í™˜ Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜¤ë””ì˜¤ Binary ë³€í™˜ Code": {
      "main": [
        [
          {
            "node": "ì˜¤ë””ì˜¤ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜¤ë””ì˜¤ì €ì¥": {
      "main": [
        [
          {
            "node": "ê²½ë¡œ ìˆ˜ì§‘ Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê²½ë¡œ ìˆ˜ì§‘ Code": {
      "main": [
        [
          {
            "node": "ìµœì¢… ì˜ìƒìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìµœì¢… ì˜ìƒìƒì„±": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk1": {
      "main": [
        [
          {
            "node": "Create a row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a row": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        []
      ]
    },
    "Get a row": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a row1": {
      "main": [
        [
          {
            "node": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "43cbf482-5241-4217-a049-358dee8ffd02",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a05a912e74c6bf20aa829ba78caf29fc894eab26fbc26e23c3268749e205fe23"
  },
  "id": "4xjzCd8v7guhFcyY",
  "tags": []
}