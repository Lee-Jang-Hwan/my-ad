{
  "name": "AI ê´‘ê³  ì˜ìƒ ìƒì„±ê¸°",
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/veo-3.1-generate-preview:predictLongRunning",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyBrxiYofL0fSJljJAG0l7RYA7Ia5vGFKsE"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"instances\": [\n    {\n      \"prompt\": \"{{ $('ë°ì´í„° ì¤€ë¹„').item.json.promptText }}, silent video with no audio\",\n      \"image\": {\n        \"bytesBase64Encoded\": \"{{ $('ë°ì´í„° ì¤€ë¹„').item.json.imageBase64 }}\",\n        \"mimeType\": \"image/png\"\n      }\n    }\n  ],\n  \"parameters\": {\n    \"aspectRatio\": \"9:16\",\n    \"resolution\": \"720p\",\n    \"durationSeconds\": 8,\n    \"sampleCount\": 1,\n    \"negativePrompt\": \"audio, sound, music, dialogue, voice, speech, sound effects\"\n  }\n}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4576,
        2320
      ],
      "id": "75ce3831-3916-4392-aad2-62de7a49a721",
      "name": "ì˜ìƒìƒì„±"
    },
    {
      "parameters": {
        "resource": "textToSpeech",
        "text": "={{ $('ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°').item.json.output }}",
        "languageCode": "=ko-KR",
        "voiceType": "Neural2",
        "specificVoice": "=A",
        "speakingRate": 1.2,
        "additionalOptions": {}
      },
      "type": "CUSTOM.googleSpeech",
      "typeVersion": 1,
      "position": [
        4768,
        2800
      ],
      "id": "fd865510-d7d4-4736-82c6-b65e96fa49a7",
      "name": "TTSìƒì„±",
      "credentials": {
        "googleSpeechApi": {
          "id": "tyLpoOiIgeS4HbzT",
          "name": "Google Speech account_japan"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        3696,
        2320
      ],
      "id": "66b29559-986c-4ff2-bbd2-76a25f30fd6d",
      "name": "ë³‘í•©1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.product_name }}",
        "options": {
          "systemMessage": "í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ '12ì´ˆ ìˆœì‚­'ì´ë¼ëŠ” ë³„ëª…ì„ ê°€ì§„, í‹±í†¡ ë° ìœ íŠœë¸Œ ìˆí¼ ê´‘ê³  ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í‰ë²”í•œ ê´‘ê³ ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§„ì§œ ì „ë¬¸ ë¶„ì•¼ëŠ” **'ëœë¤ ì¥ë¥´ ìƒì„±'**ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ìƒí’ˆëª…ë§Œ ë°›ìœ¼ë©´, ì›¹ ê²€ìƒ‰ì„ í†µí•´ í•µì‹¬ì„ íŒŒì•…í•œ ë’¤, ì£¼ì–´ì§„ [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡]ì—ì„œ ê°€ì¥ ì ì ˆí•˜ê±°ë‚˜ í˜¹ì€ ê°€ì¥ íŒŒê²©ì ì¸ ì¥ë¥´ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ì‹œì²­ìì˜ ë’¤í†µìˆ˜ë¥¼ ì¹©ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì ˆëŒ€ ì§€ë£¨í•œ ì œí’ˆ ì„¤ëª…ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\në§¥ë½ (Context):\n\ní•µì‹¬ ìƒí’ˆëª…: [ì‚¬ìš©ìê°€ ì—¬ê¸°ì— ìƒí’ˆëª…ì„ ì…ë ¥í•©ë‹ˆë‹¤]\n\ní•µì‹¬ íƒ€ê²Ÿ (ì„ íƒ ì‚¬í•­): [ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ, ìœ¡ì•„ì— ì§€ì¹œ 30ëŒ€ ì£¼ë¶€]\n\nì°½ì˜ì  ì¥ë¥´ ëª©ë¡: [ë³‘ë§›/Bê¸‰ ìœ ë¨¸], [ì–´ê·¸ë¡œ/ì§ˆë¬¸í˜•]\n\nëª©í‘œ: 12ì´ˆ ìˆí¼ ì˜ìƒ(í‹±í†¡, ë¦´ìŠ¤ ë“±)ì— ì‚¬ìš©í• , ìë§‰ ë° TTSë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥í•œ 'ìˆœìˆ˜ í…ìŠ¤íŠ¸' ê´‘ê³  ë¬¸êµ¬ 1ê°œ ìƒì„±. (ì•½ 3~4ì¤„)\n\nì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì§€ì¹¨ì— ë”°ë¼ ì„ë¬´ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ì •ë³´ íƒìƒ‰): [í•µì‹¬ ìƒí’ˆëª…]ì„ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ Google Searchë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê²€ìƒ‰ì„ í†µí•´ í•´ë‹¹ ìƒí’ˆì˜ [í•µì‹¬ ê¸°ëŠ¥], [ê³ ê° í˜œíƒ(Benefit)], [ì£¼ìš” íƒ€ê²Ÿ](ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ë¹„ì–´ìˆë‹¤ë©´)ì„ ì‹ ì†í•˜ê²Œ íŒŒì•…í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì¥ë¥´ ì„ ì •): [ì°½ì˜ì  ì¥ë¥´ ëª©ë¡] ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ë§Œì•½ [í•µì‹¬ íƒ€ê²Ÿ]ì´ ëª…ì‹œë˜ì—ˆë‹¤ë©´, í•´ë‹¹ íƒ€ê²Ÿì—ê²Œ ê°€ì¥ íš¨ê³¼ì ì¼ ì¥ë¥´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„ (ì¹´í”¼ ìƒì„±): ì„ íƒí•œ ì¥ë¥´ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ê·¹ëŒ€í™”í•˜ì—¬, 10ì´ˆ ë¶„ëŸ‰(2~3ë¬¸ì¥)ì˜ ì¹´í”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. íƒìƒ‰í•œ ì œí’ˆì˜ íŠ¹ì§•ì´ ì´ í†¤ì•¤ë§¤ë„ˆì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì•„ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„ (ìµœì¢… ì¶œë ¥): ëª¨ë“  ë¶„ì„ ê³¼ì •, ì¥ë¥´ëª…, ì„¤ëª…, ê¸°í˜¸(ì˜ˆ: (ìë§‰/VO))ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ¨ê¸°ê³ , ì˜¤ì§ ì™„ì„±ëœ 'ê´‘ê³  ë¬¸êµ¬' í…ìŠ¤íŠ¸ë§Œì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n\nê·œì¹™ (Rules):\n\n[ì ˆëŒ€ ì—„ìˆ˜ 1] ì¶œë ¥ê°’ì€ ì˜¤ì§ [ê´‘ê³  ë¬¸êµ¬ í…ìŠ¤íŠ¸]ì—¬ì•¼ í•©ë‹ˆë‹¤. ì´ ì¶œë ¥ê°’ì€ TTS ë° ìë§‰ ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œì— ì§ì ‘ ì…ë ¥ë˜ë¯€ë¡œ, [1ì•ˆ], [ì»¨ì…‰], (ìë§‰/VO), [ì´ëª¨ì§€] \" ê°™ì€ ê·¸ ì–´ë–¤ ë¶€ê°€ ì„¤ëª…ì´ë‚˜ ê¸°í˜¸ë„ ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n\n[ì ˆëŒ€ ì—„ìˆ˜ 2] ë§¤ë²ˆ ì‹¤í–‰ ì‹œ, ë‹¤ë¥¸ ì¥ë¥´ì™€ ë‹¤ë¥¸ í‘œí˜„ì„ ì‚¬ìš©í•˜ì—¬ ì ˆëŒ€ ì¤‘ë³µëœ ë‚´ìš©ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.\n\në°˜ë“œì‹œ [í•µì‹¬ ìƒí’ˆëª…]ì„ ë¬¸êµ¬ ì•ˆì— 1íšŒ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¨ìˆœí•œ ì œí’ˆ ì„¤ëª…ì„ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤. ê¸°ë°œí•˜ê³  ì°½ì˜ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nìë§‰ê³¼ TTSì— ìš©ì´í•˜ë„ë¡ 3~4ì¤„ì˜ ì§§ì€ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¶œë ¥í•©ë‹ˆë‹¤. (ì¤„ ë°”ê¿ˆ ì‚¬ìš©)\n\nì˜ˆì‹œ (Examples):\n\n(ì…ë ¥)\n\ní•µì‹¬ ìƒí’ˆëª…: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\ní•µì‹¬ íƒ€ê²Ÿ: 10ëŒ€ ì—¬ì„±\n\n(AIì˜ ë‚´ì  ì‚¬ê³  - 1~3ë‹¨ê³„)\n\nê²€ìƒ‰ ì‹¤í–‰: \"ì´ˆì½”ìš°ìœ  ì¼€ìµ\"\n\nê²€ìƒ‰ ê²°ê³¼: 'ì§„í•œ ì´ˆì½œë¦¿', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ  í¬ë¦¼', 'ë””ì €íŠ¸', '10ëŒ€~20ëŒ€ ì—¬ì„± íƒ€ê²Ÿ' (ì…ë ¥ëœ íƒ€ê²Ÿê³¼ ì¼ì¹˜)\n\nì¥ë¥´ ëœë¤ ì„ ì •: [ì¸í„°ë™í‹°ë¸Œ/ëŒ€í™”í˜•] (10ëŒ€ íƒ€ê²Ÿì— ì í•©)\n\nì¹´í”¼ ìƒì„±: \"ì´ ë§›ìˆëŠ” [ì´ˆì½”ìš°ìœ  ì¼€ìµ] ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\"\n\n(ìµœì¢… ì¶œë ¥ - 4ë‹¨ê³„) ì´ ë§›ìˆëŠ” ì´ˆì½”ìš°ìœ  ì¼€ìµ ë¨¹ì–´ë³¼ ê±°ì•¼? ë¨¹ì„ ê±°ë©´ ë„ë•ì—¬.\n\nì¶œë ¥ í˜•ì‹ (Output Format): [ë¬¸ì¥ 1 (TTS/ìë§‰ ë¼ì¸ 1)] [ë¬¸ì¥ 2 (TTS/ìë§‰ ë¼ì¸ 2)] [ë¬¸ì¥ 3 (í•„ìš”ì‹œ)]"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1440,
        2848
      ],
      "id": "d69b2cc5-ff34-4b72-81b7-f984c402fa1b",
      "name": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°"
    },
    {
      "parameters": {
        "operation": "binaryToPropery",
        "binaryPropertyName": "imageData",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        1840,
        2336
      ],
      "id": "36764a5e-3f3c-495c-a1dc-3af7bb4a8a91",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "imageBase64",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        3328,
        2336
      ],
      "id": "d2e91e39-2b5a-4481-b59d-da6be3339122",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "url": "=https://generativelanguage.googleapis.com/v1beta/{{ $json.name }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyBrxiYofL0fSJljJAG0l7RYA7Ia5vGFKsE"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4896,
        2320
      ],
      "id": "50488c22-cee7-4978-a862-4cc8e4fe9435",
      "name": "ìƒíƒœí™•ì¸"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyBrxiYofL0fSJljJAG0l7RYA7Ia5vGFKsE"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contents\": [{\n    \"parts\": [\n      {\n        \"text\": \"{{ $('Merge').item.json.output }}\"\n      },\n      {\n        \"inline_data\": {\n          \"mimeType\": \"image/png\",\n          \"data\": \"{{ $('Merge').item.json.data }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"maxOutputTokens\": 2048,\n    \"temperature\": 0.9,  \n    \"imageConfig\": {\n    \"aspectRatio\": \"9:16\"\n   }\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2912,
        2336
      ],
      "id": "52a87b3f-56b4-4e55-85ed-ff411038ba27",
      "name": "ì´ë¯¸ì§€ìƒì„±"
    },
    {
      "parameters": {
        "amount": 2,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        4752,
        2320
      ],
      "id": "1480eb39-d1ad-4009-a2a4-43a13a205813",
      "name": "Wait1",
      "webhookId": "49b8a749-f134-4aba-9202-cdf8f6c1750b"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2192,
        2336
      ],
      "id": "c582ca83-2423-4e1b-85b8-24a47d2bc97f",
      "name": "Merge"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "numberInputs": 3,
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        5904,
        2784
      ],
      "id": "de7f4686-3d96-4f81-9a69-c39b122ec0dc",
      "name": "ë³‘í•©4"
    },
    {
      "parameters": {
        "url": "={{ $json.response.generateVideoResponse.generatedSamples[0].video.uri }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "AIzaSyBrxiYofL0fSJljJAG0l7RYA7Ia5vGFKsE"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5120,
        2320
      ],
      "id": "87aaf8b6-647d-416e-9a56-ef2fabd60e82",
      "name": "ì˜ìƒë‹¤ìš´"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.videoPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        5568,
        2320
      ],
      "id": "5b8ef98a-467e-4595-a671-79343c956a6b",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\nmkdir -p /tmp/n8n_video"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        800,
        2608
      ],
      "id": "fac55469-76e1-4a93-98b1-dd3a03b4fc7b",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "jsCode": "// ============================================\n// ğŸ¯ ëª©ì : Gemini API ì‘ë‹µì—ì„œ ë™ì ìœ¼ë¡œ ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸°\n// ============================================\n\n// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = items[0].json;\n\n// ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜\nlet imageData = null;\nlet imageFound = false;\n\n// candidates ë°°ì—´ ìˆœíšŒ\nif (inputData.candidates && Array.isArray(inputData.candidates)) {\n  for (const candidate of inputData.candidates) {\n    // content.parts ë°°ì—´ í™•ì¸\n    if (candidate.content && candidate.content.parts && Array.isArray(candidate.content.parts)) {\n      for (const part of candidate.content.parts) {\n        // inlineData.dataê°€ ìˆëŠ”ì§€ í™•ì¸\n        if (part.inlineData && part.inlineData.data) {\n          imageData = part.inlineData.data;\n          imageFound = true;\n          console.log('âœ… ì´ë¯¸ì§€ ë°ì´í„° ë°œê²¬! ê²½ë¡œ:', JSON.stringify(part.inlineData.mimeType || 'unknown'));\n          break; // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨\n        }\n      }\n      if (imageFound) break; // ì™¸ë¶€ ë£¨í”„ë„ ì¤‘ë‹¨\n    }\n  }\n}\n\n// ============================================\n// ê²°ê³¼ ë°˜í™˜: ê³ ì •ëœ ê²½ë¡œë¡œ ì •ê·œí™”\n// ============================================\nif (!imageFound || !imageData) {\n  throw new Error('âŒ Gemini API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.');\n}\n\n// ê³ ì •ëœ ê²½ë¡œë¡œ ë°ì´í„° ë°˜í™˜\nreturn [{\n  json: {\n    imageBase64: imageData, // â† Convert to File ë…¸ë“œì—ì„œ ì´ ê²½ë¡œ ì‚¬ìš©\n    mimeType: 'image/png',\n    originalResponse: inputData // ë””ë²„ê¹…ìš© (ì„ íƒì‚¬í•­)\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3120,
        2336
      ],
      "id": "c493025d-2f4d-43f4-a534-bc3195339c46",
      "name": "ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "1. í˜ë¥´ì†Œë‚˜ (Persona):\n\në‹¹ì‹ ì€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜(Gemini 2.5 Flash / Imagen 4)' ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì— ì •í†µí•œ AI ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€ì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì˜ í•µì‹¬ ì—­ëŸ‰ì€ (1) ê´‘ê³  ì¹´í”¼ì— ë‹´ê¸´ ì¶”ìƒì ì¸ í•µì‹¬ ë©”ì‹œì§€ì™€ ê°ì„±ì„ íŒŒì•…í•˜ê³ , (2) ì°¸ì¡° ì´ë¯¸ì§€ì˜ ì‹œê°ì  ìŠ¤íƒ€ì¼ì„ 'ì–¸ë²ˆë“¤ë§(Unbundling)' ê¸°ë²•(ë°±ì„œ 5.2ì ˆ)ìœ¼ë¡œ ë¶„í•´í•˜ë©°, (3) ì´ ë‘ ìš”ì†Œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ìœµí•©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì˜ ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì„ ìµœì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ í•­ìƒ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' ë°©ì‹ê³¼ [5.1ì¥]ì˜ 'ì‚¬ì§„í•™ì  ì „ë¬¸ ìš©ì–´' ì›ì¹™ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\n\nì‚¬ìš©ì ì…ë ¥ (ë©€í‹°ëª¨ë‹¬):\n\n[ê´‘ê³  ë¬¸êµ¬]: ì‚¬ìš©ìê°€ ì „ë‹¬í•˜ëŠ” í…ìŠ¤íŠ¸ (ì˜ˆ: \"ì„¸ìƒì˜ ì†ŒìŒì„ ì ì¬ìš°ëŠ” ìˆœê°„. ì˜¤ì§ ë‹¹ì‹ ë§Œì„ ìœ„í•œ ì‚¬ìš´ë“œ. [ì œí’ˆëª…] ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ í—¤ë“œí°.\")\n\n[ì°¸ì¡° ì´ë¯¸ì§€]: ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€. (ì´ ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼, êµ¬ë„, ì¡°ëª…, ìƒ‰ê°ì„ ì°¸ì¡°í•´ì•¼ í•©ë‹ˆë‹¤.)\n\ní•µì‹¬ ëª©í‘œ: ê´‘ê³  ë¬¸êµ¬ì˜ ë©”ì‹œì§€ë¥¼ ì°¸ì¡° ì´ë¯¸ì§€ì˜ ìŠ¤íƒ€ì¼ë¡œ ì‹œê°í™”í•˜ëŠ”, 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜'ì— ìµœì í™”ëœ ë‹¨ì¼ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.\n\n3. ì„ë¬´ (Task):\n\në‹¹ì‹ ì€ ë‹¤ìŒì˜ ë‹¨ê³„ë³„ ì¶”ë¡ (Chain of Thought) ê³¼ì •ì„ ê±°ì³ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n1ë‹¨ê³„ (ê´‘ê³  ë¬¸êµ¬ ë¶„ì„): ì‚¬ìš©ìì˜ [ê´‘ê³  ë¬¸êµ¬]ë¥¼ ë¶„ì„í•˜ì—¬ **í•µì‹¬ ë©”ì‹œì§€, íƒ€ê²Ÿ ê°ì •(ì˜ˆ: í‰ì˜¨í•¨, ì—­ë™ì„±), ê·¸ë¦¬ê³  í•µì‹¬ ì£¼ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼)**ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„ (ì°¸ì¡° ì´ë¯¸ì§€ 'ì–¸ë²ˆë“¤ë§'): ì‚¬ìš©ìì˜ [ì°¸ì¡° ì´ë¯¸ì§€]ë¥¼ (ë³¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì •ì˜í•œ) [ê¸°ìˆ  ë°±ì„œ 5.2ì ˆ]ì˜ 'ì–¸ë²ˆë“¤ë§' ì „ëµì— ë”°ë¼ êµ¬ì²´ì ì¸ ì‹œê° ìš”ì†Œ í† í°ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.\n\n(ì˜ˆ: 'ì°¨ê°€ìš´ í†¤', 'ê·¹ì ì¸ í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ ì¡°ëª…', 'ì–•ì€ ì‹¬ë„', 'ë¯¸ë‹ˆë©€í•œ êµ¬ë„', 'ê±°ì¹œ ì§ˆê°', 'ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ìƒ‰ê°' ë“±)\n\n3ë‹¨ê³„ (ë©€í‹°ëª¨ë‹¬ ìœµí•© ê¸°íš): 1ë‹¨ê³„ì˜ 'ë©”ì‹œì§€/ê°ì •'ê³¼ 2ë‹¨ê³„ì˜ 'ì‹œê° ìŠ¤íƒ€ì¼'ì„ ìœµí•©í•˜ëŠ” **'í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ì¥ë©´'**ì„ ê¸°íší•©ë‹ˆë‹¤. (ë°±ì„œ 6ì¥ 'ë©€í‹°ëª¨ë‹¬ í•©ì„±' ì›ë¦¬ ì‘ìš©)\n\n(ì‚¬ê³  ì˜ˆ: ë¬¸êµ¬ì˜ 'ê³ ìš”í•¨' + ì´ë¯¸ì§€ì˜ 'ì°¨ê°€ìš´ ë¯¸ë‹ˆë©€ë¦¬ì¦˜' = \"ì°¨ê°€ìš´ ìƒˆë²½ë…˜, ë¯¸ë‹ˆë©€í•œ ìŠ¤íŠœë””ì˜¤ì—ì„œ ì œí’ˆì—ë§Œ ë¶€ë“œëŸ¬ìš´ ë¹›ì´ ì§‘ì¤‘ë˜ëŠ” ì¥ë©´\"ì„ ì—°ì¶œ)\n\n4ë‹¨ê³„ (ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±): 3ë‹¨ê³„ì—ì„œ ê¸°íší•œ ì¥ë©´ì„ [ê¸°ìˆ  ë°±ì„œ 4ì¥]ì˜ **5ë‹¨ê³„ í•µì‹¬ êµ¬ì¡°(ì£¼ì²´, êµ¬ë„, ì•¡ì…˜, í™˜ê²½, ìŠ¤íƒ€ì¼)**ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ì œë¯¸ë‹ˆ ì¶”ë¡  ì—”ì§„ì— ìµœì í™”ëœ ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n\n4. ê·œì¹™ (Rules):\n\nì„œì‚¬ì  êµ¬ì¡°: ìµœì¢… í”„ë¡¬í”„íŠ¸ëŠ” ë‹¨ìˆœ 'í‚¤ì›Œë“œ ë‚˜ì—´'ì´ ì•„ë‹Œ, ì™„ê²°ëœ 'ì„œì‚¬ì  ì¥ë©´ ë¬˜ì‚¬' í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ë¯¸ì§€ ê°€ê³µ : ë°˜ë“œì‹œ ì œê³µëœ ì´ë¯¸ì§€ì˜ ë©”ì¸ ìš”ì†ŒëŠ” ì›í˜•ì„ ìµœëŒ€í•œ ìœ ì§€í•˜ì—¬ ê°€ê³µ í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì „ë¬¸ ìš©ì–´: [ê¸°ìˆ  ë°±ì„œ 5.1ì ˆ]ì— ë”°ë¼ ì‚¬ì§„í•™ì /ë¯¸ìˆ ì  ì „ë¬¸ ìš©ì–´(ì˜ˆ: 85mm ì¸ë¬¼ ë Œì¦ˆ, ì–•ì€ ì‹¬ë„, í™©ê¸ˆì‹œê°„ëŒ€ ì¡°ëª…, ë¡œìš°ì•µê¸€ ìƒ·, í‚¤ì•„ë¡œìŠ¤ì¿ ë¡œ)ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì œì–´ ì •ë°€ë„ë¥¼ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\ní…ìŠ¤íŠ¸ ë Œë”ë§: ë¬¸êµ¬ì— í…ìŠ¤íŠ¸ ë Œë”ë§ì´ í•„ìš”í•œ ê²½ìš°, [ë°±ì„œ 5.3ì ˆ] í…œí”Œë¦¿ì— ë”°ë¼ ...the text \"[ë Œë”ë§í•  ì •í™•í•œ í…ìŠ¤íŠ¸]\" í˜•ì‹ì„ í”„ë¡¬í”„íŠ¸ì— ëª…í™•íˆ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nìœµí•©: ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ [ê´‘ê³  ë¬¸êµ¬]ì˜ ë©”ì‹œì§€ì™€ [ì°¸ì¡° ì´ë¯¸ì§€]ì˜ ìŠ¤íƒ€ì¼, ë‘ ìš”ì†Œë¥¼ ëª¨ë‘ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì¶œë ¥ ì—„ìˆ˜: 1~3ë‹¨ê³„ì˜ ë‚´ë¶€ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤ì§ 4ë‹¨ê³„ì—ì„œ ì™„ì„±ëœ ìµœì¢… ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì„¤ì • : ë°˜ë“œì‹œ ê´‘ê³ ë¬¸êµ¬ë¥¼ ìµœëŒ€í•œ ì´í•´í•˜ê³  ë°˜ì˜ í•´ì•¼í•©ë‹ˆë‹¤.\n\nê¸°í˜¸ : '\"\"'ëŠ” ì ˆëŒ€ ì‚¬ìš© í•˜ì§€ë§ˆì„¸ìš”.\n\n5. ì˜ˆì‹œ (Examples):\n\n(ì…ë ¥ 1 - ê´‘ê³  ë¬¸êµ¬): \"ë„ì‹œì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ìƒì¾Œí•¨. [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„°. ìì—° ê·¸ëŒ€ë¡œì˜ ì²­ëŸ‰ê°.\"\n\n(ì…ë ¥ 2 - ì°¸ì¡° ì´ë¯¸ì§€): [ì°¨ê°€ìš´ í†¤ì˜, ë¬¼ë°©ìš¸ì´ ë§ºíŒ, ì‚¬ì´ë²„í‘í¬ ë„¤ì˜¨ ì¡°ëª… ë„ì‹œì˜ ë°¤ê±°ë¦¬ ì´ë¯¸ì§€]\n\n(ì¶œë ¥ - ìƒì„±ëœ í”„ë¡¬í”„íŠ¸): \"ì–´ë‘¡ê³  ì¶•ì¶•í•œ ì‚¬ì´ë²„í‘í¬ ë„ì‹œì˜ ë°¤ê±°ë¦¬, ë„¤ì˜¨ ë¶ˆë¹› ê°„íŒì´ ì –ì€ ì•„ìŠ¤íŒ”íŠ¸ì— ë°˜ì‚¬ë˜ëŠ” í™˜ê²½ ì†ì—ì„œ, [ì•„ì¿ ì•„ í“¨ì–´] ìŠ¤íŒŒí´ë§ ì›Œí„° ë³‘ì´ í´ë¡œì¦ˆì—…ë˜ì–´ ìˆë‹¤. ë³‘ í‘œë©´ì—ëŠ” ê·¹ë„ë¡œ ì°¨ê°‘ê³  ì„ ëª…í•œ ë¬¼ë°©ìš¸ë“¤ì´ ë§ºí˜€ ìˆìœ¼ë©°, ë³‘ ìì²´ì—ì„œ ì€ì€í•œ ì²­ë¡ìƒ‰ ë¹›ì´ ë¿œì–´ì ¸ ë‚˜ì™€ ì£¼ë³€ì˜ ì—´ê¸°ë¥¼ ì‹íˆëŠ” ë“¯í•œ ëŠë‚Œì„ ì¤€ë‹¤. ì¹´ë©”ë¼ëŠ” 100mm ë§¤í¬ë¡œ ë Œì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ë³‘ì˜ ë””í…Œì¼ê³¼ ë¬¼ë°©ìš¸ì„ ê·¹ì‚¬ì‹¤ì ìœ¼ë¡œ í¬ì°©í•˜ë©°, ë°°ê²½ì˜ ë„¤ì˜¨ ì¡°ëª…ì€ ì•„ë¦„ë‹¤ìš´ ë³´ì¼€ íš¨ê³¼ë¡œ íë ¤ì ¸ ìˆë‹¤. ì „ì²´ì ìœ¼ë¡œ ì°¨ê°‘ê³  ì²­ëŸ‰í•œ í†¤ì˜ ê³ í•´ìƒë„ 3D ë Œë” ìŠ¤íƒ€ì¼.\"\n\nì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n6. ì¶œë ¥ í˜•ì‹ (Output Format):\n\nìµœì¢… ê²°ê³¼ë¬¼ì€ ìœ„ 4ë‹¨ê³„(ì„œì‚¬ì  í”„ë¡¬í”„íŠ¸ ìƒì„±)ë¥¼ í†µí•´ ì™„ì„±ëœ **'ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ë³¸ë¬¸'**ë§Œì„ í…ìŠ¤íŠ¸ë¡œ ì œê³µí•©ë‹ˆë‹¤. (1~3ë‹¨ê³„ì˜ ë¶„ì„ ê³¼ì •ì€ ì ˆëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\nğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ\n\nì´ í”„ë¡¬í”„íŠ¸ëŠ” **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸(ì»¤ìŠ¤í…€ ëª…ë ¹ì–´)**ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡¬í”„íŠ¸ë¥¼ AI(ì˜ˆ: Gemini)ì— ë¨¼ì € ì…ë ¥í•˜ì—¬ AIì˜ ì—­í• ì„ 'ë¹„ì£¼ì–¼ ë¸Œëœë”© ì „ëµê°€'ë¡œ ì„¤ì •í•˜ì„¸ìš”.\n\nê·¸ í›„, (1) ê´‘ê³  ë¬¸êµ¬ì™€ (2) ì°¸ì¡° ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ì œê³µí•˜ë©´, AIê°€ 'ë‚˜ë…¸ ë°”ë‚˜ë‚˜' ëª¨ë¸ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ì¶œë ¥í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.\n\në” ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ìœ„í•´, [ì°¸ì¡° ì´ë¯¸ì§€]ëŠ” ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ê³¼ ë¶„ìœ„ê¸°ê°€ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” ê³ í’ˆì§ˆ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1776,
        2608
      ],
      "id": "0aa0c9a6-6441-45c9-888d-71911d39ee29",
      "name": "ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "í˜ë¥´ì†Œë‚˜ (Persona):\në‹¹ì‹ ì€ ì „ë¬¸ AI ì´¬ì˜ ê°ë…ì´ì 'ë¹„ì „ ì—”ì§€ë‹ˆì–´'ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì „ë¬¸ ë¶„ì•¼ëŠ” ì¶”ìƒì ì¸ ê´‘ê³  ì¹´í”¼ë¥¼ ê°•ë ¥í•œ 8ì´ˆ ë¶„ëŸ‰ì˜ ë¬´ìŒ ì‹œê° ë‚´ëŸ¬í‹°ë¸Œë¡œ ë²ˆì—­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në‹¹ì‹ ì€ ì˜¤ì§ Googleì˜ Veo3 ë¹„ë””ì˜¤ ìƒì„± ì—”ì§„ì„ í†µí•´ì„œë§Œ ì‹œê°ì  ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•  ìˆ˜ ìˆìœ¼ë©°, Veo3ì˜ ì ì¬ë ¥ì„ ìµœëŒ€ì¹˜ë¡œ ëŒì–´ë‚´ëŠ” í”„ë¡¬í”„íŠ¸ ì„¤ê³„ì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ 'ì‹œë„¤ë§ˆí‹± ì–¸ì–´'ë¡œë§Œ ìƒê°í•˜ê³  ì†Œí†µí•©ë‹ˆë‹¤.\n\n2. ë§¥ë½ (Context):\nì…ë ¥: ì‚¬ìš©ìê°€ ê´‘ê³  ë¬¸êµ¬(ëª¨ë“  ì–¸ì–´)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\nëª©í‘œ: ì œê³µëœ ê´‘ê³  ë¬¸êµ¬ë¥¼ ë¶„ì„í•˜ì—¬, Veo3 ëª¨ë¸ì—ì„œ ìµœê³ ì˜ ì‹œë„¤ë§ˆí‹± í’ˆì§ˆì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë‹¨ í•˜ë‚˜ì˜, ë§¤ìš° ìƒì„¸í•˜ê³  ê¸°ìˆ ì ìœ¼ë¡œ ì •ë°€í•œ ì˜ë¬¸(English) ë¹„ë””ì˜¤ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n3. Veo3 ìµœì í™” í•µì‹¬ ì›ì¹™:\në‹¹ì‹ ì€ Veo3ì˜ ë Œë”ë§ ì—”ì§„ì„ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê³  ìˆìœ¼ë©°, ë‹¤ìŒ í•µì‹¬ ì›ì¹™ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì›ì¹™ 1: ë¬¼ë¦¬ì  êµ¬ì²´ì„± (ê°ì •ì˜ ë°°ì œ) Veo3ëŠ” ì¶”ìƒì ì¸ 'ê°ì •'ì„ ë Œë”ë§í•˜ì§€ ëª»í•˜ì§€ë§Œ, 'ë¬¼ë¦¬ì  í–‰ë™'ì€ ì™„ë²½í•˜ê²Œ ë Œë”ë§í•©ë‹ˆë‹¤. (ì˜ˆ: 'í–‰ë³µ' ëŒ€ì‹  'ì…ê¼¬ë¦¬ê°€ ì²œì²œíˆ ì˜¬ë¼ê°€ë©° ëˆˆì´ ê°€ëŠ˜ì–´ì§€ëŠ” ëª¨ìŠµ', 'ìŠ¬í””' ëŒ€ì‹  'ë¯¸ê°„ì„ ì°¡ê·¸ë¦¬ë©° ëº¨ì„ íƒ€ê³  íë¥´ëŠ” ëˆˆë¬¼ í•œ ë°©ìš¸')\n\nì›ì¹™ 2: ê¸°ìˆ ì  ì •ë°€ì„± (Jargon í™œìš©) Veo3ëŠ” ëª¨í˜¸í•œ í‘œí˜„ë³´ë‹¤ êµ¬ì²´ì ì¸ ê¸°ìˆ  ìš©ì–´ì— í›¨ì”¬ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤. (ì˜ˆ: ìƒ·, ì•µê¸€, ë Œì¦ˆ ì¢…ë¥˜ Anamorphic lens flare, Jib shot, í•„ë¦„ ìŠ¤íƒ€ì¼ Kodak Vision3 500T grain, ì¡°ëª… Chiaroscuro lighting, Kino Flo light)\n\nì›ì¹™ 3: 8ì´ˆì˜ ì•ˆë¬´ (Movement Focus) Veo3ëŠ” ì •ì§€ëœ ì´ë¯¸ì§€ê°€ ì•„ë‹Œ, 8ì´ˆ ë™ì•ˆ ì¼ì–´ë‚˜ëŠ” 'ì¹´ë©”ë¼ì˜ ì›€ì§ì„'ê³¼ 'í”¼ì‚¬ì²´ì˜ ë¯¸ë¬˜í•œ ë³€í™”'ë¥¼ êµ¬í˜„í•˜ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤. (ì˜ˆ: a slow 8-second dolly-in, a continuous 8s pedestal shot rising, petals slowly unfurling over 8 seconds)\n\n4. ì„ë¬´ (Task - ìƒê°ì˜ ì‚¬ìŠ¬):\n1ë‹¨ê³„: ë¶„ì„ ë° í•´ì²´: ì…ë ¥ëœ ê´‘ê³ ë¬¸êµ¬ë¥¼ ì½ìŠµë‹ˆë‹¤. í•µì‹¬ ë©”ì‹œì§€, í•µì‹¬ í”¼ì‚¬ì²´(ì œí’ˆ ë˜ëŠ” ì¸ë¬¼), ì˜ë„ëœ ê°ì •, ì „ë°˜ì ì¸ ë¸Œëœë“œ í†¤ì„ ì‹ë³„í•©ë‹ˆë‹¤. ë°˜ë“œì‹œ ê´‘ê³ ë¬¸êµ¬ë¥¼ í™•ì‹¤í•˜ê²Œ ì¸ì§€í•˜ê³  ìµœëŒ€í•œ ë°˜ì˜ í•´ì•¼ í•©ë‹ˆë‹¤.\n\n2ë‹¨ê³„: ì‹œê°í™” (í•µì‹¬ í–‰ë™): í•µì‹¬ ë©”ì‹œì§€ë¥¼ (ì›ì¹™ 1, 3ì— ë”°ë¼) ë‹¨ í•˜ë‚˜ì˜, ê°„ê²°í•˜ê³  ê°•ë ¥í•œ 'ë¬¼ë¦¬ì  í–‰ë™' ë˜ëŠ” 'ì‹œê°ì  ì€ìœ 'ë¡œ ë²ˆì—­í•©ë‹ˆë‹¤.\n\n3ë‹¨ê³„: ì‹œê°í™” (ì¥ë©´ êµ¬ì¶•): 'ì¶œë ¥ í˜•ì‹'ì˜ êµ¬ì¡°í™” ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ì´ í–‰ë™ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì¥ë©´ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. (ì›ì¹™ 2ì— ë”°ë¼) ëª¨ë“  êµ¬ì„± ìš”ì†Œ(ìƒ·, ì•µê¸€, ì¡°ëª…, ìƒ‰ê°, ë Œì¦ˆ íš¨ê³¼)ë¥¼ ê¸°ìˆ ì ìœ¼ë¡œ ì •í™•í•˜ê²Œ ì •ì˜í•©ë‹ˆë‹¤.\n\n4ë‹¨ê³„: ì •ì œ ë° êµ¬ì„±: ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ Veo3.1ì´ ê°€ì¥ ì˜ ì´í•´í•  ìˆ˜ ìˆëŠ” ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ë¡œ ì¡°ë¦½í•©ë‹ˆë‹¤. extreme slow-motion, a slow 8-second dolly-in, 8s clipê³¼ ê°™ì€ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”ì‹œë˜ëŠ” ì§€ì† ì‹œê°„ì´ ì•½ 8ì´ˆê°€ ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.\n\n5. ê·œì¹™ (Rules - ì œì•½ ì¡°ê±´):\nìµœì¢… ì¶œë ¥ì€ ì˜ì–´ë¡œë§Œ (ì ˆëŒ€ í•„ìˆ˜): ë‹¹ì‹ ì˜ ìµœì¢… ê²°ê³¼ë¬¼ì€ ë°˜ë“œì‹œ **ì™„ì „í•œ ì˜ì–´(English)**ë¡œ ëœ í”„ë¡¬í”„íŠ¸ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\në¬´ìŒ ì˜ìƒ (ì ˆëŒ€ í•„ìˆ˜): í”„ë¡¬í”„íŠ¸ëŠ” ë°˜ë“œì‹œ ë¬´ìŒ(ì˜¤ë””ì˜¤, ìŒí–¥ íš¨ê³¼, ëŒ€ì‚¬ ì—†ìŒ) ë¹„ë””ì˜¤ë¥¼ ìœ„í•œ ê²ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. silent video. non audio.\n\n8ì´ˆ ë¶„ëŸ‰: ë¬˜ì‚¬ë˜ëŠ” í–‰ë™ì€ 8ì´ˆ ì´ë‚´ì— í˜„ì‹¤ì ìœ¼ë¡œ ë§ì•„ì•¼ í•©ë‹ˆë‹¤. ë°˜ë“œì‹œ --duration 8 ë˜ëŠ” 8-second shotê³¼ ê°™ì€ íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\n\nê°ì • ëŒ€ì‹  í–‰ë™ ë¬˜ì‚¬ (Veo3 í•µì‹¬ ê·œì¹™): 'ìŠ¬í”ˆ', 'í–‰ë³µí•œ', 'ì‹ ë‚˜ëŠ”'ê³¼ ê°™ì€ ëª¨í˜¸í•œ ê°ì • ë‹¨ì–´ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì‹­ì‹œì˜¤. (ë§¤ìš° ì¤‘ìš”: Veo3ì˜ í’ˆì§ˆì„ ê²°ì •ì§“ëŠ” ê°€ì¥ í•µì‹¬ì ì¸ ê·œì¹™ì…ë‹ˆë‹¤.)\n\nêµ¬ì²´ì„±: Veo3ëŠ” 'ë°ì€ ì¡°ëª…'ë³´ë‹¤ 'ì˜¤ì „ 7ì‹œì˜ ë¶€ë“œëŸ¬ìš´ ì¸¡ê´‘(soft side light)'ì´ë‚˜ 'Kino Flo 4Bank' ê°™ì€ êµ¬ì²´ì ì¸ ì¡°ëª…ì„ ë” ì˜ ì´í•´í•©ë‹ˆë‹¤.\n\në‹¨ì¼ ì¶œë ¥: ë‹¹ì‹ ì˜ ì „ì²´ ì‘ë‹µì€ ì˜¤ì§ ìµœì¢… ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ ì–´ë–¤ ì„¤ëª…, ê¸°í˜¸ë‚˜ ì¸ì‚¬ë§ë„ ì¶”ê°€í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n\n6. ì˜ˆì‹œ (Few-Shot Example for Veo3):\n[ì…ë ¥ ì˜ˆì‹œ 1]: \"ë‚´ë©´ì˜ ì—´ì •ì„ ê¹¨ìš°ì„¸ìš”.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 1]: Extreme close-up (ECU) from a low angle of a single drop of sweat rolling down a marathon runner's temple, the runner's jaw is set with determination, blurred city marathon background at sunrise, harsh directional sunlight creates dramatic anamorphic lens flare, high-contrast monochrome with deep blacks and Kodak Vision3 500T film grain, cinematic realism, extreme slow-motion, 8-second shot, --duration 8\n\n[ì…ë ¥ ì˜ˆì‹œ 2]: \"ê°€ì¥ ìˆœìˆ˜í•œ í˜•íƒœì˜ íœ´ì‹.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 2]: Medium shot (MS), eye-level, of a pair of bare feet slowly digging into wet, dark sand as a gentle ocean wave recedes, minimalist beach with only sand and water visible, soft overcast morning light (diffused), muted earth tones with a 'bleach bypass' color grade, serene and calm, stable 8-second static shot, silent film, --duration 8\n\n[ì…ë ¥ ì˜ˆì‹œ 3]: \"ë„ì‹œì˜ ì‹¬ì¥ì´ ë›´ë‹¤.\"\n\n[ì¶œë ¥ ì˜ˆì‹œ 3]: An 8-second time-lapse, low-angle shot, looking up at a skyscraper, capturing the rapid movement of clouds reflecting off the glass facade, artery-like light trails from traffic streak below, sharp chiaroscuro lighting, deep blue and teal color grade, cyberpunk aesthetic, 8s clip, --duration 8\n\n- ì˜ˆì‹œëŠ” ì˜ˆì‹œì¼ ë¿ êµ­í•œ ë˜ì§€ ë§ˆì„¸ìš”\n\n7. ì¶œë ¥ í˜•ì‹ (í•„ìˆ˜):\në‹¹ì‹ ì€ ì˜¤ì§ ìµœì¢… ë‹¨ì¼ ë¼ì¸ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´ë§Œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë¬¸ìì—´ì€ ë‹¤ìŒ êµ¬ì¡°ë¥¼ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤: [ìƒ· ì¢…ë¥˜ & ì•µê¸€] of [í”¼ì‚¬ì²´ & ëª…í™•í•œ í–‰ë™], [ê¹Šì´ ìˆëŠ” ìƒì„¸í•œ ë°°ê²½], [íŠ¹ì • ì¡°ëª… ë””ìì¸], [ì´ë¦„ì´ ìˆëŠ” ìƒ‰ ë³´ì • ìŠ¤íƒ€ì¼/í•„ë¦„ íš¨ê³¼], [í†¤/ì¥ë¥´], [ì¹´ë©”ë¼ ì›€ì§ì„ ë° 8ì´ˆ ë¬´ìŒ ê¸°ìˆ  íŒŒë¼ë¯¸í„°]"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        2528,
        2736
      ],
      "id": "8a3daf7b-81aa-4e7d-b87a-5257f617ca73",
      "name": "ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1"
    },
    {
      "parameters": {
        "jsCode": "// â­ Gemini ì¶œë ¥ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ\nconst inputData = $('ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°').item.json;\nconst scriptText = inputData.output;\n\nconsole.log('=== ìë§‰ ìƒì„± (í…ìŠ¤íŠ¸ â†’ SRT) ===');\nconsole.log('ì…ë ¥ í…ìŠ¤íŠ¸:', scriptText);\n\nif (!scriptText) {\n  throw new Error('âŒ output í•„ë“œê°€ ì—†ìŠµë‹ˆë‹¤!');\n}\n\n// â­ í…ìŠ¤íŠ¸ë¥¼ ì¤„ ë‹¨ìœ„ë¡œ ë¶„ë¦¬\nconst lines = scriptText.trim().split('\\n').filter(line => line.trim());\n\n// â­ SRT í˜•ì‹ìœ¼ë¡œ ë³€í™˜\nlet srtContent = '';\nconst durationPerLine = 4; // ê° ì¤„ë‹¹ 4ì´ˆ\nlet currentTime = 0;\n\nlines.forEach((line, index) => {\n  const startTime = currentTime;\n  const endTime = currentTime + durationPerLine;\n  \n  // SRT ì‹œê°„ í˜•ì‹ (00:00:01,500)\n  const formatTime = (seconds) => {\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor((seconds % 3600) / 60);\n    const s = Math.floor(seconds % 60);\n    const ms = Math.floor((seconds % 1) * 1000);\n    return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')},${String(ms).padStart(3, '0')}`;\n  };\n  \n  srtContent += `${index + 1}\\n`;\n  srtContent += `${formatTime(startTime)} --> ${formatTime(endTime)}\\n`;\n  srtContent += `${line}\\n\\n`;\n  \n  currentTime = endTime;\n});\n\nconsole.log('âœ… SRT ë³€í™˜ ì™„ë£Œ');\nconsole.log('ë¼ì¸ ìˆ˜:', lines.length);\nconsole.log('SRT ê¸¸ì´:', srtContent.length);\n\n// â­ ë‹¤ìŒ ë…¸ë“œë¡œ ì „ë‹¬\nconst timestamp = Date.now();\nconst baseDir = '/tmp/n8n_video';\n\nreturn {\n  json: {\n    timestamp: timestamp,\n    tmpDir: baseDir,\n    subtitlePath: `${baseDir}/subtitle_${timestamp}.srt`,\n    subtitleContent: srtContent,\n    outputPath: `${baseDir}/output_${timestamp}.mp4`,\n    scriptText: scriptText,\n    hasAudio: false\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5200,
        3008
      ],
      "id": "faed2737-87ed-45ca-9ecf-dbc630cd9664",
      "name": "ìë§‰ ìƒì„±1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a073daae-037e-4d8f-bc0b-2761d1de41bc",
              "name": "imageUrl",
              "value": "=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/uploads/{{ $json.storage_path }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1328,
        2336
      ],
      "id": "5a546ee3-27fb-49dc-b2f9-49321cbb03b3",
      "name": "ì´ë¯¸ì§€ URL ìƒì„±"
    },
    {
      "parameters": {
        "url": "https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_info?select=*&order=created_at.desc&limit=1",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"
            },
            {
              "name": "Authorization",
              "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjMzODU4OSwiZXhwIjoyMDc3OTE0NTg5fQ.5aZ8bInmxJ0I94zn1GLwmtGP1S6BxDUKhyK6_HVkOOg"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1136,
        2848
      ],
      "id": "91d9a345-0059-45a5-8d4e-63906edadc82",
      "name": "ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…"
    },
    {
      "parameters": {
        "url": "https://dcbvrbljeanjzsbrqays.supabase.co/rest/v1/product_images?select=*&order=updated_at.desc&limit=1",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"
            },
            {
              "name": "Authorization",
              "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjMzODU4OSwiZXhwIjoyMDc3OTE0NTg5fQ.5aZ8bInmxJ0I94zn1GLwmtGP1S6BxDUKhyK6_HVkOOg"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1104,
        2336
      ],
      "id": "db127ad3-8074-434c-ad9d-61c3d557cfd5",
      "name": "ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€"
    },
    {
      "parameters": {
        "url": "={{ $json.imageUrl }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file",
              "outputPropertyName": "imageData"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1568,
        2336
      ],
      "id": "14c878b6-c84a-4197-8f11-c65718b3c5a9",
      "name": "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "51560738-1db2-4110-bdbb-cc24bbaa973b",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -160,
        2592
      ],
      "id": "2c849dff-b06b-430d-bb35-c021f840085f",
      "name": "Webhook",
      "webhookId": "51560738-1db2-4110-bdbb-cc24bbaa973b"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2128,
        3056
      ],
      "id": "1b4221cf-10c0-481d-8cf4-ed7acc02abb8",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "ED6NPRyKLx3renMf",
          "name": "Google Gemini(PaLM) Api account japan"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "Response Body: {\"success\": true, \"message\": \"Workflow started\"}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        96,
        2592
      ],
      "id": "5805d730-3efb-4c63-b7d4-5d1894586b30",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "amount": 3
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2608,
        2336
      ],
      "id": "1684d353-e929-4e72-806a-915b66491d7d",
      "name": "Wait2",
      "webhookId": "d40c6a75-4889-404b-8516-13545f5f97e7"
    },
    {
      "parameters": {
        "amount": 3
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        4336,
        2320
      ],
      "id": "21ccb0fd-2419-4ea8-8a45-7c4350fae78b",
      "name": "Wait3",
      "webhookId": "d40c6a75-4889-404b-8516-13545f5f97e7"
    },
    {
      "parameters": {
        "amount": 3
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3696,
        2800
      ],
      "id": "d0c92c87-e5b9-4c1e-b127-066afea9e250",
      "name": "Wait4",
      "webhookId": "d40c6a75-4889-404b-8516-13545f5f97e7"
    },
    {
      "parameters": {
        "amount": 3
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3536,
        3024
      ],
      "id": "8ee92598-dc60-4e4b-9cb2-3b38529ee52b",
      "name": "Wait5",
      "webhookId": "d40c6a75-4889-404b-8516-13545f5f97e7"
    },
    {
      "parameters": {
        "amount": 3
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        6752,
        2784
      ],
      "id": "21b08127-ca2a-41d8-8d60-65bb6dbb2dd3",
      "name": "Wait6",
      "webhookId": "d40c6a75-4889-404b-8516-13545f5f97e7"
    },
    {
      "parameters": {
        "command": "=VIDEO_PATH=\"{{ $('ê²½ë¡œ ìˆ˜ì§‘ Code1').item.json.videoPath }}\"\nAUDIO_PATH=\"{{ $('ê²½ë¡œ ìˆ˜ì§‘ Code1').item.json.audioPath }}\"\nSUBTITLE_PATH=\"{{ $('ê²½ë¡œ ìˆ˜ì§‘ Code1').item.json.subtitlePath }}\"\nOUTPUT=\"{{ $('ê²½ë¡œ ìˆ˜ì§‘ Code1').item.json.outputPath }}\"\n\necho \"=== ìë§‰ íŒŒì¼ ìƒì„± ===\"\nprintf '%s\\n' '{{ $('ê²½ë¡œ ìˆ˜ì§‘ Code1').item.json.subtitleContent }}' > \"$SUBTITLE_PATH\"\n\necho \"\"\necho \"=== íŒŒì¼ í™•ì¸ ===\"\nls -lh \"$VIDEO_PATH\" || { echo \"âŒ ì˜ìƒ ì—†ìŒ: $VIDEO_PATH\"; exit 1; }\nls -lh \"$AUDIO_PATH\" || { echo \"âŒ ì˜¤ë””ì˜¤ ì—†ìŒ: $AUDIO_PATH\"; exit 1; }\nls -lh \"$SUBTITLE_PATH\" || { echo \"âœ… ìë§‰ ìƒì„±: $SUBTITLE_PATH\"; }\n\necho \"\"\necho \"=== FFmpeg ì²˜ë¦¬ (TTS ì˜¤ë””ì˜¤ë¡œ êµì²´) ===\"\n\nffmpeg -y -i \"$VIDEO_PATH\" -i \"$AUDIO_PATH\" \\\n  -vf \"subtitles=$SUBTITLE_PATH:force_style='FontName=Malgun Gothic,FontSize=24,PrimaryColour=&HFFFFFF&,OutlineColour=&H000000&,Outline=2,Shadow=1,MarginV=20'\" \\\n  -map 0:v -map 1:a \\\n  -c:v libx264 -preset medium -crf 23 -pix_fmt yuv420p \\\n  -c:a aac -b:a 192k \\\n  -movflags +faststart \\\n  \"$OUTPUT\" 2>&1\n\necho \"\"\nif [ -f \"$OUTPUT\" ]; then\n    echo \"âœ… ì™„ë£Œ: $OUTPUT\"\n    echo \"$OUTPUT\"\nelse\n    echo \"âŒ FFmpeg ì‹¤íŒ¨\"\n    exit 1\nfi"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        7024,
        2784
      ],
      "id": "63699ad8-b2de-4827-bbc9-1196a3201fee",
      "name": "ìµœì¢… ì˜ìƒìƒì„±1"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconsole.log('=== ë°ì´í„° ì¶”ì¶œ ì‹œì‘ ===');\nconsole.log('ì „ì²´ ì•„ì´í…œ ìˆ˜:', items.length);\n\nlet videoUri = '';\nlet videoFileName = '';  // âœ… ë¹ˆ ë¬¸ìì—´ë¡œ ì´ˆê¸°í™”\nlet subtitleContent = '';\nlet audioPath = '';\n\n// ë°ì´í„° ì¶”ì¶œ\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  console.log(`\\n--- ì•„ì´í…œ ${i} ë¶„ì„ ---`);  // âœ… ë°±í‹± ì‚¬ìš© (í…œí”Œë¦¿ ë¦¬í„°ëŸ´)\n  console.log('JSON í‚¤:', Object.keys(item.json || {}));\n  \n  // ===== ì˜ìƒ íŒŒì¼ëª… =====\n  if (item.json?.fileName && item.json.fileName.includes('input_video')) {  // âœ… 'input_video' ë¬¸ìì—´ ê²€ìƒ‰\n    videoFileName = item.json.fileName;\n    console.log('âœ… ì˜ìƒ íŒŒì¼:', videoFileName);\n  }\n  \n  // ===== videoPathë„ í™•ì¸ (ìš°ì„ ìˆœìœ„) =====\n  if (item.json?.videoPath && item.json.videoPath.includes('input_video')) {\n    videoFileName = item.json.videoPath;\n    console.log('âœ… ì˜ìƒ íŒŒì¼ (videoPath):', videoFileName);\n  }\n  \n  // ===== ì˜ìƒ URI =====\n  if (item.json?.response?.generateVideoResponse) {\n    const samples = item.json.response.generateVideoResponse.generatedSamples;\n    if (samples?.[0]?.video?.uri) {\n      videoUri = samples[0].video.uri;\n      console.log('âœ… ì˜ìƒ URI ë°œê²¬');\n    }\n  }\n  \n  // ===== ìë§‰ =====\n  if (item.json?.subtitleContent) {\n    subtitleContent = item.json.subtitleContent;\n    console.log('âœ… ìë§‰ ë°œê²¬:', subtitleContent.substring(0, 50));\n  }\n  \n  // ===== ì˜¤ë””ì˜¤ ê²½ë¡œ =====\n  if (item.json?.audioPath) {\n    audioPath = item.json.audioPath;\n    console.log('âœ… TTS ì˜¤ë””ì˜¤ ê²½ë¡œ ë°œê²¬:', audioPath);\n  }\n}\n\n// ê²€ì¦ (ì˜¤ë””ì˜¤ëŠ” ì„ íƒì‚¬í•­)\nif (!videoFileName) {\n  console.error('âŒ ì˜ìƒ íŒŒì¼ëª…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');\n  console.error('ì…ë ¥ ë°ì´í„°:', JSON.stringify(items.map(i => i.json), null, 2));\n  throw new Error('ì˜ìƒ íŒŒì¼ëª… ì—†ìŒ');\n}\n\nif (!subtitleContent) {\n  console.error('âŒ ìë§‰ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');\n  throw new Error('ìë§‰ ì—†ìŒ');\n}\n\nif (!audioPath) {\n  console.warn('âš ï¸ TTS ì˜¤ë””ì˜¤ ê²½ë¡œê°€ ì—†ìŠµë‹ˆë‹¤. ì›ë³¸ ì˜¤ë””ì˜¤ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.');\n}\n\n// íƒ€ì„ìŠ¤íƒ¬í”„\nconst timestamp = Date.now();\nconst baseDir = '/tmp/n8n_video';\n\nconsole.log('\\n=== ìµœì¢… í™•ì¸ ===');\nconsole.log('íƒ€ì„ìŠ¤íƒ¬í”„:', timestamp);\nconsole.log('ì˜ìƒ:', videoFileName);\nconsole.log('ìë§‰ ê¸¸ì´:', subtitleContent.length);\nconsole.log('ì˜¤ë””ì˜¤ ê²½ë¡œ:', audioPath || '(ì—†ìŒ)');\n\nreturn {\n  json: {\n    timestamp: timestamp,\n    tmpDir: baseDir,\n    videoUri: videoUri,\n    videoPath: videoFileName,  // âœ… ì‹¤ì œ íŒŒì¼ëª… ì „ë‹¬\n    subtitlePath: `${baseDir}/subtitle_${timestamp}.srt`,\n    audioPath: audioPath,\n    outputPath: `${baseDir}/output_${timestamp}.mp4`,\n    subtitleContent: subtitleContent,\n    hasAudio: !!audioPath\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6128,
        2800
      ],
      "id": "263d5a67-039c-4382-9ac2-712646a8ac21",
      "name": "ë°ì´í„° ì¶”ì¶œ Code1"
    },
    {
      "parameters": {
        "jsCode": "const inputData = $input.first().json;\n\nconsole.log('=== ê²½ë¡œ ìˆ˜ì§‘ ===');\nconsole.log('videoPath:', inputData.videoPath);\nconsole.log('subtitlePath:', inputData.subtitlePath);\nconsole.log('subtitleContent ê¸¸ì´:', inputData.subtitleContent ? inputData.subtitleContent.length : 0);\n\nreturn {\n  json: {\n    videoUri: inputData.videoUri || '',\n    videoPath: inputData.videoPath,\n    subtitlePath: inputData.subtitlePath,\n    subtitleContent: inputData.subtitleContent,\n    audioPath: inputData.audioPath || \"\",\n    outputPath: inputData.outputPath,\n    hasAudio: inputData.hasAudio || false,\n    tmpDir: '/tmp/n8n_video'\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6320,
        2800
      ],
      "id": "1bb71dd6-88a7-4ee3-9844-966b8c5a9833",
      "name": "ê²½ë¡œ ìˆ˜ì§‘ Code1"
    },
    {
      "parameters": {
        "fileSelector": "={{ $json.filePath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        7456,
        2784
      ],
      "id": "84d99af4-831a-4252-883a-66e430719efd",
      "name": "Read/Write Files from Disk5"
    },
    {
      "parameters": {
        "jsCode": "// stdoutì—ì„œ ë§ˆì§€ë§‰ ì¤„(íŒŒì¼ ê²½ë¡œ) ì¶”ì¶œ\nconst stdout = $input.item.json.stdout;\n\nif (!stdout) {\n  throw new Error('stdoutì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤');\n}\n\n// ë§ˆì§€ë§‰ ì¤„ ì¶”ì¶œ (ê°œí–‰ë¬¸ìë¡œ ë¶„ë¦¬)\nconst lines = stdout.trim().split('\\n');\nconst filePath = lines[lines.length - 1].trim();\n\n// íŒŒì¼ ê²½ë¡œ ê²€ì¦\nif (!filePath.startsWith('/') || !filePath.includes('.mp4')) {\n  throw new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒì¼ ê²½ë¡œ: ${filePath}`);\n}\n\nreturn {\n  json: {\n    filePath: filePath,\n    originalStdout: stdout\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7232,
        2784
      ],
      "id": "82c48fbb-b9cf-48bd-8ff3-8e71af1ef1b4",
      "name": "íŒŒì¼ê²½ë¡œì¶”ì¶œ"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.audioPath }}",
        "options": {}
      },
      "id": "fabfd031-f82a-4938-aff7-4191cbb2257c",
      "name": "ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥1",
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        5376,
        2800
      ]
    },
    {
      "parameters": {
        "jsCode": "const tmpDir = '/tmp/n8n_video';\nconst timestamp = Date.now();\nconst videoFileName = `input_video_${timestamp}.mp4`;\nconst videoPath = `${tmpDir}/${videoFileName}`;\n\nconsole.log('=== ì˜ìƒ ì €ì¥ ì¤€ë¹„ ===');\nconsole.log('ì €ì¥ ê²½ë¡œ:', videoPath);\nconsole.log('íŒŒì¼ëª…:', videoFileName);\nconsole.log('tmpDir:', tmpDir);\n\n// Binary ë°ì´í„° í™•ì¸\nconst inputItem = $input.first();\nconst binaryData = inputItem.binary;\n\nif (!binaryData) {\n  throw new Error('âŒ ì˜ìƒ ìƒì„± ì‹¤íŒ¨: Binary ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// Binary í•„ë“œ ì´ë¦„ í™•ì¸ (ì²« ë²ˆì§¸ í•„ë“œ ì‚¬ìš©)\nconst binaryKeys = Object.keys(binaryData);\nconsole.log('âœ… ì‚¬ìš© ê°€ëŠ¥í•œ Binary í•„ë“œ:', binaryKeys);\n\nif (binaryKeys.length === 0) {\n  throw new Error('âŒ ì˜ìƒ Binary ë°ì´í„°ì— í•„ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// ì²« ë²ˆì§¸ Binary í•„ë“œë¥¼ 'data'ë¡œ í‘œì¤€í™”\nconst firstKey = binaryKeys[0];\nconsole.log('âœ… ì‚¬ìš©í•  Binary í•„ë“œ:', firstKey);\n\nreturn {\n  json: {\n    videoPath: videoPath,\n    fileName: videoFileName,\n    tmpDir: tmpDir,\n    timestamp: timestamp,\n    originalBinaryKey: firstKey\n  },\n  binary: {\n    data: binaryData[firstKey]\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5328,
        2320
      ],
      "id": "9b2234df-c540-4e58-890c-c68281c10175",
      "name": "ë¹„ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„"
    },
    {
      "parameters": {
        "jsCode": "const tmpDir = '/tmp/n8n_video';\nconst timestamp = Date.now();\nconst audioPath = `${tmpDir}/audio_${timestamp}.mp3`;\n\nconsole.log('=== ì˜¤ë””ì˜¤ ì €ì¥ ì¤€ë¹„ ===');\nconsole.log('ì €ì¥ ê²½ë¡œ:', audioPath);\nconsole.log('tmpDir:', tmpDir);\n\n// Binary ë°ì´í„° í™•ì¸\nconst inputItem = $input.first();\nconst binaryData = inputItem.binary;\n\nif (!binaryData) {\n  throw new Error('âŒ TTS ìƒì„± ì‹¤íŒ¨: Binary ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// Binary í•„ë“œ ì´ë¦„ í™•ì¸ (ì²« ë²ˆì§¸ í•„ë“œ ì‚¬ìš©)\nconst binaryKeys = Object.keys(binaryData);\nconsole.log('âœ… ì‚¬ìš© ê°€ëŠ¥í•œ Binary í•„ë“œ:', binaryKeys);\n\nif (binaryKeys.length === 0) {\n  throw new Error('âŒ TTS Binary ë°ì´í„°ì— í•„ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// ì²« ë²ˆì§¸ Binary í•„ë“œë¥¼ 'data'ë¡œ í‘œì¤€í™”\nconst firstKey = binaryKeys[0];\nconsole.log('âœ… ì‚¬ìš©í•  Binary í•„ë“œ:', firstKey);\n\nreturn {\n  json: {\n    audioPath: audioPath,\n    tmpDir: tmpDir,\n    timestamp: timestamp,\n    originalBinaryKey: firstKey,\n    output: $json.output\n  },\n  binary: {\n    data: binaryData[firstKey]\n  }\n};"
      },
      "id": "a259e703-ea8a-4224-8cef-af7a34679d6f",
      "name": "ì˜¤ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5168,
        2800
      ]
    },
    {
      "parameters": {
        "jsCode": "// ============================================\n// ğŸ¯ ë³‘í•© ë…¸ë“œì—ì„œ í”„ë¡¬í”„íŠ¸ì™€ ì´ë¯¸ì§€ ì¶”ì¶œ (ê°œì„  ë²„ì „)\n// ============================================\n\nconst items = $input.all();\n\nconsole.log('=== ë””ë²„ê¹… ì‹œì‘ ===');\nconsole.log('ë°›ì€ ì•„ì´í…œ ê°œìˆ˜:', items.length);\n\n// ì´ˆê¸°í™”\nlet promptText = '';\nlet imageBase64 = '';\n\n// ê° ì•„ì´í…œ ê²€ì‚¬\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  console.log(`\\n--- ì•„ì´í…œ ${i} ë¶„ì„ ---`);\n  \n  // ============================================\n  // í”„ë¡¬í”„íŠ¸ ì°¾ê¸° (ê°œì„ ëœ ë¡œì§)\n  // ============================================\n  if (item.json) {\n    console.log('JSON í‚¤ë“¤:', Object.keys(item.json));\n    \n    // AI Agent ë…¸ë“œëŠ” ì—¬ëŸ¬ ê°€ëŠ¥í•œ ì¶œë ¥ í˜•ì‹ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ\n    const possibleTextFields = [\n      'output',      // ì¼ë°˜ì ì¸ ì¶œë ¥\n      'text',        // í…ìŠ¤íŠ¸ ì‘ë‹µ\n      'response',    // ì‘ë‹µ\n      'result',      // ê²°ê³¼\n      'content',     // ì»¨í…ì¸ \n      'message'      // ë©”ì‹œì§€\n    ];\n    \n    // ê°€ëŠ¥í•œ ëª¨ë“  í•„ë“œë¥¼ ìˆœíšŒí•˜ë©° í”„ë¡¬í”„íŠ¸ ì°¾ê¸°\n    for (const fieldName of possibleTextFields) {\n      if (item.json[fieldName] && typeof item.json[fieldName] === 'string') {\n        const textValue = item.json[fieldName];\n        \n        // Veo í”„ë¡¬í”„íŠ¸ íŠ¹ì§•ìœ¼ë¡œ ì‹ë³„\n        if (textValue.includes('Close-Up') || \n            textValue.includes('close-up') ||\n            textValue.includes('ECU') ||\n            textValue.includes('shot') ||\n            textValue.includes('duration') ||\n            textValue.includes('8-second') ||\n            textValue.includes('8s') ||\n            textValue.length > 100) {\n          promptText = textValue;\n          console.log(`âœ… í”„ë¡¬í”„íŠ¸ ë°œê²¬! í•„ë“œ: \"${fieldName}\", ê¸¸ì´:`, promptText.length);\n          break;\n        }\n      }\n    }\n    \n    // ì—¬ì „íˆ ëª» ì°¾ì•˜ë‹¤ë©´, ëª¨ë“  ë¬¸ìì—´ ê°’ì„ ì¶œë ¥í•˜ì—¬ ë””ë²„ê¹…\n    if (!promptText) {\n      console.log('âš ï¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš© ê°€ëŠ¥í•œ ë¬¸ìì—´ ê°’ë“¤:');\n      for (const key in item.json) {\n        if (typeof item.json[key] === 'string' && item.json[key].length > 20) {\n          console.log(`  - ${key}: \"${item.json[key].substring(0, 50)}...\"`);\n        }\n      }\n    }\n  }\n  \n  // ============================================\n  // ì´ë¯¸ì§€ ì°¾ê¸° (ê¸°ì¡´ ë¡œì§ ìœ ì§€)\n  // ============================================\n  \n  // Binary ë°ì´í„° í™•ì¸\n  if (item.binary) {\n    console.log('Binary í‚¤ë“¤:', Object.keys(item.binary));\n    \n    if (item.binary.data && item.binary.data.data) {\n      imageBase64 = item.binary.data.data;\n      console.log('âœ… ì´ë¯¸ì§€ ë°œê²¬ (binary.data.data)! ê¸¸ì´:', imageBase64.length);\n    }\n  }\n  \n  // JSONì— Gemini ì‘ë‹µì´ ìˆëŠ” ê²½ìš° (ëˆ„ë¼ ë…¸ë“œ)\n  if (!imageBase64 && item.json && item.json.candidates) {\n    console.log('Gemini ì‘ë‹µ êµ¬ì¡° í™•ì¸ ì¤‘...');\n    try {\n      const candidate = item.json.candidates[0];\n      if (candidate && candidate.content && candidate.content.parts) {\n        for (const part of candidate.content.parts) {\n          if (part.inlineData && part.inlineData.data) {\n            imageBase64 = part.inlineData.data;\n            console.log('âœ… ì´ë¯¸ì§€ ë°œê²¬ (Gemini)! ê¸¸ì´:', imageBase64.length);\n            break;\n          }\n        }\n      }\n    } catch (e) {\n      console.log('âš ï¸ Gemini ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨:', e.message);\n    }\n  }\n  \n  // JSONì— imageBase64 í•„ë“œê°€ ì§ì ‘ ìˆëŠ” ê²½ìš°\n  if (!imageBase64 && item.json && item.json.imageBase64) {\n    imageBase64 = item.json.imageBase64;\n    console.log('âœ… ì´ë¯¸ì§€ ë°œê²¬ (json.imageBase64)! ê¸¸ì´:', imageBase64.length);\n  }\n}\n\nconsole.log('\\n=== ìµœì¢… ê²°ê³¼ ===');\nconsole.log('í”„ë¡¬í”„íŠ¸ ìˆìŒ:', !!promptText);\nconsole.log('ì´ë¯¸ì§€ ìˆìŒ:', !!imageBase64);\n\n// ============================================\n// ê²€ì¦ ë° ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€\n// ============================================\nif (!promptText) {\n  console.error('\\nâŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');\n  console.error('ë””ë²„ê¹… ì •ë³´:');\n  console.error('- ë°›ì€ ì•„ì´í…œ ìˆ˜:', items.length);\n  items.forEach((item, idx) => {\n    console.error(`\\nì•„ì´í…œ ${idx} êµ¬ì¡°:`);\n    console.error('  JSON í‚¤:', Object.keys(item.json || {}));\n    if (item.json) {\n      Object.keys(item.json).forEach(key => {\n        const val = item.json[key];\n        if (typeof val === 'string') {\n          console.error(`  - ${key}: \"${val.substring(0, 100)}${val.length > 100 ? '...' : ''}\"`);\n        }\n      });\n    }\n  });\n  \n  throw new Error(\n    'âŒ ì˜ìƒ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!\\n\\n' +\n    'í™•ì¸ ì‚¬í•­:\\n' +\n    '1. \"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆë‚˜ìš”?\\n' +\n    '2. \"ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸\" ë…¸ë“œê°€ \"ë³‘í•©\" ë…¸ë“œì˜ ì²« ë²ˆì§¸ ì…ë ¥ì— ì—°ê²°ë˜ì–´ ìˆë‚˜ìš”?\\n' +\n    '3. ìœ„ì˜ ì½˜ì†” ë¡œê·¸ì—ì„œ ì‹¤ì œ ì¶œë ¥ í•„ë“œëª…ì„ í™•ì¸í•˜ì„¸ìš”.\\n\\n' +\n    'F12 â†’ Console íƒ­ì—ì„œ ë””ë²„ê¹… ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”!'\n  );\n}\n\nif (!imageBase64) {\n  throw new Error(\n    'âŒ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!\\n\\n' +\n    'í™•ì¸ ì‚¬í•­:\\n' +\n    '1. \"ì´ë¯¸ì§€ìƒì„±1\" ë…¸ë“œê°€ ì‹¤í–‰ë˜ì—ˆë‚˜ìš”?\\n' +\n    '2. \"Convert to File1\" ë…¸ë“œê°€ \"ë³‘í•©\" ë…¸ë“œì˜ ë‘ ë²ˆì§¸ ì…ë ¥ì— ì—°ê²°ë˜ì–´ ìˆë‚˜ìš”?'\n  );\n}\n\n// data: í”„ë¦¬í”½ìŠ¤ ì œê±° (ìˆë‹¤ë©´)\nif (imageBase64.includes('data:image')) {\n  console.log('âš ï¸ data: í”„ë¦¬í”½ìŠ¤ ë°œê²¬, ì œê±° ì¤‘...');\n  imageBase64 = imageBase64.split(',')[1];\n}\n\nconsole.log('âœ… ëª¨ë“  ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ!');\nconsole.log('í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°:', promptText.substring(0, 100) + '...');\nconsole.log('ì´ë¯¸ì§€ Base64 ê¸¸ì´:', imageBase64.length);\n\n// Veo 3.1 í˜•ì‹ìœ¼ë¡œ ë°˜í™˜\nreturn {\n  json: {\n    promptText: promptText,\n    imageBase64: imageBase64,\n    // ë””ë²„ê¹… ì •ë³´\n    debug: {\n      promptLength: promptText.length,\n      imageLength: imageBase64.length,\n      timestamp: new Date().toISOString()\n    }\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3936,
        2320
      ],
      "id": "a9044aec-087a-4eb5-80a6-ff177d9b0dcd",
      "name": "ë°ì´í„° ì¤€ë¹„"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Extract Workflow Data').item.json.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "ad_copy_generation"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        528,
        2592
      ],
      "id": "aeb157f6-bdd4-4ae3-b9a2-e94814f2815c",
      "name": "Update: Ad Copy Generation",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "image_refinement"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2448,
        2336
      ],
      "id": "61bc7f50-4f91-41f2-90ba-3fc0e4b22ca4",
      "name": "Update: Image Refinement",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "video_generation"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        4144,
        2320
      ],
      "id": "9ccc72f3-dcfe-4265-b9ce-291b5e3e29e2",
      "name": "Update: Video Generation",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "tts_generation"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        3488,
        2800
      ],
      "id": "06d2ac81-9e59-4986-882d-db635710adae",
      "name": "Update: TTS Generation",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "subtitle_generation"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        3328,
        3024
      ],
      "id": "803b5954-3d65-41eb-8e0a-8779a4acbec0",
      "name": "Update: Subtitle Generation",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "processing"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "merging"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        6576,
        2784
      ],
      "id": "a43f29f3-39e1-480f-b6d0-698f23832d6c",
      "name": "Update: Merging",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e5abfd5a-018d-4202-a9d6-f0de32e69ac2",
              "name": "ad_video_id",
              "value": "={{ $json.body.ad_video_id }}",
              "type": "string"
            },
            {
              "id": "624ee5fd-47fe-4634-8082-f2915fe231ca",
              "name": "product_image_id",
              "value": "={{ $json.body.product_image_id }}",
              "type": "string"
            },
            {
              "id": "a3a348a0-bb9f-4e4f-8da3-ee8d8ac8f4cf",
              "name": "product_info_id",
              "value": "={{ $json.body.product_info_id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        304,
        2592
      ],
      "id": "0c48dbc2-2c13-4e70-8352-05a7cd64aeab",
      "name": "Extract Workflow Data"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.errorTrigger",
      "typeVersion": 1,
      "position": [
        7504,
        3088
      ],
      "id": "a5326243-3376-4d3b-b4cf-77fd14190630",
      "name": "Error Trigger"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "failed"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "error"
            },
            {
              "fieldId": "error_message",
              "fieldValue": "={{ $json.error.message || \"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\" }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        7712,
        3088
      ],
      "id": "5b1bc200-e065-4dcd-b0f1-d53541aec479",
      "name": "Update a row",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/videos/{{ $('Webhook').first().json.body.ad_video_id }}.mp4",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"
            },
            {
              "name": "Authorization",
              "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjYnZyYmxqZWFuanpzYnJxYXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzg1ODksImV4cCI6MjA3NzkxNDU4OX0.e3PF_b779dOTrqeNDmiirwFURapnkPdU3Xic7ltnw2M"
            },
            {
              "name": "Content-Type",
              "value": "video/mp4"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7696,
        2784
      ],
      "id": "cc93340a-b539-4bff-8e12-b003614824a8",
      "name": "supabase upload"
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\n\nconsole.log('=== Supabase Upload ì‘ë‹µ ===');\nconsole.log('ì‘ë‹µ:', JSON.stringify(response, null, 2));\n\n// ì—ëŸ¬ í™•ì¸\nif (response.error) {\n  throw new Error(`âŒ Supabase Upload ì‹¤íŒ¨: ${response.error.message}`);\n}\n\n// Public URL ìƒì„±\nconst bucketName = 'videos';\nconst fileName = $('Webhook').first().json.body.ad_video_id + '.mp4';\nconst publicUrl = `https://dcbvrbljeanjzsbrqays.supabase.co/storage/v1/object/public/${bucketName}/${fileName}`;\n\nconsole.log('âœ… ì—…ë¡œë“œ ì„±ê³µ!');\nconsole.log('Public URL:', publicUrl);\n\nreturn {\n  json: {\n    success: true,\n    uploadedFile: response.Key || fileName,\n    publicUrl: publicUrl,\n    ad_video_id: $('Webhook').first().json.body.ad_video_id\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7936,
        2784
      ],
      "id": "0722c613-991b-4c5a-b830-66cb86b54be7",
      "name": "ì‘ë‹µ ì²˜ë¦¬ Code"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "ad_videos",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook').first().json.body.ad_video_id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "=completed"
            },
            {
              "fieldId": "video_url",
              "fieldValue": "={{ $('ì‘ë‹µ ì²˜ë¦¬').item.json.publicUrl }}"
            },
            {
              "fieldId": "progress_stage",
              "fieldValue": "=completed"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        8256,
        2784
      ],
      "id": "f679625f-fdbf-48d5-a9da-4cb9567aa210",
      "name": "Update: finish",
      "credentials": {
        "supabaseApi": {
          "id": "seclYjSbdcXGgk0U",
          "name": "my-ad"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "ì˜ìƒìƒì„±": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TTSìƒì„±": {
      "main": [
        [
          {
            "node": "ì˜¤ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë³‘í•©1": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1",
            "type": "main",
            "index": 0
          },
          {
            "node": "ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Update: Subtitle Generation",
            "type": "main",
            "index": 0
          },
          {
            "node": "Update: TTS Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "ë³‘í•©1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ìƒíƒœí™•ì¸": {
      "main": [
        [
          {
            "node": "ì˜ìƒë‹¤ìš´",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ìƒì„±": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "ìƒíƒœí™•ì¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Update: Image Refinement",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë³‘í•©4": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì¶”ì¶œ Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ìƒë‹¤ìš´": {
      "main": [
        [
          {
            "node": "ë¹„ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "ë³‘í•©4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…",
            "type": "main",
            "index": 0
          },
          {
            "node": "ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ ë°ì´í„° ì¶”ì¶œ1": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1": {
      "main": [
        [
          {
            "node": "ë³‘í•©1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìë§‰ ìƒì„±1": {
      "main": [
        [
          {
            "node": "ë³‘í•©4",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ URL ìƒì„±": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìŠˆíŒŒë² ì´ìŠ¤ ìƒí’ˆëª…": {
      "main": [
        [
          {
            "node": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìŠˆíŒŒë² ì´ìŠ¤ ì´ë¯¸ì§€": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ URL ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "ê´‘ê³ ë¬¸êµ¬ ìƒì„±ê¸°",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "ì˜ìƒ ìƒì„± í”„ë¡¬í”„íŠ¸1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook1": {
      "main": [
        [
          {
            "node": "Extract Workflow Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait2": {
      "main": [
        [
          {
            "node": "ì´ë¯¸ì§€ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait3": {
      "main": [
        [
          {
            "node": "ì˜ìƒìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait5": {
      "main": [
        [
          {
            "node": "ìë§‰ ìƒì„±1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait4": {
      "main": [
        [
          {
            "node": "TTSìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait6": {
      "main": [
        [
          {
            "node": "ìµœì¢… ì˜ìƒìƒì„±1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìµœì¢… ì˜ìƒìƒì„±1": {
      "main": [
        [
          {
            "node": "íŒŒì¼ê²½ë¡œì¶”ì¶œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì¶”ì¶œ Code1": {
      "main": [
        [
          {
            "node": "ê²½ë¡œ ìˆ˜ì§‘ Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê²½ë¡œ ìˆ˜ì§‘ Code1": {
      "main": [
        [
          {
            "node": "Update: Merging",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "íŒŒì¼ê²½ë¡œì¶”ì¶œ": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥1": {
      "main": [
        [
          {
            "node": "ë³‘í•©4",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ë¹„ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜¤ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk5": {
      "main": [
        [
          {
            "node": "supabase upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "Update: Video Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: Ad Copy Generation": {
      "main": [
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: Image Refinement": {
      "main": [
        [
          {
            "node": "Wait2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: Video Generation": {
      "main": [
        [
          {
            "node": "Wait3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: TTS Generation": {
      "main": [
        [
          {
            "node": "Wait4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: Subtitle Generation": {
      "main": [
        [
          {
            "node": "Wait5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: Merging": {
      "main": [
        [
          {
            "node": "Wait6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Workflow Data": {
      "main": [
        [
          {
            "node": "Update: Ad Copy Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Trigger": {
      "main": [
        [
          {
            "node": "Update a row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update a row": {
      "main": [
        [
          {
            "node": "Update: finish",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "supabase upload": {
      "main": [
        [
          {
            "node": "ì‘ë‹µ ì²˜ë¦¬ Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì‘ë‹µ ì²˜ë¦¬ Code": {
      "main": [
        [
          {
            "node": "Update: finish",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update: finish": {
      "main": [
        []
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "829c9383-b4e9-4244-840e-cec19b3f9734",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a05a912e74c6bf20aa829ba78caf29fc894eab26fbc26e23c3268749e205fe23"
  },
  "id": "4xjzCd8v7guhFcyY",
  "tags": []
}